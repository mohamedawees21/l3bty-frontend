{"ast":null,"code":"// frontend/src/services/api.js\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\nclass ApiService {\n  constructor() {\n    this.baseURL = API_URL;\n  }\n  async request(endpoint, method = 'GET', body = null) {\n    const token = localStorage.getItem('token');\n    const headers = {\n      'Content-Type': 'application/json'\n    };\n    if (token) {\n      headers['Authorization'] = `Bearer ${token}`;\n    }\n    const options = {\n      method,\n      headers\n    };\n    if (body) {\n      options.body = JSON.stringify(body);\n    }\n    try {\n      const response = await fetch(`${this.baseURL}${endpoint}`, options);\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      return await response.json();\n    } catch (error) {\n      console.error('API Request failed:', error);\n      throw error;\n    }\n  }\n\n  // التحقق من صحة Token\n  async validateToken() {\n    try {\n      const response = await this.request('/auth/profile');\n      return response.success;\n    } catch {\n      return false;\n    }\n  }\n}\nexport const apiService = new ApiService();","map":{"version":3,"names":["API_URL","process","env","REACT_APP_API_URL","ApiService","constructor","baseURL","request","endpoint","method","body","token","localStorage","getItem","headers","options","JSON","stringify","response","fetch","ok","Error","status","json","error","console","validateToken","success","apiService"],"sources":["C:/Users/HP/OneDrive/project/l3bty-rental-system/frontend/src/services/api.js"],"sourcesContent":["// frontend/src/services/api.js\r\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\r\n\r\nclass ApiService {\r\n  constructor() {\r\n    this.baseURL = API_URL;\r\n  }\r\n\r\n  async request(endpoint, method = 'GET', body = null) {\r\n    const token = localStorage.getItem('token');\r\n    const headers = {\r\n      'Content-Type': 'application/json'\r\n    };\r\n    \r\n    if (token) {\r\n      headers['Authorization'] = `Bearer ${token}`;\r\n    }\r\n    \r\n    const options = {\r\n      method,\r\n      headers\r\n    };\r\n    \r\n    if (body) {\r\n      options.body = JSON.stringify(body);\r\n    }\r\n    \r\n    try {\r\n      const response = await fetch(`${this.baseURL}${endpoint}`, options);\r\n      \r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! status: ${response.status}`);\r\n      }\r\n      \r\n      return await response.json();\r\n    } catch (error) {\r\n      console.error('API Request failed:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  // التحقق من صحة Token\r\n  async validateToken() {\r\n    try {\r\n      const response = await this.request('/auth/profile');\r\n      return response.success;\r\n    } catch {\r\n      return false;\r\n    }\r\n  }\r\n}\r\n\r\nexport const apiService = new ApiService();"],"mappings":"AAAA;AACA,MAAMA,OAAO,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAI,2BAA2B;AAE5E,MAAMC,UAAU,CAAC;EACfC,WAAWA,CAAA,EAAG;IACZ,IAAI,CAACC,OAAO,GAAGN,OAAO;EACxB;EAEA,MAAMO,OAAOA,CAACC,QAAQ,EAAEC,MAAM,GAAG,KAAK,EAAEC,IAAI,GAAG,IAAI,EAAE;IACnD,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,MAAMC,OAAO,GAAG;MACd,cAAc,EAAE;IAClB,CAAC;IAED,IAAIH,KAAK,EAAE;MACTG,OAAO,CAAC,eAAe,CAAC,GAAG,UAAUH,KAAK,EAAE;IAC9C;IAEA,MAAMI,OAAO,GAAG;MACdN,MAAM;MACNK;IACF,CAAC;IAED,IAAIJ,IAAI,EAAE;MACRK,OAAO,CAACL,IAAI,GAAGM,IAAI,CAACC,SAAS,CAACP,IAAI,CAAC;IACrC;IAEA,IAAI;MACF,MAAMQ,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAG,IAAI,CAACb,OAAO,GAAGE,QAAQ,EAAE,EAAEO,OAAO,CAAC;MAEnE,IAAI,CAACG,QAAQ,CAACE,EAAE,EAAE;QAChB,MAAM,IAAIC,KAAK,CAAC,uBAAuBH,QAAQ,CAACI,MAAM,EAAE,CAAC;MAC3D;MAEA,OAAO,MAAMJ,QAAQ,CAACK,IAAI,CAAC,CAAC;IAC9B,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,qBAAqB,EAAEA,KAAK,CAAC;MAC3C,MAAMA,KAAK;IACb;EACF;;EAEA;EACA,MAAME,aAAaA,CAAA,EAAG;IACpB,IAAI;MACF,MAAMR,QAAQ,GAAG,MAAM,IAAI,CAACX,OAAO,CAAC,eAAe,CAAC;MACpD,OAAOW,QAAQ,CAACS,OAAO;IACzB,CAAC,CAAC,MAAM;MACN,OAAO,KAAK;IACd;EACF;AACF;AAEA,OAAO,MAAMC,UAAU,GAAG,IAAIxB,UAAU,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}