{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP\\\\OneDrive\\\\project\\\\l3bty-rental-system\\\\frontend\\\\src\\\\pages\\\\admin\\\\Dashboard.jsx\",\n  _s = $RefreshSig$();\n// src/pages/admin/Dashboard.jsx\nimport React, { useState, useEffect, useCallback, useMemo, useRef } from 'react';\nimport { BarChart3, TrendingUp, Users, Gamepad2, DollarSign, Clock, Calendar, ChevronRight, Download, RefreshCw, Loader2, AlertCircle, X, CheckCircle, Zap, Building, Phone, Mail, MapPin, Eye, Printer, Activity, Award, Target, TrendingDown, User, AlertTriangle } from 'lucide-react';\nimport { useAuth } from '../../context/AuthContext';\nimport api from '../../services/api';\nimport './Dashboard.css';\n\n// ==================== دوال المساعدة المبسطة ====================\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst formatCurrency = amount => {\n  if (!amount && amount !== 0) return '0 ج.م';\n  const num = parseFloat(amount) || 0;\n  return new Intl.NumberFormat('ar-EG', {\n    style: 'currency',\n    currency: 'EGP',\n    minimumFractionDigits: 0,\n    maximumFractionDigits: 0\n  }).format(num);\n};\nconst formatTime = dateString => {\n  if (!dateString) return '--:--';\n  try {\n    const date = new Date(dateString);\n    if (isNaN(date.getTime())) return '--:--';\n    return date.toLocaleTimeString('ar-EG', {\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  } catch {\n    return '--:--';\n  }\n};\nconst formatDate = dateString => {\n  if (!dateString) return '--/--/----';\n  try {\n    const date = new Date(dateString);\n    if (isNaN(date.getTime())) return '--/--/----';\n    return date.toLocaleDateString('ar-EG', {\n      year: 'numeric',\n      month: '2-digit',\n      day: '2-digit'\n    });\n  } catch {\n    return '--/--/----';\n  }\n};\nconst formatDateTime = dateString => {\n  if (!dateString) return '--/--/---- --:--';\n  try {\n    const date = new Date(dateString);\n    if (isNaN(date.getTime())) return '--/--/---- --:--';\n    return date.toLocaleDateString('ar-EG', {\n      year: 'numeric',\n      month: '2-digit',\n      day: '2-digit',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  } catch {\n    return '--/--/---- --:--';\n  }\n};\nconst getRentalType = rental => {\n  if (!rental) return 'fixed';\n  if (rental.rental_type === 'open' || rental.is_open_time === 1 || rental.payment_status === 'عند الإنهاء') return 'open';\n  return 'fixed';\n};\n\n// ==================== المكونات المبسطة ====================\n\n// بطاقة إحصائية رئيسية\nconst StatCard = ({\n  title,\n  value,\n  icon: Icon,\n  color,\n  subtitle\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: `stat-card stat-${color}`,\n  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"stat-icon\",\n    children: /*#__PURE__*/_jsxDEV(Icon, {\n      size: 24\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 95,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"stat-content\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"stat-value\",\n      children: value\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"stat-label\",\n      children: title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }, this), subtitle && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"stat-subtitle\",\n      children: subtitle\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 20\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 98,\n    columnNumber: 5\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 94,\n  columnNumber: 3\n}, this);\n\n// بطاقة فرع مبسطة\n_c = StatCard;\nconst BranchCard = ({\n  branch,\n  stats\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"branch-card\",\n  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"branch-header\",\n    children: [/*#__PURE__*/_jsxDEV(Building, {\n      size: 18\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"branch-name\",\n      children: branch.name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }, this), branch.is_active === 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"branch-inactive\",\n      children: \"\\u063A\\u064A\\u0631 \\u0646\\u0634\\u0637\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 34\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 109,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"branch-stats\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Gamepad2, {\n        size: 14\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 12\n      }, this), \" \", (stats === null || stats === void 0 ? void 0 : stats.games) || 0]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Zap, {\n        size: 14\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 12\n      }, this), \" \", (stats === null || stats === void 0 ? void 0 : stats.activeRentals) || 0]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(DollarSign, {\n        size: 14\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 12\n      }, this), \" \", formatCurrency((stats === null || stats === void 0 ? void 0 : stats.revenue) || 0)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 114,\n    columnNumber: 5\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 108,\n  columnNumber: 3\n}, this);\n\n// بطاقة تأجير نشط مبسطة\n_c2 = BranchCard;\nconst ActiveRentalCard = ({\n  rental\n}) => {\n  const rentalType = getRentalType(rental);\n  const getElapsedTime = () => {\n    if (!rental.start_time) return '--:--';\n    const start = new Date(rental.start_time);\n    const diff = Math.floor((new Date() - start) / 60000);\n    return diff < 60 ? `${diff} د` : `${Math.floor(diff / 60)} س ${diff % 60} د`;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"rental-card\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"rental-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"rental-game\",\n        children: rental.game_name || 'لعبة'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: `rental-type ${rentalType}`,\n        children: rentalType === 'open' ? 'مفتوح' : 'ثابت'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"rental-customer\",\n      children: rental.customer_name || 'عميل'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"rental-time\",\n      children: [/*#__PURE__*/_jsxDEV(Clock, {\n        size: 12\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 9\n      }, this), \" \", formatTime(rental.start_time), \" \\xB7 \", getElapsedTime()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 134,\n    columnNumber: 5\n  }, this);\n};\n\n// بطاقة شيفت مبسطة\n_c3 = ActiveRentalCard;\nconst ShiftCard = ({\n  shift,\n  isCurrent = false\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: `shift-card ${isCurrent ? 'current-shift' : ''}`,\n  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"shift-header\",\n    children: [/*#__PURE__*/_jsxDEV(Clock, {\n      size: 16\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"shift-employee\",\n      children: shift.employee_name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 7\n    }, this), isCurrent && /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"shift-badge\",\n      children: \"\\u062D\\u0627\\u0644\\u064A\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 21\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 152,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"shift-branch\",\n    children: shift.branch_name || `فرع ${shift.branch_id}`\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 157,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"shift-time\",\n    children: formatTime(shift.start_time)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 158,\n    columnNumber: 5\n  }, this), shift.total_revenue > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"shift-revenue\",\n    children: formatCurrency(shift.total_revenue)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 160,\n    columnNumber: 7\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 151,\n  columnNumber: 3\n}, this);\n\n// ==================== المكون الرئيسي المبسط ====================\n_c4 = ShiftCard;\nconst Dashboard = () => {\n  _s();\n  const {\n    user\n  } = useAuth();\n  const isAdmin = (user === null || user === void 0 ? void 0 : user.role) === 'admin';\n\n  // حالات مبسطة\n  const [stats, setStats] = useState({\n    totalRevenue: 0,\n    todayRentals: 0,\n    todayRevenue: 0,\n    activeRentals: 0,\n    availableGames: 0,\n    totalBranches: 0,\n    totalUsers: 0\n  });\n  const [branches, setBranches] = useState([]);\n  const [branchesStats, setBranchesStats] = useState({});\n  const [activeRentals, setActiveRentals] = useState([]);\n  const [completedRentals, setCompletedRentals] = useState([]);\n  const [recentRentals, setRecentRentals] = useState([]);\n  const [currentShift, setCurrentShift] = useState(null);\n  const [otherShifts, setOtherShifts] = useState([]);\n  const [loading, setLoading] = useState({\n    main: false,\n    actions: {}\n  });\n  const [error, setError] = useState(null);\n  const [lastUpdate, setLastUpdate] = useState(new Date());\n\n  // تحميل جميع البيانات دفعة واحدة\n  const loadDashboardData = useCallback(async (showLoading = true) => {\n    if (showLoading) setLoading(prev => ({\n      ...prev,\n      main: true\n    }));\n    setError(null);\n    try {\n      // تحميل الإحصائيات الرئيسية\n      const statsRes = await api.get('/dashboard/stats/simple');\n      if (statsRes.success) setStats(prev => ({\n        ...prev,\n        ...statsRes.data\n      }));\n\n      // تحميل الفروع (للمدير فقط)\n      if (isAdmin) {\n        const branchesRes = await api.get('/branches');\n        if (branchesRes.success) {\n          setBranches(branchesRes.data);\n\n          // تحميل إحصائيات الفروع\n          const statsMap = {};\n          await Promise.all(branchesRes.data.map(async branch => {\n            try {\n              const branchRes = await api.get('/branches/stats/simple', {\n                params: {\n                  branch_id: branch.id\n                }\n              });\n              if (branchRes.success) statsMap[branch.id] = branchRes.data;\n            } catch {\n              statsMap[branch.id] = {\n                games: 0,\n                activeRentals: 0,\n                revenue: 0\n              };\n            }\n          }));\n          setBranchesStats(statsMap);\n        }\n      }\n\n      // تحميل التأجيرات النشطة\n      try {\n        const activeRes = await api.getAllActiveRentals();\n        if (activeRes.success) {\n          const active = (activeRes.data || []).filter(r => r.status === 'نشط' || r.payment_status === 'عند الإنهاء');\n          setActiveRentals(active.slice(0, 10));\n        }\n      } catch {\n        setActiveRentals([]);\n      }\n\n      // تحميل تأجيرات اليوم المكتملة\n      try {\n        const completedRes = await api.getTodayCompletedRentalsAllBranches();\n        if (completedRes.success) {\n          setCompletedRentals((completedRes.data || []).slice(0, 10));\n        }\n      } catch {\n        setCompletedRentals([]);\n      }\n\n      // تحميل آخر التأجيرات\n      try {\n        const recentRes = await api.getRecentRentalsAllBranches(10);\n        if (recentRes.success) setRecentRentals(recentRes.data || []);\n      } catch {\n        setRecentRentals([]);\n      }\n\n      // تحميل الشيفت الحالي (للمستخدم العادي)\n      if (!isAdmin) {\n        try {\n          const shiftRes = await api.get('/shifts/simple');\n          if (shiftRes.success) setCurrentShift(shiftRes.data);\n        } catch {\n          setCurrentShift(null);\n        }\n      }\n\n      // تحميل شيفتات الفروع الأخرى (للمدير)\n      if (isAdmin) {\n        try {\n          const shiftsRes = await api.get('/shifts/active-all-branches');\n          if (shiftsRes.success) {\n            const filtered = (shiftsRes.data || []).filter(s => s.branch_id !== (user === null || user === void 0 ? void 0 : user.branch_id));\n            setOtherShifts(filtered.slice(0, 5));\n          }\n        } catch {\n          setOtherShifts([]);\n        }\n      }\n      setLastUpdate(new Date());\n    } catch (err) {\n      console.error('خطأ في تحميل البيانات:', err);\n      setError('فشل تحميل البيانات');\n    } finally {\n      if (showLoading) setLoading(prev => ({\n        ...prev,\n        main: false\n      }));\n    }\n  }, [isAdmin, user === null || user === void 0 ? void 0 : user.branch_id]);\n\n  // تحميل البيانات عند بدء التشغيل\n  useEffect(() => {\n    loadDashboardData();\n    const interval = setInterval(() => loadDashboardData(false), 300000); // 5 دقائق\n    return () => clearInterval(interval);\n  }, [loadDashboardData]);\n\n  // إحصائيات إضافية\n  const enhancedStats = useMemo(() => ({\n    activeCount: activeRentals.length,\n    completedCount: completedRentals.length,\n    openRentals: activeRentals.filter(r => getRentalType(r) === 'open').length,\n    fixedRentals: activeRentals.filter(r => getRentalType(r) === 'fixed').length\n  }), [activeRentals, completedRentals]);\n  if (loading.main && !stats.totalRevenue) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"dashboard-loading\",\n      children: [/*#__PURE__*/_jsxDEV(Loader2, {\n        className: \"spinner\",\n        size: 40\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u062C\\u0627\\u0631\\u064A \\u062A\\u062D\\u0645\\u064A\\u0644 \\u0644\\u0648\\u062D\\u0629 \\u0627\\u0644\\u062A\\u062D\\u0643\\u0645...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"dashboard\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"dashboard-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: [/*#__PURE__*/_jsxDEV(BarChart3, {\n            size: 28\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 15\n          }, this), \" \\u0644\\u0648\\u062D\\u0629 \\u0627\\u0644\\u062A\\u062D\\u0643\\u0645\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"dashboard-date\",\n          children: [/*#__PURE__*/_jsxDEV(Calendar, {\n            size: 14\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 318,\n            columnNumber: 13\n          }, this), \" \", formatDate(new Date())]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header-actions\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => loadDashboardData(true),\n          disabled: loading.main,\n          children: [/*#__PURE__*/_jsxDEV(RefreshCw, {\n            size: 16,\n            className: loading.main ? 'spin' : ''\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 324,\n            columnNumber: 13\n          }, this), \"\\u062A\\u062D\\u062F\\u064A\\u062B\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => window.print(),\n          children: [/*#__PURE__*/_jsxDEV(Printer, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 328,\n            columnNumber: 13\n          }, this), \" \\u0637\\u0628\\u0627\\u0639\\u0629\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-banner\",\n      children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n        size: 18\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 11\n      }, this), \" \", error, /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setError(null),\n        children: /*#__PURE__*/_jsxDEV(X, {\n          size: 16\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 50\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"stats-grid\",\n      children: [/*#__PURE__*/_jsxDEV(StatCard, {\n        title: \"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0625\\u064A\\u0631\\u0627\\u062F\\u0627\\u062A\",\n        value: formatCurrency(stats.totalRevenue),\n        icon: DollarSign,\n        color: \"primary\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(StatCard, {\n        title: \"\\u062A\\u0623\\u062C\\u064A\\u0631\\u0627\\u062A \\u0627\\u0644\\u064A\\u0648\\u0645\",\n        value: stats.todayRentals || 0,\n        icon: Activity,\n        color: \"success\",\n        subtitle: `إيراد ${formatCurrency(stats.todayRevenue)}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(StatCard, {\n        title: \"\\u0646\\u0634\\u0637\\u0629 \\u062D\\u0627\\u0644\\u064A\\u0627\\u064B\",\n        value: stats.activeRentals || 0,\n        icon: Zap,\n        color: \"warning\",\n        subtitle: `${enhancedStats.openRentals} مفتوح · ${enhancedStats.fixedRentals} ثابت`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 356,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(StatCard, {\n        title: \"\\u0627\\u0644\\u0623\\u0644\\u0639\\u0627\\u0628 \\u0627\\u0644\\u0645\\u062A\\u0627\\u062D\\u0629\",\n        value: stats.availableGames || 0,\n        icon: Gamepad2,\n        color: \"info\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 363,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 7\n    }, this), !isAdmin && currentShift && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [/*#__PURE__*/_jsxDEV(Clock, {\n          size: 18\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 374,\n          columnNumber: 15\n        }, this), \" \\u0627\\u0644\\u0634\\u064A\\u0641\\u062A \\u0627\\u0644\\u062D\\u0627\\u0644\\u064A\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 374,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(ShiftCard, {\n        shift: currentShift,\n        isCurrent: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 375,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 373,\n      columnNumber: 9\n    }, this), isAdmin && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [branches.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: [/*#__PURE__*/_jsxDEV(Building, {\n            size: 18\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 385,\n            columnNumber: 19\n          }, this), \" \\u0627\\u0644\\u0641\\u0631\\u0648\\u0639 (\", branches.length, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"branches-grid\",\n          children: branches.slice(0, 4).map(branch => /*#__PURE__*/_jsxDEV(BranchCard, {\n            branch: branch,\n            stats: branchesStats[branch.id]\n          }, branch.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 388,\n            columnNumber: 19\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 386,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 384,\n        columnNumber: 13\n      }, this), otherShifts.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: [/*#__PURE__*/_jsxDEV(Clock, {\n            size: 18\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 401,\n            columnNumber: 19\n          }, this), \" \\u0634\\u064A\\u0641\\u062A\\u0627\\u062A \\u0646\\u0634\\u0637\\u0629 \\u0623\\u062E\\u0631\\u0649 (\", otherShifts.length, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"shifts-grid\",\n          children: otherShifts.map(shift => /*#__PURE__*/_jsxDEV(ShiftCard, {\n            shift: shift\n          }, shift.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 404,\n            columnNumber: 19\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 402,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 400,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true), activeRentals.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [/*#__PURE__*/_jsxDEV(Zap, {\n          size: 18\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 415,\n          columnNumber: 15\n        }, this), \" \\u062A\\u0623\\u062C\\u064A\\u0631\\u0627\\u062A \\u0646\\u0634\\u0637\\u0629 (\", activeRentals.length, \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 415,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"rentals-grid\",\n        children: activeRentals.map(rental => /*#__PURE__*/_jsxDEV(ActiveRentalCard, {\n          rental: rental\n        }, rental.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 418,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 416,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 414,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"two-columns\",\n      children: [completedRentals.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: [/*#__PURE__*/_jsxDEV(CheckCircle, {\n            size: 18\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 429,\n            columnNumber: 17\n          }, this), \" \\u0645\\u0643\\u062A\\u0645\\u0644\\u0629 \\u0627\\u0644\\u064A\\u0648\\u0645\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 429,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"compact-list\",\n          children: completedRentals.map(rental => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"compact-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: rental.game_name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 433,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: formatCurrency(rental.final_amount || rental.total_amount)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 434,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n              children: formatTime(rental.end_time)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 435,\n              columnNumber: 19\n            }, this)]\n          }, rental.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 432,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 430,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 428,\n        columnNumber: 11\n      }, this), recentRentals.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: [/*#__PURE__*/_jsxDEV(Activity, {\n            size: 18\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 445,\n            columnNumber: 17\n          }, this), \" \\u0622\\u062E\\u0631 \\u0627\\u0644\\u062A\\u0623\\u062C\\u064A\\u0631\\u0627\\u062A\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 445,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"compact-list\",\n          children: recentRentals.map(rental => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"compact-item\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: rental.customer_name || 'عميل'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 449,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: rental.game_name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 450,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n              children: formatTime(rental.start_time)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 451,\n              columnNumber: 19\n            }, this)]\n          }, rental.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 448,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 446,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 444,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 425,\n      columnNumber: 7\n    }, this), isAdmin && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"quick-stats\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(Target, {\n          size: 14\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 462,\n          columnNumber: 16\n        }, this), \" \\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u062A\\u0623\\u062C\\u064A\\u0631\\u0627\\u062A: \", stats.totalRentals || 0]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 462,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(Users, {\n          size: 14\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 463,\n          columnNumber: 16\n        }, this), \" \\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645\\u064A\\u0646: \", stats.totalUsers || 0]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 463,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(Activity, {\n          size: 14\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 464,\n          columnNumber: 16\n        }, this), \" \\u0622\\u062E\\u0631 \\u062A\\u062D\\u062F\\u064A\\u062B: \", formatTime(lastUpdate)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 464,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 461,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 312,\n    columnNumber: 5\n  }, this);\n};\n_s(Dashboard, \"3i66q1a8b3FKTcrv8tI7j8XPJPA=\", false, function () {\n  return [useAuth];\n});\n_c5 = Dashboard;\nexport default Dashboard;\nvar _c, _c2, _c3, _c4, _c5;\n$RefreshReg$(_c, \"StatCard\");\n$RefreshReg$(_c2, \"BranchCard\");\n$RefreshReg$(_c3, \"ActiveRentalCard\");\n$RefreshReg$(_c4, \"ShiftCard\");\n$RefreshReg$(_c5, \"Dashboard\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useMemo","useRef","BarChart3","TrendingUp","Users","Gamepad2","DollarSign","Clock","Calendar","ChevronRight","Download","RefreshCw","Loader2","AlertCircle","X","CheckCircle","Zap","Building","Phone","Mail","MapPin","Eye","Printer","Activity","Award","Target","TrendingDown","User","AlertTriangle","useAuth","api","jsxDEV","_jsxDEV","Fragment","_Fragment","formatCurrency","amount","num","parseFloat","Intl","NumberFormat","style","currency","minimumFractionDigits","maximumFractionDigits","format","formatTime","dateString","date","Date","isNaN","getTime","toLocaleTimeString","hour","minute","formatDate","toLocaleDateString","year","month","day","formatDateTime","getRentalType","rental","rental_type","is_open_time","payment_status","StatCard","title","value","icon","Icon","color","subtitle","className","children","size","fileName","_jsxFileName","lineNumber","columnNumber","_c","BranchCard","branch","stats","name","is_active","games","activeRentals","revenue","_c2","ActiveRentalCard","rentalType","getElapsedTime","start_time","start","diff","Math","floor","game_name","customer_name","_c3","ShiftCard","shift","isCurrent","employee_name","branch_name","branch_id","total_revenue","_c4","Dashboard","_s","user","isAdmin","role","setStats","totalRevenue","todayRentals","todayRevenue","availableGames","totalBranches","totalUsers","branches","setBranches","branchesStats","setBranchesStats","setActiveRentals","completedRentals","setCompletedRentals","recentRentals","setRecentRentals","currentShift","setCurrentShift","otherShifts","setOtherShifts","loading","setLoading","main","actions","error","setError","lastUpdate","setLastUpdate","loadDashboardData","showLoading","prev","statsRes","get","success","data","branchesRes","statsMap","Promise","all","map","branchRes","params","id","activeRes","getAllActiveRentals","active","filter","r","status","slice","completedRes","getTodayCompletedRentalsAllBranches","recentRes","getRecentRentalsAllBranches","shiftRes","shiftsRes","filtered","s","err","console","interval","setInterval","clearInterval","enhancedStats","activeCount","length","completedCount","openRentals","fixedRentals","onClick","disabled","window","print","final_amount","total_amount","end_time","totalRentals","_c5","$RefreshReg$"],"sources":["C:/Users/HP/OneDrive/project/l3bty-rental-system/frontend/src/pages/admin/Dashboard.jsx"],"sourcesContent":["// src/pages/admin/Dashboard.jsx\r\nimport React, { useState, useEffect, useCallback, useMemo, useRef } from 'react';\r\nimport { \r\n  BarChart3, \r\n  TrendingUp, \r\n  Users, \r\n  Gamepad2, \r\n  DollarSign, \r\n  Clock, \r\n  Calendar,\r\n  ChevronRight,\r\n  Download,\r\n  RefreshCw,\r\n  Loader2,\r\n  AlertCircle,\r\n  X,\r\n  CheckCircle,\r\n  Zap,\r\n  Building,\r\n  Phone,\r\n  Mail,\r\n  MapPin,\r\n  Eye,\r\n  Printer,\r\n  Activity,\r\n  Award,\r\n  Target,\r\n  TrendingDown,\r\n  User,\r\n  AlertTriangle\r\n} from 'lucide-react';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport api from '../../services/api';\r\nimport './Dashboard.css';\r\n\r\n// ==================== دوال المساعدة المبسطة ====================\r\nconst formatCurrency = (amount) => {\r\n  if (!amount && amount !== 0) return '0 ج.م';\r\n  const num = parseFloat(amount) || 0;\r\n  return new Intl.NumberFormat('ar-EG', {\r\n    style: 'currency',\r\n    currency: 'EGP',\r\n    minimumFractionDigits: 0,\r\n    maximumFractionDigits: 0\r\n  }).format(num);\r\n};\r\n\r\nconst formatTime = (dateString) => {\r\n  if (!dateString) return '--:--';\r\n  try {\r\n    const date = new Date(dateString);\r\n    if (isNaN(date.getTime())) return '--:--';\r\n    return date.toLocaleTimeString('ar-EG', { hour: '2-digit', minute: '2-digit' });\r\n  } catch {\r\n    return '--:--';\r\n  }\r\n};\r\n\r\nconst formatDate = (dateString) => {\r\n  if (!dateString) return '--/--/----';\r\n  try {\r\n    const date = new Date(dateString);\r\n    if (isNaN(date.getTime())) return '--/--/----';\r\n    return date.toLocaleDateString('ar-EG', { year: 'numeric', month: '2-digit', day: '2-digit' });\r\n  } catch {\r\n    return '--/--/----';\r\n  }\r\n};\r\n\r\nconst formatDateTime = (dateString) => {\r\n  if (!dateString) return '--/--/---- --:--';\r\n  try {\r\n    const date = new Date(dateString);\r\n    if (isNaN(date.getTime())) return '--/--/---- --:--';\r\n    return date.toLocaleDateString('ar-EG', {\r\n      year: 'numeric', month: '2-digit', day: '2-digit',\r\n      hour: '2-digit', minute: '2-digit'\r\n    });\r\n  } catch {\r\n    return '--/--/---- --:--';\r\n  }\r\n};\r\n\r\nconst getRentalType = (rental) => {\r\n  if (!rental) return 'fixed';\r\n  if (rental.rental_type === 'open' || rental.is_open_time === 1 || rental.payment_status === 'عند الإنهاء') return 'open';\r\n  return 'fixed';\r\n};\r\n\r\n// ==================== المكونات المبسطة ====================\r\n\r\n// بطاقة إحصائية رئيسية\r\nconst StatCard = ({ title, value, icon: Icon, color, subtitle }) => (\r\n  <div className={`stat-card stat-${color}`}>\r\n    <div className=\"stat-icon\">\r\n      <Icon size={24} />\r\n    </div>\r\n    <div className=\"stat-content\">\r\n      <div className=\"stat-value\">{value}</div>\r\n      <div className=\"stat-label\">{title}</div>\r\n      {subtitle && <div className=\"stat-subtitle\">{subtitle}</div>}\r\n    </div>\r\n  </div>\r\n);\r\n\r\n// بطاقة فرع مبسطة\r\nconst BranchCard = ({ branch, stats }) => (\r\n  <div className=\"branch-card\">\r\n    <div className=\"branch-header\">\r\n      <Building size={18} />\r\n      <span className=\"branch-name\">{branch.name}</span>\r\n      {branch.is_active === 0 && <span className=\"branch-inactive\">غير نشط</span>}\r\n    </div>\r\n    <div className=\"branch-stats\">\r\n      <div><Gamepad2 size={14} /> {stats?.games || 0}</div>\r\n      <div><Zap size={14} /> {stats?.activeRentals || 0}</div>\r\n      <div><DollarSign size={14} /> {formatCurrency(stats?.revenue || 0)}</div>\r\n    </div>\r\n  </div>\r\n);\r\n\r\n// بطاقة تأجير نشط مبسطة\r\nconst ActiveRentalCard = ({ rental }) => {\r\n  const rentalType = getRentalType(rental);\r\n  \r\n  const getElapsedTime = () => {\r\n    if (!rental.start_time) return '--:--';\r\n    const start = new Date(rental.start_time);\r\n    const diff = Math.floor((new Date() - start) / 60000);\r\n    return diff < 60 ? `${diff} د` : `${Math.floor(diff/60)} س ${diff%60} د`;\r\n  };\r\n\r\n  return (\r\n    <div className=\"rental-card\">\r\n      <div className=\"rental-header\">\r\n        <span className=\"rental-game\">{rental.game_name || 'لعبة'}</span>\r\n        <span className={`rental-type ${rentalType}`}>\r\n          {rentalType === 'open' ? 'مفتوح' : 'ثابت'}\r\n        </span>\r\n      </div>\r\n      <div className=\"rental-customer\">{rental.customer_name || 'عميل'}</div>\r\n      <div className=\"rental-time\">\r\n        <Clock size={12} /> {formatTime(rental.start_time)} · {getElapsedTime()}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// بطاقة شيفت مبسطة\r\nconst ShiftCard = ({ shift, isCurrent = false }) => (\r\n  <div className={`shift-card ${isCurrent ? 'current-shift' : ''}`}>\r\n    <div className=\"shift-header\">\r\n      <Clock size={16} />\r\n      <span className=\"shift-employee\">{shift.employee_name}</span>\r\n      {isCurrent && <span className=\"shift-badge\">حالي</span>}\r\n    </div>\r\n    <div className=\"shift-branch\">{shift.branch_name || `فرع ${shift.branch_id}`}</div>\r\n    <div className=\"shift-time\">{formatTime(shift.start_time)}</div>\r\n    {shift.total_revenue > 0 && (\r\n      <div className=\"shift-revenue\">{formatCurrency(shift.total_revenue)}</div>\r\n    )}\r\n  </div>\r\n);\r\n\r\n// ==================== المكون الرئيسي المبسط ====================\r\nconst Dashboard = () => {\r\n  const { user } = useAuth();\r\n  const isAdmin = user?.role === 'admin';\r\n  \r\n  // حالات مبسطة\r\n  const [stats, setStats] = useState({\r\n    totalRevenue: 0,\r\n    todayRentals: 0,\r\n    todayRevenue: 0,\r\n    activeRentals: 0,\r\n    availableGames: 0,\r\n    totalBranches: 0,\r\n    totalUsers: 0\r\n  });\r\n  \r\n  const [branches, setBranches] = useState([]);\r\n  const [branchesStats, setBranchesStats] = useState({});\r\n  const [activeRentals, setActiveRentals] = useState([]);\r\n  const [completedRentals, setCompletedRentals] = useState([]);\r\n  const [recentRentals, setRecentRentals] = useState([]);\r\n  const [currentShift, setCurrentShift] = useState(null);\r\n  const [otherShifts, setOtherShifts] = useState([]);\r\n  const [loading, setLoading] = useState({ main: false, actions: {} });\r\n  const [error, setError] = useState(null);\r\n  const [lastUpdate, setLastUpdate] = useState(new Date());\r\n\r\n  // تحميل جميع البيانات دفعة واحدة\r\n  const loadDashboardData = useCallback(async (showLoading = true) => {\r\n    if (showLoading) setLoading(prev => ({ ...prev, main: true }));\r\n    setError(null);\r\n\r\n    try {\r\n      // تحميل الإحصائيات الرئيسية\r\n      const statsRes = await api.get('/dashboard/stats/simple');\r\n      if (statsRes.success) setStats(prev => ({ ...prev, ...statsRes.data }));\r\n\r\n      // تحميل الفروع (للمدير فقط)\r\n      if (isAdmin) {\r\n        const branchesRes = await api.get('/branches');\r\n        if (branchesRes.success) {\r\n          setBranches(branchesRes.data);\r\n          \r\n          // تحميل إحصائيات الفروع\r\n          const statsMap = {};\r\n          await Promise.all(branchesRes.data.map(async (branch) => {\r\n            try {\r\n              const branchRes = await api.get('/branches/stats/simple', { \r\n                params: { branch_id: branch.id } \r\n              });\r\n              if (branchRes.success) statsMap[branch.id] = branchRes.data;\r\n            } catch {\r\n              statsMap[branch.id] = { games: 0, activeRentals: 0, revenue: 0 };\r\n            }\r\n          }));\r\n          setBranchesStats(statsMap);\r\n        }\r\n      }\r\n\r\n      // تحميل التأجيرات النشطة\r\n      try {\r\n        const activeRes = await api.getAllActiveRentals();\r\n        if (activeRes.success) {\r\n          const active = (activeRes.data || []).filter(r => \r\n            r.status === 'نشط' || r.payment_status === 'عند الإنهاء'\r\n          );\r\n          setActiveRentals(active.slice(0, 10));\r\n        }\r\n      } catch {\r\n        setActiveRentals([]);\r\n      }\r\n\r\n      // تحميل تأجيرات اليوم المكتملة\r\n      try {\r\n        const completedRes = await api.getTodayCompletedRentalsAllBranches();\r\n        if (completedRes.success) {\r\n          setCompletedRentals((completedRes.data || []).slice(0, 10));\r\n        }\r\n      } catch {\r\n        setCompletedRentals([]);\r\n      }\r\n\r\n      // تحميل آخر التأجيرات\r\n      try {\r\n        const recentRes = await api.getRecentRentalsAllBranches(10);\r\n        if (recentRes.success) setRecentRentals(recentRes.data || []);\r\n      } catch {\r\n        setRecentRentals([]);\r\n      }\r\n\r\n      // تحميل الشيفت الحالي (للمستخدم العادي)\r\n      if (!isAdmin) {\r\n        try {\r\n          const shiftRes = await api.get('/shifts/simple');\r\n          if (shiftRes.success) setCurrentShift(shiftRes.data);\r\n        } catch {\r\n          setCurrentShift(null);\r\n        }\r\n      }\r\n\r\n      // تحميل شيفتات الفروع الأخرى (للمدير)\r\n      if (isAdmin) {\r\n        try {\r\n          const shiftsRes = await api.get('/shifts/active-all-branches');\r\n          if (shiftsRes.success) {\r\n            const filtered = (shiftsRes.data || []).filter(s => s.branch_id !== user?.branch_id);\r\n            setOtherShifts(filtered.slice(0, 5));\r\n          }\r\n        } catch {\r\n          setOtherShifts([]);\r\n        }\r\n      }\r\n\r\n      setLastUpdate(new Date());\r\n    } catch (err) {\r\n      console.error('خطأ في تحميل البيانات:', err);\r\n      setError('فشل تحميل البيانات');\r\n    } finally {\r\n      if (showLoading) setLoading(prev => ({ ...prev, main: false }));\r\n    }\r\n  }, [isAdmin, user?.branch_id]);\r\n\r\n  // تحميل البيانات عند بدء التشغيل\r\n  useEffect(() => {\r\n    loadDashboardData();\r\n    const interval = setInterval(() => loadDashboardData(false), 300000); // 5 دقائق\r\n    return () => clearInterval(interval);\r\n  }, [loadDashboardData]);\r\n\r\n  // إحصائيات إضافية\r\n  const enhancedStats = useMemo(() => ({\r\n    activeCount: activeRentals.length,\r\n    completedCount: completedRentals.length,\r\n    openRentals: activeRentals.filter(r => getRentalType(r) === 'open').length,\r\n    fixedRentals: activeRentals.filter(r => getRentalType(r) === 'fixed').length\r\n  }), [activeRentals, completedRentals]);\r\n\r\n  if (loading.main && !stats.totalRevenue) {\r\n    return (\r\n      <div className=\"dashboard-loading\">\r\n        <Loader2 className=\"spinner\" size={40} />\r\n        <p>جاري تحميل لوحة التحكم...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"dashboard\">\r\n      {/* رأس الصفحة */}\r\n      <div className=\"dashboard-header\">\r\n        <div>\r\n          <h1><BarChart3 size={28} /> لوحة التحكم</h1>\r\n          <div className=\"dashboard-date\">\r\n            <Calendar size={14} /> {formatDate(new Date())}\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"header-actions\">\r\n          <button onClick={() => loadDashboardData(true)} disabled={loading.main}>\r\n            <RefreshCw size={16} className={loading.main ? 'spin' : ''} />\r\n            تحديث\r\n          </button>\r\n          <button onClick={() => window.print()}>\r\n            <Printer size={16} /> طباعة\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* رسالة الخطأ */}\r\n      {error && (\r\n        <div className=\"error-banner\">\r\n          <AlertCircle size={18} /> {error}\r\n          <button onClick={() => setError(null)}><X size={16} /></button>\r\n        </div>\r\n      )}\r\n\r\n      {/* البطاقات الرئيسية */}\r\n      <div className=\"stats-grid\">\r\n        <StatCard\r\n          title=\"إجمالي الإيرادات\"\r\n          value={formatCurrency(stats.totalRevenue)}\r\n          icon={DollarSign}\r\n          color=\"primary\"\r\n        />\r\n        <StatCard\r\n          title=\"تأجيرات اليوم\"\r\n          value={stats.todayRentals || 0}\r\n          icon={Activity}\r\n          color=\"success\"\r\n          subtitle={`إيراد ${formatCurrency(stats.todayRevenue)}`}\r\n        />\r\n        <StatCard\r\n          title=\"نشطة حالياً\"\r\n          value={stats.activeRentals || 0}\r\n          icon={Zap}\r\n          color=\"warning\"\r\n          subtitle={`${enhancedStats.openRentals} مفتوح · ${enhancedStats.fixedRentals} ثابت`}\r\n        />\r\n        <StatCard\r\n          title=\"الألعاب المتاحة\"\r\n          value={stats.availableGames || 0}\r\n          icon={Gamepad2}\r\n          color=\"info\"\r\n        />\r\n      </div>\r\n\r\n      {/* الشيفت الحالي (للمستخدم العادي) */}\r\n      {!isAdmin && currentShift && (\r\n        <div className=\"section\">\r\n          <h2><Clock size={18} /> الشيفت الحالي</h2>\r\n          <ShiftCard shift={currentShift} isCurrent={true} />\r\n        </div>\r\n      )}\r\n\r\n      {/* محتوى المدير */}\r\n      {isAdmin && (\r\n        <>\r\n          {/* الفروع */}\r\n          {branches.length > 0 && (\r\n            <div className=\"section\">\r\n              <h2><Building size={18} /> الفروع ({branches.length})</h2>\r\n              <div className=\"branches-grid\">\r\n                {branches.slice(0, 4).map(branch => (\r\n                  <BranchCard \r\n                    key={branch.id} \r\n                    branch={branch} \r\n                    stats={branchesStats[branch.id]} \r\n                  />\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* شيفتات أخرى نشطة */}\r\n          {otherShifts.length > 0 && (\r\n            <div className=\"section\">\r\n              <h2><Clock size={18} /> شيفتات نشطة أخرى ({otherShifts.length})</h2>\r\n              <div className=\"shifts-grid\">\r\n                {otherShifts.map(shift => (\r\n                  <ShiftCard key={shift.id} shift={shift} />\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </>\r\n      )}\r\n\r\n      {/* التأجيرات النشطة */}\r\n      {activeRentals.length > 0 && (\r\n        <div className=\"section\">\r\n          <h2><Zap size={18} /> تأجيرات نشطة ({activeRentals.length})</h2>\r\n          <div className=\"rentals-grid\">\r\n            {activeRentals.map(rental => (\r\n              <ActiveRentalCard key={rental.id} rental={rental} />\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* صف التأجيرات المكتملة والحديثة */}\r\n      <div className=\"two-columns\">\r\n        {/* تأجيرات اليوم المكتملة */}\r\n        {completedRentals.length > 0 && (\r\n          <div className=\"section\">\r\n            <h2><CheckCircle size={18} /> مكتملة اليوم</h2>\r\n            <div className=\"compact-list\">\r\n              {completedRentals.map(rental => (\r\n                <div key={rental.id} className=\"compact-item\">\r\n                  <span>{rental.game_name}</span>\r\n                  <span>{formatCurrency(rental.final_amount || rental.total_amount)}</span>\r\n                  <small>{formatTime(rental.end_time)}</small>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* آخر التأجيرات */}\r\n        {recentRentals.length > 0 && (\r\n          <div className=\"section\">\r\n            <h2><Activity size={18} /> آخر التأجيرات</h2>\r\n            <div className=\"compact-list\">\r\n              {recentRentals.map(rental => (\r\n                <div key={rental.id} className=\"compact-item\">\r\n                  <span>{rental.customer_name || 'عميل'}</span>\r\n                  <span>{rental.game_name}</span>\r\n                  <small>{formatTime(rental.start_time)}</small>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* إحصائيات سريعة للمدير */}\r\n      {isAdmin && (\r\n        <div className=\"quick-stats\">\r\n          <div><Target size={14} /> إجمالي التأجيرات: {stats.totalRentals || 0}</div>\r\n          <div><Users size={14} /> المستخدمين: {stats.totalUsers || 0}</div>\r\n          <div><Activity size={14} /> آخر تحديث: {formatTime(lastUpdate)}</div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Dashboard;"],"mappings":";;AAAA;AACA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,WAAW,EAAEC,OAAO,EAAEC,MAAM,QAAQ,OAAO;AAChF,SACEC,SAAS,EACTC,UAAU,EACVC,KAAK,EACLC,QAAQ,EACRC,UAAU,EACVC,KAAK,EACLC,QAAQ,EACRC,YAAY,EACZC,QAAQ,EACRC,SAAS,EACTC,OAAO,EACPC,WAAW,EACXC,CAAC,EACDC,WAAW,EACXC,GAAG,EACHC,QAAQ,EACRC,KAAK,EACLC,IAAI,EACJC,MAAM,EACNC,GAAG,EACHC,OAAO,EACPC,QAAQ,EACRC,KAAK,EACLC,MAAM,EACNC,YAAY,EACZC,IAAI,EACJC,aAAa,QACR,cAAc;AACrB,SAASC,OAAO,QAAQ,2BAA2B;AACnD,OAAOC,GAAG,MAAM,oBAAoB;AACpC,OAAO,iBAAiB;;AAExB;AAAA,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AACA,MAAMC,cAAc,GAAIC,MAAM,IAAK;EACjC,IAAI,CAACA,MAAM,IAAIA,MAAM,KAAK,CAAC,EAAE,OAAO,OAAO;EAC3C,MAAMC,GAAG,GAAGC,UAAU,CAACF,MAAM,CAAC,IAAI,CAAC;EACnC,OAAO,IAAIG,IAAI,CAACC,YAAY,CAAC,OAAO,EAAE;IACpCC,KAAK,EAAE,UAAU;IACjBC,QAAQ,EAAE,KAAK;IACfC,qBAAqB,EAAE,CAAC;IACxBC,qBAAqB,EAAE;EACzB,CAAC,CAAC,CAACC,MAAM,CAACR,GAAG,CAAC;AAChB,CAAC;AAED,MAAMS,UAAU,GAAIC,UAAU,IAAK;EACjC,IAAI,CAACA,UAAU,EAAE,OAAO,OAAO;EAC/B,IAAI;IACF,MAAMC,IAAI,GAAG,IAAIC,IAAI,CAACF,UAAU,CAAC;IACjC,IAAIG,KAAK,CAACF,IAAI,CAACG,OAAO,CAAC,CAAC,CAAC,EAAE,OAAO,OAAO;IACzC,OAAOH,IAAI,CAACI,kBAAkB,CAAC,OAAO,EAAE;MAAEC,IAAI,EAAE,SAAS;MAAEC,MAAM,EAAE;IAAU,CAAC,CAAC;EACjF,CAAC,CAAC,MAAM;IACN,OAAO,OAAO;EAChB;AACF,CAAC;AAED,MAAMC,UAAU,GAAIR,UAAU,IAAK;EACjC,IAAI,CAACA,UAAU,EAAE,OAAO,YAAY;EACpC,IAAI;IACF,MAAMC,IAAI,GAAG,IAAIC,IAAI,CAACF,UAAU,CAAC;IACjC,IAAIG,KAAK,CAACF,IAAI,CAACG,OAAO,CAAC,CAAC,CAAC,EAAE,OAAO,YAAY;IAC9C,OAAOH,IAAI,CAACQ,kBAAkB,CAAC,OAAO,EAAE;MAAEC,IAAI,EAAE,SAAS;MAAEC,KAAK,EAAE,SAAS;MAAEC,GAAG,EAAE;IAAU,CAAC,CAAC;EAChG,CAAC,CAAC,MAAM;IACN,OAAO,YAAY;EACrB;AACF,CAAC;AAED,MAAMC,cAAc,GAAIb,UAAU,IAAK;EACrC,IAAI,CAACA,UAAU,EAAE,OAAO,kBAAkB;EAC1C,IAAI;IACF,MAAMC,IAAI,GAAG,IAAIC,IAAI,CAACF,UAAU,CAAC;IACjC,IAAIG,KAAK,CAACF,IAAI,CAACG,OAAO,CAAC,CAAC,CAAC,EAAE,OAAO,kBAAkB;IACpD,OAAOH,IAAI,CAACQ,kBAAkB,CAAC,OAAO,EAAE;MACtCC,IAAI,EAAE,SAAS;MAAEC,KAAK,EAAE,SAAS;MAAEC,GAAG,EAAE,SAAS;MACjDN,IAAI,EAAE,SAAS;MAAEC,MAAM,EAAE;IAC3B,CAAC,CAAC;EACJ,CAAC,CAAC,MAAM;IACN,OAAO,kBAAkB;EAC3B;AACF,CAAC;AAED,MAAMO,aAAa,GAAIC,MAAM,IAAK;EAChC,IAAI,CAACA,MAAM,EAAE,OAAO,OAAO;EAC3B,IAAIA,MAAM,CAACC,WAAW,KAAK,MAAM,IAAID,MAAM,CAACE,YAAY,KAAK,CAAC,IAAIF,MAAM,CAACG,cAAc,KAAK,aAAa,EAAE,OAAO,MAAM;EACxH,OAAO,OAAO;AAChB,CAAC;;AAED;;AAEA;AACA,MAAMC,QAAQ,GAAGA,CAAC;EAAEC,KAAK;EAAEC,KAAK;EAAEC,IAAI,EAAEC,IAAI;EAAEC,KAAK;EAAEC;AAAS,CAAC,kBAC7DxC,OAAA;EAAKyC,SAAS,EAAE,kBAAkBF,KAAK,EAAG;EAAAG,QAAA,gBACxC1C,OAAA;IAAKyC,SAAS,EAAC,WAAW;IAAAC,QAAA,eACxB1C,OAAA,CAACsC,IAAI;MAACK,IAAI,EAAE;IAAG;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACf,CAAC,eACN/C,OAAA;IAAKyC,SAAS,EAAC,cAAc;IAAAC,QAAA,gBAC3B1C,OAAA;MAAKyC,SAAS,EAAC,YAAY;MAAAC,QAAA,EAAEN;IAAK;MAAAQ,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC,eACzC/C,OAAA;MAAKyC,SAAS,EAAC,YAAY;MAAAC,QAAA,EAAEP;IAAK;MAAAS,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC,EACxCP,QAAQ,iBAAIxC,OAAA;MAAKyC,SAAS,EAAC,eAAe;MAAAC,QAAA,EAAEF;IAAQ;MAAAI,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACzD,CAAC;AAAA;EAAAH,QAAA,EAAAC,YAAA;EAAAC,UAAA;EAAAC,YAAA;AAAA,OACH,CACN;;AAED;AAAAC,EAAA,GAbMd,QAAQ;AAcd,MAAMe,UAAU,GAAGA,CAAC;EAAEC,MAAM;EAAEC;AAAM,CAAC,kBACnCnD,OAAA;EAAKyC,SAAS,EAAC,aAAa;EAAAC,QAAA,gBAC1B1C,OAAA;IAAKyC,SAAS,EAAC,eAAe;IAAAC,QAAA,gBAC5B1C,OAAA,CAACf,QAAQ;MAAC0D,IAAI,EAAE;IAAG;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eACtB/C,OAAA;MAAMyC,SAAS,EAAC,aAAa;MAAAC,QAAA,EAAEQ,MAAM,CAACE;IAAI;MAAAR,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAO,CAAC,EACjDG,MAAM,CAACG,SAAS,KAAK,CAAC,iBAAIrD,OAAA;MAAMyC,SAAS,EAAC,iBAAiB;MAAAC,QAAA,EAAC;IAAO;MAAAE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACxE,CAAC,eACN/C,OAAA;IAAKyC,SAAS,EAAC,cAAc;IAAAC,QAAA,gBAC3B1C,OAAA;MAAA0C,QAAA,gBAAK1C,OAAA,CAAC3B,QAAQ;QAACsE,IAAI,EAAE;MAAG;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,KAAC,EAAC,CAAAI,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAEG,KAAK,KAAI,CAAC;IAAA;MAAAV,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC,eACrD/C,OAAA;MAAA0C,QAAA,gBAAK1C,OAAA,CAAChB,GAAG;QAAC2D,IAAI,EAAE;MAAG;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,KAAC,EAAC,CAAAI,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAEI,aAAa,KAAI,CAAC;IAAA;MAAAX,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC,eACxD/C,OAAA;MAAA0C,QAAA,gBAAK1C,OAAA,CAAC1B,UAAU;QAACqE,IAAI,EAAE;MAAG;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,KAAC,EAAC5C,cAAc,CAAC,CAAAgD,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAEK,OAAO,KAAI,CAAC,CAAC;IAAA;MAAAZ,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACtE,CAAC;AAAA;EAAAH,QAAA,EAAAC,YAAA;EAAAC,UAAA;EAAAC,YAAA;AAAA,OACH,CACN;;AAED;AAAAU,GAAA,GAfMR,UAAU;AAgBhB,MAAMS,gBAAgB,GAAGA,CAAC;EAAE5B;AAAO,CAAC,KAAK;EACvC,MAAM6B,UAAU,GAAG9B,aAAa,CAACC,MAAM,CAAC;EAExC,MAAM8B,cAAc,GAAGA,CAAA,KAAM;IAC3B,IAAI,CAAC9B,MAAM,CAAC+B,UAAU,EAAE,OAAO,OAAO;IACtC,MAAMC,KAAK,GAAG,IAAI7C,IAAI,CAACa,MAAM,CAAC+B,UAAU,CAAC;IACzC,MAAME,IAAI,GAAGC,IAAI,CAACC,KAAK,CAAC,CAAC,IAAIhD,IAAI,CAAC,CAAC,GAAG6C,KAAK,IAAI,KAAK,CAAC;IACrD,OAAOC,IAAI,GAAG,EAAE,GAAG,GAAGA,IAAI,IAAI,GAAG,GAAGC,IAAI,CAACC,KAAK,CAACF,IAAI,GAAC,EAAE,CAAC,MAAMA,IAAI,GAAC,EAAE,IAAI;EAC1E,CAAC;EAED,oBACE/D,OAAA;IAAKyC,SAAS,EAAC,aAAa;IAAAC,QAAA,gBAC1B1C,OAAA;MAAKyC,SAAS,EAAC,eAAe;MAAAC,QAAA,gBAC5B1C,OAAA;QAAMyC,SAAS,EAAC,aAAa;QAAAC,QAAA,EAAEZ,MAAM,CAACoC,SAAS,IAAI;MAAM;QAAAtB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,eACjE/C,OAAA;QAAMyC,SAAS,EAAE,eAAekB,UAAU,EAAG;QAAAjB,QAAA,EAC1CiB,UAAU,KAAK,MAAM,GAAG,OAAO,GAAG;MAAM;QAAAf,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACrC,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACJ,CAAC,eACN/C,OAAA;MAAKyC,SAAS,EAAC,iBAAiB;MAAAC,QAAA,EAAEZ,MAAM,CAACqC,aAAa,IAAI;IAAM;MAAAvB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC,eACvE/C,OAAA;MAAKyC,SAAS,EAAC,aAAa;MAAAC,QAAA,gBAC1B1C,OAAA,CAACzB,KAAK;QAACoE,IAAI,EAAE;MAAG;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,KAAC,EAACjC,UAAU,CAACgB,MAAM,CAAC+B,UAAU,CAAC,EAAC,QAAG,EAACD,cAAc,CAAC,CAAC;IAAA;MAAAhB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACpE,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV,CAAC;;AAED;AAAAqB,GAAA,GA1BMV,gBAAgB;AA2BtB,MAAMW,SAAS,GAAGA,CAAC;EAAEC,KAAK;EAAEC,SAAS,GAAG;AAAM,CAAC,kBAC7CvE,OAAA;EAAKyC,SAAS,EAAE,cAAc8B,SAAS,GAAG,eAAe,GAAG,EAAE,EAAG;EAAA7B,QAAA,gBAC/D1C,OAAA;IAAKyC,SAAS,EAAC,cAAc;IAAAC,QAAA,gBAC3B1C,OAAA,CAACzB,KAAK;MAACoE,IAAI,EAAE;IAAG;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eACnB/C,OAAA;MAAMyC,SAAS,EAAC,gBAAgB;MAAAC,QAAA,EAAE4B,KAAK,CAACE;IAAa;MAAA5B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAO,CAAC,EAC5DwB,SAAS,iBAAIvE,OAAA;MAAMyC,SAAS,EAAC,aAAa;MAAAC,QAAA,EAAC;IAAI;MAAAE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACpD,CAAC,eACN/C,OAAA;IAAKyC,SAAS,EAAC,cAAc;IAAAC,QAAA,EAAE4B,KAAK,CAACG,WAAW,IAAI,OAAOH,KAAK,CAACI,SAAS;EAAE;IAAA9B,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAM,CAAC,eACnF/C,OAAA;IAAKyC,SAAS,EAAC,YAAY;IAAAC,QAAA,EAAE5B,UAAU,CAACwD,KAAK,CAACT,UAAU;EAAC;IAAAjB,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAM,CAAC,EAC/DuB,KAAK,CAACK,aAAa,GAAG,CAAC,iBACtB3E,OAAA;IAAKyC,SAAS,EAAC,eAAe;IAAAC,QAAA,EAAEvC,cAAc,CAACmE,KAAK,CAACK,aAAa;EAAC;IAAA/B,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAM,CAC1E;AAAA;EAAAH,QAAA,EAAAC,YAAA;EAAAC,UAAA;EAAAC,YAAA;AAAA,OACE,CACN;;AAED;AAAA6B,GAAA,GAfMP,SAAS;AAgBf,MAAMQ,SAAS,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACtB,MAAM;IAAEC;EAAK,CAAC,GAAGlF,OAAO,CAAC,CAAC;EAC1B,MAAMmF,OAAO,GAAG,CAAAD,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEE,IAAI,MAAK,OAAO;;EAEtC;EACA,MAAM,CAAC9B,KAAK,EAAE+B,QAAQ,CAAC,GAAGrH,QAAQ,CAAC;IACjCsH,YAAY,EAAE,CAAC;IACfC,YAAY,EAAE,CAAC;IACfC,YAAY,EAAE,CAAC;IACf9B,aAAa,EAAE,CAAC;IAChB+B,cAAc,EAAE,CAAC;IACjBC,aAAa,EAAE,CAAC;IAChBC,UAAU,EAAE;EACd,CAAC,CAAC;EAEF,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAG7H,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAAC8H,aAAa,EAAEC,gBAAgB,CAAC,GAAG/H,QAAQ,CAAC,CAAC,CAAC,CAAC;EACtD,MAAM,CAAC0F,aAAa,EAAEsC,gBAAgB,CAAC,GAAGhI,QAAQ,CAAC,EAAE,CAAC;EACtD,MAAM,CAACiI,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGlI,QAAQ,CAAC,EAAE,CAAC;EAC5D,MAAM,CAACmI,aAAa,EAAEC,gBAAgB,CAAC,GAAGpI,QAAQ,CAAC,EAAE,CAAC;EACtD,MAAM,CAACqI,YAAY,EAAEC,eAAe,CAAC,GAAGtI,QAAQ,CAAC,IAAI,CAAC;EACtD,MAAM,CAACuI,WAAW,EAAEC,cAAc,CAAC,GAAGxI,QAAQ,CAAC,EAAE,CAAC;EAClD,MAAM,CAACyI,OAAO,EAAEC,UAAU,CAAC,GAAG1I,QAAQ,CAAC;IAAE2I,IAAI,EAAE,KAAK;IAAEC,OAAO,EAAE,CAAC;EAAE,CAAC,CAAC;EACpE,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAG9I,QAAQ,CAAC,IAAI,CAAC;EACxC,MAAM,CAAC+I,UAAU,EAAEC,aAAa,CAAC,GAAGhJ,QAAQ,CAAC,IAAIoD,IAAI,CAAC,CAAC,CAAC;;EAExD;EACA,MAAM6F,iBAAiB,GAAG/I,WAAW,CAAC,OAAOgJ,WAAW,GAAG,IAAI,KAAK;IAClE,IAAIA,WAAW,EAAER,UAAU,CAACS,IAAI,KAAK;MAAE,GAAGA,IAAI;MAAER,IAAI,EAAE;IAAK,CAAC,CAAC,CAAC;IAC9DG,QAAQ,CAAC,IAAI,CAAC;IAEd,IAAI;MACF;MACA,MAAMM,QAAQ,GAAG,MAAMnH,GAAG,CAACoH,GAAG,CAAC,yBAAyB,CAAC;MACzD,IAAID,QAAQ,CAACE,OAAO,EAAEjC,QAAQ,CAAC8B,IAAI,KAAK;QAAE,GAAGA,IAAI;QAAE,GAAGC,QAAQ,CAACG;MAAK,CAAC,CAAC,CAAC;;MAEvE;MACA,IAAIpC,OAAO,EAAE;QACX,MAAMqC,WAAW,GAAG,MAAMvH,GAAG,CAACoH,GAAG,CAAC,WAAW,CAAC;QAC9C,IAAIG,WAAW,CAACF,OAAO,EAAE;UACvBzB,WAAW,CAAC2B,WAAW,CAACD,IAAI,CAAC;;UAE7B;UACA,MAAME,QAAQ,GAAG,CAAC,CAAC;UACnB,MAAMC,OAAO,CAACC,GAAG,CAACH,WAAW,CAACD,IAAI,CAACK,GAAG,CAAC,MAAOvE,MAAM,IAAK;YACvD,IAAI;cACF,MAAMwE,SAAS,GAAG,MAAM5H,GAAG,CAACoH,GAAG,CAAC,wBAAwB,EAAE;gBACxDS,MAAM,EAAE;kBAAEjD,SAAS,EAAExB,MAAM,CAAC0E;gBAAG;cACjC,CAAC,CAAC;cACF,IAAIF,SAAS,CAACP,OAAO,EAAEG,QAAQ,CAACpE,MAAM,CAAC0E,EAAE,CAAC,GAAGF,SAAS,CAACN,IAAI;YAC7D,CAAC,CAAC,MAAM;cACNE,QAAQ,CAACpE,MAAM,CAAC0E,EAAE,CAAC,GAAG;gBAAEtE,KAAK,EAAE,CAAC;gBAAEC,aAAa,EAAE,CAAC;gBAAEC,OAAO,EAAE;cAAE,CAAC;YAClE;UACF,CAAC,CAAC,CAAC;UACHoC,gBAAgB,CAAC0B,QAAQ,CAAC;QAC5B;MACF;;MAEA;MACA,IAAI;QACF,MAAMO,SAAS,GAAG,MAAM/H,GAAG,CAACgI,mBAAmB,CAAC,CAAC;QACjD,IAAID,SAAS,CAACV,OAAO,EAAE;UACrB,MAAMY,MAAM,GAAG,CAACF,SAAS,CAACT,IAAI,IAAI,EAAE,EAAEY,MAAM,CAACC,CAAC,IAC5CA,CAAC,CAACC,MAAM,KAAK,KAAK,IAAID,CAAC,CAAChG,cAAc,KAAK,aAC7C,CAAC;UACD4D,gBAAgB,CAACkC,MAAM,CAACI,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;QACvC;MACF,CAAC,CAAC,MAAM;QACNtC,gBAAgB,CAAC,EAAE,CAAC;MACtB;;MAEA;MACA,IAAI;QACF,MAAMuC,YAAY,GAAG,MAAMtI,GAAG,CAACuI,mCAAmC,CAAC,CAAC;QACpE,IAAID,YAAY,CAACjB,OAAO,EAAE;UACxBpB,mBAAmB,CAAC,CAACqC,YAAY,CAAChB,IAAI,IAAI,EAAE,EAAEe,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;QAC7D;MACF,CAAC,CAAC,MAAM;QACNpC,mBAAmB,CAAC,EAAE,CAAC;MACzB;;MAEA;MACA,IAAI;QACF,MAAMuC,SAAS,GAAG,MAAMxI,GAAG,CAACyI,2BAA2B,CAAC,EAAE,CAAC;QAC3D,IAAID,SAAS,CAACnB,OAAO,EAAElB,gBAAgB,CAACqC,SAAS,CAAClB,IAAI,IAAI,EAAE,CAAC;MAC/D,CAAC,CAAC,MAAM;QACNnB,gBAAgB,CAAC,EAAE,CAAC;MACtB;;MAEA;MACA,IAAI,CAACjB,OAAO,EAAE;QACZ,IAAI;UACF,MAAMwD,QAAQ,GAAG,MAAM1I,GAAG,CAACoH,GAAG,CAAC,gBAAgB,CAAC;UAChD,IAAIsB,QAAQ,CAACrB,OAAO,EAAEhB,eAAe,CAACqC,QAAQ,CAACpB,IAAI,CAAC;QACtD,CAAC,CAAC,MAAM;UACNjB,eAAe,CAAC,IAAI,CAAC;QACvB;MACF;;MAEA;MACA,IAAInB,OAAO,EAAE;QACX,IAAI;UACF,MAAMyD,SAAS,GAAG,MAAM3I,GAAG,CAACoH,GAAG,CAAC,6BAA6B,CAAC;UAC9D,IAAIuB,SAAS,CAACtB,OAAO,EAAE;YACrB,MAAMuB,QAAQ,GAAG,CAACD,SAAS,CAACrB,IAAI,IAAI,EAAE,EAAEY,MAAM,CAACW,CAAC,IAAIA,CAAC,CAACjE,SAAS,MAAKK,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEL,SAAS,EAAC;YACpF2B,cAAc,CAACqC,QAAQ,CAACP,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;UACtC;QACF,CAAC,CAAC,MAAM;UACN9B,cAAc,CAAC,EAAE,CAAC;QACpB;MACF;MAEAQ,aAAa,CAAC,IAAI5F,IAAI,CAAC,CAAC,CAAC;IAC3B,CAAC,CAAC,OAAO2H,GAAG,EAAE;MACZC,OAAO,CAACnC,KAAK,CAAC,wBAAwB,EAAEkC,GAAG,CAAC;MAC5CjC,QAAQ,CAAC,oBAAoB,CAAC;IAChC,CAAC,SAAS;MACR,IAAII,WAAW,EAAER,UAAU,CAACS,IAAI,KAAK;QAAE,GAAGA,IAAI;QAAER,IAAI,EAAE;MAAM,CAAC,CAAC,CAAC;IACjE;EACF,CAAC,EAAE,CAACxB,OAAO,EAAED,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEL,SAAS,CAAC,CAAC;;EAE9B;EACA5G,SAAS,CAAC,MAAM;IACdgJ,iBAAiB,CAAC,CAAC;IACnB,MAAMgC,QAAQ,GAAGC,WAAW,CAAC,MAAMjC,iBAAiB,CAAC,KAAK,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC;IACtE,OAAO,MAAMkC,aAAa,CAACF,QAAQ,CAAC;EACtC,CAAC,EAAE,CAAChC,iBAAiB,CAAC,CAAC;;EAEvB;EACA,MAAMmC,aAAa,GAAGjL,OAAO,CAAC,OAAO;IACnCkL,WAAW,EAAE3F,aAAa,CAAC4F,MAAM;IACjCC,cAAc,EAAEtD,gBAAgB,CAACqD,MAAM;IACvCE,WAAW,EAAE9F,aAAa,CAACyE,MAAM,CAACC,CAAC,IAAIpG,aAAa,CAACoG,CAAC,CAAC,KAAK,MAAM,CAAC,CAACkB,MAAM;IAC1EG,YAAY,EAAE/F,aAAa,CAACyE,MAAM,CAACC,CAAC,IAAIpG,aAAa,CAACoG,CAAC,CAAC,KAAK,OAAO,CAAC,CAACkB;EACxE,CAAC,CAAC,EAAE,CAAC5F,aAAa,EAAEuC,gBAAgB,CAAC,CAAC;EAEtC,IAAIQ,OAAO,CAACE,IAAI,IAAI,CAACrD,KAAK,CAACgC,YAAY,EAAE;IACvC,oBACEnF,OAAA;MAAKyC,SAAS,EAAC,mBAAmB;MAAAC,QAAA,gBAChC1C,OAAA,CAACpB,OAAO;QAAC6D,SAAS,EAAC,SAAS;QAACE,IAAI,EAAE;MAAG;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eACzC/C,OAAA;QAAA0C,QAAA,EAAG;MAAyB;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC7B,CAAC;EAEV;EAEA,oBACE/C,OAAA;IAAKyC,SAAS,EAAC,WAAW;IAAAC,QAAA,gBAExB1C,OAAA;MAAKyC,SAAS,EAAC,kBAAkB;MAAAC,QAAA,gBAC/B1C,OAAA;QAAA0C,QAAA,gBACE1C,OAAA;UAAA0C,QAAA,gBAAI1C,OAAA,CAAC9B,SAAS;YAACyE,IAAI,EAAE;UAAG;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,kEAAY;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eAC5C/C,OAAA;UAAKyC,SAAS,EAAC,gBAAgB;UAAAC,QAAA,gBAC7B1C,OAAA,CAACxB,QAAQ;YAACmE,IAAI,EAAE;UAAG;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,KAAC,EAACxB,UAAU,CAAC,IAAIN,IAAI,CAAC,CAAC,CAAC;QAAA;UAAA2B,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC3C,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,eAEN/C,OAAA;QAAKyC,SAAS,EAAC,gBAAgB;QAAAC,QAAA,gBAC7B1C,OAAA;UAAQuJ,OAAO,EAAEA,CAAA,KAAMzC,iBAAiB,CAAC,IAAI,CAAE;UAAC0C,QAAQ,EAAElD,OAAO,CAACE,IAAK;UAAA9D,QAAA,gBACrE1C,OAAA,CAACrB,SAAS;YAACgE,IAAI,EAAE,EAAG;YAACF,SAAS,EAAE6D,OAAO,CAACE,IAAI,GAAG,MAAM,GAAG;UAAG;YAAA5D,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,kCAEhE;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACT/C,OAAA;UAAQuJ,OAAO,EAAEA,CAAA,KAAME,MAAM,CAACC,KAAK,CAAC,CAAE;UAAAhH,QAAA,gBACpC1C,OAAA,CAACV,OAAO;YAACqD,IAAI,EAAE;UAAG;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,mCACvB;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,EAGL2D,KAAK,iBACJ1G,OAAA;MAAKyC,SAAS,EAAC,cAAc;MAAAC,QAAA,gBAC3B1C,OAAA,CAACnB,WAAW;QAAC8D,IAAI,EAAE;MAAG;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,KAAC,EAAC2D,KAAK,eAChC1G,OAAA;QAAQuJ,OAAO,EAAEA,CAAA,KAAM5C,QAAQ,CAAC,IAAI,CAAE;QAAAjE,QAAA,eAAC1C,OAAA,CAAClB,CAAC;UAAC6D,IAAI,EAAE;QAAG;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC5D,CACN,eAGD/C,OAAA;MAAKyC,SAAS,EAAC,YAAY;MAAAC,QAAA,gBACzB1C,OAAA,CAACkC,QAAQ;QACPC,KAAK,EAAC,6FAAkB;QACxBC,KAAK,EAAEjC,cAAc,CAACgD,KAAK,CAACgC,YAAY,CAAE;QAC1C9C,IAAI,EAAE/D,UAAW;QACjBiE,KAAK,EAAC;MAAS;QAAAK,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAChB,CAAC,eACF/C,OAAA,CAACkC,QAAQ;QACPC,KAAK,EAAC,2EAAe;QACrBC,KAAK,EAAEe,KAAK,CAACiC,YAAY,IAAI,CAAE;QAC/B/C,IAAI,EAAE9C,QAAS;QACfgD,KAAK,EAAC,SAAS;QACfC,QAAQ,EAAE,SAASrC,cAAc,CAACgD,KAAK,CAACkC,YAAY,CAAC;MAAG;QAAAzC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACzD,CAAC,eACF/C,OAAA,CAACkC,QAAQ;QACPC,KAAK,EAAC,+DAAa;QACnBC,KAAK,EAAEe,KAAK,CAACI,aAAa,IAAI,CAAE;QAChClB,IAAI,EAAErD,GAAI;QACVuD,KAAK,EAAC,SAAS;QACfC,QAAQ,EAAE,GAAGyG,aAAa,CAACI,WAAW,YAAYJ,aAAa,CAACK,YAAY;MAAQ;QAAA1G,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACrF,CAAC,eACF/C,OAAA,CAACkC,QAAQ;QACPC,KAAK,EAAC,uFAAiB;QACvBC,KAAK,EAAEe,KAAK,CAACmC,cAAc,IAAI,CAAE;QACjCjD,IAAI,EAAEhE,QAAS;QACfkE,KAAK,EAAC;MAAM;QAAAK,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACb,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC,CAAC,EAGL,CAACiC,OAAO,IAAIkB,YAAY,iBACvBlG,OAAA;MAAKyC,SAAS,EAAC,SAAS;MAAAC,QAAA,gBACtB1C,OAAA;QAAA0C,QAAA,gBAAI1C,OAAA,CAACzB,KAAK;UAACoE,IAAI,EAAE;QAAG;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,8EAAc;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eAC1C/C,OAAA,CAACqE,SAAS;QAACC,KAAK,EAAE4B,YAAa;QAAC3B,SAAS,EAAE;MAAK;QAAA3B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAChD,CACN,EAGAiC,OAAO,iBACNhF,OAAA,CAAAE,SAAA;MAAAwC,QAAA,GAEG+C,QAAQ,CAAC0D,MAAM,GAAG,CAAC,iBAClBnJ,OAAA;QAAKyC,SAAS,EAAC,SAAS;QAAAC,QAAA,gBACtB1C,OAAA;UAAA0C,QAAA,gBAAI1C,OAAA,CAACf,QAAQ;YAAC0D,IAAI,EAAE;UAAG;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,2CAAS,EAAC0C,QAAQ,CAAC0D,MAAM,EAAC,GAAC;QAAA;UAAAvG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eAC1D/C,OAAA;UAAKyC,SAAS,EAAC,eAAe;UAAAC,QAAA,EAC3B+C,QAAQ,CAAC0C,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAACV,GAAG,CAACvE,MAAM,iBAC9BlD,OAAA,CAACiD,UAAU;YAETC,MAAM,EAAEA,MAAO;YACfC,KAAK,EAAEwC,aAAa,CAACzC,MAAM,CAAC0E,EAAE;UAAE,GAF3B1E,MAAM,CAAC0E,EAAE;YAAAhF,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAGf,CACF;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CACN,EAGAqD,WAAW,CAAC+C,MAAM,GAAG,CAAC,iBACrBnJ,OAAA;QAAKyC,SAAS,EAAC,SAAS;QAAAC,QAAA,gBACtB1C,OAAA;UAAA0C,QAAA,gBAAI1C,OAAA,CAACzB,KAAK;YAACoE,IAAI,EAAE;UAAG;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,6FAAmB,EAACqD,WAAW,CAAC+C,MAAM,EAAC,GAAC;QAAA;UAAAvG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eACpE/C,OAAA;UAAKyC,SAAS,EAAC,aAAa;UAAAC,QAAA,EACzB0D,WAAW,CAACqB,GAAG,CAACnD,KAAK,iBACpBtE,OAAA,CAACqE,SAAS;YAAgBC,KAAK,EAAEA;UAAM,GAAvBA,KAAK,CAACsD,EAAE;YAAAhF,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAiB,CAC1C;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CACN;IAAA,eACD,CACH,EAGAQ,aAAa,CAAC4F,MAAM,GAAG,CAAC,iBACvBnJ,OAAA;MAAKyC,SAAS,EAAC,SAAS;MAAAC,QAAA,gBACtB1C,OAAA;QAAA0C,QAAA,gBAAI1C,OAAA,CAAChB,GAAG;UAAC2D,IAAI,EAAE;QAAG;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,0EAAe,EAACQ,aAAa,CAAC4F,MAAM,EAAC,GAAC;MAAA;QAAAvG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eAChE/C,OAAA;QAAKyC,SAAS,EAAC,cAAc;QAAAC,QAAA,EAC1Ba,aAAa,CAACkE,GAAG,CAAC3F,MAAM,iBACvB9B,OAAA,CAAC0D,gBAAgB;UAAiB5B,MAAM,EAAEA;QAAO,GAA1BA,MAAM,CAAC8F,EAAE;UAAAhF,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAmB,CACpD;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CACN,eAGD/C,OAAA;MAAKyC,SAAS,EAAC,aAAa;MAAAC,QAAA,GAEzBoD,gBAAgB,CAACqD,MAAM,GAAG,CAAC,iBAC1BnJ,OAAA;QAAKyC,SAAS,EAAC,SAAS;QAAAC,QAAA,gBACtB1C,OAAA;UAAA0C,QAAA,gBAAI1C,OAAA,CAACjB,WAAW;YAAC4D,IAAI,EAAE;UAAG;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,wEAAa;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eAC/C/C,OAAA;UAAKyC,SAAS,EAAC,cAAc;UAAAC,QAAA,EAC1BoD,gBAAgB,CAAC2B,GAAG,CAAC3F,MAAM,iBAC1B9B,OAAA;YAAqByC,SAAS,EAAC,cAAc;YAAAC,QAAA,gBAC3C1C,OAAA;cAAA0C,QAAA,EAAOZ,MAAM,CAACoC;YAAS;cAAAtB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,eAC/B/C,OAAA;cAAA0C,QAAA,EAAOvC,cAAc,CAAC2B,MAAM,CAAC6H,YAAY,IAAI7H,MAAM,CAAC8H,YAAY;YAAC;cAAAhH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,eACzE/C,OAAA;cAAA0C,QAAA,EAAQ5B,UAAU,CAACgB,MAAM,CAAC+H,QAAQ;YAAC;cAAAjH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA,GAHpCjB,MAAM,CAAC8F,EAAE;YAAAhF,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAId,CACN;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CACN,EAGAiD,aAAa,CAACmD,MAAM,GAAG,CAAC,iBACvBnJ,OAAA;QAAKyC,SAAS,EAAC,SAAS;QAAAC,QAAA,gBACtB1C,OAAA;UAAA0C,QAAA,gBAAI1C,OAAA,CAACT,QAAQ;YAACoD,IAAI,EAAE;UAAG;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,8EAAc;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eAC7C/C,OAAA;UAAKyC,SAAS,EAAC,cAAc;UAAAC,QAAA,EAC1BsD,aAAa,CAACyB,GAAG,CAAC3F,MAAM,iBACvB9B,OAAA;YAAqByC,SAAS,EAAC,cAAc;YAAAC,QAAA,gBAC3C1C,OAAA;cAAA0C,QAAA,EAAOZ,MAAM,CAACqC,aAAa,IAAI;YAAM;cAAAvB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,eAC7C/C,OAAA;cAAA0C,QAAA,EAAOZ,MAAM,CAACoC;YAAS;cAAAtB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,eAC/B/C,OAAA;cAAA0C,QAAA,EAAQ5B,UAAU,CAACgB,MAAM,CAAC+B,UAAU;YAAC;cAAAjB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA,GAHtCjB,MAAM,CAAC8F,EAAE;YAAAhF,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAId,CACN;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CACN;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC,EAGLiC,OAAO,iBACNhF,OAAA;MAAKyC,SAAS,EAAC,aAAa;MAAAC,QAAA,gBAC1B1C,OAAA;QAAA0C,QAAA,gBAAK1C,OAAA,CAACP,MAAM;UAACkD,IAAI,EAAE;QAAG;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,kGAAmB,EAACI,KAAK,CAAC2G,YAAY,IAAI,CAAC;MAAA;QAAAlH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC,eAC3E/C,OAAA;QAAA0C,QAAA,gBAAK1C,OAAA,CAAC5B,KAAK;UAACuE,IAAI,EAAE;QAAG;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,mEAAa,EAACI,KAAK,CAACqC,UAAU,IAAI,CAAC;MAAA;QAAA5C,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC,eAClE/C,OAAA;QAAA0C,QAAA,gBAAK1C,OAAA,CAACT,QAAQ;UAACoD,IAAI,EAAE;QAAG;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,wDAAY,EAACjC,UAAU,CAAC8F,UAAU,CAAC;MAAA;QAAAhE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAClE,CACN;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV,CAAC;AAAC+B,EAAA,CA/SID,SAAS;EAAA,QACIhF,OAAO;AAAA;AAAAkK,GAAA,GADpBlF,SAAS;AAiTf,eAAeA,SAAS;AAAC,IAAA7B,EAAA,EAAAS,GAAA,EAAAW,GAAA,EAAAQ,GAAA,EAAAmF,GAAA;AAAAC,YAAA,CAAAhH,EAAA;AAAAgH,YAAA,CAAAvG,GAAA;AAAAuG,YAAA,CAAA5F,GAAA;AAAA4F,YAAA,CAAApF,GAAA;AAAAoF,YAAA,CAAAD,GAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}