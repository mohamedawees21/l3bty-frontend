{"ast":null,"code":"// frontend/src/services/authService.js\nimport api from './api-new';\nclass AuthService {\n  constructor() {\n    this.token = localStorage.getItem('token');\n    this.user = this.getUserFromStorage();\n  }\n  getUserFromStorage() {\n    try {\n      const userStr = localStorage.getItem('user');\n      return userStr ? JSON.parse(userStr) : null;\n    } catch (error) {\n      console.error('Error parsing user:', error);\n      return null;\n    }\n  }\n  async login(email, password) {\n    try {\n      console.log('üîê ÿ™ÿ≥ÿ¨ŸäŸÑ ÿØÿÆŸàŸÑ:', email);\n      const response = await api.post('/auth/login', {\n        email,\n        password\n      });\n      if (response.data.success) {\n        this.setAuthData(response.data.token, response.data.user);\n        return {\n          success: true,\n          data: response.data\n        };\n      } else {\n        return {\n          success: false,\n          message: response.data.message\n        };\n      }\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error('Login error:', error);\n      return {\n        success: false,\n        message: ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || 'ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑÿÆÿßÿØŸÖ'\n      };\n    }\n  }\n  setAuthData(token, user) {\n    this.token = token;\n    this.user = user;\n    localStorage.setItem('token', token);\n    localStorage.setItem('user', JSON.stringify(user));\n  }\n  getCurrentUser() {\n    return this.user;\n  }\n  getToken() {\n    return this.token;\n  }\n  isAuthenticated() {\n    return !!this.token && !!this.user;\n  }\n  logout() {\n    this.token = null;\n    this.user = null;\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n    window.location.href = '/login';\n  }\n}\nexport default new AuthService();","map":{"version":3,"names":["api","AuthService","constructor","token","localStorage","getItem","user","getUserFromStorage","userStr","JSON","parse","error","console","login","email","password","log","response","post","data","success","setAuthData","message","_error$response","_error$response$data","setItem","stringify","getCurrentUser","getToken","isAuthenticated","logout","removeItem","window","location","href"],"sources":["C:/Users/HP/OneDrive/project/l3bty-rental-system/frontend/src/services/authService.js"],"sourcesContent":["// frontend/src/services/authService.js\r\nimport api from './api-new';\r\n\r\nclass AuthService {\r\n  constructor() {\r\n    this.token = localStorage.getItem('token');\r\n    this.user = this.getUserFromStorage();\r\n  }\r\n\r\n  getUserFromStorage() {\r\n    try {\r\n      const userStr = localStorage.getItem('user');\r\n      return userStr ? JSON.parse(userStr) : null;\r\n    } catch (error) {\r\n      console.error('Error parsing user:', error);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  async login(email, password) {\r\n    try {\r\n      console.log('üîê ÿ™ÿ≥ÿ¨ŸäŸÑ ÿØÿÆŸàŸÑ:', email);\r\n      \r\n      const response = await api.post('/auth/login', { email, password });\r\n      \r\n      if (response.data.success) {\r\n        this.setAuthData(response.data.token, response.data.user);\r\n        return {\r\n          success: true,\r\n          data: response.data\r\n        };\r\n      } else {\r\n        return {\r\n          success: false,\r\n          message: response.data.message\r\n        };\r\n      }\r\n    } catch (error) {\r\n      console.error('Login error:', error);\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || 'ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑÿÆÿßÿØŸÖ'\r\n      };\r\n    }\r\n  }\r\n\r\n  setAuthData(token, user) {\r\n    this.token = token;\r\n    this.user = user;\r\n    localStorage.setItem('token', token);\r\n    localStorage.setItem('user', JSON.stringify(user));\r\n  }\r\n\r\n  getCurrentUser() {\r\n    return this.user;\r\n  }\r\n\r\n  getToken() {\r\n    return this.token;\r\n  }\r\n\r\n  isAuthenticated() {\r\n    return !!this.token && !!this.user;\r\n  }\r\n\r\n  logout() {\r\n    this.token = null;\r\n    this.user = null;\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('user');\r\n    window.location.href = '/login';\r\n  }\r\n}\r\n\r\nexport default new AuthService();"],"mappings":"AAAA;AACA,OAAOA,GAAG,MAAM,WAAW;AAE3B,MAAMC,WAAW,CAAC;EAChBC,WAAWA,CAAA,EAAG;IACZ,IAAI,CAACC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC1C,IAAI,CAACC,IAAI,GAAG,IAAI,CAACC,kBAAkB,CAAC,CAAC;EACvC;EAEAA,kBAAkBA,CAAA,EAAG;IACnB,IAAI;MACF,MAAMC,OAAO,GAAGJ,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;MAC5C,OAAOG,OAAO,GAAGC,IAAI,CAACC,KAAK,CAACF,OAAO,CAAC,GAAG,IAAI;IAC7C,CAAC,CAAC,OAAOG,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,qBAAqB,EAAEA,KAAK,CAAC;MAC3C,OAAO,IAAI;IACb;EACF;EAEA,MAAME,KAAKA,CAACC,KAAK,EAAEC,QAAQ,EAAE;IAC3B,IAAI;MACFH,OAAO,CAACI,GAAG,CAAC,gBAAgB,EAAEF,KAAK,CAAC;MAEpC,MAAMG,QAAQ,GAAG,MAAMjB,GAAG,CAACkB,IAAI,CAAC,aAAa,EAAE;QAAEJ,KAAK;QAAEC;MAAS,CAAC,CAAC;MAEnE,IAAIE,QAAQ,CAACE,IAAI,CAACC,OAAO,EAAE;QACzB,IAAI,CAACC,WAAW,CAACJ,QAAQ,CAACE,IAAI,CAAChB,KAAK,EAAEc,QAAQ,CAACE,IAAI,CAACb,IAAI,CAAC;QACzD,OAAO;UACLc,OAAO,EAAE,IAAI;UACbD,IAAI,EAAEF,QAAQ,CAACE;QACjB,CAAC;MACH,CAAC,MAAM;QACL,OAAO;UACLC,OAAO,EAAE,KAAK;UACdE,OAAO,EAAEL,QAAQ,CAACE,IAAI,CAACG;QACzB,CAAC;MACH;IACF,CAAC,CAAC,OAAOX,KAAK,EAAE;MAAA,IAAAY,eAAA,EAAAC,oBAAA;MACdZ,OAAO,CAACD,KAAK,CAAC,cAAc,EAAEA,KAAK,CAAC;MACpC,OAAO;QACLS,OAAO,EAAE,KAAK;QACdE,OAAO,EAAE,EAAAC,eAAA,GAAAZ,KAAK,CAACM,QAAQ,cAAAM,eAAA,wBAAAC,oBAAA,GAAdD,eAAA,CAAgBJ,IAAI,cAAAK,oBAAA,uBAApBA,oBAAA,CAAsBF,OAAO,KAAI;MAC5C,CAAC;IACH;EACF;EAEAD,WAAWA,CAAClB,KAAK,EAAEG,IAAI,EAAE;IACvB,IAAI,CAACH,KAAK,GAAGA,KAAK;IAClB,IAAI,CAACG,IAAI,GAAGA,IAAI;IAChBF,YAAY,CAACqB,OAAO,CAAC,OAAO,EAAEtB,KAAK,CAAC;IACpCC,YAAY,CAACqB,OAAO,CAAC,MAAM,EAAEhB,IAAI,CAACiB,SAAS,CAACpB,IAAI,CAAC,CAAC;EACpD;EAEAqB,cAAcA,CAAA,EAAG;IACf,OAAO,IAAI,CAACrB,IAAI;EAClB;EAEAsB,QAAQA,CAAA,EAAG;IACT,OAAO,IAAI,CAACzB,KAAK;EACnB;EAEA0B,eAAeA,CAAA,EAAG;IAChB,OAAO,CAAC,CAAC,IAAI,CAAC1B,KAAK,IAAI,CAAC,CAAC,IAAI,CAACG,IAAI;EACpC;EAEAwB,MAAMA,CAAA,EAAG;IACP,IAAI,CAAC3B,KAAK,GAAG,IAAI;IACjB,IAAI,CAACG,IAAI,GAAG,IAAI;IAChBF,YAAY,CAAC2B,UAAU,CAAC,OAAO,CAAC;IAChC3B,YAAY,CAAC2B,UAAU,CAAC,MAAM,CAAC;IAC/BC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,QAAQ;EACjC;AACF;AAEA,eAAe,IAAIjC,WAAW,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}