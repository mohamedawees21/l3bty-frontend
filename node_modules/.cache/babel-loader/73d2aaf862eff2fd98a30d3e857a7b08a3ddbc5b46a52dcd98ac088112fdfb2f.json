{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP\\\\OneDrive\\\\project\\\\l3bty-rental-system\\\\frontend\\\\src\\\\pages\\\\employee\\\\Rentals.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useCallback, useMemo } from 'react';\nimport { useAuth } from '../../context/AuthContext';\nimport api from '../../services/api';\nimport './Rentals.css';\n\n// ==================== ØªØ¹Ø±ÙŠÙ Ø¯Ø§Ù„Ø© showNotification ====================\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst showNotification = (type, message) => {\n  const oldNotifications = document.querySelectorAll('.custom-notification');\n  oldNotifications.forEach(n => {\n    n.style.animation = 'slideOutRight 0.3s ease';\n    setTimeout(() => n.remove(), 300);\n  });\n  const notification = document.createElement('div');\n  notification.className = 'custom-notification';\n  let backgroundColor, borderColor;\n  switch (type) {\n    case 'success':\n      backgroundColor = '#10b981';\n      borderColor = '#059669';\n      break;\n    case 'error':\n      backgroundColor = '#ef4444';\n      borderColor = '#dc2626';\n      break;\n    case 'warning':\n      backgroundColor = '#f59e0b';\n      borderColor = '#d97706';\n      break;\n    case 'info':\n    default:\n      backgroundColor = '#3b82f6';\n      borderColor = '#2563eb';\n      break;\n  }\n  notification.style.cssText = `\n    position: fixed;\n    top: 20px;\n    right: 20px;\n    padding: 15px 20px;\n    border-radius: 8px;\n    color: white;\n    background-color: ${backgroundColor};\n    font-weight: bold;\n    z-index: 9999;\n    min-width: 300px;\n    max-width: 500px;\n    box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n    animation: slideInRight 0.3s ease;\n    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n    direction: rtl;\n    border-left: 4px solid ${borderColor};\n  `;\n  notification.innerHTML = `\n    <div style=\"display: flex; justify-content: space-between; align-items: flex-start; gap: 10px;\">\n      <div style=\"flex: 1; white-space: pre-line;\">${message.replace(/<br>/g, '\\n')}</div>\n      <button onclick=\"this.parentElement.parentElement.remove()\" \n              style=\"background: rgba(255,255,255,0.2); \n                     border: none; \n                     color: white; \n                     font-size: 16px; \n                     cursor: pointer; \n                     padding: 0 8px;\n                     border-radius: 4px;\n                     height: 24px;\n                     line-height: 24px;\">\n        âœ•\n      </button>\n    </div>\n  `;\n  document.body.appendChild(notification);\n  setTimeout(() => {\n    if (notification.parentElement) {\n      notification.style.animation = 'slideOutRight 0.3s ease';\n      setTimeout(() => notification.remove(), 300);\n    }\n  }, 5000);\n  return notification;\n};\n\n// Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø£Ù†ÙŠÙ…ÙŠØ´Ù†\nif (!document.getElementById('notification-styles')) {\n  const style = document.createElement('style');\n  style.id = 'notification-styles';\n  style.textContent = `\n    @keyframes slideInRight {\n      from {\n        transform: translateX(100%);\n        opacity: 0;\n      }\n      to {\n        transform: translateX(0);\n        opacity: 1;\n      }\n    }\n    \n    @keyframes slideOutRight {\n      from {\n        transform: translateX(0);\n        opacity: 1;\n      }\n      to {\n        transform: translateX(100%);\n        opacity: 0;\n      }\n    }\n  `;\n  document.head.appendChild(style);\n}\n\n// ==================== Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© ====================\nconst validatePhone = phone => {\n  const phoneRegex = /^01[0-9]{9}$/;\n  return phoneRegex.test(phone);\n};\nconst formatCurrency = amount => {\n  const num = parseFloat(amount) || 0;\n  return new Intl.NumberFormat('ar-EG', {\n    style: 'currency',\n    currency: 'EGP',\n    minimumFractionDigits: 0,\n    maximumFractionDigits: 2\n  }).format(num);\n};\n\n// ==================== Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØµÙˆØ± Ø§Ù„Ù…Ø­Ø³Ù† ====================\nconst GAME_IMAGE_MAP = {\n  // Drift Car\n  'Driftcar': '/images/Driftcar.jpg',\n  'Drift Car': '/images/Driftcar.jpg',\n  'Ø¯Ø±ÙØª ÙƒØ§Ø±': '/images/Driftcar.jpg',\n  'Ø¯Ø±ÙŠÙØª ÙƒØ§Ø±': '/images/Driftcar.jpg',\n  'Ø¯Ø±ÙŠÙØª': '/images/Driftcar.jpg',\n  // Hoverboard\n  'Hoverboard': '/images/Hoverboard.jpg',\n  'Ù‡ÙˆÙØ± Ø¨ÙˆØ±Ø¯': '/images/Hoverboard.jpg',\n  'Ù‡ÙˆÙØ±Ø¨ÙˆØ±Ø¯': '/images/Hoverboard.jpg',\n  'Ù‡Ø§ÙØ± Ø¨ÙˆØ±Ø¯': '/images/Hoverboard.jpg',\n  'Ù‡ÙˆÙØ±': '/images/Hoverboard.jpg',\n  // Scooter\n  'Scooter': '/images/Scooter.jpg',\n  'Ø³ÙƒÙˆØªØ±': '/images/Scooter.jpg',\n  'Ø§Ø³ÙƒÙˆØªØ±': '/images/Scooter.jpg',\n  'Ø³ÙƒÙˆØªØ± ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠ': '/images/Scooter.jpg',\n  // Electric Car\n  'Electric car': '/images/Car.jpg',\n  'Electric Car': '/images/Car.jpg',\n  'ÙƒØ§Ø± ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠ': '/images/Car.jpg',\n  'Ø³ÙŠØ§Ø±Ø© ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ©': '/images/Car.jpg',\n  'Ø¹Ø±Ø¨Ø© ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ©': '/images/Car.jpg',\n  'Ø³ÙŠØ§Ø±Ø©': '/images/Car.jpg',\n  // Electric Motor\n  'Electric motor': '/images/Motor.jpg',\n  'Electric Motor': '/images/Motor.jpg',\n  'Ù…ÙˆØªÙˆØ³ÙŠÙƒÙ„ ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠ': '/images/Motor.jpg',\n  'Ù…ÙˆØªÙˆØ³ÙŠÙƒÙ„': '/images/Motor.jpg',\n  'Ø¯Ø±Ø§Ø¬Ø© Ù†Ø§Ø±ÙŠØ©': '/images/Motor.jpg',\n  'Ø¯Ø±Ø§Ø¬Ø©': '/images/Motor.jpg',\n  // Segway\n  'Segway': '/images/Segway.jpg',\n  'Ø³Ø¬ÙˆÙŠ': '/images/Segway.jpg',\n  'Ø³ÙŠØ¬ÙˆØ§ÙŠ': '/images/Segway.jpg',\n  // Crazy Car\n  'Crazy car': '/images/Ninebot.jpg',\n  'Crazy Car': '/images/Ninebot.jpg',\n  'ÙƒØ±Ø§Ø²ÙŠ ÙƒØ§Ø±': '/images/Ninebot.jpg',\n  'Ø³ÙŠØ§Ø±Ø© Ù…Ø¬Ù†ÙˆÙ†Ø©': '/images/Ninebot.jpg',\n  'ÙƒØ±Ø²ÙŠ ÙƒØ§Ø±': '/images/Ninebot.jpg',\n  'ÙƒØ±Ø§Ø²ÙŠ': '/images/Ninebot.jpg',\n  // Skate\n  'Skate': '/images/Skate.jpg',\n  'Ø³ÙƒÙŠØª': '/images/Skate.jpg',\n  'Ø³ÙƒÙŠØª ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠ': '/images/Skate.jpg',\n  'Ø³ÙƒÙŠØªØ¨ÙˆØ±Ø¯': '/images/Skate.jpg',\n  // Trampoline\n  'Trampoline': '/images/Trampoline.jpg',\n  'ØªØ±Ø§Ù…Ø¨ÙˆÙ„ÙŠÙ†': '/images/Trampoline.jpg',\n  'Ø§Ù„ØªØ±Ø§Ù…Ø¨ÙˆÙ„ÙŠÙ†': '/images/Trampoline.jpg',\n  'ØªØ±Ù…Ø¨ÙˆÙ„ÙŠÙ†': '/images/Trampoline.jpg',\n  // Simulator\n  'Simulator': '/images/Simulator.jpg',\n  'Ù…Ø­Ø§ÙƒÙŠ': '/images/Simulator.jpg',\n  'Ø³ÙŠÙ…ÙˆÙ„ÙŠØªØ±': '/images/Simulator.jpg',\n  'Ù…Ø­Ø§ÙƒØ§Ø©': '/images/Simulator.jpg',\n  // Harley\n  'Harlly': '/images/harley.jpg',\n  'harley': '/images/harley.jpg',\n  'Harley': '/images/harley.jpg',\n  'Ù‡Ø§Ø±Ù„ÙŠ': '/images/harley.jpg',\n  'Ù‡Ø§Ø±Ù„ÙŠØ²': '/images/harley.jpg',\n  'harlly': '/images/harley.jpg',\n  'Ù‡Ø§Ø±ÙŠÙ„ÙŠ': '/images/harley.jpg',\n  'Ø¯Ø±Ø§Ø¬Ø© Ù‡Ø§Ø±Ù„ÙŠ': '/images/harley.jpg',\n  'Ù‡Ø§Ø±Ù„ÙŠ Ø¯Ø§ÙŠÙØ¯Ø³ÙˆÙ†': '/images/harley.jpg',\n  // Default images for common patterns\n  'car': '/images/Car.jpg',\n  'ÙƒØ§Ø±': '/images/Car.jpg',\n  'motor': '/images/Motor.jpg',\n  'Ù…ÙˆØªÙˆØ±': '/images/Motor.jpg',\n  'board': '/images/Hoverboard.jpg',\n  'Ø¨ÙˆØ±Ø¯': '/images/Hoverboard.jpg'\n};\nconst getGameImageUrl = game => {\n  if (!game) return '/images/default-game.jpg';\n\n  // Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø®ØªÙ„ÙØ© Ù„Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„ØµÙˆØ±Ø©\n  const imageSources = [game.image_url, game.external_image_url, game.thumbnail_url, game.image, game.image_path, game.photo_url, game.photo];\n\n  // Ø£ÙˆÙ„Ø§Ù‹: Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ ØµÙˆØ±Ø© ØµØ§Ù„Ø­Ø© Ù…Ù† Ø§Ù„Ø­Ù‚ÙˆÙ„\n  for (const imageUrl of imageSources) {\n    if (imageUrl) {\n      // ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ù…Ø³Ø§Ø±\n      let cleanUrl = imageUrl.toString().trim();\n\n      // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø±Ø§Ø¨Ø· ÙƒØ§Ù…Ù„\n      if (cleanUrl.startsWith('http://') || cleanUrl.startsWith('https://')) {\n        return cleanUrl;\n      }\n\n      // Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…Ø³Ø§Ø±Ø§Ù‹ Ù…Ø·Ù„Ù‚Ø§Ù‹\n      if (cleanUrl.startsWith('/')) {\n        return cleanUrl;\n      }\n\n      // Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…Ø³Ø§Ø±Ø§Ù‹ Ù†Ø³Ø¨ÙŠØ§Ù‹\n      if (cleanUrl.startsWith('./') || cleanUrl.startsWith('../')) {\n        return cleanUrl;\n      }\n\n      // Ø¥Ø°Ø§ ÙƒØ§Ù† ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø§Ù…ØªØ¯Ø§Ø¯ ØµÙˆØ±Ø©\n      if (/\\.(jpg|jpeg|png|gif|webp|svg)$/i.test(cleanUrl)) {\n        // Ø¥Ø¶Ø§ÙØ© / Ø¥Ø°Ø§ Ù„Ù… ØªÙƒÙ† Ù…ÙˆØ¬ÙˆØ¯Ø©\n        if (!cleanUrl.startsWith('/')) {\n          return `/${cleanUrl}`;\n        }\n        return cleanUrl;\n      }\n    }\n  }\n\n  // Ø«Ø§Ù†ÙŠØ§Ù‹: Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø®Ø±ÙŠØ·Ø© Ø§Ù„ØµÙˆØ± Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ø³Ù… Ø§Ù„Ù„Ø¹Ø¨Ø©\n  const gameName = (game.name || game.game_name || '').trim().toLowerCase();\n  if (gameName) {\n    for (const [key, imagePath] of Object.entries(GAME_IMAGE_MAP)) {\n      const keyLower = key.toLowerCase();\n\n      // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† ØªØ·Ø§Ø¨Ù‚ ÙƒØ§Ù…Ù„ Ø£Ùˆ Ø¬Ø²Ø¦ÙŠ\n      if (gameName.includes(keyLower) || keyLower.includes(gameName)) {\n        console.log(`ðŸ–¼ï¸ ØªØ·Ø§Ø¨Ù‚ ØµÙˆØ±Ø©: \"${gameName}\" -> \"${key}\" -> ${imagePath}`);\n        return imagePath;\n      }\n    }\n\n    // Ø§Ù„Ø¨Ø­Ø« Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©\n    const keywords = [{\n      key: 'Ø¯Ø±ÙØª',\n      image: '/images/Driftcar.jpg'\n    }, {\n      key: 'Ø¯Ø±ÙŠÙØª',\n      image: '/images/Driftcar.jpg'\n    }, {\n      key: 'ÙƒØ§Ø±',\n      image: '/images/Car.jpg'\n    }, {\n      key: 'Ø³ÙŠØ§Ø±Ø©',\n      image: '/images/Car.jpg'\n    }, {\n      key: 'Ù…ÙˆØªÙˆØ³ÙŠÙƒÙ„',\n      image: '/images/Motor.jpg'\n    }, {\n      key: 'Ø¯Ø±Ø§Ø¬Ø©',\n      image: '/images/Motor.jpg'\n    }, {\n      key: 'Ù‡ÙˆÙØ±',\n      image: '/images/Hoverboard.jpg'\n    }, {\n      key: 'Ø³ÙƒÙˆØªØ±',\n      image: '/images/Scooter.jpg'\n    }, {\n      key: 'Ø³ÙƒÙŠØª',\n      image: '/images/Skate.jpg'\n    }, {\n      key: 'ØªØ±Ø§Ù…Ø¨ÙˆÙ„ÙŠÙ†',\n      image: '/images/Trampoline.jpg'\n    }, {\n      key: 'Ù…Ø­Ø§ÙƒÙŠ',\n      image: '/images/Simulator.jpg'\n    }, {\n      key: 'Ù‡Ø§Ø±Ù„ÙŠ',\n      image: '/images/harley.jpg'\n    }];\n    for (const keyword of keywords) {\n      if (gameName.includes(keyword.key)) {\n        console.log(`ðŸ” ØªØ·Ø§Ø¨Ù‚ ÙƒÙ„Ù…Ø© Ù…ÙØªØ§Ø­ÙŠØ©: \"${gameName}\" -> \"${keyword.key}\" -> ${keyword.image}`);\n        return keyword.image;\n      }\n    }\n  }\n\n  // Ø«Ø§Ù„Ø«Ø§Ù‹: Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©\n  console.log(`â“ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ ØµÙˆØ±Ø© Ù„Ù„Ø¹Ø¨Ø©: ${gameName}ØŒ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ`);\n  return '/images/default-game.jpg';\n};\nconst handleImageError = e => {\n  console.log(`âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø©: ${e.target.src}`);\n  e.target.onerror = null; // Ù…Ù†Ø¹ Ø§Ù„ØªÙƒØ±Ø§Ø±\n\n  // Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ù…Ù† src Ø§Ù„Ø¨Ø¯ÙŠÙ„\n  const gameName = e.target.alt || '';\n  let fallbackImage = '/images/default-game.jpg';\n\n  // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† ØµÙˆØ±Ø© Ø¨Ø¯ÙŠÙ„Ø© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø§Ø³Ù…\n  if (gameName) {\n    const gameNameLower = gameName.toLowerCase();\n    for (const [key, imagePath] of Object.entries(GAME_IMAGE_MAP)) {\n      if (gameNameLower.includes(key.toLowerCase())) {\n        fallbackImage = imagePath;\n        break;\n      }\n    }\n  }\n\n  // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ù…Ø®ØªÙ„ÙØ© Ø¹Ù† Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©ØŒ Ø­Ø§ÙˆÙ„ ØªØ­Ù…ÙŠÙ„Ù‡Ø§\n  if (e.target.src !== fallbackImage && !e.target.src.includes('default-game.jpg')) {\n    console.log(`ðŸ”„ Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ­Ù…ÙŠÙ„ ØµÙˆØ±Ø© Ø¨Ø¯ÙŠÙ„Ø©: ${fallbackImage}`);\n    e.target.src = fallbackImage;\n  } else {\n    // Ø¥Ø°Ø§ ÙØ´Ù„Øª Ø£ÙŠØ¶Ø§Ù‹ØŒ Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©\n    e.target.src = '/images/default-game.jpg';\n    e.target.classList.add('image-error');\n  }\n};\n\n// ==================== Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ ====================\nconst storage = {\n  // ØªØ®Ø²ÙŠÙ† Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø© Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ø§Ù„Ø´ÙŠÙØª\n  saveCompletedRentals: (shiftId, rentals) => {\n    if (!shiftId) return;\n    try {\n      const key = `completed_rentals_shift_${shiftId}`;\n      const data = {\n        shiftId,\n        rentals,\n        timestamp: Date.now(),\n        expiry: Date.now() + 7 * 24 * 60 * 60 * 1000 // 7 Ø£ÙŠØ§Ù…\n      };\n      localStorage.setItem(key, JSON.stringify(data));\n      console.log(`ðŸ’¾ ØªÙ… Ø­ÙØ¸ ${rentals.length} ØªØ£Ø¬ÙŠØ± Ù…ÙƒØªÙ…Ù„ Ù„Ù„Ø´ÙŠÙØª ${shiftId}`);\n    } catch (error) {\n      console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©:', error);\n    }\n  },\n  // Ø¬Ù„Ø¨ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø© Ù„Ù„Ø´ÙŠÙØª\n  getCompletedRentals: shiftId => {\n    if (!shiftId) return [];\n    try {\n      const key = `completed_rentals_shift_${shiftId}`;\n      const data = localStorage.getItem(key);\n      if (data) {\n        const parsed = JSON.parse(data);\n        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (Ø£Ù‚Ù„ Ù…Ù† 7 Ø£ÙŠØ§Ù…)\n        if (parsed.expiry > Date.now()) {\n          console.log(`ðŸ“‚ ØªÙ… Ø¬Ù„Ø¨ ${parsed.rentals.length} ØªØ£Ø¬ÙŠØ± Ù…ÙƒØªÙ…Ù„ Ù…Ù† Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ Ù„Ù„Ø´ÙŠÙØª ${shiftId}`);\n          return parsed.rentals;\n        } else {\n          // Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù†ØªÙ‡ÙŠØ©\n          localStorage.removeItem(key);\n          console.log(`ðŸ—‘ï¸ ØªÙ… Ø­Ø°Ù Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…Ù†ØªÙ‡ÙŠØ© Ù„Ù„Ø´ÙŠÙØª ${shiftId}`);\n        }\n      }\n    } catch (error) {\n      console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©:', error);\n    }\n    return [];\n  },\n  // Ø­Ø°Ù Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø© Ù„Ù„Ø´ÙŠÙØª\n  clearCompletedRentals: shiftId => {\n    if (!shiftId) return;\n    try {\n      const key = `completed_rentals_shift_${shiftId}`;\n      localStorage.removeItem(key);\n      console.log(`ðŸ§¹ ØªÙ… Ø­Ø°Ù Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø© Ù„Ù„Ø´ÙŠÙØª ${shiftId}`);\n    } catch (error) {\n      console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©:', error);\n    }\n  },\n  // ØªÙ†Ø¸ÙŠÙ ÙƒÙ„ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù‚Ø¯ÙŠÙ…\n  cleanupOldData: () => {\n    try {\n      const now = Date.now();\n      for (let i = 0; i < localStorage.length; i++) {\n        const key = localStorage.key(i);\n        if (key && key.startsWith('completed_rentals_shift_')) {\n          try {\n            const data = JSON.parse(localStorage.getItem(key));\n            if (data && data.expiry && data.expiry < now) {\n              localStorage.removeItem(key);\n              console.log(`ðŸ§¹ ØªÙ… ØªÙ†Ø¸ÙŠÙ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù†ØªÙ‡ÙŠØ©: ${key}`);\n            }\n          } catch (e) {\n            // ØªØ¬Ø§Ù‡Ù„ Ø§Ù„Ù…ÙØ§ØªÙŠØ­ Ø§Ù„ØªØ§Ù„ÙØ©\n          }\n        }\n      }\n    } catch (error) {\n      console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©:', error);\n    }\n  }\n};\n\n// ==================== Ù…ÙƒÙˆÙ†Ø§Øª ÙØ±Ø¹ÙŠØ© ====================\n// ... (Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª Ø§Ù„ÙØ±Ø¹ÙŠØ© ØªØ¨Ù‚Ù‰ ÙƒÙ…Ø§ Ù‡ÙŠ QuickActionsMenu, RentalActionsDropdown, etc.)\n// Ø£Ø¯Ø±Ø¬ Ù‡Ù†Ø§ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª Ø§Ù„ÙØ±Ø¹ÙŠØ© Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© Ø¨Ø¯ÙˆÙ† ØªØºÙŠÙŠØ±\n\n// ==================== Ù…ÙƒÙˆÙ† Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªØ£Ø¬ÙŠØ± Ø§Ù„Ù…Ø­Ø³Ù†Ø© ====================\nconst EnhancedRentalListModal = ({\n  show,\n  onClose,\n  games,\n  selectedGames: initialSelectedGames,\n  selectedGameQuantities: initialQuantities,\n  onStartRental,\n  currentShift\n}) => {\n  _s();\n  const [customerName, setCustomerName] = useState('');\n  const [customerPhone, setCustomerPhone] = useState('');\n  const [customerNotes, setCustomerNotes] = useState('');\n  const [paymentMethod, setPaymentMethod] = useState('cash');\n  const [rentalList, setRentalList] = useState([]);\n  const rentalTypes = [{\n    id: 'fixed',\n    name: 'Ù…Ø¯Ø© Ø«Ø§Ø¨ØªØ©',\n    icon: 'â°'\n  }, {\n    id: 'open',\n    name: 'ÙˆÙ‚Øª Ù…ÙØªÙˆØ­',\n    icon: 'âˆž'\n  }, {\n    id: 'custom',\n    name: 'Ù…Ø®ØµØµ',\n    icon: 'âš™ï¸'\n  }];\n  const timeOptions = [{\n    minutes: 15,\n    label: '15 Ø¯Ù‚ÙŠÙ‚Ø©',\n    priceFactor: 1\n  }, {\n    minutes: 30,\n    label: '30 Ø¯Ù‚ÙŠÙ‚Ø©',\n    priceFactor: 2\n  }, {\n    minutes: 45,\n    label: '45 Ø¯Ù‚ÙŠÙ‚Ø©',\n    priceFactor: 3\n  }, {\n    minutes: 60,\n    label: '1 Ø³Ø§Ø¹Ø©',\n    priceFactor: 4\n  }, {\n    minutes: 90,\n    label: '1.5 Ø³Ø§Ø¹Ø©',\n    priceFactor: 6\n  }, {\n    minutes: 120,\n    label: '2 Ø³Ø§Ø¹Ø§Øª',\n    priceFactor: 8\n  }, {\n    minutes: 180,\n    label: '3 Ø³Ø§Ø¹Ø§Øª',\n    priceFactor: 12\n  }, {\n    minutes: 240,\n    label: '4 Ø³Ø§Ø¹Ø§Øª',\n    priceFactor: 16\n  }];\n  useEffect(() => {\n    if (show && initialSelectedGames.length > 0) {\n      const initialRentalList = initialSelectedGames.map(game => {\n        const quantity = initialQuantities[game.id] || 1;\n\n        // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¯Ø§Ù„Ø© Ø§Ù„Ù…Ø­Ø³Ù†Ø©\n        const imageUrl = getGameImageUrl(game);\n        console.log(`ðŸ–¼ï¸ Ù…Ø¹Ø§Ù„Ø¬Ø© ØµÙˆØ±Ø© Ø§Ù„Ù„Ø¹Ø¨Ø©: ${game.name} -> ${imageUrl}`);\n        return {\n          id: `rental_${game.id}_${Date.now()}`,\n          gameId: game.id,\n          gameName: game.name,\n          quantity: quantity,\n          rentalType: 'fixed',\n          selectedTime: 15,\n          customMinutes: 15,\n          pricePer15min: game.price_per_15min || 100,\n          imageUrl: imageUrl,\n          isActive: true,\n          notes: '',\n          rentalNumber: `TEMP-${Date.now()}-${game.id}`,\n          // Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© Ù„Ù„Ø¹Ø¨Ø©\n          gameData: game\n        };\n      });\n      setRentalList(initialRentalList);\n    }\n  }, [show, initialSelectedGames, initialQuantities]);\n  const addGameToRentalList = game => {\n    if (!game) return;\n    const existingRental = rentalList.find(r => r.gameId === game.id);\n    if (existingRental) {\n      updateRentalQuantity(existingRental.id, existingRental.quantity + 1);\n    } else {\n      const imageUrl = getGameImageUrl(game);\n      console.log(`âž• Ø¥Ø¶Ø§ÙØ© Ù„Ø¹Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø©: ${game.name} -> ${imageUrl}`);\n      const newRental = {\n        id: `rental_${game.id}_${Date.now()}_${Math.random()}`,\n        gameId: game.id,\n        gameName: game.name,\n        quantity: 1,\n        rentalType: 'fixed',\n        selectedTime: 15,\n        customMinutes: 15,\n        pricePer15min: game.price_per_15min || 100,\n        imageUrl: imageUrl,\n        isActive: true,\n        notes: '',\n        rentalNumber: `TEMP-${Date.now()}-${game.id}`,\n        gameData: game\n      };\n      setRentalList(prev => [...prev, newRental]);\n    }\n  };\n\n  // ... (Ø¨Ø§Ù‚ÙŠ Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…ÙƒÙˆÙ† ØªØ¨Ù‚Ù‰ ÙƒÙ…Ø§ Ù‡ÙŠ)\n\n  const handleStartEnhancedRental = async () => {\n    if (!customerName || !customerPhone) {\n      showNotification('error', 'Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„ ÙˆØ±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ');\n      return;\n    }\n    if (!validatePhone(customerPhone)) {\n      showNotification('error', 'Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ ØºÙŠØ± ØµØ­ÙŠØ­. ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† 11 Ø±Ù‚Ù…Ø§Ù‹ ÙˆÙŠØ¨Ø¯Ø£ Ø¨Ù€ 01');\n      return;\n    }\n    if (rentalList.length === 0) {\n      showNotification('error', 'Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¶Ø§ÙØ© Ø£Ù„Ø¹Ø§Ø¨ Ø¥Ù„Ù‰ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªØ£Ø¬ÙŠØ±');\n      return;\n    }\n    const invalidRentals = rentalList.filter(rental => rental.rentalType === 'custom' && (rental.customMinutes < 1 || rental.customMinutes > 480));\n    if (invalidRentals.length > 0) {\n      showNotification('error', 'Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ø§Ù„Ø£ÙˆÙ‚Ø§Øª Ø§Ù„Ù…Ø®ØµØµØ© Ø¨ÙŠÙ† 1 Ùˆ 480 Ø¯Ù‚ÙŠÙ‚Ø©');\n      return;\n    }\n    const totalFixedAmount = calculateTotalPrice();\n    const openTimeRentals = rentalList.filter(r => r.rentalType === 'open');\n    const fixedTimeRentals = rentalList.filter(r => r.rentalType !== 'open');\n    let confirmMessage = `\nðŸŽ¯ Ø¨Ø¯Ø¡ ØªØ£Ø¬ÙŠØ± Ø¬Ù…Ø§Ø¹ÙŠ\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nðŸ‘¤ Ø§Ù„Ø¹Ù…ÙŠÙ„: ${customerName}\nðŸ“± Ø§Ù„Ù‡Ø§ØªÙ: ${customerPhone}\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nðŸ“‹ Ù…Ù„Ø®Øµ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª:\n`;\n    rentalList.forEach((rental, index) => {\n      const duration = formatRentalDuration(rental);\n      const price = rental.rentalType === 'open' ? 'â³ Ø¹Ù†Ø¯ Ø§Ù„Ø¥Ù†Ù‡Ø§Ø¡' : `${formatCurrency(calculateRentalPrice(rental))}`;\n      confirmMessage += `\n${index + 1}. ${rental.gameName} Ã— ${rental.quantity}\n   â±ï¸  ${duration}\n   ðŸ’°  ${price}\n   ${rental.notes ? `ðŸ“  ${rental.notes}` : ''}\n`;\n    });\n    confirmMessage += `\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nðŸ’° Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¯ÙÙˆØ¹ Ø§Ù„Ø¢Ù†: ${formatCurrency(totalFixedAmount)}\nâ³ ÙˆÙ‚Øª Ù…ÙØªÙˆØ­: ${openTimeRentals.length} Ù„Ø¹Ø¨Ø©\nâ° ÙˆÙ‚Øª Ø«Ø§Ø¨Øª: ${fixedTimeRentals.length} Ù„Ø¹Ø¨Ø©\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nÙ‡Ù„ ØªØ±ÙŠØ¯ Ø¨Ø¯Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ±ØŸ`;\n    if (!window.confirm(confirmMessage)) {\n      return;\n    }\n    if (onStartRental) {\n      const rentalData = {\n        customerName,\n        customerPhone,\n        customerNotes,\n        paymentMethod,\n        rentalList,\n        totalFixedAmount\n      };\n      await onStartRental(rentalData);\n    }\n  };\n  const resetForm = () => {\n    setCustomerName('');\n    setCustomerPhone('');\n    setCustomerNotes('');\n    setPaymentMethod('cash');\n    setRentalList([]);\n  };\n  const handleClose = () => {\n    if (customerName || customerPhone || rentalList.length > 0) {\n      if (window.confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥ØºÙ„Ø§Ù‚ Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ£Ø¬ÙŠØ±ØŸ Ø³ÙŠØªÙ… ÙÙ‚Ø¯Ø§Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¯Ø®Ù„Ø©.')) {\n        resetForm();\n        onClose();\n      }\n    } else {\n      resetForm();\n      onClose();\n    }\n  };\n  if (!show) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"rentals-page-modal-overlay\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"rentals-page-modal enhanced-rental-modal\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"rentals-page-modal-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"rentals-page-header-icon\",\n            children: \"\\uD83D\\uDE80\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 628,\n            columnNumber: 13\n          }, this), \"\\u0628\\u062F\\u0621 \\u062A\\u0623\\u062C\\u064A\\u0631 \\u062C\\u062F\\u064A\\u062F - \\u0627\\u0644\\u0646\\u0638\\u0627\\u0645 \\u0627\\u0644\\u0645\\u062D\\u0633\\u0646\", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"rentals-page-badge-new\",\n            children: \"\\u062C\\u062F\\u064A\\u062F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 630,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 627,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleClose,\n          className: \"rentals-page-close-btn\",\n          children: \"\\u2715\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 632,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 626,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"rentals-page-modal-body enhanced-modal-body\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"enhanced-customer-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"enhanced-section-title\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"enhanced-section-icon\",\n              children: \"\\uD83D\\uDC64\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 641,\n              columnNumber: 15\n            }, this), \"\\u0645\\u0639\\u0644\\u0648\\u0645\\u0627\\u062A \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 640,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"enhanced-form-grid\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"enhanced-form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644 *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 646,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: customerName,\n                onChange: e => setCustomerName(e.target.value),\n                placeholder: \"\\u0623\\u062F\\u062E\\u0644 \\u0627\\u0633\\u0645 \\u0627\\u0644\\u0639\\u0645\\u064A\\u0644...\",\n                className: \"enhanced-form-input\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 647,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 645,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"enhanced-form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0647\\u0627\\u062A\\u0641 *\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 657,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"tel\",\n                value: customerPhone,\n                onChange: e => {\n                  const value = e.target.value.replace(/\\D/g, \"\").slice(0, 11);\n                  setCustomerPhone(value);\n                },\n                placeholder: \"01XXXXXXXXX\",\n                className: \"enhanced-form-input\",\n                maxLength: 11\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 658,\n                columnNumber: 17\n              }, this), customerPhone && customerPhone.length !== 11 && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"enhanced-error-text\",\n                children: \"\\u064A\\u062C\\u0628 \\u0623\\u0646 \\u064A\\u0643\\u0648\\u0646 11 \\u0631\\u0642\\u0645\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 670,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 656,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"enhanced-form-group full-width\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A \\u0639\\u0627\\u0645\\u0629 (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 675,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                value: customerNotes,\n                onChange: e => setCustomerNotes(e.target.value),\n                placeholder: \"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A \\u0625\\u0636\\u0627\\u0641\\u064A\\u0629 \\u0644\\u0644\\u0639\\u0645\\u064A\\u0644 \\u0623\\u0648 \\u0627\\u0644\\u062A\\u0623\\u062C\\u064A\\u0631...\",\n                className: \"enhanced-form-textarea\",\n                rows: \"2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 676,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 674,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 644,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 639,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"enhanced-rental-list-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"enhanced-section-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"enhanced-section-title\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"enhanced-section-icon\",\n                children: \"\\uD83D\\uDCCB\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 691,\n                columnNumber: 17\n              }, this), \"\\u0642\\u0627\\u0626\\u0645\\u0629 \\u0627\\u0644\\u062A\\u0623\\u062C\\u064A\\u0631\", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"enhanced-list-count\",\n                children: [\"(\", rentalList.length, \" \\u0644\\u0639\\u0628\\u0629)\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 693,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 690,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"enhanced-section-actions\",\n              children: /*#__PURE__*/_jsxDEV(\"select\", {\n                className: \"enhanced-add-game-select\",\n                onChange: e => {\n                  const gameId = e.target.value;\n                  if (gameId) {\n                    const game = games.find(g => g.id == gameId);\n                    if (game) addGameToRentalList(game);\n                    e.target.value = '';\n                  }\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  children: \"\\u2795 \\u0625\\u0636\\u0627\\u0641\\u0629 \\u0644\\u0639\\u0628\\u0629...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 708,\n                  columnNumber: 19\n                }, this), games.filter(game => !rentalList.some(r => r.gameId === game.id)).map(game => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: game.id,\n                  children: [game.name, \" - \", formatCurrency(game.price_per_15min || 100), \" / 15 \\u062F\\u0642\\u064A\\u0642\\u0629\"]\n                }, game.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 712,\n                  columnNumber: 23\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 697,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 696,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 689,\n            columnNumber: 13\n          }, this), rentalList.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"enhanced-empty-list\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"empty-list-icon\",\n              children: \"\\uD83D\\uDCCB\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 723,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"\\u0642\\u0627\\u0626\\u0645\\u0629 \\u0627\\u0644\\u062A\\u0623\\u062C\\u064A\\u0631 \\u0641\\u0627\\u0631\\u063A\\u0629\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 724,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"empty-list-hint\",\n              children: \"\\u0627\\u062E\\u062A\\u0631 \\u0623\\u0644\\u0639\\u0627\\u0628\\u0627\\u064B \\u0645\\u0646 \\u0627\\u0644\\u0642\\u0627\\u0626\\u0645\\u0629 \\u0623\\u0639\\u0644\\u0627\\u0647 \\u0623\\u0648 \\u0645\\u0646 \\u0627\\u0644\\u0634\\u0628\\u0643\\u0629 \\u0627\\u0644\\u0631\\u0626\\u064A\\u0633\\u064A\\u0629\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 725,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 722,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"enhanced-rental-list\",\n            children: rentalList.map(rental => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"enhanced-rental-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"rental-item-header\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"rental-game-info\",\n                  children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                    src: rental.imageUrl,\n                    alt: rental.gameName,\n                    className: \"rental-game-image\",\n                    onError: handleImageError,\n                    crossOrigin: \"anonymous\",\n                    loading: \"lazy\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 733,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"rental-game-details\",\n                    children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                      children: rental.gameName\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 742,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"rental-price-info\",\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        children: [formatCurrency(rental.pricePer15min), \" / 15 \\u062F\\u0642\\u064A\\u0642\\u0629\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 744,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"rental-unlimited-badge\",\n                        children: \"\\u2705 \\u0645\\u062A\\u0627\\u062D \\u062F\\u0627\\u0626\\u0645\\u0627\\u064B\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 745,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 743,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 741,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 732,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"rental-item-actions\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"rental-quantity-control\",\n                    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => updateRentalQuantity(rental.id, rental.quantity - 1),\n                      className: \"quantity-btn minus\",\n                      children: \"-\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 752,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"quantity-value\",\n                      children: rental.quantity\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 758,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => updateRentalQuantity(rental.id, rental.quantity + 1),\n                      className: \"quantity-btn plus\",\n                      children: \"+\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 759,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 751,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => removeGameFromRentalList(rental.id),\n                    className: \"remove-rental-btn\",\n                    title: \"\\u0625\\u0632\\u0627\\u0644\\u0629 \\u0645\\u0646 \\u0627\\u0644\\u0642\\u0627\\u0626\\u0645\\u0629\",\n                    children: \"\\uD83D\\uDDD1\\uFE0F\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 767,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 750,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 731,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"rental-item-body\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"rental-type-selector\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"\\u0646\\u0648\\u0639 \\u0627\\u0644\\u062A\\u0623\\u062C\\u064A\\u0631:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 779,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"rental-type-buttons\",\n                    children: rentalTypes.map(type => /*#__PURE__*/_jsxDEV(\"button\", {\n                      className: `rental-type-btn ${rental.rentalType === type.id ? 'active' : ''}`,\n                      onClick: () => updateRentalType(rental.id, type.id),\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"type-icon\",\n                        children: type.icon\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 787,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"type-name\",\n                        children: type.name\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 788,\n                        columnNumber: 31\n                      }, this)]\n                    }, type.id, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 782,\n                      columnNumber: 29\n                    }, this))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 780,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 778,\n                  columnNumber: 23\n                }, this), rental.rentalType === 'fixed' && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"rental-time-selector\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"\\u0627\\u062E\\u062A\\u0631 \\u0627\\u0644\\u0645\\u062F\\u0629:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 796,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"time-options-grid\",\n                    children: timeOptions.map(option => /*#__PURE__*/_jsxDEV(\"button\", {\n                      className: `time-option-btn ${rental.selectedTime === option.minutes ? 'active' : ''}`,\n                      onClick: () => updateRentalTime(rental.id, option.minutes),\n                      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"time-label\",\n                        children: option.label\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 804,\n                        columnNumber: 33\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"time-price\",\n                        children: formatCurrency(rental.pricePer15min * option.priceFactor * rental.quantity)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 805,\n                        columnNumber: 33\n                      }, this)]\n                    }, option.minutes, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 799,\n                      columnNumber: 31\n                    }, this))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 797,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 795,\n                  columnNumber: 25\n                }, this), rental.rentalType === 'custom' && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"rental-custom-time\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"\\u0627\\u0644\\u0645\\u062F\\u0629 \\u0627\\u0644\\u0645\\u062E\\u0635\\u0635\\u0629 (\\u0628\\u0627\\u0644\\u062F\\u0642\\u0627\\u0626\\u0642):\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 816,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"custom-time-controls\",\n                    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => updateCustomTime(rental.id, rental.customMinutes - 15),\n                      className: \"time-adjust-btn\",\n                      children: \"-15\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 818,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"number\",\n                      min: \"1\",\n                      max: \"480\",\n                      value: rental.customMinutes,\n                      onChange: e => updateCustomTime(rental.id, parseInt(e.target.value) || 1),\n                      className: \"custom-time-input\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 824,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      onClick: () => updateCustomTime(rental.id, rental.customMinutes + 15),\n                      className: \"time-adjust-btn\",\n                      children: \"+15\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 832,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"custom-time-display\",\n                      children: [\"\\u2248 \", Math.floor(rental.customMinutes / 60), \" \\u0633\\u0627\\u0639\\u0629 \\u0648 \", rental.customMinutes % 60, \" \\u062F\\u0642\\u064A\\u0642\\u0629\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 838,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 817,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 815,\n                  columnNumber: 25\n                }, this), rental.rentalType === 'open' && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"rental-open-time-info\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"open-time-badge\",\n                    children: \"\\u23F3 \\u0648\\u0642\\u062A \\u0645\\u0641\\u062A\\u0648\\u062D\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 847,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"open-time-description\",\n                    children: \"\\u0627\\u0644\\u062F\\u0641\\u0639 \\u0639\\u0646\\u062F \\u0625\\u0646\\u0647\\u0627\\u0621 \\u0627\\u0644\\u062A\\u0623\\u062C\\u064A\\u0631 \\u062D\\u0633\\u0628 \\u0627\\u0644\\u0645\\u062F\\u0629 \\u0627\\u0644\\u0641\\u0639\\u0644\\u064A\\u0629\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 848,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 846,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"rental-notes\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    children: \"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A \\u062E\\u0627\\u0635\\u0629 \\u0628\\u0647\\u0630\\u0647 \\u0627\\u0644\\u0644\\u0639\\u0628\\u0629:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 855,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    value: rental.notes,\n                    onChange: e => updateRentalNotes(rental.id, e.target.value),\n                    placeholder: \"\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A \\u062E\\u0627\\u0635\\u0629 \\u0628\\u0647\\u0630\\u0647 \\u0627\\u0644\\u0644\\u0639\\u0628\\u0629 (\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)...\",\n                    className: \"rental-notes-input\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 856,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 854,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"rental-price-summary\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"rental-price-row\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      children: \"\\u0627\\u0644\\u0645\\u062F\\u0629:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 867,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"rental-duration\",\n                      children: formatRentalDuration(rental)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 868,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 866,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"rental-price-row\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      children: \"\\u0627\\u0644\\u0633\\u0639\\u0631:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 871,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: `rental-price ${rental.rentalType === 'open' ? 'open-price' : ''}`,\n                      children: rental.rentalType === 'open' ? 'â³ Ø¹Ù†Ø¯ Ø§Ù„Ø¥Ù†Ù‡Ø§Ø¡' : formatCurrency(calculateRentalPrice(rental))\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 872,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 870,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 865,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 777,\n                columnNumber: 21\n              }, this)]\n            }, rental.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 730,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 728,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 688,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"enhanced-summary-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"enhanced-section-title\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"enhanced-section-icon\",\n              children: \"\\uD83D\\uDCB0\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 890,\n              columnNumber: 15\n            }, this), \"\\u0627\\u0644\\u0645\\u0644\\u062E\\u0635 \\u0627\\u0644\\u0646\\u0647\\u0627\\u0626\\u064A\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 889,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"enhanced-summary-content\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"summary-stats\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"summary-stat\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"stat-label\",\n                  children: \"\\u0639\\u062F\\u062F \\u0627\\u0644\\u0623\\u0644\\u0639\\u0627\\u0628:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 897,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"stat-value\",\n                  children: rentalList.length\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 898,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 896,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"summary-stat\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"stat-label\",\n                  children: \"\\u0627\\u0644\\u0642\\u0637\\u0639 \\u0627\\u0644\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A\\u0629:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 901,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"stat-value\",\n                  children: rentalList.reduce((sum, rental) => sum + rental.quantity, 0)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 902,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 900,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"summary-stat\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"stat-label\",\n                  children: \"\\u0648\\u0642\\u062A \\u0645\\u0641\\u062A\\u0648\\u062D:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 907,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"stat-value\",\n                  children: rentalList.filter(r => r.rentalType === 'open').length\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 908,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 906,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"summary-stat\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"stat-label\",\n                  children: \"\\u0648\\u0642\\u062A \\u062B\\u0627\\u0628\\u062A:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 913,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"stat-value\",\n                  children: rentalList.filter(r => r.rentalType !== 'open').length\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 914,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 912,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 895,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"summary-payment\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"payment-method-selector\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"\\u0637\\u0631\\u064A\\u0642\\u0629 \\u0627\\u0644\\u062F\\u0641\\u0639:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 922,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                  value: paymentMethod,\n                  onChange: e => setPaymentMethod(e.target.value),\n                  className: \"payment-method-select\",\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"cash\",\n                    children: \"\\uD83D\\uDCB5 \\u0643\\u0627\\u0634\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 928,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"card\",\n                    children: \"\\uD83D\\uDCB3 \\u0628\\u0637\\u0627\\u0642\\u0629\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 929,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"vodafone\",\n                    children: \"\\uD83D\\uDCF1 \\u0641\\u0648\\u062F\\u0627\\u0641\\u0648\\u0646 \\u0643\\u0627\\u0634\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 930,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 923,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 921,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"total-amount-display\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"total-amount-row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"\\u0627\\u0644\\u0645\\u0628\\u0644\\u063A \\u0627\\u0644\\u0645\\u062F\\u0641\\u0648\\u0639 \\u0627\\u0644\\u0622\\u0646:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 936,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"total-amount-value\",\n                    children: formatCurrency(calculateTotalPrice())\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 937,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 935,\n                  columnNumber: 19\n                }, this), rentalList.some(r => r.rentalType === 'open') && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"open-time-notice\",\n                  children: [\"\\u26A0\\uFE0F \\u0633\\u064A\\u062A\\u0645 \\u062F\\u0641\\u0639 \", rentalList.filter(r => r.rentalType === 'open').length, \" \\u0644\\u0639\\u0628\\u0629 \\u0639\\u0646\\u062F \\u0627\\u0644\\u0625\\u0646\\u0647\\u0627\\u0621\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 943,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 934,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 920,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 894,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 888,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 637,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"rentals-page-modal-actions enhanced-modal-actions\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"rentals-page-btn-cancel\",\n          onClick: handleClose,\n          children: \"\\u0625\\u0644\\u063A\\u0627\\u0621\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 954,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `rentals-page-btn-confirm enhanced-start-btn ${!customerName || !validatePhone(customerPhone) || rentalList.length === 0 ? 'disabled' : ''}`,\n          onClick: handleStartEnhancedRental,\n          disabled: !customerName || !validatePhone(customerPhone) || rentalList.length === 0,\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"btn-icon\",\n            children: \"\\uD83D\\uDE80\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 968,\n            columnNumber: 13\n          }, this), \"\\u0628\\u062F\\u0621 \\u0627\\u0644\\u062A\\u0623\\u062C\\u064A\\u0631 \\u0627\\u0644\\u0645\\u062A\\u0639\\u062F\\u062F\", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"btn-badge\",\n            children: rentalList.length\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 970,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 961,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 953,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 625,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 624,\n    columnNumber: 5\n  }, this);\n};\n\n// ==================== Ù…ÙƒÙˆÙ† Rentals Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ø§Ù„Ù…Ø­Ø³Ù† ====================\n_s(EnhancedRentalListModal, \"1GQ8u1WorchJDL3LIenm7HsdSog=\");\n_c = EnhancedRentalListModal;\nconst Rentals = () => {\n  _s2();\n  const {\n    user\n  } = useAuth();\n  const [games, setGames] = useState([]);\n  const [activeRentals, setActiveRentals] = useState([]);\n  const [completedRentals, setCompletedRentals] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [showEnhancedRentalModal, setShowEnhancedRentalModal] = useState(false);\n  const [selectedGames, setSelectedGames] = useState([]);\n  const [selectedGameQuantities, setSelectedGameQuantities] = useState({});\n  const [customerName, setCustomerName] = useState('');\n  const [customerPhone, setCustomerPhone] = useState('');\n  const [customerNotes, setCustomerNotes] = useState('');\n  const [currentShift, setCurrentShift] = useState(null);\n  const [showChangeGameModal, setShowChangeGameModal] = useState(false);\n  const [selectedRentalForChange, setSelectedRentalForChange] = useState(null);\n  const [availableGamesForChange, setAvailableGamesForChange] = useState([]);\n  const [selectedRentalDetails, setSelectedRentalDetails] = useState(null);\n  const modalRef = useRef(null);\n  const isManager = (user === null || user === void 0 ? void 0 : user.role) === 'admin' || (user === null || user === void 0 ? void 0 : user.role) === 'branch_manager';\n  const isEmployee = (user === null || user === void 0 ? void 0 : user.role) === 'employee';\n  const [currentEgyptTime, setCurrentEgyptTime] = useState('');\n  const [todaysShifts, setTodaysShifts] = useState([]);\n  const [statistics, setStatistics] = useState({\n    availableGames: 0,\n    totalGames: 0,\n    todayRevenue: 0,\n    todayRentals: 0,\n    activeRentals: 0,\n    shiftRevenue: 0,\n    monthlyRevenue: 0,\n    uniqueCustomers: 0\n  });\n  const [refreshTrigger, setRefreshTrigger] = useState(0);\n\n  // Ø¯Ø§Ù„Ø© ØªØ¬Ø¯ÙŠØ¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª\n  const triggerRefresh = useCallback(() => {\n    setRefreshTrigger(prev => prev + 1);\n  }, []);\n  const getEgyptTimeNow = () => {\n    const now = new Date();\n    const egyptTime = new Date(now.toLocaleString(\"en-US\", {\n      timeZone: \"Africa/Cairo\"\n    }));\n    const hours = egyptTime.getHours();\n    const minutes = egyptTime.getMinutes();\n    const seconds = egyptTime.getSeconds();\n    return {\n      hours: hours,\n      minutes: minutes,\n      seconds: seconds,\n      formatted: `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`\n    };\n  };\n  const formatEgyptDateTime = dateString => {\n    try {\n      if (!dateString) return '--/--/---- --:--:--';\n      const date = new Date(dateString);\n      const egyptDate = new Date(date.toLocaleString(\"en-US\", {\n        timeZone: \"Africa/Cairo\"\n      }));\n      const day = egyptDate.getDate().toString().padStart(2, '0');\n      const month = (egyptDate.getMonth() + 1).toString().padStart(2, '0');\n      const year = egyptDate.getFullYear();\n      const hours = egyptDate.getHours().toString().padStart(2, '0');\n      const minutes = egyptDate.getMinutes().toString().padStart(2, '0');\n      return `${day}/${month}/${year} ${hours}:${minutes}`;\n    } catch (error) {\n      return '--/--/---- --:--:--';\n    }\n  };\n  const formatDuration = minutes => {\n    if (!minutes || minutes === 0) return 'ÙˆÙ‚Øª Ù…ÙØªÙˆØ­';\n    if (minutes < 60) return `${minutes} Ø¯Ù‚ÙŠÙ‚Ø©`;\n    const hours = Math.floor(minutes / 60);\n    const remainingMinutes = minutes % 60;\n    return `${hours} Ø³Ø§Ø¹Ø©${remainingMinutes > 0 ? ` ${remainingMinutes} Ø¯Ù‚ÙŠÙ‚Ø©` : ''}`;\n  };\n\n  // ==================== Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø´ÙŠÙØª ÙˆØ§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø© ====================\n  const checkAndStartAutoShift = async () => {\n    try {\n      console.log('ðŸ” ÙØ­Øµ Ø§Ù„Ø´ÙŠÙØª Ø§Ù„Ù†Ø´Ø· ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹...');\n      const savedShift = localStorage.getItem('currentShift');\n      if (savedShift) {\n        try {\n          const shiftData = JSON.parse(savedShift);\n          const startTime = new Date(shiftData.start_time);\n          const now = new Date();\n          const hoursDiff = Math.floor((now - startTime) / (1000 * 60 * 60));\n          if (hoursDiff < 24) {\n            console.log('âœ… ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø´ÙŠÙØª Ù†Ø´Ø· ÙÙŠ localStorage:', shiftData);\n            setCurrentShift(shiftData);\n\n            // Ø¬Ù„Ø¨ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø© Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ù‡Ø°Ø§ Ø§Ù„Ø´ÙŠÙØª\n            const savedCompleted = storage.getCompletedRentals(shiftData.id);\n            if (savedCompleted.length > 0) {\n              console.log(`ðŸ“‚ Ø¬Ù„Ø¨ ${savedCompleted.length} ØªØ£Ø¬ÙŠØ± Ù…ÙƒØªÙ…Ù„ Ù…Ù† Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ`);\n              setCompletedRentals(savedCompleted);\n            }\n            return true;\n          } else {\n            console.log('âš ï¸ Ø§Ù„Ø´ÙŠÙØª ÙÙŠ localStorage Ù…Ù†ØªÙ‡ÙŠ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©');\n            storage.clearCompletedRentals(shiftData.id);\n            localStorage.removeItem('currentShift');\n          }\n        } catch (e) {\n          console.log('âš ï¸ Ø®Ø·Ø£ ÙÙŠ Ø¨ÙŠØ§Ù†Ø§Øª localStorage:', e);\n          localStorage.removeItem('currentShift');\n        }\n      }\n      try {\n        const response = await api.get('/shifts/active');\n        if (response.success && response.data) {\n          console.log('âœ… ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø´ÙŠÙØª Ù†Ø´Ø·:', response.data);\n          localStorage.setItem('currentShift', JSON.stringify(response.data));\n          setCurrentShift(response.data);\n\n          // Ø¬Ù„Ø¨ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø© Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ù‡Ø°Ø§ Ø§Ù„Ø´ÙŠÙØª\n          const savedCompleted = storage.getCompletedRentals(response.data.id);\n          if (savedCompleted.length > 0) {\n            console.log(`ðŸ“‚ Ø¬Ù„Ø¨ ${savedCompleted.length} ØªØ£Ø¬ÙŠØ± Ù…ÙƒØªÙ…Ù„ Ù…Ù† Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ`);\n            setCompletedRentals(savedCompleted);\n          }\n          return true;\n        }\n      } catch (activeError) {\n        console.log('âš ï¸ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø¬Ù„Ø¨ Ø§Ù„Ø´ÙŠÙØª Ø§Ù„Ù†Ø´Ø·:', activeError.message);\n      }\n      console.log('â„¹ï¸ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø´ÙŠÙØª Ù†Ø´Ø·ØŒ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù„Ù„Ø¨Ø¯Ø¡ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ...');\n      try {\n        const startResponse = await api.post('/shifts/start-clean');\n        if (startResponse.success && startResponse.data) {\n          console.log('âœ… ØªÙ… Ø¨Ø¯Ø¡ Ø´ÙŠÙØª Ø¬Ø¯ÙŠØ¯ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹:', startResponse.data);\n          localStorage.setItem('currentShift', JSON.stringify(startResponse.data));\n          setCurrentShift(startResponse.data);\n          showNotification('success', `\nðŸš€ ØªÙ… Ø¨Ø¯Ø¡ Ø´ÙŠÙØª Ø¬Ø¯ÙŠØ¯ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nØ§Ù„Ø´ÙŠÙØª: #${startResponse.data.id}\nØ§Ù„Ù…ÙˆØ¸Ù: ${(user === null || user === void 0 ? void 0 : user.name) || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'}\nØ§Ù„ÙØ±Ø¹: ${(user === null || user === void 0 ? void 0 : user.branch_name) || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'}\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nðŸŽ® Ø§Ù„Ù†Ø¸Ø§Ù… Ø¬Ø§Ù‡Ø² Ø§Ù„Ø¢Ù† Ù„Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª\n          `);\n          return true;\n        }\n      } catch (startError) {\n        console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¨Ø¯Ø¡ Ø§Ù„Ø´ÙŠÙØª:', startError);\n        return false;\n      }\n    } catch (error) {\n      console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ÙØ­Øµ Ø§Ù„Ø´ÙŠÙØª:', error);\n      return false;\n    }\n  };\n  const updateStatistics = useCallback(() => {\n    console.log('ðŸ“Š Ø¬Ø§Ø±ÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ©...');\n    const rentedPieces = activeRentals.reduce((total, rental) => {\n      const quantity = rental.quantity || 1;\n      return total + quantity;\n    }, 0);\n    const availableGamesCount = games.filter(g => g && g.is_active).length;\n    const todayStart = new Date();\n    todayStart.setHours(0, 0, 0, 0);\n    const todayCompleted = completedRentals.filter(rental => {\n      if (!rental.start_time) return false;\n      const rentalDate = new Date(rental.start_time);\n      return rentalDate >= todayStart && rental.status === 'Ù…ÙƒØªÙ…Ù„';\n    });\n    const todayRevenue = todayCompleted.reduce((sum, rental) => sum + (Number(rental.total_amount) || 0), 0);\n    const shiftRevenue = activeRentals.filter(rental => rental.payment_status === 'Ù…Ø¯ÙÙˆØ¹').reduce((sum, rental) => sum + (Number(rental.total_amount) || 0), todayRevenue);\n    const newStats = {\n      availableGames: availableGamesCount,\n      totalGames: games.filter(g => g && g.is_active).length,\n      todayRevenue: todayRevenue,\n      todayRentals: todayCompleted.length,\n      activeRentals: activeRentals.length,\n      shiftRevenue: shiftRevenue,\n      monthlyRevenue: 0,\n      uniqueCustomers: 0,\n      rentedPieces: rentedPieces,\n      completedCount: completedRentals.length\n    };\n    console.log('ðŸ“Š Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…Ø­Ø¯Ø«Ø©:', newStats);\n    setStatistics(newStats);\n    return newStats;\n  }, [games, activeRentals, completedRentals]);\n\n  // ==================== ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ====================\n  useEffect(() => {\n    const updateTime = () => {\n      setCurrentEgyptTime(getEgyptTimeNow().formatted);\n    };\n    updateTime();\n    const interval = setInterval(updateTime, 1000);\n    return () => clearInterval(interval);\n  }, []);\n  useEffect(() => {\n    const initializeSystem = async () => {\n      if (!user) {\n        console.log('â³ Ø§Ù†ØªØ¸Ø§Ø± ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…...');\n        setLoading(true);\n        return;\n      }\n      console.log('ðŸš€ Ø¨Ø¯Ø¡ ØªØ´ØºÙŠÙ„ Ø§Ù„Ù†Ø¸Ø§Ù… Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…:', user.name);\n      try {\n        // ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©\n        storage.cleanupOldData();\n        const shiftReady = await checkAndStartAutoShift();\n        if (shiftReady) {\n          console.log('âœ… Ø§Ù„Ø´ÙŠÙØª Ø¬Ø§Ù‡Ø²ØŒ Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...');\n          await Promise.all([loadGames(), loadActiveRentals()]);\n\n          // Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ Ø´ÙŠÙØª Ù†Ø´Ø·ØŒ Ø¬Ù„Ø¨ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø© Ù…Ù† Ø§Ù„Ø³ÙŠØ±ÙØ±\n          if (currentShift) {\n            await loadCompletedRentalsFromServer();\n          }\n          updateStatistics();\n          console.log('âœ¨ ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†Ø¸Ø§Ù… Ø¨Ø§Ù„ÙƒØ§Ù…Ù„');\n          setTimeout(() => {\n            showNotification('success', `\nðŸŽ® Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø¬Ø§Ù‡Ø²!\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nðŸ‘¤ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ${user.name}\nðŸª Ø§Ù„ÙØ±Ø¹: ${user.branch_name}\nðŸ”¥ Ø§Ù„Ø´ÙŠÙØª: ${currentShift ? `#${currentShift.id}` : 'ØªÙ… Ø§Ù„Ø¨Ø¯Ø¡'}\nðŸ“Š Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ù…ØªØ§Ø­Ø©: ${games.length}\nðŸ“ˆ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©: ${activeRentals.length}\nðŸ“‹ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©: ${completedRentals.length}\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nðŸ’¡ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¢Ù† Ø¨Ø¯Ø¡ ØªØ£Ø¬ÙŠØ±Ø§Øª Ø¬Ø¯ÙŠØ¯Ø©\n            `);\n          }, 1000);\n        } else {\n          console.log('âš ï¸ Ù„Ù… ÙŠØªÙ…ÙƒÙ† Ù…Ù† Ø¨Ø¯Ø¡ Ø´ÙŠÙØª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹');\n          showNotification('warning', 'ÙŠØ¬Ø¨ Ø¨Ø¯Ø¡ Ø´ÙŠÙØª ÙŠØ¯ÙˆÙŠØ§Ù‹ Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù†Ø¸Ø§Ù…');\n        }\n      } catch (error) {\n        console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªÙ‡ÙŠØ¦Ø©:', error);\n        showNotification('error', 'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†Ø¸Ø§Ù…. Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙØ­Ø©.');\n      } finally {\n        setLoading(false);\n      }\n    };\n    const initTimer = setTimeout(() => {\n      initializeSystem();\n    }, 300);\n    return () => {\n      clearTimeout(initTimer);\n    };\n  }, [user, refreshTrigger]);\n  useEffect(() => {\n    updateStatistics();\n  }, [games, activeRentals, completedRentals, updateStatistics]);\n  useEffect(() => {\n    const handleClickOutside = event => {\n      if (showEnhancedRentalModal && modalRef.current && !modalRef.current.contains(event.target)) {\n        if (selectedGames.length > 0 || customerName || customerPhone) {\n          if (window.confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥ØºÙ„Ø§Ù‚ Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ£Ø¬ÙŠØ±ØŸ Ø³ÙŠØªÙ… ÙÙ‚Ø¯Ø§Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¯Ø®Ù„Ø©.')) {\n            setShowEnhancedRentalModal(false);\n            resetForm();\n          }\n        } else {\n          setShowEnhancedRentalModal(false);\n        }\n      }\n    };\n    document.addEventListener('mousedown', handleClickOutside);\n    document.addEventListener('touchstart', handleClickOutside);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n      document.removeEventListener('touchstart', handleClickOutside);\n    };\n  }, [showEnhancedRentalModal, selectedGames, customerName, customerPhone]);\n\n  // ==================== Ø¯ÙˆØ§Ù„ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø´ÙŠÙØª ====================\n  const startShift = async () => {\n    try {\n      showNotification('info', 'ðŸš€ Ø¬Ø§Ø±ÙŠ Ø¨Ø¯Ø¡ Ø´ÙŠÙØª Ø¬Ø¯ÙŠØ¯ Ù†Ø¸ÙŠÙ...');\n      setActiveRentals([]);\n      setCompletedRentals([]);\n      setSelectedGames([]);\n      setSelectedGameQuantities({});\n      const response = await api.post('/shifts/start-clean');\n      console.log('ðŸ“¥ Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø¨Ø¯Ø¡ Ø§Ù„Ø´ÙŠÙØª:', response);\n      if (response.success && response.data) {\n        const newShift = response.data;\n        localStorage.setItem('currentShift', JSON.stringify(newShift));\n        setCurrentShift(newShift);\n\n        // Ø­Ø°Ù Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø© Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©\n        storage.clearCompletedRentals(newShift.id);\n        showNotification('success', `\nâœ… ØªÙ… Ø¨Ø¯Ø¡ Ø´ÙŠÙØª Ø¬Ø¯ÙŠØ¯ #${newShift.id}\n\nðŸ•’ Ø§Ù„ÙˆÙ‚Øª: ${formatEgyptDateTime(newShift.start_time)}\nðŸ‘¤ Ø§Ù„Ù…ÙˆØ¸Ù: ${(user === null || user === void 0 ? void 0 : user.name) || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'}\nðŸŽ® Ø§Ù„Ø´ÙŠÙØª Ù†Ø¸ÙŠÙ ÙˆØ¬Ø§Ù‡Ø² Ù„Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©\n\nâš ï¸ **ØªÙ… ØªÙ†Ø¸ÙŠÙ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©**\n        `);\n        setTimeout(() => {\n          loadGames();\n          loadActiveRentals();\n          showNotification('info', 'âœ¨ Ø§Ù„Ù†Ø¸Ø§Ù… Ø¬Ø§Ù‡Ø² Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ø´ÙŠÙØª Ø§Ù„Ø¬Ø¯ÙŠØ¯');\n        }, 1000);\n      } else {\n        showNotification('error', response.message || 'ÙØ´Ù„ Ø¨Ø¯Ø¡ Ø§Ù„Ø´ÙŠÙØª');\n      }\n    } catch (error) {\n      console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¨Ø¯Ø¡ Ø§Ù„Ø´ÙŠÙØª:', error);\n      showNotification('error', error.message || 'ÙØ´Ù„ Ø¨Ø¯Ø¡ Ø§Ù„Ø´ÙŠÙØª');\n    }\n  };\n  const handleEndCurrentShift = async () => {\n    if (!currentShift) {\n      showNotification('error', 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø´ÙŠÙØª Ù†Ø´Ø· Ù„Ø¥Ù†Ù‡Ø§Ø¦Ù‡');\n      return;\n    }\n    const startTime = new Date(currentShift.start_time);\n    const now = new Date();\n    const shiftDuration = Math.floor((now - startTime) / (1000 * 60));\n    const confirmMessage = `\nðŸ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø´ÙŠÙØª\n\nØ§Ù„Ø´ÙŠÙØª: #${currentShift.id}\nØ¨Ø¯Ø£ ÙÙŠ: ${formatEgyptDateTime(currentShift.start_time)}\nØ§Ù„Ù…Ø¯Ø©: ${Math.floor(shiftDuration / 60)} Ø³Ø§Ø¹Ø© Ùˆ ${shiftDuration % 60} Ø¯Ù‚ÙŠÙ‚Ø©\n\nðŸ“Š Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©:\nâ€¢ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©: ${activeRentals.length}\nâ€¢ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©: ${completedRentals.length}\nâ€¢ Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø§Ù„Ø´ÙŠÙØª: ${formatCurrency(statistics.shiftRevenue)}\n\nÙ‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø´ÙŠÙØªØŸ`;\n    if (!window.confirm(confirmMessage)) {\n      return;\n    }\n    try {\n      showNotification('info', 'Ø¬Ø§Ø±ÙŠ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø´ÙŠÙØª...');\n      const response = await api.post(`/shifts/${currentShift.id}/end`, {\n        end_time: now.toISOString(),\n        employee_name: (user === null || user === void 0 ? void 0 : user.name) || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ',\n        notes: 'Ø¥Ù†Ù‡Ø§Ø¡ ÙŠØ¯ÙˆÙŠ',\n        final_stats: {\n          active_rentals: activeRentals.length,\n          completed_rentals: completedRentals.length,\n          total_revenue: statistics.shiftRevenue\n        }\n      });\n      if (response.success) {\n        var _response$data, _response$data$stats;\n        // Ø­ÙØ¸ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø© Ù‚Ø¨Ù„ Ø§Ù„Ø­Ø°Ù\n        if (completedRentals.length > 0) {\n          storage.saveCompletedRentals(currentShift.id, completedRentals);\n        }\n        localStorage.removeItem('currentShift');\n        setCurrentShift(null);\n        setActiveRentals([]);\n        setCompletedRentals([]);\n        showNotification('success', `\nâœ… ØªÙ… Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø´ÙŠÙØª Ø¨Ù†Ø¬Ø§Ø­!\n\nðŸ“Š Ù…Ù„Ø®Øµ Ø§Ù„Ø´ÙŠÙØª:\nâ€¢ Ø§Ù„Ù…Ø¯Ø©: ${Math.floor(shiftDuration / 60)} Ø³Ø§Ø¹Ø© Ùˆ ${shiftDuration % 60} Ø¯Ù‚ÙŠÙ‚Ø©\nâ€¢ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª: ${formatCurrency(((_response$data = response.data) === null || _response$data === void 0 ? void 0 : (_response$data$stats = _response$data.stats) === null || _response$data$stats === void 0 ? void 0 : _response$data$stats.total_revenue) || 0)}\nâ€¢ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©: ${activeRentals.length}\nâ€¢ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©: ${completedRentals.length}\n\nðŸ”„ Ø§Ø¨Ø¯Ø£ Ø´ÙŠÙØª Ø¬Ø¯ÙŠØ¯ Ù„Ù„Ø§Ø³ØªÙ…Ø±Ø§Ø±.\n        `);\n      } else {\n        showNotification('error', response.message || 'ÙØ´Ù„ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø´ÙŠÙØª');\n      }\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø´ÙŠÙØª:', error);\n      let errorMessage = 'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø´ÙŠÙØª';\n      if ((_error$response = error.response) !== null && _error$response !== void 0 && (_error$response$data = _error$response.data) !== null && _error$response$data !== void 0 && _error$response$data.error) {\n        errorMessage += `: ${error.response.data.error}`;\n      } else if (error.message) {\n        errorMessage += `: ${error.message}`;\n      }\n      showNotification('error', errorMessage);\n    }\n  };\n\n  // ==================== Ø¯ÙˆØ§Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­Ø³Ù†Ø© ====================\n  const loadGames = async () => {\n    try {\n      console.log('ðŸŽ® ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨...');\n      if (!(user !== null && user !== void 0 && user.branch_id)) {\n        console.log('âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ branch_id Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…');\n        setGames([]);\n        return;\n      }\n      const response = await api.get('/games', {\n        params: {\n          branch_id: user.branch_id,\n          is_active: 1,\n          _t: Date.now()\n        },\n        timeout: 10000\n      });\n      if (response && response.success) {\n        var _response$data2;\n        let gamesData = [];\n        if (Array.isArray(response.data)) {\n          gamesData = response.data;\n        } else if ((_response$data2 = response.data) !== null && _response$data2 !== void 0 && _response$data2.data && Array.isArray(response.data.data)) {\n          gamesData = response.data.data;\n        }\n        const processedGames = gamesData.filter(game => game.is_active).map(game => {\n          // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© Ù„ÙƒÙ„ Ù„Ø¹Ø¨Ø©\n          const imageUrl = getGameImageUrl(game);\n          console.log(`ðŸŽ® Ù…Ø¹Ø§Ù„Ø¬Ø© Ù„Ø¹Ø¨Ø©: ${game.name} -> ØµÙˆØ±Ø©: ${imageUrl}`);\n          return {\n            id: game.id || game.game_id || Date.now() + Math.random(),\n            name: game.name || 'Ù„Ø¹Ø¨Ø© ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙØ©',\n            status: 'Ù…ØªØ§Ø­',\n            is_active: game.is_active === undefined ? 1 : game.is_active,\n            price_per_15min: game.price_per_15min || 100,\n            category: game.category || 'Ø¹Ø§Ù…',\n            image_url: game.image_url,\n            external_image_url: game.external_image_url,\n            thumbnail_url: game.thumbnail_url,\n            image: game.image,\n            unlimited_rentals: true,\n            // Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…Ø­Ø³Ù†Ø©\n            enhanced_image_url: imageUrl,\n            ...game\n          };\n        });\n        console.log(`âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ ${processedGames.length} Ù„Ø¹Ø¨Ø© Ù…Ø¹ ØµÙˆØ± Ù…Ø­Ø³Ù†Ø©`);\n        setGames(processedGames);\n      } else {\n        console.log('âŒ ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨');\n        setGames([]);\n      }\n    } catch (error) {\n      console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨:', error);\n      setGames([]);\n    }\n  };\n  const loadActiveRentals = async () => {\n    try {\n      console.log('ðŸ”¥ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©...');\n      if (!(user !== null && user !== void 0 && user.branch_id)) {\n        console.log('âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ branch_id Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…');\n        setActiveRentals([]);\n        return [];\n      }\n      let rentalsData = [];\n      try {\n        const response = await api.get('/rentals/active', {\n          params: {\n            branch_id: user.branch_id,\n            include_game: true,\n            _t: Date.now()\n          },\n          timeout: 8000\n        });\n        if (response && response.success) {\n          if (Array.isArray(response.data)) {\n            rentalsData = response.data;\n          } else if (response.data && Array.isArray(response.data.data)) {\n            rentalsData = response.data.data;\n          }\n          console.log(`ðŸ“Š Ø§Ù„Ù…Ø³ØªÙ„Ù…Ø© Ù…Ù† /rentals/active: ${rentalsData.length} ØªØ£Ø¬ÙŠØ± Ù†Ø´Ø·`);\n        }\n      } catch (activeError) {\n        console.log('âŒ ÙØ´Ù„ Ø¬Ù„Ø¨ /rentals/active:', activeError.message);\n        try {\n          const alternativeResponse = await api.get('/rentals', {\n            params: {\n              branch_id: user.branch_id,\n              status: 'Ù†Ø´Ø·',\n              include_game: true,\n              _t: Date.now()\n            },\n            timeout: 8000\n          });\n          if (alternativeResponse && alternativeResponse.success) {\n            if (Array.isArray(alternativeResponse.data)) {\n              rentalsData = alternativeResponse.data;\n            } else if (alternativeResponse.data && Array.isArray(alternativeResponse.data.data)) {\n              rentalsData = alternativeResponse.data.data;\n            }\n            console.log(`ðŸ“Š Ø§Ù„Ù…Ø³ØªÙ„Ù…Ø© Ù…Ù† /rentals: ${rentalsData.length} ØªØ£Ø¬ÙŠØ± Ù†Ø´Ø·`);\n          }\n        } catch (alternativeError) {\n          console.log('âŒ ÙØ´Ù„ Ø¬Ù…ÙŠØ¹ Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø¬Ù„Ø¨ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª:', alternativeError.message);\n        }\n      }\n      const nowTime = new Date();\n      const activeRentalsList = rentalsData.map(rental => {\n        try {\n          var _rental$game, _rental$game2, _rental$game3, _rental$game4;\n          const startTime = new Date(rental.start_time || rental.created_at);\n          const duration = Number(rental.duration_minutes) || 0;\n          const isOpenTime = duration === 0 || rental.is_open_time;\n          let time_left = 'Ù…ÙØªÙˆØ­';\n          let is_expired = false;\n          let remaining_seconds = 0;\n          if (!isOpenTime && duration > 0) {\n            const endTime = new Date(startTime.getTime() + duration * 60000);\n            const timeLeftMs = endTime - nowTime;\n            if (timeLeftMs > 0) {\n              remaining_seconds = Math.floor(timeLeftMs / 1000);\n              const minutes = Math.floor(remaining_seconds / 60);\n              const seconds = remaining_seconds % 60;\n              time_left = `${minutes}:${seconds.toString().padStart(2, '0')}`;\n            } else {\n              time_left = 'Ø§Ù†ØªÙ‡Ù‰';\n              is_expired = true;\n            }\n          }\n\n          // ØªØ­Ø¶ÙŠØ± Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø© Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©\n          const gameData = rental.game || {\n            name: rental.game_name,\n            image_url: rental.image_url,\n            external_image_url: rental.external_image_url,\n            thumbnail_url: rental.thumbnail_url,\n            image: rental.image\n          };\n\n          // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©\n          const imageUrl = getGameImageUrl(gameData);\n          return {\n            id: rental.id,\n            rental_number: rental.rental_number || `RENT-${rental.id}`,\n            customer_name: rental.customer_name || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ',\n            customer_phone: rental.customer_phone || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ',\n            game_id: rental.game_id,\n            game_name: rental.game_name || ((_rental$game = rental.game) === null || _rental$game === void 0 ? void 0 : _rental$game.name) || 'Ù„Ø¹Ø¨Ø©',\n            start_time: rental.start_time,\n            duration_minutes: duration,\n            payment_status: isOpenTime ? 'Ø¹Ù†Ø¯ Ø§Ù„Ø¥Ù†Ù‡Ø§Ø¡' : rental.payment_status || 'Ù…Ø¯ÙÙˆØ¹',\n            payment_method: rental.payment_method || 'ÙƒØ§Ø´',\n            total_amount: Number(rental.total_amount) || 0,\n            status: 'Ù†Ø´Ø·',\n            time_left,\n            is_expired,\n            is_open_time: isOpenTime,\n            remaining_seconds,\n            branch_id: rental.branch_id || user.branch_id,\n            shift_id: rental.shift_id || (currentShift === null || currentShift === void 0 ? void 0 : currentShift.id),\n            price_per_15min: Number(rental.price_per_15min) || 100,\n            notes: rental.notes || '',\n            image_url: rental.image_url || ((_rental$game2 = rental.game) === null || _rental$game2 === void 0 ? void 0 : _rental$game2.image_url),\n            external_image_url: rental.external_image_url || ((_rental$game3 = rental.game) === null || _rental$game3 === void 0 ? void 0 : _rental$game3.external_image_url),\n            thumbnail_url: rental.thumbnail_url || ((_rental$game4 = rental.game) === null || _rental$game4 === void 0 ? void 0 : _rental$game4.thumbnail_url),\n            quantity: rental.quantity || 1,\n            formatted_start_time: formatEgyptDateTime(rental.start_time || rental.created_at),\n            // Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…Ø­Ø³Ù†Ø©\n            enhanced_image_url: imageUrl\n          };\n        } catch (error) {\n          console.error(`âŒ Ø®Ø·Ø£ ÙÙŠ Ù…Ø¹Ø§Ù„Ø¬Ø© ØªØ£Ø¬ÙŠØ±:`, error);\n          return null;\n        }\n      }).filter(rental => rental !== null);\n      console.log(`ðŸŽ¯ ØªÙ… ØªØ­Ù…ÙŠÙ„ ${activeRentalsList.length} ØªØ£Ø¬ÙŠØ± Ù†Ø´Ø·`);\n      setActiveRentals(activeRentalsList);\n      return activeRentalsList;\n    } catch (error) {\n      console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©:', error);\n      setActiveRentals([]);\n      return [];\n    }\n  };\n\n  // Ø¯Ø§Ù„Ø© Ù…Ø­Ø³Ù†Ø© Ù„Ø¬Ù„Ø¨ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø© Ù…Ù† Ø§Ù„Ø³ÙŠØ±ÙØ±\n  const loadCompletedRentalsFromServer = async () => {\n    try {\n      if (!(user !== null && user !== void 0 && user.branch_id) || !currentShift) return;\n      console.log('ðŸ“Š Ø¬Ù„Ø¨ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø© Ù…Ù† Ø§Ù„Ø³ÙŠØ±ÙØ±...');\n      let response;\n      try {\n        response = await api.get('/rentals/completed', {\n          params: {\n            branch_id: user.branch_id,\n            shift_id: currentShift.id,\n            // Ø§Ù„Ø±Ø¨Ø· Ø¨Ø§Ù„Ø´ÙŠÙØª\n            limit: 500,\n            include_game: true,\n            sort_order: 'DESC'\n          }\n        });\n      } catch (error) {\n        console.log('âš ï¸ Ù†Ù‚Ø·Ø© /rentals/completed ÙØ´Ù„ØªØŒ Ø¬Ø±Ø¨ Ù†Ù‚Ø·Ø© Ø¨Ø¯ÙŠÙ„Ø©');\n        response = await api.get('/rentals', {\n          params: {\n            branch_id: user.branch_id,\n            shift_id: currentShift.id,\n            status: 'Ù…ÙƒØªÙ…Ù„',\n            limit: 500,\n            include_game: true\n          }\n        });\n      }\n      if (response.success) {\n        let completedData = [];\n        if (Array.isArray(response.data)) {\n          completedData = response.data;\n        } else if (response.data && Array.isArray(response.data.data)) {\n          completedData = response.data.data;\n        }\n        console.log(`ðŸ“Š Ø¹Ø¯Ø¯ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…Ø­Ù…Ù„Ø© Ù…Ù† Ø§Ù„Ø³ÙŠØ±ÙØ±: ${completedData.length}`);\n        const processedRentals = completedData.filter(rental => {\n          var _rental$status;\n          const status = ((_rental$status = rental.status) === null || _rental$status === void 0 ? void 0 : _rental$status.toLowerCase()) || '';\n          return ['Ù…ÙƒØªÙ…Ù„', 'completed', 'Ù…Ù„ØºÙŠ', 'cancelled', 'Ù…Ø³ØªØ±Ø¯', 'refunded'].some(s => status.includes(s));\n        }).map(rental => {\n          var _rental$status2, _rental$status3, _rental$status4, _rental$status5, _rental$status6, _rental$status7, _rental$game5, _rental$game6, _rental$game7, _rental$game8;\n          const isRefunded = ((_rental$status2 = rental.status) === null || _rental$status2 === void 0 ? void 0 : _rental$status2.includes('Ù…Ø³ØªØ±Ø¯')) || ((_rental$status3 = rental.status) === null || _rental$status3 === void 0 ? void 0 : _rental$status3.includes('refunded'));\n          const isCancelled = ((_rental$status4 = rental.status) === null || _rental$status4 === void 0 ? void 0 : _rental$status4.includes('Ù…Ù„ØºÙŠ')) || ((_rental$status5 = rental.status) === null || _rental$status5 === void 0 ? void 0 : _rental$status5.includes('cancelled'));\n          const isCompleted = ((_rental$status6 = rental.status) === null || _rental$status6 === void 0 ? void 0 : _rental$status6.includes('Ù…ÙƒØªÙ…Ù„')) || ((_rental$status7 = rental.status) === null || _rental$status7 === void 0 ? void 0 : _rental$status7.includes('completed'));\n\n          // ØªØ­Ø¶ÙŠØ± Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø© Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©\n          const gameData = rental.game || {\n            name: rental.game_name,\n            image_url: rental.image_url,\n            external_image_url: rental.external_image_url,\n            thumbnail_url: rental.thumbnail_url,\n            image: rental.image\n          };\n\n          // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©\n          const imageUrl = getGameImageUrl(gameData);\n          return {\n            ...rental,\n            game_name: rental.game_name || ((_rental$game5 = rental.game) === null || _rental$game5 === void 0 ? void 0 : _rental$game5.name) || 'Ù„Ø¹Ø¨Ø©',\n            image_url: rental.image_url || ((_rental$game6 = rental.game) === null || _rental$game6 === void 0 ? void 0 : _rental$game6.image_url),\n            external_image_url: rental.external_image_url || ((_rental$game7 = rental.game) === null || _rental$game7 === void 0 ? void 0 : _rental$game7.external_image_url),\n            thumbnail_url: rental.thumbnail_url || ((_rental$game8 = rental.game) === null || _rental$game8 === void 0 ? void 0 : _rental$game8.thumbnail_url),\n            formatted_start_time: formatEgyptDateTime(rental.start_time),\n            formatted_end_time: formatEgyptDateTime(rental.actual_end_time || rental.end_time || rental.completed_at),\n            actual_duration_minutes: rental.actual_duration_minutes || rental.duration_minutes,\n            total_amount: isRefunded ? 0 : rental.total_amount || 0,\n            refund_amount: rental.refund_amount || (isRefunded ? rental.total_amount : 0),\n            status: isRefunded ? 'Ù…Ø³ØªØ±Ø¯' : isCancelled ? 'Ù…Ù„ØºÙŠ' : 'Ù…ÙƒØªÙ…Ù„',\n            status_original: rental.status,\n            shift_id: rental.shift_id || currentShift.id,\n            // Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…Ø­Ø³Ù†Ø©\n            enhanced_image_url: imageUrl\n          };\n        });\n        console.log(`âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ ${processedRentals.length} ØªØ£Ø¬ÙŠØ± Ù…ÙƒØªÙ…Ù„ Ù…Ù† Ø§Ù„Ø³ÙŠØ±ÙØ±`);\n        setCompletedRentals(prev => {\n          // Ø¯Ù…Ø¬ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ù…Ø¹ Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© (ØªØ¬Ù†Ø¨ Ø§Ù„ØªÙƒØ±Ø§Ø±)\n          const existingIds = new Set(prev.map(r => r.id));\n          const newRentals = processedRentals.filter(r => !existingIds.has(r.id));\n          return [...newRentals, ...prev];\n        });\n\n        // Ø­ÙØ¸ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø© ÙÙŠ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ\n        if (currentShift && processedRentals.length > 0) {\n          storage.saveCompletedRentals(currentShift.id, processedRentals);\n        }\n      } else {\n        console.log('âŒ ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø© Ù…Ù† Ø§Ù„Ø³ÙŠØ±ÙØ±');\n        // Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ ÙƒØ¨Ø¯ÙŠÙ„\n        const savedRentals = storage.getCompletedRentals(currentShift.id);\n        if (savedRentals.length > 0) {\n          console.log(`ðŸ“‚ Ø§Ø³ØªØ®Ø¯Ø§Ù… ${savedRentals.length} ØªØ£Ø¬ÙŠØ± Ù…ÙƒØªÙ…Ù„ Ù…Ù† Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ`);\n          setCompletedRentals(savedRentals);\n        }\n      }\n    } catch (error) {\n      console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©:', error);\n      // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ ÙÙŠ Ø­Ø§Ù„Ø© Ø§Ù„Ø®Ø·Ø£\n      if (currentShift) {\n        const savedRentals = storage.getCompletedRentals(currentShift.id);\n        if (savedRentals.length > 0) {\n          console.log(`ðŸ“‚ Ø§Ø³ØªØ®Ø¯Ø§Ù… ${savedRentals.length} ØªØ£Ø¬ÙŠØ± Ù…ÙƒØªÙ…Ù„ Ù…Ù† Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ Ø¨Ø¹Ø¯ Ø§Ù„Ø®Ø·Ø£`);\n          setCompletedRentals(savedRentals);\n        }\n      }\n    }\n  };\n\n  // Ø¯Ø§Ù„Ø© Ù„Ø¬Ù„Ø¨ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø© (Ù…Ø­Ø³Ù†Ø©)\n  const loadCompletedRentals = async (forceRefresh = false) => {\n    if (!currentShift) return;\n    console.log(`ðŸ”„ ${forceRefresh ? 'ØªØ­Ø¯ÙŠØ« Ù‚ÙˆÙŠ' : 'ØªØ­Ù…ÙŠÙ„'} Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©...`);\n    if (forceRefresh) {\n      await loadCompletedRentalsFromServer();\n    } else {\n      // Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ Ø£ÙˆÙ„Ø§Ù‹\n      const savedRentals = storage.getCompletedRentals(currentShift.id);\n      if (savedRentals.length > 0) {\n        console.log(`ðŸ“‚ Ø§Ø³ØªØ®Ø¯Ø§Ù… ${savedRentals.length} ØªØ£Ø¬ÙŠØ± Ù…ÙƒØªÙ…Ù„ Ù…Ù† Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ`);\n        setCompletedRentals(savedRentals);\n      } else {\n        // Ø¥Ø°Ø§ Ù„Ù… ØªÙˆØ¬Ø¯ ÙÙŠ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠØŒ Ø¬Ù„Ø¨ Ù…Ù† Ø§Ù„Ø³ÙŠØ±ÙØ±\n        await loadCompletedRentalsFromServer();\n      }\n    }\n  };\n  const loadTodaysShifts = async () => {\n    if (!isManager) {\n      console.log('ðŸ‘· Ø§Ù„Ù…ÙˆØ¸Ù Ù„Ø§ ÙŠÙ…ÙƒÙ†Ù‡ Ø±Ø¤ÙŠØ© Ø´ÙŠÙØªØ§Øª Ø§Ù„ÙŠÙˆÙ…');\n      return;\n    }\n    try {\n      console.log('ðŸ“… Ø¬Ù„Ø¨ Ø´ÙŠÙØªØ§Øª Ø§Ù„ÙŠÙˆÙ… Ù„Ù„Ù…Ø¯ÙŠØ±...');\n      const today = new Date();\n      const todayStart = new Date(today.getFullYear(), today.getMonth(), today.getDate());\n      const todayEnd = new Date(today.getFullYear(), today.getMonth(), today.getDate() + 1);\n      const response = await api.get('/shifts', {\n        params: {\n          branch_id: user === null || user === void 0 ? void 0 : user.branch_id,\n          start_date: todayStart.toISOString(),\n          end_date: todayEnd.toISOString(),\n          order_by: 'start_time',\n          order_direction: 'DESC'\n        }\n      });\n      if (response.success) {\n        const shiftsData = Array.isArray(response.data) ? response.data : [];\n        console.log(`âœ… ØªÙ… Ø¬Ù„Ø¨ ${shiftsData.length} Ø´ÙŠÙØª Ù„Ù„ÙŠÙˆÙ…`);\n        setTodaysShifts(shiftsData);\n      }\n    } catch (error) {\n      console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø´ÙŠÙØªØ§Øª Ø§Ù„ÙŠÙˆÙ…:', error);\n    }\n  };\n  const validateShift = () => {\n    if (!currentShift) {\n      showNotification('error', 'ÙŠØ¬Ø¨ Ø¨Ø¯Ø¡ Ø´ÙŠÙØª Ø£ÙˆÙ„Ø§Ù‹ Ù‚Ø¨Ù„ Ø¨Ø¯Ø¡ Ø£ÙŠ ØªØ£Ø¬ÙŠØ±Ø§Øª');\n      return false;\n    }\n    if (currentShift.status === 'Ù…Ù†ØªÙ‡ÙŠ') {\n      showNotification('error', 'Ø§Ù„Ø´ÙŠÙØª Ø§Ù„Ø­Ø§Ù„ÙŠ Ù…Ù†ØªÙ‡ÙŠ. ÙŠØ±Ø¬Ù‰ Ø¨Ø¯Ø¡ Ø´ÙŠÙØª Ø¬Ø¯ÙŠØ¯');\n      return false;\n    }\n    if (currentShift.start_time) {\n      const startTime = new Date(currentShift.start_time);\n      const now = new Date();\n      const hoursDiff = Math.floor((now - startTime) / (1000 * 60 * 60));\n      if (hoursDiff > 24) {\n        showNotification('warning', 'Ø§Ù„Ø´ÙŠÙØª ØªØ¬Ø§ÙˆØ² 24 Ø³Ø§Ø¹Ø©. ÙŠÙˆØµÙ‰ Ø¨Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø´ÙŠÙØª ÙˆØ¨Ø¯Ø¡ Ø´ÙŠÙØª Ø¬Ø¯ÙŠØ¯');\n      }\n    }\n    return true;\n  };\n  const handleGameClick = game => {\n    if (!validateShift()) {\n      return;\n    }\n    console.log('ðŸŽ¯ Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ù„Ø¹Ø¨Ø©:', game.name);\n    if (!currentShift) {\n      showNotification('error', 'ÙŠØ¬Ø¨ Ø¨Ø¯Ø¡ Ø´ÙŠÙØª Ø£ÙˆÙ„Ø§Ù‹ Ù‚Ø¨Ù„ Ø¨Ø¯Ø¡ Ø£ÙŠ ØªØ£Ø¬ÙŠØ±Ø§Øª');\n      return;\n    }\n    const isAlreadySelected = selectedGames.some(g => g.id === game.id);\n    if (!isAlreadySelected) {\n      setSelectedGames(prev => [...prev, game]);\n      setSelectedGameQuantities(prev => ({\n        ...prev,\n        [game.id]: 1\n      }));\n    } else {\n      setSelectedGameQuantities(prev => ({\n        ...prev,\n        [game.id]: (prev[game.id] || 1) + 1\n      }));\n    }\n    setShowEnhancedRentalModal(true);\n    showNotification('success', `ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© ${game.name} Ø¥Ù„Ù‰ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªØ£Ø¬ÙŠØ±`);\n  };\n\n  // ==================== Ø¯ÙˆØ§Ù„ Ø§Ù„ØªØ£Ø¬ÙŠØ± Ø§Ù„Ù…Ø­Ø³Ù†Ø© ====================\n  const handleStartEnhancedRentalMain = async rentalData => {\n    if (!validateShift()) {\n      return;\n    }\n    console.log('ðŸš€ Ø¨Ø¯Ø¡ ØªØ£Ø¬ÙŠØ± Ù…ØªØ¹Ø¯Ø¯ Ù…Ø­Ø³Ù†:', rentalData);\n    try {\n      if (!currentShift) {\n        showNotification('error', 'ÙŠØ¬Ø¨ Ø¨Ø¯Ø¡ Ø´ÙŠÙØª Ø£ÙˆÙ„Ø§Ù‹ Ù‚Ø¨Ù„ Ø¥Ù†Ø´Ø§Ø¡ ØªØ£Ø¬ÙŠØ±Ø§Øª');\n        return;\n      }\n      const {\n        customerName,\n        customerPhone,\n        customerNotes,\n        paymentMethod,\n        rentalList,\n        totalFixedAmount\n      } = rentalData;\n      if (!customerName || !customerPhone) {\n        showNotification('error', 'Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„ ÙˆØ±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ');\n        return;\n      }\n      if (!validatePhone(customerPhone)) {\n        showNotification('error', 'Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ ØºÙŠØ± ØµØ­ÙŠØ­. ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† 11 Ø±Ù‚Ù…Ø§Ù‹ ÙˆÙŠØ¨Ø¯Ø£ Ø¨Ù€ 01');\n        return;\n      }\n      if (rentalList.length === 0) {\n        showNotification('error', 'Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¶Ø§ÙØ© Ø£Ù„Ø¹Ø§Ø¨ Ø¥Ù„Ù‰ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªØ£Ø¬ÙŠØ±');\n        return;\n      }\n      showNotification('info', `ðŸ”„ Ø¬Ø§Ø±ÙŠ Ø¥Ù†Ø´Ø§Ø¡ ${rentalList.length} ØªØ£Ø¬ÙŠØ±...`);\n      let successfulRentals = [];\n      let failedRentals = [];\n      for (const rentalItem of rentalList) {\n        try {\n          const game = games.find(g => g.id === rentalItem.gameId);\n          if (!game) {\n            failedRentals.push({\n              gameName: rentalItem.gameName,\n              error: 'Ø§Ù„Ù„Ø¹Ø¨Ø© ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø© ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…'\n            });\n            continue;\n          }\n          const isOpenTime = rentalItem.rentalType === 'open';\n          const durationMinutes = isOpenTime ? 0 : rentalItem.rentalType === 'custom' ? rentalItem.customMinutes : rentalItem.selectedTime;\n          let totalAmount = 0;\n          if (!isOpenTime) {\n            const pricePer15min = game.price_per_15min || 100;\n            const units = Math.ceil(durationMinutes / 15);\n            totalAmount = pricePer15min * units * rentalItem.quantity;\n          }\n          for (let i = 0; i < rentalItem.quantity; i++) {\n            try {\n              const rentalNumber = `RENT-${Date.now()}-${game.id}-${i}-${Math.floor(Math.random() * 1000)}`;\n              const requestData = {\n                rental_number: rentalNumber,\n                game_id: game.id,\n                customer_name: customerName.trim(),\n                customer_phone: customerPhone.trim(),\n                branch_id: user.branch_id,\n                shift_id: currentShift.id,\n                // Ø§Ù„Ø±Ø¨Ø· Ø¨Ø§Ù„Ø´ÙŠÙØª\n                duration_minutes: durationMinutes,\n                total_amount: totalAmount,\n                payment_method: paymentMethod === 'cash' ? 'ÙƒØ§Ø´' : paymentMethod === 'card' ? 'Ø¨Ø·Ø§Ù‚Ø©' : 'ÙÙˆØ¯Ø§ÙÙˆÙ† ÙƒØ§Ø´',\n                payment_status: isOpenTime ? 'Ø¹Ù†Ø¯ Ø§Ù„Ø¥Ù†Ù‡Ø§Ø¡' : 'Ù…Ø¯ÙÙˆØ¹',\n                paid_amount: isOpenTime ? 0 : totalAmount,\n                notes: `${customerNotes || ''} ${rentalItem.notes ? `| ${rentalItem.notes}` : ''}`.trim(),\n                status: 'Ù†Ø´Ø·',\n                start_time: new Date().toISOString(),\n                quantity: 1\n              };\n              console.log(`ðŸ“¤ Ø¥Ø±Ø³Ø§Ù„ ØªØ£Ø¬ÙŠØ± ${i + 1}/${rentalItem.quantity} Ù„Ù„Ø¹Ø¨Ø© ${game.name}:`, requestData);\n              const response = await api.post('/api/rentals/new', requestData);\n              if (response.success) {\n                var _response$data3, _response$data4, _response$data5;\n                const newRental = {\n                  id: ((_response$data3 = response.data) === null || _response$data3 === void 0 ? void 0 : _response$data3.rental_id) || ((_response$data4 = response.data) === null || _response$data4 === void 0 ? void 0 : _response$data4.id) || Date.now() + Math.random(),\n                  rental_number: ((_response$data5 = response.data) === null || _response$data5 === void 0 ? void 0 : _response$data5.rental_number) || requestData.rental_number,\n                  game_id: game.id,\n                  game_name: game.name,\n                  customer_name: customerName.trim(),\n                  customer_phone: customerPhone.trim(),\n                  start_time: new Date().toISOString(),\n                  duration_minutes: durationMinutes,\n                  total_amount: totalAmount,\n                  payment_status: isOpenTime ? 'Ø¹Ù†Ø¯ Ø§Ù„Ø¥Ù†Ù‡Ø§Ø¡' : 'Ù…Ø¯ÙÙˆØ¹',\n                  payment_method: requestData.payment_method,\n                  status: 'Ù†Ø´Ø·',\n                  time_left: isOpenTime ? 'Ù…ÙØªÙˆØ­' : `${durationMinutes}:00`,\n                  is_open_time: isOpenTime,\n                  price_per_15min: game.price_per_15min || 100,\n                  shift_id: currentShift.id,\n                  branch_id: user.branch_id,\n                  image_url: game.image_url,\n                  external_image_url: game.external_image_url,\n                  quantity: 1,\n                  enhanced_image_url: getGameImageUrl(game)\n                };\n                successfulRentals.push({\n                  rental: newRental,\n                  game: game.name,\n                  duration: durationMinutes,\n                  amount: totalAmount\n                });\n                setActiveRentals(prev => [...prev, newRental]);\n                if (!isOpenTime && totalAmount > 0) {\n                  updateShiftRevenueInRealTime(totalAmount, newRental.rental_number);\n                }\n              } else {\n                failedRentals.push({\n                  gameName: game.name,\n                  error: response.message || 'ÙØ´Ù„ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ±'\n                });\n              }\n            } catch (error) {\n              console.error(`ðŸ”¥ Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ ØªØ£Ø¬ÙŠØ± ${game.name}:`, error);\n              failedRentals.push({\n                gameName: game.name,\n                error: error.message || 'Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„'\n              });\n            }\n          }\n        } catch (error) {\n          console.error(`ðŸ”¥ Ø®Ø·Ø£ ÙØ§Ø¯Ø­ ÙÙŠ Ù…Ø¹Ø§Ù„Ø¬Ø© Ù„Ø¹Ø¨Ø© ${rentalItem.gameName}:`, error);\n          failedRentals.push({\n            gameName: rentalItem.gameName,\n            error: 'Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©'\n          });\n        }\n      }\n      if (successfulRentals.length > 0) {\n        let successMessage = `âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ ${successfulRentals.length} ØªØ£Ø¬ÙŠØ± Ø¨Ù†Ø¬Ø§Ø­\\n\\n`;\n        successMessage += `ðŸ‘¤ Ø§Ù„Ø¹Ù…ÙŠÙ„: ${customerName}\\n`;\n        successMessage += `ðŸ“± Ø§Ù„Ù‡Ø§ØªÙ: ${customerPhone}\\n`;\n        successMessage += `ðŸŽ® Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨: ${rentalList.length}\\n`;\n        if (totalFixedAmount > 0) {\n          successMessage += `ðŸ’° Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¯ÙÙˆØ¹: ${formatCurrency(totalFixedAmount)}\\n`;\n        }\n        const openCount = rentalList.filter(r => r.rentalType === 'open').length;\n        if (openCount > 0) {\n          successMessage += `â³ ÙˆÙ‚Øª Ù…ÙØªÙˆØ­: ${openCount} Ù„Ø¹Ø¨Ø©\\n`;\n        }\n        successMessage += `\\nðŸ“‹ ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª:\\n`;\n        successfulRentals.forEach((item, index) => {\n          successMessage += `${index + 1}. ${item.game} - ${item.duration > 0 ? `${item.duration} Ø¯Ù‚ÙŠÙ‚Ø©` : 'ÙˆÙ‚Øª Ù…ÙØªÙˆØ­'}\\n`;\n        });\n        showNotification('success', successMessage);\n\n        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø¹Ø¯ Ù†Ø¬Ø§Ø­ Ø§Ù„ØªØ£Ø¬ÙŠØ±\n        setTimeout(async () => {\n          try {\n            await loadActiveRentals();\n            await updateStatistics();\n            console.log('âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø¹Ø¯ Ø§Ù„ØªØ£Ø¬ÙŠØ± Ø§Ù„Ù…ØªØ¹Ø¯Ø¯');\n          } catch (updateError) {\n            console.log('âš ï¸ Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', updateError.message);\n          }\n        }, 1000);\n      } else {\n        showNotification('error', `âŒ ÙØ´Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª (${failedRentals.length})\\n\\nØ§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰`);\n      }\n      setShowEnhancedRentalModal(false);\n      resetForm();\n    } catch (error) {\n      console.error('ðŸ”¥ðŸ”¥ðŸ”¥ Ø®Ø·Ø£ ÙØ§Ø¯Ø­ ÙÙŠ Ø¨Ø¯Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ± Ø§Ù„Ù…ØªØ¹Ø¯Ø¯:', error);\n      showNotification('error', 'âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹ ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…');\n    }\n  };\n  const updateShiftRevenueInRealTime = async (amount, rentalNumber) => {\n    try {\n      console.log(`ðŸ’° ØªØ­Ø¯ÙŠØ« Ø¥ÙŠØ±Ø§Ø¯ Ø§Ù„Ø´ÙŠÙØª ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ: ${amount}`);\n      if (!currentShift) return;\n      setStatistics(prev => ({\n        ...prev,\n        shiftRevenue: (prev.shiftRevenue || 0) + amount,\n        todayRevenue: (prev.todayRevenue || 0) + amount\n      }));\n      try {\n        const response = await api.put(`/api/shifts/${currentShift.id}/update-revenue`, {\n          revenue_added: amount,\n          rental_count: 1,\n          note: `Ø¥ÙŠØ±Ø§Ø¯ Ù…Ù† ØªØ£Ø¬ÙŠØ± ${rentalNumber}`\n        });\n        if (response.success) {\n          console.log(`âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« Ø¥ÙŠØ±Ø§Ø¯ Ø§Ù„Ø´ÙŠÙØª Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø§Ø¯Ù…`);\n        }\n      } catch (serverError) {\n        console.warn('âš ï¸ Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø®Ø§Ø¯Ù…ØŒ Ø³ÙŠØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ« Ù…Ø­Ù„ÙŠØ§Ù‹ ÙÙ‚Ø·:', serverError.message);\n      }\n      showNotification('success', `ðŸ’° ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø¥ÙŠØ±Ø§Ø¯ ${formatCurrency(amount)} Ù„Ù„Ø´ÙŠÙØª Ø§Ù„Ø­Ø§Ù„ÙŠ`);\n    } catch (error) {\n      console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯:', error);\n    }\n  };\n  const checkShiftRevenue = async () => {\n    try {\n      if (!currentShift) return;\n      const response = await api.get(`/api/shifts/${currentShift.id}/revenue-check`);\n      if (response.success) {\n        const shiftData = response.data.shift;\n        const currentRevenue = shiftData.total_revenue || 0;\n        console.log(`ðŸ“Š Ø¥ÙŠØ±Ø§Ø¯ Ø§Ù„Ø´ÙŠÙØª Ø§Ù„Ø­Ø§Ù„ÙŠ: ${currentRevenue}`);\n        setStatistics(prev => ({\n          ...prev,\n          shiftRevenue: currentRevenue\n        }));\n        return currentRevenue;\n      }\n    } catch (error) {\n      console.warn('âš ï¸ Ù„Ø§ ÙŠÙ…ÙƒÙ† ÙØ­Øµ Ø¥ÙŠØ±Ø§Ø¯ Ø§Ù„Ø´ÙŠÙØª:', error.message);\n    }\n  };\n\n  // ==================== Ø¯ÙˆØ§Ù„ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ù…Ø­Ø³Ù†Ø© ====================\n  const handleChangeGameEnhanced = async rental => {\n    try {\n      const availableGames = games.filter(game => game.id !== rental.game_id);\n      if (availableGames.length === 0) {\n        showNotification('error', 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ù„Ø¹Ø§Ø¨ Ø£Ø®Ø±Ù‰ Ù…ØªØ§Ø­Ø©');\n        return;\n      }\n      setShowChangeGameModal(true);\n      setSelectedRentalForChange(rental);\n      setAvailableGamesForChange(availableGames);\n    } catch (error) {\n      console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØºÙŠÙŠØ± Ø§Ù„Ù„Ø¹Ø¨Ø©:', error);\n      showNotification('error', 'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¶ÙŠØ± ØªØºÙŠÙŠØ± Ø§Ù„Ù„Ø¹Ø¨Ø©');\n    }\n  };\n  const handleCancelRentalEnhanced = async rental => {\n    const startTime = new Date(rental.start_time);\n    const now = new Date();\n    const minutesPassed = Math.floor((now - startTime) / 60000);\n    if (minutesPassed > 3) {\n      showNotification('error', 'Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ± Ø¨Ø¹Ø¯ Ù…Ø±ÙˆØ± Ø£ÙƒØ«Ø± Ù…Ù† 3 Ø¯Ù‚Ø§Ø¦Ù‚');\n      return;\n    }\n    const confirmMessage = `\nâš ï¸ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ± Ø®Ù„Ø§Ù„ Ø£ÙˆÙ„ 3 Ø¯Ù‚Ø§Ø¦Ù‚\n\nØ§Ù„ØªØ£Ø¬ÙŠØ±: #${rental.rental_number}\nØ§Ù„Ø¹Ù…ÙŠÙ„: ${rental.customer_name}\nØ§Ù„Ù„Ø¹Ø¨Ø©: ${rental.game_name}\nØ§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ù†Ù‚Ø¶ÙŠ: ${minutesPassed} Ø¯Ù‚ÙŠÙ‚Ø©\n\nâœ… Ø³ÙŠØªÙ…:\nâ€¢ Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ù…Ø¨Ù„Øº Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ Ù„Ù„Ø¹Ù…ÙŠÙ„\nâ€¢ ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„ØªØ£Ø¬ÙŠØ± Ø¥Ù„Ù‰ \"Ù…Ø³ØªØ±Ø¯\"\n\nÙ‡Ù„ ØªØ±ÙŠØ¯ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©ØŸ`;\n    if (!window.confirm(confirmMessage)) return;\n    try {\n      showNotification('info', 'Ø¬Ø§Ø±ÙŠ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ± ÙˆØ§Ø³ØªØ±Ø¯Ø§Ø¯ Ø§Ù„Ù…Ø¨Ù„Øº...');\n      const response = await api.put(`/rentals/${rental.id}/cancel`, {\n        refund_amount: rental.total_amount || 0,\n        reason: 'Ø¥Ù„ØºØ§Ø¡ Ø®Ù„Ø§Ù„ Ø£ÙˆÙ„ 3 Ø¯Ù‚Ø§Ø¦Ù‚',\n        shift_id: currentShift.id // Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ø±Ù Ø§Ù„Ø´ÙŠÙØª\n      });\n      if (response.success) {\n        showNotification('success', 'âœ… ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ± ÙˆØ§Ø³ØªØ±Ø¯Ø§Ø¯ Ø§Ù„Ù…Ø¨Ù„Øº Ø¨Ù†Ø¬Ø§Ø­');\n        setActiveRentals(prev => prev.filter(r => r.id !== rental.id));\n\n        // Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØ£Ø¬ÙŠØ± Ø§Ù„Ù…Ù„ØºÙŠ Ø¥Ù„Ù‰ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©\n        const cancelledRental = {\n          ...rental,\n          status: 'Ù…Ø³ØªØ±Ø¯',\n          refund_amount: rental.total_amount || 0,\n          actual_end_time: new Date().toISOString(),\n          shift_id: currentShift.id\n        };\n        setCompletedRentals(prev => [cancelledRental, ...prev]);\n\n        // Ø­ÙØ¸ ÙÙŠ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ\n        storage.saveCompletedRentals(currentShift.id, [cancelledRental, ...completedRentals]);\n        updateStatistics();\n      } else {\n        showNotification('error', response.message || 'ÙØ´Ù„ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ±');\n      }\n    } catch (error) {\n      console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ±:', error);\n      showNotification('error', 'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ±');\n    }\n  };\n  const handleEndOpenTimeEnhanced = async rental => {\n    try {\n      if (rental.status === 'Ù…ÙƒØªÙ…Ù„') {\n        showNotification('info', `âœ… Ø§Ù„ØªØ£Ø¬ÙŠØ± ${rental.rental_number} Ù…ÙƒØªÙ…Ù„ Ø¨Ø§Ù„ÙØ¹Ù„!`);\n        return;\n      }\n      if (rental.status !== 'Ù†Ø´Ø·') {\n        showNotification('error', `âš ï¸ Ø§Ù„ØªØ£Ø¬ÙŠØ± Ø¨Ø­Ø§Ù„Ø©: ${rental.status} - Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø¥Ù†Ù‡Ø§Ø¤Ù‡`);\n        return;\n      }\n      const startTime = new Date(rental.start_time);\n      const now = new Date();\n      const elapsedMinutes = Math.floor((now - startTime) / 60000);\n      if (elapsedMinutes < 1) {\n        showNotification('error', 'ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ø§Ù„Ù…Ø¯Ø© Ø¯Ù‚ÙŠÙ‚Ø© ÙˆØ§Ø­Ø¯Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„');\n        return;\n      }\n      const pricePer15Min = rental.price_per_15min || 100;\n      const units = Math.ceil(elapsedMinutes / 15);\n      const finalAmount = pricePer15Min * units;\n      const confirmMessage = `\nðŸ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ±\n\nØ§Ù„ØªØ£Ø¬ÙŠØ±: #${rental.rental_number}\nØ§Ù„Ø¹Ù…ÙŠÙ„: ${rental.customer_name}\nØ§Ù„Ù„Ø¹Ø¨Ø©: ${rental.game_name}\n\nâ±ï¸ Ø§Ù„Ù…Ø¯Ø© Ø§Ù„ÙØ¹Ù„ÙŠØ©: ${elapsedMinutes} Ø¯Ù‚ÙŠÙ‚Ø©\nðŸ’° Ø§Ù„Ø³Ø¹Ø±/15 Ø¯Ù‚ÙŠÙ‚Ø©: ${formatCurrency(pricePer15Min)}\nðŸ“¦ Ø¹Ø¯Ø¯ Ø§Ù„ÙˆØ­Ø¯Ø§Øª: ${units}\n\nðŸŽ¯ Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${formatCurrency(finalAmount)}\n\nÙ‡Ù„ ØªØ±ÙŠØ¯ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©ØŸ`;\n      if (!window.confirm(confirmMessage)) return;\n      const paymentMethod = prompt(`Ø§Ø®ØªØ± Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹ Ù„Ù„Ù…Ø¨Ù„Øº ${formatCurrency(finalAmount)}:\\n\\n1. ÙƒØ§Ø´ ðŸ’µ\\n2. Ø¨Ø·Ø§Ù‚Ø© ðŸ’³\\n3. ÙÙˆØ¯Ø§ÙÙˆÙ† ÙƒØ§Ø´ ðŸ“±\\n\\nØ£Ø¯Ø®Ù„ Ø§Ù„Ø±Ù‚Ù…:`, '1');\n      let paymentMethodText = 'ÙƒØ§Ø´';\n      if (paymentMethod === '2') paymentMethodText = 'Ø¨Ø·Ø§Ù‚Ø©';\n      if (paymentMethod === '3') paymentMethodText = 'ÙÙˆØ¯Ø§ÙÙˆÙ† ÙƒØ§Ø´';\n      showNotification('info', 'ðŸ”„ Ø¬Ø§Ø±ÙŠ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ±...');\n      try {\n        const response = await api.put(`/rentals/${rental.id}/finish`, {\n          final_amount: finalAmount,\n          payment_method: paymentMethodText,\n          notes: `Ø¥Ù†Ù‡Ø§Ø¡ ÙŠØ¯ÙˆÙŠ - Ø§Ù„Ù…Ø¯Ø©: ${elapsedMinutes} Ø¯Ù‚ÙŠÙ‚Ø©`,\n          shift_id: rental.shift_id || (currentShift === null || currentShift === void 0 ? void 0 : currentShift.id)\n        });\n        if (response.success) {\n          showNotification('success', `âœ… ØªÙ… Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ± Ø¨Ù†Ø¬Ø§Ø­!\\nðŸ’° Ø§Ù„Ù…Ø¨Ù„Øº: ${formatCurrency(finalAmount)}`);\n          setActiveRentals(prev => prev.filter(r => r.id !== rental.id));\n\n          // Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØ£Ø¬ÙŠØ± Ø§Ù„Ù…ÙƒØªÙ…Ù„ Ø¥Ù„Ù‰ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©\n          const completedRental = {\n            ...rental,\n            status: 'Ù…ÙƒØªÙ…Ù„',\n            actual_end_time: new Date().toISOString(),\n            actual_duration_minutes: elapsedMinutes,\n            total_amount: finalAmount,\n            payment_method: paymentMethodText,\n            payment_status: 'Ù…Ø¯ÙÙˆØ¹',\n            shift_id: currentShift.id\n          };\n          setCompletedRentals(prev => [completedRental, ...prev]);\n\n          // Ø­ÙØ¸ ÙÙŠ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ\n          storage.saveCompletedRentals(currentShift.id, [completedRental, ...completedRentals]);\n          updateStatistics();\n        } else {\n          showNotification('error', response.message || 'ÙØ´Ù„ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ±');\n        }\n      } catch (error) {\n        console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ±:', error);\n        showNotification('error', 'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ±');\n      }\n    } catch (error) {\n      console.error('ðŸ”¥ Ø®Ø·Ø£ ÙØ§Ø¯Ø­ ÙÙŠ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ÙØªÙˆØ­:', error);\n      showNotification('error', 'Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹');\n    }\n  };\n  const handleAutoCompleteRental = async rental => {\n    try {\n      console.log(`ðŸ”„ Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„ØªØ£Ø¬ÙŠØ± ${rental.rental_number} ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹`);\n      setActiveRentals(prev => prev.filter(r => r.id !== rental.id));\n      const completedRental = {\n        ...rental,\n        status: 'Ù…ÙƒØªÙ…Ù„',\n        actual_end_time: new Date().toISOString(),\n        actual_duration_minutes: rental.duration_minutes,\n        total_amount: rental.total_amount,\n        payment_status: 'Ù…Ø¯ÙÙˆØ¹',\n        formatted_start_time: formatEgyptDateTime(rental.start_time),\n        formatted_end_time: formatEgyptDateTime(new Date().toISOString()),\n        shift_id: currentShift.id\n      };\n      setCompletedRentals(prev => [completedRental, ...prev]);\n\n      // Ø­ÙØ¸ ÙÙŠ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ\n      storage.saveCompletedRentals(currentShift.id, [completedRental, ...completedRentals]);\n      setStatistics(prev => ({\n        ...prev,\n        activeRentals: prev.activeRentals - 1,\n        todayRentals: prev.todayRentals + 1,\n        todayRevenue: prev.todayRevenue + (Number(rental.total_amount) || 0),\n        shiftRevenue: prev.shiftRevenue + (Number(rental.total_amount) || 0)\n      }));\n      console.log(`âœ… ØªÙ… Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„ØªØ£Ø¬ÙŠØ± ${rental.rental_number} Ù…Ø­Ù„ÙŠØ§Ù‹`);\n    } catch (error) {\n      console.error(`ðŸ”¥ Ø®Ø·Ø£ ÙÙŠ Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„ØªØ£Ø¬ÙŠØ±:`, error);\n    }\n  };\n\n  // ==================== Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© ====================\n  const filteredGames = useMemo(() => {\n    console.log('ðŸ”„ Ø­Ø³Ø§Ø¨ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ù…ØµÙØ§Ø©...');\n    if (!games || !Array.isArray(games)) return [];\n    const gamesWithAvailability = games.map(game => {\n      return {\n        ...game,\n        rented_count: 0,\n        available_count: 999,\n        status: 'Ù…ØªØ§Ø­'\n      };\n    });\n    let filtered = gamesWithAvailability.filter(game => {\n      if (!game) return false;\n      const isActive = game.is_active === 1 || game.is_active === true;\n      if (!isActive) return false;\n      return true;\n    });\n    console.log(`âœ… Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ù…ØµÙØ§Ø©: ${filtered.length} Ù…Ù† ${games.length}`);\n    return filtered;\n  }, [games]);\n  const removeGame = gameId => {\n    console.log('ðŸ—‘ï¸ Ø¥Ø²Ø§Ù„Ø© Ù„Ø¹Ø¨Ø©:', gameId);\n    setSelectedGames(prev => prev.filter(game => game.id !== gameId));\n    setSelectedGameQuantities(prev => {\n      const newQuantities = {\n        ...prev\n      };\n      delete newQuantities[gameId];\n      return newQuantities;\n    });\n  };\n  const updateGameQuantity = (gameId, newQuantity) => {\n    if (newQuantity < 1) {\n      removeGame(gameId);\n      return;\n    }\n    setSelectedGameQuantities(prev => ({\n      ...prev,\n      [gameId]: newQuantity\n    }));\n  };\n  const resetForm = () => {\n    console.log('ðŸ”„ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù†Ù…ÙˆØ°Ø¬');\n    setCustomerName('');\n    setCustomerPhone('');\n    setCustomerNotes('');\n    setSelectedGames([]);\n    setSelectedGameQuantities({});\n  };\n  const handleQuickStartRental = () => {\n    console.log('âš¡ Ø¨Ø¯Ø¡ ØªØ£Ø¬ÙŠØ± Ù…ØªØ¹Ø¯Ø¯');\n    if (!currentShift) {\n      showNotification('error', 'ÙŠØ¬Ø¨ Ø¨Ø¯Ø¡ Ø´ÙŠÙØª Ø£ÙˆÙ„Ø§Ù‹');\n      return;\n    }\n    setShowEnhancedRentalModal(true);\n    showNotification('info', 'Ø§ÙØªØ­Øª Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ£Ø¬ÙŠØ± Ø§Ù„Ù…ØªØ¹Ø¯Ø¯. ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¯Ø§Ø±Ø© ÙƒÙ„ Ù„Ø¹Ø¨Ø© Ø¨Ø´ÙƒÙ„ Ù…Ù†ÙØµÙ„.');\n  };\n  const handleQuickAction = action => {\n    switch (action) {\n      case 'startShift':\n        startShift();\n        break;\n      case 'quickRental':\n        handleQuickStartRental();\n        break;\n      case 'refreshData':\n        triggerRefresh();\n        showNotification('info', 'Ø¬Ø§Ø±ÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...');\n        break;\n      case 'refreshCompleted':\n        loadCompletedRentals(true);\n        showNotification('info', 'Ø¬Ø§Ø±ÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©...');\n        break;\n      case 'viewStats':\n        showNotification('info', `\nðŸ“Š Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©:\nâ€¢ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ù…ØªØ§Ø­Ø©: ${statistics.availableGames}\nâ€¢ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©: ${statistics.activeRentals}\nâ€¢ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©: ${statistics.completedCount || completedRentals.length}\nâ€¢ Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø§Ù„ÙŠÙˆÙ…: ${formatCurrency(statistics.todayRevenue)}\nâ€¢ ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„ÙŠÙˆÙ…: ${statistics.todayRentals}\n${isManager ? `â€¢ Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø§Ù„Ø´ÙŠÙØª: ${formatCurrency(statistics.shiftRevenue)}` : ''}\n        `);\n        break;\n      case 'endShift':\n        handleEndCurrentShift();\n        break;\n      default:\n        console.log('Ø¥Ø¬Ø±Ø§Ø¡ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ:', action);\n    }\n  };\n  const NoShiftScreen = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"no-shift-screen\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"no-shift-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"no-shift-icon\",\n          children: \"\\uD83C\\uDFAE\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2480,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"no-shift-title\",\n          children: \"\\u0644\\u0627 \\u064A\\u0648\\u062C\\u062F \\u0634\\u064A\\u0641\\u062A \\u0646\\u0634\\u0637\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2481,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"no-shift-description\",\n          children: \"\\u064A\\u062C\\u0628 \\u0628\\u062F\\u0621 \\u0634\\u064A\\u0641\\u062A \\u062C\\u062F\\u064A\\u062F \\u0644\\u0644\\u062A\\u0645\\u0643\\u0646 \\u0645\\u0646 \\u0625\\u062F\\u0627\\u0631\\u0629 \\u0627\\u0644\\u062A\\u0623\\u062C\\u064A\\u0631\\u0627\\u062A\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2482,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"no-shift-actions\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"start-shift-btn-primary\",\n            onClick: startShift,\n            children: \"\\uD83D\\uDE80 \\u0628\\u062F\\u0621 \\u0634\\u064A\\u0641\\u062A \\u062C\\u062F\\u064A\\u062F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2487,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"refresh-system-btn\",\n            onClick: () => window.location.reload(),\n            children: \"\\uD83D\\uDD04 \\u062A\\u062D\\u062F\\u064A\\u062B \\u0627\\u0644\\u0646\\u0638\\u0627\\u0645\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2494,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2486,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"no-shift-info\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"\\uD83D\\uDC64 \\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: user === null || user === void 0 ? void 0 : user.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2503,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2503,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"\\uD83C\\uDFEA \\u0627\\u0644\\u0641\\u0631\\u0639: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: user === null || user === void 0 ? void 0 : user.branch_name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2504,\n              columnNumber: 26\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2504,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2502,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2479,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 2478,\n      columnNumber: 7\n    }, this);\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"rentals-page-loading-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"rentals-page-spinner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2514,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u062C\\u0627\\u0631\\u064A \\u062A\\u062D\\u0645\\u064A\\u0644 \\u0627\\u0644\\u0628\\u064A\\u0627\\u0646\\u0627\\u062A...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2515,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 2513,\n      columnNumber: 7\n    }, this);\n  }\n  if (!currentShift) {\n    return /*#__PURE__*/_jsxDEV(NoShiftScreen, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 2521,\n      columnNumber: 12\n    }, this);\n  }\n\n  // Ø¯Ø§Ù„Ø© Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© Ù„Ø¹Ø±Ø¶Ù‡Ø§ ÙÙŠ Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„\n  const getDisplayImage = item => {\n    return item.enhanced_image_url || getGameImageUrl(item);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"rentals-page-main\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"rentals-page-top-controls\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"rentals-page-header-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"rentals-page-title\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"rentals-page-title-icon\",\n            children: \"\\uD83C\\uDFAE\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2536,\n            columnNumber: 13\n          }, this), \"\\u0646\\u0638\\u0627\\u0645 \\u0625\\u062F\\u0627\\u0631\\u0629 \\u0627\\u0644\\u062A\\u0623\\u062C\\u064A\\u0631\\u0627\\u062A\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2535,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"rentals-page-user-info\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"rentals-page-user-name\",\n            children: (user === null || user === void 0 ? void 0 : user.name) || 'Ù…Ø³ØªØ®Ø¯Ù…'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2540,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"rentals-page-user-role\",\n            children: (user === null || user === void 0 ? void 0 : user.role) === 'employee' ? 'ðŸ‘· Ù…ÙˆØ¸Ù' : 'ðŸ‘‘ Ù…Ø¯ÙŠØ±'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2541,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2539,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2534,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"rentals-page-controls-row\",\n        children: [/*#__PURE__*/_jsxDEV(QuickActionsMenu, {\n          onActionClick: handleQuickAction\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2548,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"rentals-page-shift-info-display\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"rentals-page-shift-timer\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"rentals-page-timer-icon\",\n              children: \"\\u23F1\\uFE0F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2552,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"rentals-page-timer-text\",\n              children: [\"\\u0627\\u0644\\u0634\\u064A\\u0641\\u062A #\", currentShift.id, \" - \\u0628\\u062F\\u0623: \", formatEgyptDateTime(currentShift.start_time)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2553,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"rentals-page-current-time\",\n              children: [\"\\u0627\\u0644\\u0648\\u0642\\u062A \\u0627\\u0644\\u062D\\u0627\\u0644\\u064A: \", currentEgyptTime]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2556,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2551,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"rentals-page-shift-actions\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"rentals-page-btn-quick-rental\",\n              onClick: handleQuickStartRental,\n              title: \"\\u0628\\u062F\\u0621 \\u062A\\u0623\\u062C\\u064A\\u0631 \\u062C\\u062F\\u064A\\u062F\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"rentals-page-btn-icon\",\n                children: \"\\uD83D\\uDE80\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2566,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"rentals-page-btn-text\",\n                children: \"\\u0628\\u062F\\u0621 \\u062A\\u0623\\u062C\\u064A\\u0631\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2567,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2561,\n              columnNumber: 15\n            }, this), isManager && /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"rentals-page-btn-end-shift\",\n              onClick: handleEndCurrentShift,\n              title: \"\\u0625\\u0646\\u0647\\u0627\\u0621 \\u0627\\u0644\\u0634\\u064A\\u0641\\u062A \\u0627\\u0644\\u062D\\u0627\\u0644\\u064A\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"rentals-page-btn-icon\",\n                children: \"\\uD83C\\uDFC1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2575,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"rentals-page-btn-text\",\n                children: \"\\u0625\\u0646\\u0647\\u0627\\u0621 \\u0627\\u0644\\u0634\\u064A\\u0641\\u062A\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2576,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2570,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2560,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2550,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2547,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 2533,\n      columnNumber: 7\n    }, this), isManager && todaysShifts.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"manager-todays-shifts\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"section-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"section-icon\",\n            children: \"\\uD83D\\uDCC5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2588,\n            columnNumber: 15\n          }, this), \"\\u0634\\u064A\\u0641\\u062A\\u0627\\u062A \\u0627\\u0644\\u064A\\u0648\\u0645\", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"badge-count\",\n            children: todaysShifts.length\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2590,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2587,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"refresh-btn\",\n          onClick: loadTodaysShifts,\n          title: \"\\u062A\\u062D\\u062F\\u064A\\u062B \\u0634\\u064A\\u0641\\u062A\\u0627\\u062A \\u0627\\u0644\\u064A\\u0648\\u0645\",\n          children: \"\\uD83D\\uDD04\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2592,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2586,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"shifts-scroll-container\",\n        children: todaysShifts.map(shift => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"todays-shift-mini-card\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"shift-mini-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"shift-id\",\n              children: [\"#\", shift.id]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2605,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: `shift-mini-status ${shift.status === 'Ù…Ù†ØªÙ‡ÙŠ' ? 'ended' : 'active'}`,\n              children: shift.status === 'Ù…Ù†ØªÙ‡ÙŠ' ? 'âœ…' : 'ðŸ”¥'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2606,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2604,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"shift-mini-body\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"shift-mini-info\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"employee\",\n                children: shift.employee_name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2612,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"time\",\n                children: formatEgyptDateTime(shift.start_time).split(' ')[1]\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2613,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2611,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"shift-mini-stats\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"revenue\",\n                children: formatCurrency(shift.total_revenue || 0)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2616,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"rentals\",\n                children: [shift.total_rentals || 0, \" \\u062A\\u0623\\u062C\\u064A\\u0631\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2617,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2615,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2610,\n            columnNumber: 17\n          }, this)]\n        }, shift.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2603,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2601,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 2585,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"rentals-page-stats-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"rentals-page-stats-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stats-title-section\",\n          children: /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"stats-title-icon\",\n              children: \"\\uD83D\\uDCCA\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2630,\n              columnNumber: 15\n            }, this), \"\\u0644\\u0648\\u062D\\u0629 \\u0627\\u0644\\u062A\\u062D\\u0643\\u0645 \\u0627\\u0644\\u062D\\u064A\\u0629\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2629,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2628,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stats-controls\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"stats-refresh-btn\",\n            onClick: () => {\n              loadActiveRentals();\n              loadGames();\n              showNotification('info', 'Ø¬Ø§Ø±ÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...');\n            },\n            children: \"\\uD83D\\uDD04 \\u062A\\u062D\\u062F\\u064A\\u062B \\u0627\\u0644\\u0628\\u064A\\u0627\\u0646\\u0627\\u062A\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2636,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2635,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2627,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"rentals-page-stats-grid\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"rentals-page-stat-card\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-card-header\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"stat-icon\",\n              children: \"\\uD83D\\uDD25\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2652,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2651,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-card-body\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"stat-main-value\",\n              children: statistics.activeRentals\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2655,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"stat-label\",\n              children: \"\\u062A\\u0623\\u062C\\u064A\\u0631\\u0627\\u062A \\u0646\\u0634\\u0637\\u0629\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2656,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2654,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2650,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"rentals-page-stat-card\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-card-header\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"stat-icon\",\n              children: \"\\uD83C\\uDFAE\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2662,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2661,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-card-body\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"stat-main-value\",\n              children: statistics.availableGames\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2665,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"stat-label\",\n              children: \"\\u0623\\u0644\\u0639\\u0627\\u0628 \\u0645\\u062A\\u0627\\u062D\\u0629\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2666,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"stat-sub-info\",\n              children: \"\\u062C\\u0645\\u064A\\u0639 \\u0627\\u0644\\u0623\\u0644\\u0639\\u0627\\u0628 \\u0645\\u062A\\u0627\\u062D\\u0629 \\u062F\\u0627\\u0626\\u0645\\u0627\\u064B\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2667,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2664,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2660,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"rentals-page-stat-card revenue-highlight\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-card-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"stat-icon\",\n              children: \"\\uD83D\\uDCB0\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2675,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"refresh-revenue-btn\",\n              onClick: checkShiftRevenue,\n              title: \"\\u062A\\u062D\\u062F\\u064A\\u062B \\u0625\\u064A\\u0631\\u0627\\u062F \\u0627\\u0644\\u0634\\u064A\\u0641\\u062A\",\n              children: \"\\uD83D\\uDD04\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2676,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2674,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-card-body\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"stat-main-value\",\n              children: formatCurrency(statistics.shiftRevenue)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2685,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"stat-label\",\n              children: \"\\u0625\\u064A\\u0631\\u0627\\u062F \\u0627\\u0644\\u0634\\u064A\\u0641\\u062A \\u0627\\u0644\\u062D\\u0627\\u0644\\u064A\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2686,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"stat-sub-info\",\n              children: currentShift ? `Ø§Ù„Ø´ÙŠÙØª #${currentShift.id}` : 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø´ÙŠÙØª'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2687,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2684,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2673,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"rentals-page-stat-card system-card\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-card-header\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"stat-icon\",\n              children: \"\\u2699\\uFE0F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2695,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2694,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-card-body\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"stat-main-value\",\n              children: [\"#\", currentShift.id]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2698,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"stat-label\",\n              children: \"\\u0627\\u0644\\u0634\\u064A\\u0641\\u062A \\u0627\\u0644\\u062D\\u0627\\u0644\\u064A\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2701,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"stat-sub-info\",\n              children: formatEgyptDateTime(currentShift.start_time)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2702,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2697,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2693,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2649,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 2626,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"rentals-page-games-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"rentals-page-section-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"rentals-page-header-icon\",\n            children: \"\\uD83C\\uDFAE\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2713,\n            columnNumber: 13\n          }, this), \"\\u0627\\u0644\\u0623\\u0644\\u0639\\u0627\\u0628 \\u0627\\u0644\\u0645\\u062A\\u0627\\u062D\\u0629\", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"rentals-page-games-count\",\n            children: [\"(\", filteredGames.length, \" \\u0644\\u0639\\u0628\\u0629)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2715,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2712,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"rentals-page-section-controls\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"rentals-page-refresh-btn\",\n            onClick: loadGames,\n            title: \"\\u062A\\u062D\\u062F\\u064A\\u062B \\u0642\\u0627\\u0626\\u0645\\u0629 \\u0627\\u0644\\u0623\\u0644\\u0639\\u0627\\u0628\",\n            children: \"\\uD83D\\uDD04 \\u062A\\u062D\\u062F\\u064A\\u062B \\u0627\\u0644\\u0623\\u0644\\u0639\\u0627\\u0628\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2720,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2719,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2711,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"rentals-page-games-grid\",\n        children: filteredGames.length > 0 ? filteredGames.map(game => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"rentals-page-game-card available\",\n          onClick: () => handleGameClick(game),\n          title: `Ø¥Ø¶Ø§ÙØ© ${game.name} Ù„Ù„ØªØ£Ø¬ÙŠØ±`,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"rentals-page-game-image-container\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: getGameImageUrl(game),\n              alt: game.name,\n              className: \"rentals-page-game-image clear-image\",\n              style: {\n                objectFit: 'cover',\n                objectPosition: 'center'\n              },\n              onError: handleImageError\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2740,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2739,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"rentals-page-game-info\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"rentals-page-game-price-badge\",\n              children: formatCurrency(game.price_per_15min)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2753,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"rentals-page-game-title\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: game.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2758,\n                columnNumber: 21\n              }, this), selectedGames.some(g => g.id === game.id) && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"rentals-page-selected-indicator\",\n                children: [\"\\u2728 \", selectedGameQuantities[game.id] || 1, \"x\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 2760,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2757,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"rentals-page-game-actions\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: `rentals-page-select-game-btn ${selectedGames.some(g => g.id === game.id) ? 'selected-btn' : 'available-btn'}`,\n                onClick: e => {\n                  e.stopPropagation();\n                  handleGameClick(game);\n                },\n                children: selectedGames.some(g => g.id === game.id) ? `âœ… Ù…Ø®ØªØ§Ø±Ø© (${selectedGameQuantities[game.id] || 1})` : 'âž• Ø¥Ø¶Ø§ÙØ© Ù„Ù„ØªØ£Ø¬ÙŠØ±'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2767,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2766,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2752,\n            columnNumber: 17\n          }, this)]\n        }, game.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2733,\n          columnNumber: 15\n        }, this)) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"rentals-page-no-games\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"rentals-page-empty-icon\",\n            children: \"\\uD83C\\uDFAE\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2786,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0623\\u0644\\u0639\\u0627\\u0628 \\u0645\\u062A\\u0627\\u062D\\u0629 \\u062D\\u0627\\u0644\\u064A\\u0627\\u064B\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2787,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"rentals-page-refresh-games-btn\",\n            onClick: loadGames,\n            children: \"\\uD83D\\uDD04 \\u062A\\u062D\\u062F\\u064A\\u062B \\u0627\\u0644\\u0623\\u0644\\u0639\\u0627\\u0628\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2788,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2785,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2730,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 2710,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"rentals-page-active-rentals-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"rentals-page-section-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"rentals-page-header-icon\",\n            children: \"\\uD83D\\uDD25\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2802,\n            columnNumber: 13\n          }, this), \"\\u0627\\u0644\\u062A\\u0623\\u062C\\u064A\\u0631\\u0627\\u062A \\u0627\\u0644\\u0646\\u0634\\u0637\\u0629\", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"rentals-page-active-count\",\n            children: [\"(\", activeRentals.length, \" \\u062A\\u0623\\u062C\\u064A\\u0631)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2804,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2801,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"rentals-page-section-controls\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"rentals-page-refresh-btn\",\n            onClick: loadActiveRentals,\n            title: \"\\u062A\\u062D\\u062F\\u064A\\u062F \\u064A\\u062F\\u0648\\u064A\",\n            children: \"\\uD83D\\uDD04 \\u062A\\u062D\\u062F\\u064A\\u062B \\u0627\\u0644\\u062A\\u0623\\u062C\\u064A\\u0631\\u0627\\u062A\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2810,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2809,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2800,\n        columnNumber: 9\n      }, this), activeRentals.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"rentals-page-empty-state\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"rentals-page-empty-icon\",\n          children: \"\\uD83D\\uDCED\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2822,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u062A\\u0623\\u062C\\u064A\\u0631\\u0627\\u062A \\u0646\\u0634\\u0637\\u0629 \\u062D\\u0627\\u0644\\u064A\\u0627\\u064B\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2823,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"rentals-page-empty-actions\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleQuickStartRental,\n            className: \"rentals-page-btn-quick-rental\",\n            children: \"\\uD83D\\uDE80 \\u0628\\u062F\\u0621 \\u062A\\u0623\\u062C\\u064A\\u0631 \\u062C\\u062F\\u064A\\u062F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2825,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2824,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2821,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"rentals-page-active-rentals-table-container\",\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"rentals-page-active-rentals-table\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u062A\\u0623\\u062C\\u064A\\u0631\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2835,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u0627\\u0644\\u0639\\u0645\\u064A\\u0644\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2836,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u0627\\u0644\\u0644\\u0639\\u0628\\u0629\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2837,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u0627\\u0644\\u0643\\u0645\\u064A\\u0629\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2838,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u0648\\u0642\\u062A \\u0627\\u0644\\u0628\\u062F\\u0621\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2839,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u0627\\u0644\\u0645\\u062F\\u0629\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2840,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u0627\\u0644\\u0648\\u0642\\u062A \\u0627\\u0644\\u0645\\u062A\\u0628\\u0642\\u064A\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2841,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u062D\\u0627\\u0644\\u0629 \\u0627\\u0644\\u062F\\u0641\\u0639\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2842,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2843,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2834,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2833,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: activeRentals.map(rental => /*#__PURE__*/_jsxDEV(\"tr\", {\n              className: rental.is_expired ? 'expired' : '',\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"rentals-page-rental-number\",\n                  children: [\"#\", rental.rental_number]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2850,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2849,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"rentals-page-customer-info\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"rentals-page-customer-name\",\n                    children: rental.customer_name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2856,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"rentals-page-customer-phone\",\n                    children: rental.customer_phone\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2857,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2855,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2854,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"rentals-page-rental-game-info\",\n                  children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                    src: getDisplayImage(rental),\n                    alt: rental.game_name,\n                    className: \"rentals-page-rental-game-image\",\n                    onError: handleImageError,\n                    crossOrigin: \"anonymous\",\n                    loading: \"lazy\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2862,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"rentals-page-game-name-only\",\n                    children: rental.game_name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2870,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2861,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2860,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"rentals-page-quantity\",\n                  children: [rental.quantity || 1, \" \\u0642\\u0637\\u0639\\u0629\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2874,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2873,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"rentals-page-start-time\",\n                  children: formatEgyptDateTime(rental.start_time)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2879,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2878,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"rentals-page-duration\",\n                  children: formatDuration(rental.duration_minutes)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2884,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2883,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"rentals-page-time-left-container\",\n                  children: rental.is_open_time ? /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"rentals-page-open-time-badge\",\n                    children: \"\\u23F3 \\u0648\\u0642\\u062A \\u0645\\u0641\\u062A\\u0648\\u062D\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2891,\n                    columnNumber: 27\n                  }, this) : rental.duration_minutes > 0 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: `rentals-page-time-left ${rental.is_expired ? 'expired' : ''}`,\n                      children: [rental.time_left || 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­Ø³Ø§Ø¨...', rental.time_left === 'Ø§Ù†ØªÙ‡Ù‰' && /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"rentals-page-expired-indicator\",\n                        children: \"\\u23F0\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 2897,\n                        columnNumber: 33\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2894,\n                      columnNumber: 29\n                    }, this), rental.is_expired && /*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"rentals-page-auto-complete-btn\",\n                      onClick: () => handleAutoCompleteRental(rental),\n                      title: \"\\u0625\\u0643\\u0645\\u0627\\u0644 \\u0627\\u0644\\u062A\\u0623\\u062C\\u064A\\u0631 \\u062A\\u0644\\u0642\\u0627\\u0626\\u064A\\u0627\\u064B\",\n                      children: \"\\u2705 \\u0625\\u0643\\u0645\\u0627\\u0644\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2901,\n                      columnNumber: 31\n                    }, this)]\n                  }, void 0, true) : /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"rentals-page-open-time-badge\",\n                    children: \"\\u23F3 \\u0648\\u0642\\u062A \\u0645\\u0641\\u062A\\u0648\\u062D\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2911,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2889,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2888,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"rentals-page-payment-status\",\n                  children: rental.payment_status === 'Ù…Ø¯ÙÙˆØ¹' ? /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"rentals-page-paid-badge\",\n                    children: [\"\\u2705 \\u0645\\u062F\\u0641\\u0648\\u0639\", rental.duration_minutes > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"rentals-page-fixed-badge\",\n                      children: \"\\u23F0 \\u062B\\u0627\\u0628\\u062A\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2921,\n                      columnNumber: 31\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2918,\n                    columnNumber: 27\n                  }, this) : rental.payment_status === 'Ø¹Ù†Ø¯ Ø§Ù„Ø¥Ù†Ù‡Ø§Ø¡' ? /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"rentals-page-pending-badge\",\n                    children: [\"\\u23F3 \\u0639\\u0646\\u062F \\u0627\\u0644\\u0625\\u0646\\u0647\\u0627\\u0621\", rental.duration_minutes === 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"rentals-page-open-badge\",\n                      children: \"\\u221E \\u0645\\u0641\\u062A\\u0648\\u062D\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2928,\n                      columnNumber: 31\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2925,\n                    columnNumber: 27\n                  }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"rentals-page-unpaid-badge\",\n                    children: \"\\u274C \\u063A\\u064A\\u0631 \\u0645\\u062F\\u0641\\u0648\\u0639\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2932,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2916,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2915,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"rentals-page-actions-container\",\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"rentals-page-details-btn\",\n                    onClick: () => setSelectedRentalDetails(rental),\n                    title: \"\\u0639\\u0631\\u0636 \\u0627\\u0644\\u062A\\u0641\\u0627\\u0635\\u064A\\u0644\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"rentals-page-btn-icon\",\n                      children: \"\\uD83D\\uDC41\\uFE0F\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2943,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"rentals-page-btn-text\",\n                      children: \"\\u0639\\u0631\\u0636\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 2944,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2938,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(RentalActionsDropdown, {\n                    rental: rental,\n                    onActionClick: (action, rentalData) => {\n                      switch (action) {\n                        case 'changeGame':\n                          handleChangeGameEnhanced(rentalData);\n                          break;\n                        case 'cancel':\n                          handleCancelRentalEnhanced(rentalData);\n                          break;\n                        case 'endTime':\n                          handleEndOpenTimeEnhanced(rentalData);\n                          break;\n                        default:\n                          console.log('Ø¥Ø¬Ø±Ø§Ø¡ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ:', action);\n                      }\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 2947,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 2937,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2936,\n                columnNumber: 21\n              }, this)]\n            }, rental.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2848,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2846,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2832,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2831,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 2799,\n      columnNumber: 7\n    }, this), !isEmployee && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"rentals-page-completed-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"rentals-page-section-header\",\n        children: /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"rentals-page-header-icon\",\n            children: \"\\u2705\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2979,\n            columnNumber: 15\n          }, this), \"\\u0627\\u0644\\u062A\\u0623\\u062C\\u064A\\u0631\\u0627\\u062A \\u0627\\u0644\\u0645\\u0643\\u062A\\u0645\\u0644\\u0629\", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"rentals-page-completed-count\",\n            children: [\"(\", completedRentals.length, \" \\u062A\\u0623\\u062C\\u064A\\u0631)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 2981,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2978,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2977,\n        columnNumber: 11\n      }, this), completedRentals.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"rentals-page-empty-state\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"rentals-page-empty-icon\",\n          children: \"\\uD83D\\uDCCA\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2989,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u062A\\u0623\\u062C\\u064A\\u0631\\u0627\\u062A \\u0645\\u0643\\u062A\\u0645\\u0644\\u0629\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2990,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2988,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"rentals-page-completed-table-container\",\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"rentals-page-completed-rentals-table\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u062A\\u0623\\u062C\\u064A\\u0631\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2997,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u0627\\u0644\\u0639\\u0645\\u064A\\u0644\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2998,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u0627\\u0644\\u0644\\u0639\\u0628\\u0629\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 2999,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u0648\\u0642\\u062A \\u0627\\u0644\\u0628\\u062F\\u0621\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3000,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u0648\\u0642\\u062A \\u0627\\u0644\\u0627\\u0646\\u062A\\u0647\\u0627\\u0621\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3001,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u0627\\u0644\\u0645\\u062F\\u0629\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3002,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u0627\\u0644\\u0645\\u0628\\u0644\\u063A\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3003,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u0637\\u0631\\u064A\\u0642\\u0629 \\u0627\\u0644\\u062F\\u0641\\u0639\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3004,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u0627\\u0644\\u062D\\u0627\\u0644\\u0629\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3005,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 2996,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2995,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: completedRentals.map(rental => /*#__PURE__*/_jsxDEV(\"tr\", {\n              className: rental.status === 'Ù…Ø³ØªØ±Ø¯' ? 'refunded-row' : rental.status === 'Ù…Ù„ØºÙŠ' ? 'cancelled-row' : 'completed-row',\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: [\"#\", rental.rental_number]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 3015,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"rentals-page-customer-info\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"rentals-page-customer-name\",\n                    children: rental.customer_name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 3018,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"rentals-page-customer-phone\",\n                    children: rental.customer_phone\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 3019,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3017,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3016,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"rentals-page-completed-game-info\",\n                  children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                    src: getGameImageUrl(rental),\n                    alt: rental.game_name,\n                    className: \"rentals-page-completed-game-image\",\n                    onError: handleImageError\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 3024,\n                    columnNumber: 27\n                  }, this), rental.game_name]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3023,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3022,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: formatEgyptDateTime(rental.start_time)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3033,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: formatEgyptDateTime(rental.actual_end_time || rental.end_time)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3034,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: formatDuration(rental.actual_duration_minutes || rental.duration_minutes)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3035,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"rentals-page-amount-cell\",\n                children: rental.status === 'Ù…Ø³ØªØ±Ø¯' ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"rentals-page-amount-zero\",\n                    children: \"0 \\u062C.\\u0645\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 3039,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"rentals-page-refund-badge\",\n                    children: [\"\\uD83D\\uDCB8 \\u0645\\u0633\\u062A\\u0631\\u062F: \", formatCurrency(rental.refund_amount || rental.total_amount || 0)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 3040,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true) : rental.status === 'Ù…Ù„ØºÙŠ' ? /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"rentals-page-amount-cancelled\",\n                  children: \"\\u274C \\u0645\\u0644\\u063A\\u064A\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3045,\n                  columnNumber: 27\n                }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"rentals-page-amount-completed\",\n                  children: formatCurrency(rental.total_amount || 0)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3047,\n                  columnNumber: 27\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3036,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: rental.payment_method || 'ÙƒØ§Ø´'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3052,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `rentals-page-status-badge ${rental.status === 'Ù…Ø³ØªØ±Ø¯' ? 'refunded' : rental.status === 'Ù…Ù„ØºÙŠ' ? 'cancelled' : 'completed'}`,\n                  children: rental.status === 'Ù…Ø³ØªØ±Ø¯' ? 'ðŸ’¸ Ù…Ø³ØªØ±Ø¯' : rental.status === 'Ù…Ù„ØºÙŠ' ? 'âŒ Ù…Ù„ØºÙŠ' : 'âœ… Ù…ÙƒØªÙ…Ù„'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 3054,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 3053,\n                columnNumber: 23\n              }, this)]\n            }, rental.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 3010,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 3008,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2994,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2993,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 2976,\n      columnNumber: 9\n    }, this), showEnhancedRentalModal && /*#__PURE__*/_jsxDEV(EnhancedRentalListModal, {\n      show: showEnhancedRentalModal,\n      onClose: () => setShowEnhancedRentalModal(false),\n      games: games,\n      selectedGames: selectedGames,\n      selectedGameQuantities: selectedGameQuantities,\n      onStartRental: handleStartEnhancedRentalMain,\n      currentShift: currentShift\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 3074,\n      columnNumber: 9\n    }, this), selectedRentalDetails && /*#__PURE__*/_jsxDEV(RentalDetailsModal, {\n      rental: selectedRentalDetails,\n      onClose: () => setSelectedRentalDetails(null)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 3086,\n      columnNumber: 9\n    }, this), showChangeGameModal && selectedRentalForChange && /*#__PURE__*/_jsxDEV(ChangeGameModal, {\n      rental: selectedRentalForChange,\n      availableGames: availableGamesForChange,\n      onClose: () => {\n        setShowChangeGameModal(false);\n        setSelectedRentalForChange(null);\n      },\n      onGameSelected: handleChangeGameEnhanced\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 3093,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 2532,\n    columnNumber: 5\n  }, this);\n};\n_s2(Rentals, \"5n75uDmOOF42Hz+USEaBedhrFvQ=\", false, function () {\n  return [useAuth];\n});\n_c2 = Rentals;\nexport default Rentals;\nvar _c, _c2;\n$RefreshReg$(_c, \"EnhancedRentalListModal\");\n$RefreshReg$(_c2, \"Rentals\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","useMemo","useAuth","api","jsxDEV","_jsxDEV","Fragment","_Fragment","showNotification","type","message","oldNotifications","document","querySelectorAll","forEach","n","style","animation","setTimeout","remove","notification","createElement","className","backgroundColor","borderColor","cssText","innerHTML","replace","body","appendChild","parentElement","getElementById","id","textContent","head","validatePhone","phone","phoneRegex","test","formatCurrency","amount","num","parseFloat","Intl","NumberFormat","currency","minimumFractionDigits","maximumFractionDigits","format","GAME_IMAGE_MAP","getGameImageUrl","game","imageSources","image_url","external_image_url","thumbnail_url","image","image_path","photo_url","photo","imageUrl","cleanUrl","toString","trim","startsWith","gameName","name","game_name","toLowerCase","key","imagePath","Object","entries","keyLower","includes","console","log","keywords","keyword","handleImageError","e","target","src","onerror","alt","fallbackImage","gameNameLower","classList","add","storage","saveCompletedRentals","shiftId","rentals","data","timestamp","Date","now","expiry","localStorage","setItem","JSON","stringify","length","error","getCompletedRentals","getItem","parsed","parse","removeItem","clearCompletedRentals","cleanupOldData","i","EnhancedRentalListModal","show","onClose","games","selectedGames","initialSelectedGames","selectedGameQuantities","initialQuantities","onStartRental","currentShift","_s","customerName","setCustomerName","customerPhone","setCustomerPhone","customerNotes","setCustomerNotes","paymentMethod","setPaymentMethod","rentalList","setRentalList","rentalTypes","icon","timeOptions","minutes","label","priceFactor","initialRentalList","map","quantity","gameId","rentalType","selectedTime","customMinutes","pricePer15min","price_per_15min","isActive","notes","rentalNumber","gameData","addGameToRentalList","existingRental","find","r","updateRentalQuantity","newRental","Math","random","prev","handleStartEnhancedRental","invalidRentals","filter","rental","totalFixedAmount","calculateTotalPrice","openTimeRentals","fixedTimeRentals","confirmMessage","index","duration","formatRentalDuration","price","calculateRentalPrice","window","confirm","rentalData","resetForm","handleClose","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","value","onChange","placeholder","slice","maxLength","rows","g","some","onError","crossOrigin","loading","removeGameFromRentalList","title","updateRentalType","option","updateRentalTime","updateCustomTime","min","max","parseInt","floor","updateRentalNotes","reduce","sum","disabled","_c","Rentals","_s2","user","setGames","activeRentals","setActiveRentals","completedRentals","setCompletedRentals","setLoading","showEnhancedRentalModal","setShowEnhancedRentalModal","setSelectedGames","setSelectedGameQuantities","setCurrentShift","showChangeGameModal","setShowChangeGameModal","selectedRentalForChange","setSelectedRentalForChange","availableGamesForChange","setAvailableGamesForChange","selectedRentalDetails","setSelectedRentalDetails","modalRef","isManager","role","isEmployee","currentEgyptTime","setCurrentEgyptTime","todaysShifts","setTodaysShifts","statistics","setStatistics","availableGames","totalGames","todayRevenue","todayRentals","shiftRevenue","monthlyRevenue","uniqueCustomers","refreshTrigger","setRefreshTrigger","triggerRefresh","getEgyptTimeNow","egyptTime","toLocaleString","timeZone","hours","getHours","getMinutes","seconds","getSeconds","formatted","padStart","formatEgyptDateTime","dateString","date","egyptDate","day","getDate","month","getMonth","year","getFullYear","formatDuration","remainingMinutes","checkAndStartAutoShift","savedShift","shiftData","startTime","start_time","hoursDiff","savedCompleted","response","get","success","activeError","startResponse","post","branch_name","startError","updateStatistics","rentedPieces","total","availableGamesCount","is_active","todayStart","setHours","todayCompleted","rentalDate","status","Number","total_amount","payment_status","newStats","completedCount","updateTime","interval","setInterval","clearInterval","initializeSystem","shiftReady","Promise","all","loadGames","loadActiveRentals","loadCompletedRentalsFromServer","initTimer","clearTimeout","handleClickOutside","event","current","contains","addEventListener","removeEventListener","startShift","newShift","handleEndCurrentShift","shiftDuration","end_time","toISOString","employee_name","final_stats","active_rentals","completed_rentals","total_revenue","_response$data","_response$data$stats","stats","_error$response","_error$response$data","errorMessage","branch_id","params","_t","timeout","_response$data2","gamesData","Array","isArray","processedGames","game_id","undefined","category","unlimited_rentals","enhanced_image_url","rentalsData","include_game","alternativeResponse","alternativeError","nowTime","activeRentalsList","_rental$game","_rental$game2","_rental$game3","_rental$game4","created_at","duration_minutes","isOpenTime","is_open_time","time_left","is_expired","remaining_seconds","endTime","getTime","timeLeftMs","rental_number","customer_name","customer_phone","payment_method","shift_id","formatted_start_time","limit","sort_order","completedData","processedRentals","_rental$status","s","_rental$status2","_rental$status3","_rental$status4","_rental$status5","_rental$status6","_rental$status7","_rental$game5","_rental$game6","_rental$game7","_rental$game8","isRefunded","isCancelled","isCompleted","formatted_end_time","actual_end_time","completed_at","actual_duration_minutes","refund_amount","status_original","existingIds","Set","newRentals","has","savedRentals","loadCompletedRentals","forceRefresh","loadTodaysShifts","today","todayEnd","start_date","end_date","order_by","order_direction","shiftsData","validateShift","handleGameClick","isAlreadySelected","handleStartEnhancedRentalMain","successfulRentals","failedRentals","rentalItem","push","durationMinutes","totalAmount","units","ceil","requestData","paid_amount","_response$data3","_response$data4","_response$data5","rental_id","updateShiftRevenueInRealTime","successMessage","openCount","item","updateError","put","revenue_added","rental_count","note","serverError","warn","checkShiftRevenue","shift","currentRevenue","handleChangeGameEnhanced","handleCancelRentalEnhanced","minutesPassed","reason","cancelledRental","handleEndOpenTimeEnhanced","elapsedMinutes","pricePer15Min","finalAmount","prompt","paymentMethodText","final_amount","completedRental","handleAutoCompleteRental","filteredGames","gamesWithAvailability","rented_count","available_count","filtered","removeGame","newQuantities","updateGameQuantity","newQuantity","handleQuickStartRental","handleQuickAction","action","NoShiftScreen","location","reload","getDisplayImage","QuickActionsMenu","onActionClick","split","total_rentals","objectFit","objectPosition","stopPropagation","RentalActionsDropdown","RentalDetailsModal","ChangeGameModal","onGameSelected","_c2","$RefreshReg$"],"sources":["C:/Users/HP/OneDrive/project/l3bty-rental-system/frontend/src/pages/employee/Rentals.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback, useMemo } from 'react';\r\nimport { useAuth } from '../../context/AuthContext';\r\nimport api from '../../services/api';\r\nimport './Rentals.css';\r\n\r\n// ==================== ØªØ¹Ø±ÙŠÙ Ø¯Ø§Ù„Ø© showNotification ====================\r\nconst showNotification = (type, message) => {\r\n  const oldNotifications = document.querySelectorAll('.custom-notification');\r\n  oldNotifications.forEach(n => {\r\n    n.style.animation = 'slideOutRight 0.3s ease';\r\n    setTimeout(() => n.remove(), 300);\r\n  });\r\n  \r\n  const notification = document.createElement('div');\r\n  notification.className = 'custom-notification';\r\n  \r\n  let backgroundColor, borderColor;\r\n  switch(type) {\r\n    case 'success':\r\n      backgroundColor = '#10b981';\r\n      borderColor = '#059669';\r\n      break;\r\n    case 'error':\r\n      backgroundColor = '#ef4444';\r\n      borderColor = '#dc2626';\r\n      break;\r\n    case 'warning':\r\n      backgroundColor = '#f59e0b';\r\n      borderColor = '#d97706';\r\n      break;\r\n    case 'info':\r\n    default:\r\n      backgroundColor = '#3b82f6';\r\n      borderColor = '#2563eb';\r\n      break;\r\n  }\r\n  \r\n  notification.style.cssText = `\r\n    position: fixed;\r\n    top: 20px;\r\n    right: 20px;\r\n    padding: 15px 20px;\r\n    border-radius: 8px;\r\n    color: white;\r\n    background-color: ${backgroundColor};\r\n    font-weight: bold;\r\n    z-index: 9999;\r\n    min-width: 300px;\r\n    max-width: 500px;\r\n    box-shadow: 0 4px 12px rgba(0,0,0,0.15);\r\n    animation: slideInRight 0.3s ease;\r\n    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\r\n    direction: rtl;\r\n    border-left: 4px solid ${borderColor};\r\n  `;\r\n  \r\n  notification.innerHTML = `\r\n    <div style=\"display: flex; justify-content: space-between; align-items: flex-start; gap: 10px;\">\r\n      <div style=\"flex: 1; white-space: pre-line;\">${message.replace(/<br>/g, '\\n')}</div>\r\n      <button onclick=\"this.parentElement.parentElement.remove()\" \r\n              style=\"background: rgba(255,255,255,0.2); \r\n                     border: none; \r\n                     color: white; \r\n                     font-size: 16px; \r\n                     cursor: pointer; \r\n                     padding: 0 8px;\r\n                     border-radius: 4px;\r\n                     height: 24px;\r\n                     line-height: 24px;\">\r\n        âœ•\r\n      </button>\r\n    </div>\r\n  `;\r\n  \r\n  document.body.appendChild(notification);\r\n  \r\n  setTimeout(() => {\r\n    if (notification.parentElement) {\r\n      notification.style.animation = 'slideOutRight 0.3s ease';\r\n      setTimeout(() => notification.remove(), 300);\r\n    }\r\n  }, 5000);\r\n  \r\n  return notification;\r\n};\r\n\r\n// Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø£Ù†ÙŠÙ…ÙŠØ´Ù†\r\nif (!document.getElementById('notification-styles')) {\r\n  const style = document.createElement('style');\r\n  style.id = 'notification-styles';\r\n  style.textContent = `\r\n    @keyframes slideInRight {\r\n      from {\r\n        transform: translateX(100%);\r\n        opacity: 0;\r\n      }\r\n      to {\r\n        transform: translateX(0);\r\n        opacity: 1;\r\n      }\r\n    }\r\n    \r\n    @keyframes slideOutRight {\r\n      from {\r\n        transform: translateX(0);\r\n        opacity: 1;\r\n      }\r\n      to {\r\n        transform: translateX(100%);\r\n        opacity: 0;\r\n      }\r\n    }\r\n  `;\r\n  document.head.appendChild(style);\r\n}\r\n\r\n// ==================== Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© ====================\r\nconst validatePhone = (phone) => {\r\n  const phoneRegex = /^01[0-9]{9}$/;\r\n  return phoneRegex.test(phone);\r\n};\r\n\r\nconst formatCurrency = (amount) => {\r\n  const num = parseFloat(amount) || 0;\r\n  return new Intl.NumberFormat('ar-EG', {\r\n    style: 'currency',\r\n    currency: 'EGP',\r\n    minimumFractionDigits: 0,\r\n    maximumFractionDigits: 2\r\n  }).format(num);\r\n};\r\n\r\n// ==================== Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØµÙˆØ± Ø§Ù„Ù…Ø­Ø³Ù† ====================\r\nconst GAME_IMAGE_MAP = {\r\n  // Drift Car\r\n  'Driftcar': '/images/Driftcar.jpg',\r\n  'Drift Car': '/images/Driftcar.jpg',\r\n  'Ø¯Ø±ÙØª ÙƒØ§Ø±': '/images/Driftcar.jpg',\r\n  'Ø¯Ø±ÙŠÙØª ÙƒØ§Ø±': '/images/Driftcar.jpg',\r\n  'Ø¯Ø±ÙŠÙØª': '/images/Driftcar.jpg',\r\n  \r\n  // Hoverboard\r\n  'Hoverboard': '/images/Hoverboard.jpg',\r\n  'Ù‡ÙˆÙØ± Ø¨ÙˆØ±Ø¯': '/images/Hoverboard.jpg',\r\n  'Ù‡ÙˆÙØ±Ø¨ÙˆØ±Ø¯': '/images/Hoverboard.jpg',\r\n  'Ù‡Ø§ÙØ± Ø¨ÙˆØ±Ø¯': '/images/Hoverboard.jpg',\r\n  'Ù‡ÙˆÙØ±': '/images/Hoverboard.jpg',\r\n  \r\n  // Scooter\r\n  'Scooter': '/images/Scooter.jpg',\r\n  'Ø³ÙƒÙˆØªØ±': '/images/Scooter.jpg',\r\n  'Ø§Ø³ÙƒÙˆØªØ±': '/images/Scooter.jpg',\r\n  'Ø³ÙƒÙˆØªØ± ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠ': '/images/Scooter.jpg',\r\n  \r\n  // Electric Car\r\n  'Electric car': '/images/Car.jpg',\r\n  'Electric Car': '/images/Car.jpg',\r\n  'ÙƒØ§Ø± ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠ': '/images/Car.jpg',\r\n  'Ø³ÙŠØ§Ø±Ø© ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ©': '/images/Car.jpg',\r\n  'Ø¹Ø±Ø¨Ø© ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ©': '/images/Car.jpg',\r\n  'Ø³ÙŠØ§Ø±Ø©': '/images/Car.jpg',\r\n  \r\n  // Electric Motor\r\n  'Electric motor': '/images/Motor.jpg',\r\n  'Electric Motor': '/images/Motor.jpg',\r\n  'Ù…ÙˆØªÙˆØ³ÙŠÙƒÙ„ ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠ': '/images/Motor.jpg',\r\n  'Ù…ÙˆØªÙˆØ³ÙŠÙƒÙ„': '/images/Motor.jpg',\r\n  'Ø¯Ø±Ø§Ø¬Ø© Ù†Ø§Ø±ÙŠØ©': '/images/Motor.jpg',\r\n  'Ø¯Ø±Ø§Ø¬Ø©': '/images/Motor.jpg',\r\n  \r\n  // Segway\r\n  'Segway': '/images/Segway.jpg',\r\n  'Ø³Ø¬ÙˆÙŠ': '/images/Segway.jpg',\r\n  'Ø³ÙŠØ¬ÙˆØ§ÙŠ': '/images/Segway.jpg',\r\n  \r\n  // Crazy Car\r\n  'Crazy car': '/images/Ninebot.jpg',\r\n  'Crazy Car': '/images/Ninebot.jpg',\r\n  'ÙƒØ±Ø§Ø²ÙŠ ÙƒØ§Ø±': '/images/Ninebot.jpg',\r\n  'Ø³ÙŠØ§Ø±Ø© Ù…Ø¬Ù†ÙˆÙ†Ø©': '/images/Ninebot.jpg',\r\n  'ÙƒØ±Ø²ÙŠ ÙƒØ§Ø±': '/images/Ninebot.jpg',\r\n  'ÙƒØ±Ø§Ø²ÙŠ': '/images/Ninebot.jpg',\r\n  \r\n  // Skate\r\n  'Skate': '/images/Skate.jpg',\r\n  'Ø³ÙƒÙŠØª': '/images/Skate.jpg',\r\n  'Ø³ÙƒÙŠØª ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠ': '/images/Skate.jpg',\r\n  'Ø³ÙƒÙŠØªØ¨ÙˆØ±Ø¯': '/images/Skate.jpg',\r\n  \r\n  // Trampoline\r\n  'Trampoline': '/images/Trampoline.jpg',\r\n  'ØªØ±Ø§Ù…Ø¨ÙˆÙ„ÙŠÙ†': '/images/Trampoline.jpg',\r\n  'Ø§Ù„ØªØ±Ø§Ù…Ø¨ÙˆÙ„ÙŠÙ†': '/images/Trampoline.jpg',\r\n  'ØªØ±Ù…Ø¨ÙˆÙ„ÙŠÙ†': '/images/Trampoline.jpg',\r\n  \r\n  // Simulator\r\n  'Simulator': '/images/Simulator.jpg',\r\n  'Ù…Ø­Ø§ÙƒÙŠ': '/images/Simulator.jpg',\r\n  'Ø³ÙŠÙ…ÙˆÙ„ÙŠØªØ±': '/images/Simulator.jpg',\r\n  'Ù…Ø­Ø§ÙƒØ§Ø©': '/images/Simulator.jpg',\r\n  \r\n  // Harley\r\n  'Harlly': '/images/harley.jpg',\r\n  'harley': '/images/harley.jpg',\r\n  'Harley': '/images/harley.jpg',\r\n  'Ù‡Ø§Ø±Ù„ÙŠ': '/images/harley.jpg',\r\n  'Ù‡Ø§Ø±Ù„ÙŠØ²': '/images/harley.jpg',\r\n  'harlly': '/images/harley.jpg',\r\n  'Ù‡Ø§Ø±ÙŠÙ„ÙŠ': '/images/harley.jpg',\r\n  'Ø¯Ø±Ø§Ø¬Ø© Ù‡Ø§Ø±Ù„ÙŠ': '/images/harley.jpg',\r\n  'Ù‡Ø§Ø±Ù„ÙŠ Ø¯Ø§ÙŠÙØ¯Ø³ÙˆÙ†': '/images/harley.jpg',\r\n  \r\n  // Default images for common patterns\r\n  'car': '/images/Car.jpg',\r\n  'ÙƒØ§Ø±': '/images/Car.jpg',\r\n  'motor': '/images/Motor.jpg',\r\n  'Ù…ÙˆØªÙˆØ±': '/images/Motor.jpg',\r\n  'board': '/images/Hoverboard.jpg',\r\n  'Ø¨ÙˆØ±Ø¯': '/images/Hoverboard.jpg',\r\n};\r\n\r\nconst getGameImageUrl = (game) => {\r\n  if (!game) return '/images/default-game.jpg';\r\n  \r\n  // Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø®ØªÙ„ÙØ© Ù„Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„ØµÙˆØ±Ø©\r\n  const imageSources = [\r\n    game.image_url,\r\n    game.external_image_url,\r\n    game.thumbnail_url,\r\n    game.image,\r\n    game.image_path,\r\n    game.photo_url,\r\n    game.photo\r\n  ];\r\n  \r\n  // Ø£ÙˆÙ„Ø§Ù‹: Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ ØµÙˆØ±Ø© ØµØ§Ù„Ø­Ø© Ù…Ù† Ø§Ù„Ø­Ù‚ÙˆÙ„\r\n  for (const imageUrl of imageSources) {\r\n    if (imageUrl) {\r\n      // ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ù…Ø³Ø§Ø±\r\n      let cleanUrl = imageUrl.toString().trim();\r\n      \r\n      // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø±Ø§Ø¨Ø· ÙƒØ§Ù…Ù„\r\n      if (cleanUrl.startsWith('http://') || cleanUrl.startsWith('https://')) {\r\n        return cleanUrl;\r\n      }\r\n      \r\n      // Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…Ø³Ø§Ø±Ø§Ù‹ Ù…Ø·Ù„Ù‚Ø§Ù‹\r\n      if (cleanUrl.startsWith('/')) {\r\n        return cleanUrl;\r\n      }\r\n      \r\n      // Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…Ø³Ø§Ø±Ø§Ù‹ Ù†Ø³Ø¨ÙŠØ§Ù‹\r\n      if (cleanUrl.startsWith('./') || cleanUrl.startsWith('../')) {\r\n        return cleanUrl;\r\n      }\r\n      \r\n      // Ø¥Ø°Ø§ ÙƒØ§Ù† ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø§Ù…ØªØ¯Ø§Ø¯ ØµÙˆØ±Ø©\r\n      if (/\\.(jpg|jpeg|png|gif|webp|svg)$/i.test(cleanUrl)) {\r\n        // Ø¥Ø¶Ø§ÙØ© / Ø¥Ø°Ø§ Ù„Ù… ØªÙƒÙ† Ù…ÙˆØ¬ÙˆØ¯Ø©\r\n        if (!cleanUrl.startsWith('/')) {\r\n          return `/${cleanUrl}`;\r\n        }\r\n        return cleanUrl;\r\n      }\r\n    }\r\n  }\r\n  \r\n  // Ø«Ø§Ù†ÙŠØ§Ù‹: Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø®Ø±ÙŠØ·Ø© Ø§Ù„ØµÙˆØ± Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ø³Ù… Ø§Ù„Ù„Ø¹Ø¨Ø©\r\n  const gameName = (game.name || game.game_name || '').trim().toLowerCase();\r\n  \r\n  if (gameName) {\r\n    for (const [key, imagePath] of Object.entries(GAME_IMAGE_MAP)) {\r\n      const keyLower = key.toLowerCase();\r\n      \r\n      // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† ØªØ·Ø§Ø¨Ù‚ ÙƒØ§Ù…Ù„ Ø£Ùˆ Ø¬Ø²Ø¦ÙŠ\r\n      if (gameName.includes(keyLower) || keyLower.includes(gameName)) {\r\n        console.log(`ðŸ–¼ï¸ ØªØ·Ø§Ø¨Ù‚ ØµÙˆØ±Ø©: \"${gameName}\" -> \"${key}\" -> ${imagePath}`);\r\n        return imagePath;\r\n      }\r\n    }\r\n    \r\n    // Ø§Ù„Ø¨Ø­Ø« Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©\r\n    const keywords = [\r\n      { key: 'Ø¯Ø±ÙØª', image: '/images/Driftcar.jpg' },\r\n      { key: 'Ø¯Ø±ÙŠÙØª', image: '/images/Driftcar.jpg' },\r\n      { key: 'ÙƒØ§Ø±', image: '/images/Car.jpg' },\r\n      { key: 'Ø³ÙŠØ§Ø±Ø©', image: '/images/Car.jpg' },\r\n      { key: 'Ù…ÙˆØªÙˆØ³ÙŠÙƒÙ„', image: '/images/Motor.jpg' },\r\n      { key: 'Ø¯Ø±Ø§Ø¬Ø©', image: '/images/Motor.jpg' },\r\n      { key: 'Ù‡ÙˆÙØ±', image: '/images/Hoverboard.jpg' },\r\n      { key: 'Ø³ÙƒÙˆØªØ±', image: '/images/Scooter.jpg' },\r\n      { key: 'Ø³ÙƒÙŠØª', image: '/images/Skate.jpg' },\r\n      { key: 'ØªØ±Ø§Ù…Ø¨ÙˆÙ„ÙŠÙ†', image: '/images/Trampoline.jpg' },\r\n      { key: 'Ù…Ø­Ø§ÙƒÙŠ', image: '/images/Simulator.jpg' },\r\n      { key: 'Ù‡Ø§Ø±Ù„ÙŠ', image: '/images/harley.jpg' }\r\n    ];\r\n    \r\n    for (const keyword of keywords) {\r\n      if (gameName.includes(keyword.key)) {\r\n        console.log(`ðŸ” ØªØ·Ø§Ø¨Ù‚ ÙƒÙ„Ù…Ø© Ù…ÙØªØ§Ø­ÙŠØ©: \"${gameName}\" -> \"${keyword.key}\" -> ${keyword.image}`);\r\n        return keyword.image;\r\n      }\r\n    }\r\n  }\r\n  \r\n  // Ø«Ø§Ù„Ø«Ø§Ù‹: Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©\r\n  console.log(`â“ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ ØµÙˆØ±Ø© Ù„Ù„Ø¹Ø¨Ø©: ${gameName}ØŒ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ`);\r\n  return '/images/default-game.jpg';\r\n};\r\n\r\nconst handleImageError = (e) => {\r\n  console.log(`âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø©: ${e.target.src}`);\r\n  e.target.onerror = null; // Ù…Ù†Ø¹ Ø§Ù„ØªÙƒØ±Ø§Ø±\r\n  \r\n  // Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ù…Ù† src Ø§Ù„Ø¨Ø¯ÙŠÙ„\r\n  const gameName = e.target.alt || '';\r\n  let fallbackImage = '/images/default-game.jpg';\r\n  \r\n  // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† ØµÙˆØ±Ø© Ø¨Ø¯ÙŠÙ„Ø© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø§Ø³Ù…\r\n  if (gameName) {\r\n    const gameNameLower = gameName.toLowerCase();\r\n    for (const [key, imagePath] of Object.entries(GAME_IMAGE_MAP)) {\r\n      if (gameNameLower.includes(key.toLowerCase())) {\r\n        fallbackImage = imagePath;\r\n        break;\r\n      }\r\n    }\r\n  }\r\n  \r\n  // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ù…Ø®ØªÙ„ÙØ© Ø¹Ù† Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©ØŒ Ø­Ø§ÙˆÙ„ ØªØ­Ù…ÙŠÙ„Ù‡Ø§\r\n  if (e.target.src !== fallbackImage && !e.target.src.includes('default-game.jpg')) {\r\n    console.log(`ðŸ”„ Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ­Ù…ÙŠÙ„ ØµÙˆØ±Ø© Ø¨Ø¯ÙŠÙ„Ø©: ${fallbackImage}`);\r\n    e.target.src = fallbackImage;\r\n  } else {\r\n    // Ø¥Ø°Ø§ ÙØ´Ù„Øª Ø£ÙŠØ¶Ø§Ù‹ØŒ Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©\r\n    e.target.src = '/images/default-game.jpg';\r\n    e.target.classList.add('image-error');\r\n  }\r\n};\r\n\r\n// ==================== Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ ====================\r\nconst storage = {\r\n  // ØªØ®Ø²ÙŠÙ† Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø© Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ø§Ù„Ø´ÙŠÙØª\r\n  saveCompletedRentals: (shiftId, rentals) => {\r\n    if (!shiftId) return;\r\n    try {\r\n      const key = `completed_rentals_shift_${shiftId}`;\r\n      const data = {\r\n        shiftId,\r\n        rentals,\r\n        timestamp: Date.now(),\r\n        expiry: Date.now() + (7 * 24 * 60 * 60 * 1000) // 7 Ø£ÙŠØ§Ù…\r\n      };\r\n      localStorage.setItem(key, JSON.stringify(data));\r\n      console.log(`ðŸ’¾ ØªÙ… Ø­ÙØ¸ ${rentals.length} ØªØ£Ø¬ÙŠØ± Ù…ÙƒØªÙ…Ù„ Ù„Ù„Ø´ÙŠÙØª ${shiftId}`);\r\n    } catch (error) {\r\n      console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©:', error);\r\n    }\r\n  },\r\n  \r\n  // Ø¬Ù„Ø¨ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø© Ù„Ù„Ø´ÙŠÙØª\r\n  getCompletedRentals: (shiftId) => {\r\n    if (!shiftId) return [];\r\n    try {\r\n      const key = `completed_rentals_shift_${shiftId}`;\r\n      const data = localStorage.getItem(key);\r\n      if (data) {\r\n        const parsed = JSON.parse(data);\r\n        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (Ø£Ù‚Ù„ Ù…Ù† 7 Ø£ÙŠØ§Ù…)\r\n        if (parsed.expiry > Date.now()) {\r\n          console.log(`ðŸ“‚ ØªÙ… Ø¬Ù„Ø¨ ${parsed.rentals.length} ØªØ£Ø¬ÙŠØ± Ù…ÙƒØªÙ…Ù„ Ù…Ù† Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ Ù„Ù„Ø´ÙŠÙØª ${shiftId}`);\r\n          return parsed.rentals;\r\n        } else {\r\n          // Ø­Ø°Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù†ØªÙ‡ÙŠØ©\r\n          localStorage.removeItem(key);\r\n          console.log(`ðŸ—‘ï¸ ØªÙ… Ø­Ø°Ù Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…Ù†ØªÙ‡ÙŠØ© Ù„Ù„Ø´ÙŠÙØª ${shiftId}`);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©:', error);\r\n    }\r\n    return [];\r\n  },\r\n  \r\n  // Ø­Ø°Ù Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø© Ù„Ù„Ø´ÙŠÙØª\r\n  clearCompletedRentals: (shiftId) => {\r\n    if (!shiftId) return;\r\n    try {\r\n      const key = `completed_rentals_shift_${shiftId}`;\r\n      localStorage.removeItem(key);\r\n      console.log(`ðŸ§¹ ØªÙ… Ø­Ø°Ù Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø© Ù„Ù„Ø´ÙŠÙØª ${shiftId}`);\r\n    } catch (error) {\r\n      console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©:', error);\r\n    }\r\n  },\r\n  \r\n  // ØªÙ†Ø¸ÙŠÙ ÙƒÙ„ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù‚Ø¯ÙŠÙ…\r\n  cleanupOldData: () => {\r\n    try {\r\n      const now = Date.now();\r\n      for (let i = 0; i < localStorage.length; i++) {\r\n        const key = localStorage.key(i);\r\n        if (key && key.startsWith('completed_rentals_shift_')) {\r\n          try {\r\n            const data = JSON.parse(localStorage.getItem(key));\r\n            if (data && data.expiry && data.expiry < now) {\r\n              localStorage.removeItem(key);\r\n              console.log(`ðŸ§¹ ØªÙ… ØªÙ†Ø¸ÙŠÙ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù†ØªÙ‡ÙŠØ©: ${key}`);\r\n            }\r\n          } catch (e) {\r\n            // ØªØ¬Ø§Ù‡Ù„ Ø§Ù„Ù…ÙØ§ØªÙŠØ­ Ø§Ù„ØªØ§Ù„ÙØ©\r\n          }\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©:', error);\r\n    }\r\n  }\r\n};\r\n\r\n// ==================== Ù…ÙƒÙˆÙ†Ø§Øª ÙØ±Ø¹ÙŠØ© ====================\r\n// ... (Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª Ø§Ù„ÙØ±Ø¹ÙŠØ© ØªØ¨Ù‚Ù‰ ÙƒÙ…Ø§ Ù‡ÙŠ QuickActionsMenu, RentalActionsDropdown, etc.)\r\n// Ø£Ø¯Ø±Ø¬ Ù‡Ù†Ø§ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙƒÙˆÙ†Ø§Øª Ø§Ù„ÙØ±Ø¹ÙŠØ© Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© Ø¨Ø¯ÙˆÙ† ØªØºÙŠÙŠØ±\r\n\r\n// ==================== Ù…ÙƒÙˆÙ† Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªØ£Ø¬ÙŠØ± Ø§Ù„Ù…Ø­Ø³Ù†Ø© ====================\r\nconst EnhancedRentalListModal = ({ \r\n  show, \r\n  onClose, \r\n  games,\r\n  selectedGames: initialSelectedGames,\r\n  selectedGameQuantities: initialQuantities,\r\n  onStartRental,\r\n  currentShift\r\n}) => {\r\n  const [customerName, setCustomerName] = useState('');\r\n  const [customerPhone, setCustomerPhone] = useState('');\r\n  const [customerNotes, setCustomerNotes] = useState('');\r\n  const [paymentMethod, setPaymentMethod] = useState('cash');\r\n  \r\n  const [rentalList, setRentalList] = useState([]);\r\n  \r\n  const rentalTypes = [\r\n    { id: 'fixed', name: 'Ù…Ø¯Ø© Ø«Ø§Ø¨ØªØ©', icon: 'â°' },\r\n    { id: 'open', name: 'ÙˆÙ‚Øª Ù…ÙØªÙˆØ­', icon: 'âˆž' },\r\n    { id: 'custom', name: 'Ù…Ø®ØµØµ', icon: 'âš™ï¸' }\r\n  ];\r\n  \r\n  const timeOptions = [\r\n    { minutes: 15, label: '15 Ø¯Ù‚ÙŠÙ‚Ø©', priceFactor: 1 },\r\n    { minutes: 30, label: '30 Ø¯Ù‚ÙŠÙ‚Ø©', priceFactor: 2 },\r\n    { minutes: 45, label: '45 Ø¯Ù‚ÙŠÙ‚Ø©', priceFactor: 3 },\r\n    { minutes: 60, label: '1 Ø³Ø§Ø¹Ø©', priceFactor: 4 },\r\n    { minutes: 90, label: '1.5 Ø³Ø§Ø¹Ø©', priceFactor: 6 },\r\n    { minutes: 120, label: '2 Ø³Ø§Ø¹Ø§Øª', priceFactor: 8 },\r\n    { minutes: 180, label: '3 Ø³Ø§Ø¹Ø§Øª', priceFactor: 12 },\r\n    { minutes: 240, label: '4 Ø³Ø§Ø¹Ø§Øª', priceFactor: 16 }\r\n  ];\r\n  \r\n  useEffect(() => {\r\n    if (show && initialSelectedGames.length > 0) {\r\n      const initialRentalList = initialSelectedGames.map(game => {\r\n        const quantity = initialQuantities[game.id] || 1;\r\n        \r\n        // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¯Ø§Ù„Ø© Ø§Ù„Ù…Ø­Ø³Ù†Ø©\r\n        const imageUrl = getGameImageUrl(game);\r\n        console.log(`ðŸ–¼ï¸ Ù…Ø¹Ø§Ù„Ø¬Ø© ØµÙˆØ±Ø© Ø§Ù„Ù„Ø¹Ø¨Ø©: ${game.name} -> ${imageUrl}`);\r\n        \r\n        return {\r\n          id: `rental_${game.id}_${Date.now()}`,\r\n          gameId: game.id,\r\n          gameName: game.name,\r\n          quantity: quantity,\r\n          rentalType: 'fixed',\r\n          selectedTime: 15,\r\n          customMinutes: 15,\r\n          pricePer15min: game.price_per_15min || 100,\r\n          imageUrl: imageUrl,\r\n          isActive: true,\r\n          notes: '',\r\n          rentalNumber: `TEMP-${Date.now()}-${game.id}`,\r\n          // Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© Ù„Ù„Ø¹Ø¨Ø©\r\n          gameData: game\r\n        };\r\n      });\r\n      \r\n      setRentalList(initialRentalList);\r\n    }\r\n  }, [show, initialSelectedGames, initialQuantities]);\r\n  \r\n  const addGameToRentalList = (game) => {\r\n    if (!game) return;\r\n    \r\n    const existingRental = rentalList.find(r => r.gameId === game.id);\r\n    \r\n    if (existingRental) {\r\n      updateRentalQuantity(existingRental.id, existingRental.quantity + 1);\r\n    } else {\r\n      const imageUrl = getGameImageUrl(game);\r\n      console.log(`âž• Ø¥Ø¶Ø§ÙØ© Ù„Ø¹Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø©: ${game.name} -> ${imageUrl}`);\r\n      \r\n      const newRental = {\r\n        id: `rental_${game.id}_${Date.now()}_${Math.random()}`,\r\n        gameId: game.id,\r\n        gameName: game.name,\r\n        quantity: 1,\r\n        rentalType: 'fixed',\r\n        selectedTime: 15,\r\n        customMinutes: 15,\r\n        pricePer15min: game.price_per_15min || 100,\r\n        imageUrl: imageUrl,\r\n        isActive: true,\r\n        notes: '',\r\n        rentalNumber: `TEMP-${Date.now()}-${game.id}`,\r\n        gameData: game\r\n      };\r\n      \r\n      setRentalList(prev => [...prev, newRental]);\r\n    }\r\n  };\r\n  \r\n  // ... (Ø¨Ø§Ù‚ÙŠ Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…ÙƒÙˆÙ† ØªØ¨Ù‚Ù‰ ÙƒÙ…Ø§ Ù‡ÙŠ)\r\n  \r\n  const handleStartEnhancedRental = async () => {\r\n    if (!customerName || !customerPhone) {\r\n      showNotification('error', 'Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„ ÙˆØ±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ');\r\n      return;\r\n    }\r\n    \r\n    if (!validatePhone(customerPhone)) {\r\n      showNotification('error', 'Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ ØºÙŠØ± ØµØ­ÙŠØ­. ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† 11 Ø±Ù‚Ù…Ø§Ù‹ ÙˆÙŠØ¨Ø¯Ø£ Ø¨Ù€ 01');\r\n      return;\r\n    }\r\n    \r\n    if (rentalList.length === 0) {\r\n      showNotification('error', 'Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¶Ø§ÙØ© Ø£Ù„Ø¹Ø§Ø¨ Ø¥Ù„Ù‰ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªØ£Ø¬ÙŠØ±');\r\n      return;\r\n    }\r\n    \r\n    const invalidRentals = rentalList.filter(rental => \r\n      rental.rentalType === 'custom' && (rental.customMinutes < 1 || rental.customMinutes > 480)\r\n    );\r\n    \r\n    if (invalidRentals.length > 0) {\r\n      showNotification('error', 'Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ø§Ù„Ø£ÙˆÙ‚Ø§Øª Ø§Ù„Ù…Ø®ØµØµØ© Ø¨ÙŠÙ† 1 Ùˆ 480 Ø¯Ù‚ÙŠÙ‚Ø©');\r\n      return;\r\n    }\r\n    \r\n    const totalFixedAmount = calculateTotalPrice();\r\n    const openTimeRentals = rentalList.filter(r => r.rentalType === 'open');\r\n    const fixedTimeRentals = rentalList.filter(r => r.rentalType !== 'open');\r\n    \r\n    let confirmMessage = `\r\nðŸŽ¯ Ø¨Ø¯Ø¡ ØªØ£Ø¬ÙŠØ± Ø¬Ù…Ø§Ø¹ÙŠ\r\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\r\nðŸ‘¤ Ø§Ù„Ø¹Ù…ÙŠÙ„: ${customerName}\r\nðŸ“± Ø§Ù„Ù‡Ø§ØªÙ: ${customerPhone}\r\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\r\nðŸ“‹ Ù…Ù„Ø®Øµ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª:\r\n`;\r\n    \r\n    rentalList.forEach((rental, index) => {\r\n      const duration = formatRentalDuration(rental);\r\n      const price = rental.rentalType === 'open' \r\n        ? 'â³ Ø¹Ù†Ø¯ Ø§Ù„Ø¥Ù†Ù‡Ø§Ø¡' \r\n        : `${formatCurrency(calculateRentalPrice(rental))}`;\r\n      \r\n      confirmMessage += `\r\n${index + 1}. ${rental.gameName} Ã— ${rental.quantity}\r\n   â±ï¸  ${duration}\r\n   ðŸ’°  ${price}\r\n   ${rental.notes ? `ðŸ“  ${rental.notes}` : ''}\r\n`;\r\n    });\r\n    \r\n    confirmMessage += `\r\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\r\nðŸ’° Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¯ÙÙˆØ¹ Ø§Ù„Ø¢Ù†: ${formatCurrency(totalFixedAmount)}\r\nâ³ ÙˆÙ‚Øª Ù…ÙØªÙˆØ­: ${openTimeRentals.length} Ù„Ø¹Ø¨Ø©\r\nâ° ÙˆÙ‚Øª Ø«Ø§Ø¨Øª: ${fixedTimeRentals.length} Ù„Ø¹Ø¨Ø©\r\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\r\nÙ‡Ù„ ØªØ±ÙŠØ¯ Ø¨Ø¯Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ±ØŸ`;\r\n    \r\n    if (!window.confirm(confirmMessage)) {\r\n      return;\r\n    }\r\n    \r\n    if (onStartRental) {\r\n      const rentalData = {\r\n        customerName,\r\n        customerPhone,\r\n        customerNotes,\r\n        paymentMethod,\r\n        rentalList,\r\n        totalFixedAmount\r\n      };\r\n      \r\n      await onStartRental(rentalData);\r\n    }\r\n  };\r\n  \r\n  const resetForm = () => {\r\n    setCustomerName('');\r\n    setCustomerPhone('');\r\n    setCustomerNotes('');\r\n    setPaymentMethod('cash');\r\n    setRentalList([]);\r\n  };\r\n  \r\n  const handleClose = () => {\r\n    if (customerName || customerPhone || rentalList.length > 0) {\r\n      if (window.confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥ØºÙ„Ø§Ù‚ Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ£Ø¬ÙŠØ±ØŸ Ø³ÙŠØªÙ… ÙÙ‚Ø¯Ø§Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¯Ø®Ù„Ø©.')) {\r\n        resetForm();\r\n        onClose();\r\n      }\r\n    } else {\r\n      resetForm();\r\n      onClose();\r\n    }\r\n  };\r\n  \r\n  if (!show) return null;\r\n  \r\n  return (\r\n    <div className=\"rentals-page-modal-overlay\">\r\n      <div className=\"rentals-page-modal enhanced-rental-modal\">\r\n        <div className=\"rentals-page-modal-header\">\r\n          <h2>\r\n            <span className=\"rentals-page-header-icon\">ðŸš€</span>\r\n            Ø¨Ø¯Ø¡ ØªØ£Ø¬ÙŠØ± Ø¬Ø¯ÙŠØ¯ - Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø­Ø³Ù†\r\n            <span className=\"rentals-page-badge-new\">Ø¬Ø¯ÙŠØ¯</span>\r\n          </h2>\r\n          <button onClick={handleClose} className=\"rentals-page-close-btn\">\r\n            âœ•\r\n          </button>\r\n        </div>\r\n        \r\n        <div className=\"rentals-page-modal-body enhanced-modal-body\">\r\n          {/* Ù‚Ø³Ù… Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„ */}\r\n          <div className=\"enhanced-customer-section\">\r\n            <h3 className=\"enhanced-section-title\">\r\n              <span className=\"enhanced-section-icon\">ðŸ‘¤</span>\r\n              Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„\r\n            </h3>\r\n            <div className=\"enhanced-form-grid\">\r\n              <div className=\"enhanced-form-group\">\r\n                <label>Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„ *</label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={customerName}\r\n                  onChange={(e) => setCustomerName(e.target.value)}\r\n                  placeholder=\"Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„...\"\r\n                  className=\"enhanced-form-input\"\r\n                />\r\n              </div>\r\n              \r\n              <div className=\"enhanced-form-group\">\r\n                <label>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ *</label>\r\n                <input\r\n                  type=\"tel\"\r\n                  value={customerPhone}\r\n                  onChange={(e) => {\r\n                    const value = e.target.value.replace(/\\D/g, \"\").slice(0, 11);\r\n                    setCustomerPhone(value);\r\n                  }}\r\n                  placeholder=\"01XXXXXXXXX\"\r\n                  className=\"enhanced-form-input\"\r\n                  maxLength={11}\r\n                />\r\n                {customerPhone && customerPhone.length !== 11 && (\r\n                  <span className=\"enhanced-error-text\">ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† 11 Ø±Ù‚Ù…</span>\r\n                )}\r\n              </div>\r\n              \r\n              <div className=\"enhanced-form-group full-width\">\r\n                <label>Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¹Ø§Ù…Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>\r\n                <textarea\r\n                  value={customerNotes}\r\n                  onChange={(e) => setCustomerNotes(e.target.value)}\r\n                  placeholder=\"Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© Ù„Ù„Ø¹Ù…ÙŠÙ„ Ø£Ùˆ Ø§Ù„ØªØ£Ø¬ÙŠØ±...\"\r\n                  className=\"enhanced-form-textarea\"\r\n                  rows=\"2\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          {/* Ù‚Ø³Ù… Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªØ£Ø¬ÙŠØ± */}\r\n          <div className=\"enhanced-rental-list-section\">\r\n            <div className=\"enhanced-section-header\">\r\n              <h3 className=\"enhanced-section-title\">\r\n                <span className=\"enhanced-section-icon\">ðŸ“‹</span>\r\n                Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªØ£Ø¬ÙŠØ±\r\n                <span className=\"enhanced-list-count\">({rentalList.length} Ù„Ø¹Ø¨Ø©)</span>\r\n              </h3>\r\n              \r\n              <div className=\"enhanced-section-actions\">\r\n                <select \r\n                  className=\"enhanced-add-game-select\"\r\n                  onChange={(e) => {\r\n                    const gameId = e.target.value;\r\n                    if (gameId) {\r\n                      const game = games.find(g => g.id == gameId);\r\n                      if (game) addGameToRentalList(game);\r\n                      e.target.value = '';\r\n                    }\r\n                  }}\r\n                >\r\n                  <option value=\"\">âž• Ø¥Ø¶Ø§ÙØ© Ù„Ø¹Ø¨Ø©...</option>\r\n                  {games\r\n                    .filter(game => !rentalList.some(r => r.gameId === game.id))\r\n                    .map(game => (\r\n                      <option key={game.id} value={game.id}>\r\n                        {game.name} - {formatCurrency(game.price_per_15min || 100)} / 15 Ø¯Ù‚ÙŠÙ‚Ø©\r\n                      </option>\r\n                    ))\r\n                  }\r\n                </select>\r\n              </div>\r\n            </div>\r\n            \r\n            {rentalList.length === 0 ? (\r\n              <div className=\"enhanced-empty-list\">\r\n                <div className=\"empty-list-icon\">ðŸ“‹</div>\r\n                <p>Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªØ£Ø¬ÙŠØ± ÙØ§Ø±ØºØ©</p>\r\n                <p className=\"empty-list-hint\">Ø§Ø®ØªØ± Ø£Ù„Ø¹Ø§Ø¨Ø§Ù‹ Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø£Ø¹Ù„Ø§Ù‡ Ø£Ùˆ Ù…Ù† Ø§Ù„Ø´Ø¨ÙƒØ© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</p>\r\n              </div>\r\n            ) : (\r\n              <div className=\"enhanced-rental-list\">\r\n                {rentalList.map((rental) => (\r\n                  <div key={rental.id} className=\"enhanced-rental-item\">\r\n                    <div className=\"rental-item-header\">\r\n                      <div className=\"rental-game-info\">\r\n                        <img \r\n                          src={rental.imageUrl}\r\n                          alt={rental.gameName}\r\n                          className=\"rental-game-image\"\r\n                          onError={handleImageError}\r\n                          crossOrigin=\"anonymous\"\r\n                          loading=\"lazy\"\r\n                        />\r\n                        <div className=\"rental-game-details\">\r\n                          <h4>{rental.gameName}</h4>\r\n                          <div className=\"rental-price-info\">\r\n                            <span>{formatCurrency(rental.pricePer15min)} / 15 Ø¯Ù‚ÙŠÙ‚Ø©</span>\r\n                            <span className=\"rental-unlimited-badge\">âœ… Ù…ØªØ§Ø­ Ø¯Ø§Ø¦Ù…Ø§Ù‹</span>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                      \r\n                      <div className=\"rental-item-actions\">\r\n                        <div className=\"rental-quantity-control\">\r\n                          <button \r\n                            onClick={() => updateRentalQuantity(rental.id, rental.quantity - 1)}\r\n                            className=\"quantity-btn minus\"\r\n                          >\r\n                            -\r\n                          </button>\r\n                          <span className=\"quantity-value\">{rental.quantity}</span>\r\n                          <button \r\n                            onClick={() => updateRentalQuantity(rental.id, rental.quantity + 1)}\r\n                            className=\"quantity-btn plus\"\r\n                          >\r\n                            +\r\n                          </button>\r\n                        </div>\r\n                        \r\n                        <button \r\n                          onClick={() => removeGameFromRentalList(rental.id)}\r\n                          className=\"remove-rental-btn\"\r\n                          title=\"Ø¥Ø²Ø§Ù„Ø© Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©\"\r\n                        >\r\n                          ðŸ—‘ï¸\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                    \r\n                    <div className=\"rental-item-body\">\r\n                      <div className=\"rental-type-selector\">\r\n                        <label>Ù†ÙˆØ¹ Ø§Ù„ØªØ£Ø¬ÙŠØ±:</label>\r\n                        <div className=\"rental-type-buttons\">\r\n                          {rentalTypes.map(type => (\r\n                            <button\r\n                              key={type.id}\r\n                              className={`rental-type-btn ${rental.rentalType === type.id ? 'active' : ''}`}\r\n                              onClick={() => updateRentalType(rental.id, type.id)}\r\n                            >\r\n                              <span className=\"type-icon\">{type.icon}</span>\r\n                              <span className=\"type-name\">{type.name}</span>\r\n                            </button>\r\n                          ))}\r\n                        </div>\r\n                      </div>\r\n                      \r\n                      {rental.rentalType === 'fixed' && (\r\n                        <div className=\"rental-time-selector\">\r\n                          <label>Ø§Ø®ØªØ± Ø§Ù„Ù…Ø¯Ø©:</label>\r\n                          <div className=\"time-options-grid\">\r\n                            {timeOptions.map(option => (\r\n                              <button\r\n                                key={option.minutes}\r\n                                className={`time-option-btn ${rental.selectedTime === option.minutes ? 'active' : ''}`}\r\n                                onClick={() => updateRentalTime(rental.id, option.minutes)}\r\n                              >\r\n                                <span className=\"time-label\">{option.label}</span>\r\n                                <span className=\"time-price\">\r\n                                  {formatCurrency(rental.pricePer15min * option.priceFactor * rental.quantity)}\r\n                                </span>\r\n                              </button>\r\n                            ))}\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n                      \r\n                      {rental.rentalType === 'custom' && (\r\n                        <div className=\"rental-custom-time\">\r\n                          <label>Ø§Ù„Ù…Ø¯Ø© Ø§Ù„Ù…Ø®ØµØµØ© (Ø¨Ø§Ù„Ø¯Ù‚Ø§Ø¦Ù‚):</label>\r\n                          <div className=\"custom-time-controls\">\r\n                            <button \r\n                              onClick={() => updateCustomTime(rental.id, rental.customMinutes - 15)}\r\n                              className=\"time-adjust-btn\"\r\n                            >\r\n                              -15\r\n                            </button>\r\n                            <input\r\n                              type=\"number\"\r\n                              min=\"1\"\r\n                              max=\"480\"\r\n                              value={rental.customMinutes}\r\n                              onChange={(e) => updateCustomTime(rental.id, parseInt(e.target.value) || 1)}\r\n                              className=\"custom-time-input\"\r\n                            />\r\n                            <button \r\n                              onClick={() => updateCustomTime(rental.id, rental.customMinutes + 15)}\r\n                              className=\"time-adjust-btn\"\r\n                            >\r\n                              +15\r\n                            </button>\r\n                            <span className=\"custom-time-display\">\r\n                              â‰ˆ {Math.floor(rental.customMinutes / 60)} Ø³Ø§Ø¹Ø© Ùˆ {rental.customMinutes % 60} Ø¯Ù‚ÙŠÙ‚Ø©\r\n                            </span>\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n                      \r\n                      {rental.rentalType === 'open' && (\r\n                        <div className=\"rental-open-time-info\">\r\n                          <div className=\"open-time-badge\">â³ ÙˆÙ‚Øª Ù…ÙØªÙˆØ­</div>\r\n                          <p className=\"open-time-description\">\r\n                            Ø§Ù„Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ± Ø­Ø³Ø¨ Ø§Ù„Ù…Ø¯Ø© Ø§Ù„ÙØ¹Ù„ÙŠØ©\r\n                          </p>\r\n                        </div>\r\n                      )}\r\n                      \r\n                      <div className=\"rental-notes\">\r\n                        <label>Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø®Ø§ØµØ© Ø¨Ù‡Ø°Ù‡ Ø§Ù„Ù„Ø¹Ø¨Ø©:</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={rental.notes}\r\n                          onChange={(e) => updateRentalNotes(rental.id, e.target.value)}\r\n                          placeholder=\"Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø®Ø§ØµØ© Ø¨Ù‡Ø°Ù‡ Ø§Ù„Ù„Ø¹Ø¨Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)...\"\r\n                          className=\"rental-notes-input\"\r\n                        />\r\n                      </div>\r\n                      \r\n                      <div className=\"rental-price-summary\">\r\n                        <div className=\"rental-price-row\">\r\n                          <span>Ø§Ù„Ù…Ø¯Ø©:</span>\r\n                          <span className=\"rental-duration\">{formatRentalDuration(rental)}</span>\r\n                        </div>\r\n                        <div className=\"rental-price-row\">\r\n                          <span>Ø§Ù„Ø³Ø¹Ø±:</span>\r\n                          <span className={`rental-price ${rental.rentalType === 'open' ? 'open-price' : ''}`}>\r\n                            {rental.rentalType === 'open' \r\n                              ? 'â³ Ø¹Ù†Ø¯ Ø§Ù„Ø¥Ù†Ù‡Ø§Ø¡' \r\n                              : formatCurrency(calculateRentalPrice(rental))\r\n                            }\r\n                          </span>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n          \r\n          {/* Ù‚Ø³Ù… Ø§Ù„Ù…Ù„Ø®Øµ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ */}\r\n          <div className=\"enhanced-summary-section\">\r\n            <h3 className=\"enhanced-section-title\">\r\n              <span className=\"enhanced-section-icon\">ðŸ’°</span>\r\n              Ø§Ù„Ù…Ù„Ø®Øµ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ\r\n            </h3>\r\n            \r\n            <div className=\"enhanced-summary-content\">\r\n              <div className=\"summary-stats\">\r\n                <div className=\"summary-stat\">\r\n                  <span className=\"stat-label\">Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨:</span>\r\n                  <span className=\"stat-value\">{rentalList.length}</span>\r\n                </div>\r\n                <div className=\"summary-stat\">\r\n                  <span className=\"stat-label\">Ø§Ù„Ù‚Ø·Ø¹ Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ©:</span>\r\n                  <span className=\"stat-value\">\r\n                    {rentalList.reduce((sum, rental) => sum + rental.quantity, 0)}\r\n                  </span>\r\n                </div>\r\n                <div className=\"summary-stat\">\r\n                  <span className=\"stat-label\">ÙˆÙ‚Øª Ù…ÙØªÙˆØ­:</span>\r\n                  <span className=\"stat-value\">\r\n                    {rentalList.filter(r => r.rentalType === 'open').length}\r\n                  </span>\r\n                </div>\r\n                <div className=\"summary-stat\">\r\n                  <span className=\"stat-label\">ÙˆÙ‚Øª Ø«Ø§Ø¨Øª:</span>\r\n                  <span className=\"stat-value\">\r\n                    {rentalList.filter(r => r.rentalType !== 'open').length}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"summary-payment\">\r\n                <div className=\"payment-method-selector\">\r\n                  <label>Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹:</label>\r\n                  <select \r\n                    value={paymentMethod}\r\n                    onChange={(e) => setPaymentMethod(e.target.value)}\r\n                    className=\"payment-method-select\"\r\n                  >\r\n                    <option value=\"cash\">ðŸ’µ ÙƒØ§Ø´</option>\r\n                    <option value=\"card\">ðŸ’³ Ø¨Ø·Ø§Ù‚Ø©</option>\r\n                    <option value=\"vodafone\">ðŸ“± ÙÙˆØ¯Ø§ÙÙˆÙ† ÙƒØ§Ø´</option>\r\n                  </select>\r\n                </div>\r\n                \r\n                <div className=\"total-amount-display\">\r\n                  <div className=\"total-amount-row\">\r\n                    <span>Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¯ÙÙˆØ¹ Ø§Ù„Ø¢Ù†:</span>\r\n                    <span className=\"total-amount-value\">\r\n                      {formatCurrency(calculateTotalPrice())}\r\n                    </span>\r\n                  </div>\r\n                  \r\n                  {rentalList.some(r => r.rentalType === 'open') && (\r\n                    <div className=\"open-time-notice\">\r\n                      âš ï¸ Ø³ÙŠØªÙ… Ø¯ÙØ¹ {rentalList.filter(r => r.rentalType === 'open').length} Ù„Ø¹Ø¨Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø¥Ù†Ù‡Ø§Ø¡\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"rentals-page-modal-actions enhanced-modal-actions\">\r\n          <button \r\n            className=\"rentals-page-btn-cancel\"\r\n            onClick={handleClose}\r\n          >\r\n            Ø¥Ù„ØºØ§Ø¡\r\n          </button>\r\n          \r\n          <button \r\n            className={`rentals-page-btn-confirm enhanced-start-btn ${\r\n              !customerName || !validatePhone(customerPhone) || rentalList.length === 0 ? 'disabled' : ''\r\n            }`}\r\n            onClick={handleStartEnhancedRental}\r\n            disabled={!customerName || !validatePhone(customerPhone) || rentalList.length === 0}\r\n          >\r\n            <span className=\"btn-icon\">ðŸš€</span>\r\n            Ø¨Ø¯Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ± Ø§Ù„Ù…ØªØ¹Ø¯Ø¯\r\n            <span className=\"btn-badge\">{rentalList.length}</span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// ==================== Ù…ÙƒÙˆÙ† Rentals Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ø§Ù„Ù…Ø­Ø³Ù† ====================\r\nconst Rentals = () => {\r\n  const { user } = useAuth();\r\n  \r\n  const [games, setGames] = useState([]); \r\n  const [activeRentals, setActiveRentals] = useState([]);\r\n  const [completedRentals, setCompletedRentals] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  \r\n  const [showEnhancedRentalModal, setShowEnhancedRentalModal] = useState(false);\r\n  const [selectedGames, setSelectedGames] = useState([]);\r\n  const [selectedGameQuantities, setSelectedGameQuantities] = useState({});\r\n  const [customerName, setCustomerName] = useState('');\r\n  const [customerPhone, setCustomerPhone] = useState('');\r\n  const [customerNotes, setCustomerNotes] = useState('');\r\n  const [currentShift, setCurrentShift] = useState(null);\r\n  \r\n  const [showChangeGameModal, setShowChangeGameModal] = useState(false);\r\n  const [selectedRentalForChange, setSelectedRentalForChange] = useState(null);\r\n  const [availableGamesForChange, setAvailableGamesForChange] = useState([]);\r\n  const [selectedRentalDetails, setSelectedRentalDetails] = useState(null);\r\n  \r\n  const modalRef = useRef(null);\r\n  \r\n  const isManager = user?.role === 'admin' || user?.role === 'branch_manager';\r\n  const isEmployee = user?.role === 'employee';\r\n  \r\n  const [currentEgyptTime, setCurrentEgyptTime] = useState('');\r\n  const [todaysShifts, setTodaysShifts] = useState([]);\r\n  \r\n  const [statistics, setStatistics] = useState({\r\n    availableGames: 0,\r\n    totalGames: 0,\r\n    todayRevenue: 0,\r\n    todayRentals: 0,\r\n    activeRentals: 0,\r\n    shiftRevenue: 0,\r\n    monthlyRevenue: 0,\r\n    uniqueCustomers: 0\r\n  });\r\n  \r\n  const [refreshTrigger, setRefreshTrigger] = useState(0);\r\n  \r\n  // Ø¯Ø§Ù„Ø© ØªØ¬Ø¯ÙŠØ¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª\r\n  const triggerRefresh = useCallback(() => {\r\n    setRefreshTrigger(prev => prev + 1);\r\n  }, []);\r\n  \r\n  const getEgyptTimeNow = () => {\r\n    const now = new Date();\r\n    const egyptTime = new Date(now.toLocaleString(\"en-US\", {timeZone: \"Africa/Cairo\"}));\r\n    \r\n    const hours = egyptTime.getHours();\r\n    const minutes = egyptTime.getMinutes();\r\n    const seconds = egyptTime.getSeconds();\r\n    \r\n    return {\r\n      hours: hours,\r\n      minutes: minutes,\r\n      seconds: seconds,\r\n      formatted: `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`\r\n    };\r\n  };\r\n  \r\n  const formatEgyptDateTime = (dateString) => {\r\n    try {\r\n      if (!dateString) return '--/--/---- --:--:--';\r\n      \r\n      const date = new Date(dateString);\r\n      const egyptDate = new Date(date.toLocaleString(\"en-US\", {timeZone: \"Africa/Cairo\"}));\r\n      \r\n      const day = egyptDate.getDate().toString().padStart(2, '0');\r\n      const month = (egyptDate.getMonth() + 1).toString().padStart(2, '0');\r\n      const year = egyptDate.getFullYear();\r\n      const hours = egyptDate.getHours().toString().padStart(2, '0');\r\n      const minutes = egyptDate.getMinutes().toString().padStart(2, '0');\r\n      \r\n      return `${day}/${month}/${year} ${hours}:${minutes}`;\r\n    } catch (error) {\r\n      return '--/--/---- --:--:--';\r\n    }\r\n  };\r\n  \r\n  const formatDuration = (minutes) => {\r\n    if (!minutes || minutes === 0) return 'ÙˆÙ‚Øª Ù…ÙØªÙˆØ­';\r\n    if (minutes < 60) return `${minutes} Ø¯Ù‚ÙŠÙ‚Ø©`;\r\n\r\n    const hours = Math.floor(minutes / 60);\r\n    const remainingMinutes = minutes % 60;\r\n\r\n    return `${hours} Ø³Ø§Ø¹Ø©${\r\n      remainingMinutes > 0 ? ` ${remainingMinutes} Ø¯Ù‚ÙŠÙ‚Ø©` : ''\r\n    }`;\r\n  };\r\n  \r\n  // ==================== Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø´ÙŠÙØª ÙˆØ§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø© ====================\r\n  const checkAndStartAutoShift = async () => {\r\n    try {\r\n      console.log('ðŸ” ÙØ­Øµ Ø§Ù„Ø´ÙŠÙØª Ø§Ù„Ù†Ø´Ø· ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹...');\r\n      \r\n      const savedShift = localStorage.getItem('currentShift');\r\n      if (savedShift) {\r\n        try {\r\n          const shiftData = JSON.parse(savedShift);\r\n          const startTime = new Date(shiftData.start_time);\r\n          const now = new Date();\r\n          const hoursDiff = Math.floor((now - startTime) / (1000 * 60 * 60));\r\n          \r\n          if (hoursDiff < 24) {\r\n            console.log('âœ… ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø´ÙŠÙØª Ù†Ø´Ø· ÙÙŠ localStorage:', shiftData);\r\n            setCurrentShift(shiftData);\r\n            \r\n            // Ø¬Ù„Ø¨ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø© Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ù‡Ø°Ø§ Ø§Ù„Ø´ÙŠÙØª\r\n            const savedCompleted = storage.getCompletedRentals(shiftData.id);\r\n            if (savedCompleted.length > 0) {\r\n              console.log(`ðŸ“‚ Ø¬Ù„Ø¨ ${savedCompleted.length} ØªØ£Ø¬ÙŠØ± Ù…ÙƒØªÙ…Ù„ Ù…Ù† Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ`);\r\n              setCompletedRentals(savedCompleted);\r\n            }\r\n            \r\n            return true;\r\n          } else {\r\n            console.log('âš ï¸ Ø§Ù„Ø´ÙŠÙØª ÙÙŠ localStorage Ù…Ù†ØªÙ‡ÙŠ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©');\r\n            storage.clearCompletedRentals(shiftData.id);\r\n            localStorage.removeItem('currentShift');\r\n          }\r\n        } catch (e) {\r\n          console.log('âš ï¸ Ø®Ø·Ø£ ÙÙŠ Ø¨ÙŠØ§Ù†Ø§Øª localStorage:', e);\r\n          localStorage.removeItem('currentShift');\r\n        }\r\n      }\r\n      \r\n      try {\r\n        const response = await api.get('/shifts/active');\r\n        \r\n        if (response.success && response.data) {\r\n          console.log('âœ… ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø´ÙŠÙØª Ù†Ø´Ø·:', response.data);\r\n          localStorage.setItem('currentShift', JSON.stringify(response.data));\r\n          setCurrentShift(response.data);\r\n          \r\n          // Ø¬Ù„Ø¨ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø© Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ù‡Ø°Ø§ Ø§Ù„Ø´ÙŠÙØª\r\n          const savedCompleted = storage.getCompletedRentals(response.data.id);\r\n          if (savedCompleted.length > 0) {\r\n            console.log(`ðŸ“‚ Ø¬Ù„Ø¨ ${savedCompleted.length} ØªØ£Ø¬ÙŠØ± Ù…ÙƒØªÙ…Ù„ Ù…Ù† Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ`);\r\n            setCompletedRentals(savedCompleted);\r\n          }\r\n          \r\n          return true;\r\n        }\r\n      } catch (activeError) {\r\n        console.log('âš ï¸ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø¬Ù„Ø¨ Ø§Ù„Ø´ÙŠÙØª Ø§Ù„Ù†Ø´Ø·:', activeError.message);\r\n      }\r\n      \r\n      console.log('â„¹ï¸ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø´ÙŠÙØª Ù†Ø´Ø·ØŒ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù„Ù„Ø¨Ø¯Ø¡ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ...');\r\n      \r\n      try {\r\n        const startResponse = await api.post('/shifts/start-clean');\r\n        \r\n        if (startResponse.success && startResponse.data) {\r\n          console.log('âœ… ØªÙ… Ø¨Ø¯Ø¡ Ø´ÙŠÙØª Ø¬Ø¯ÙŠØ¯ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹:', startResponse.data);\r\n          localStorage.setItem('currentShift', JSON.stringify(startResponse.data));\r\n          setCurrentShift(startResponse.data);\r\n          \r\n          showNotification('success', `\r\nðŸš€ ØªÙ… Ø¨Ø¯Ø¡ Ø´ÙŠÙØª Ø¬Ø¯ÙŠØ¯ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹\r\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\r\nØ§Ù„Ø´ÙŠÙØª: #${startResponse.data.id}\r\nØ§Ù„Ù…ÙˆØ¸Ù: ${user?.name || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'}\r\nØ§Ù„ÙØ±Ø¹: ${user?.branch_name || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'}\r\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\r\nðŸŽ® Ø§Ù„Ù†Ø¸Ø§Ù… Ø¬Ø§Ù‡Ø² Ø§Ù„Ø¢Ù† Ù„Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª\r\n          `);\r\n          \r\n          return true;\r\n        }\r\n      } catch (startError) {\r\n        console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¨Ø¯Ø¡ Ø§Ù„Ø´ÙŠÙØª:', startError);\r\n        return false;\r\n      }\r\n      \r\n    } catch (error) {\r\n      console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ÙØ­Øµ Ø§Ù„Ø´ÙŠÙØª:', error);\r\n      return false;\r\n    }\r\n  };\r\n  \r\n  const updateStatistics = useCallback(() => {\r\n    console.log('ðŸ“Š Ø¬Ø§Ø±ÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ©...');\r\n    \r\n    const rentedPieces = activeRentals.reduce((total, rental) => {\r\n      const quantity = rental.quantity || 1;\r\n      return total + quantity;\r\n    }, 0);\r\n    \r\n    const availableGamesCount = games.filter(g => \r\n      g && g.is_active\r\n    ).length;\r\n    \r\n    const todayStart = new Date();\r\n    todayStart.setHours(0, 0, 0, 0);\r\n    \r\n    const todayCompleted = completedRentals.filter(rental => {\r\n      if (!rental.start_time) return false;\r\n      const rentalDate = new Date(rental.start_time);\r\n      return rentalDate >= todayStart && rental.status === 'Ù…ÙƒØªÙ…Ù„';\r\n    });\r\n    \r\n    const todayRevenue = todayCompleted.reduce((sum, rental) => \r\n      sum + (Number(rental.total_amount) || 0), 0\r\n    );\r\n    \r\n    const shiftRevenue = activeRentals\r\n      .filter(rental => rental.payment_status === 'Ù…Ø¯ÙÙˆØ¹')\r\n      .reduce((sum, rental) => sum + (Number(rental.total_amount) || 0), todayRevenue);\r\n    \r\n    const newStats = {\r\n      availableGames: availableGamesCount,\r\n      totalGames: games.filter(g => g && g.is_active).length,\r\n      todayRevenue: todayRevenue,\r\n      todayRentals: todayCompleted.length,\r\n      activeRentals: activeRentals.length,\r\n      shiftRevenue: shiftRevenue,\r\n      monthlyRevenue: 0,\r\n      uniqueCustomers: 0,\r\n      rentedPieces: rentedPieces,\r\n      completedCount: completedRentals.length\r\n    };\r\n    \r\n    console.log('ðŸ“Š Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…Ø­Ø¯Ø«Ø©:', newStats);\r\n    setStatistics(newStats);\r\n    \r\n    return newStats;\r\n  }, [games, activeRentals, completedRentals]);\r\n  \r\n  // ==================== ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ====================\r\n  useEffect(() => {\r\n    const updateTime = () => {\r\n      setCurrentEgyptTime(getEgyptTimeNow().formatted);\r\n    };\r\n    \r\n    updateTime();\r\n    const interval = setInterval(updateTime, 1000);\r\n    \r\n    return () => clearInterval(interval);\r\n  }, []);\r\n  \r\n  useEffect(() => {\r\n    const initializeSystem = async () => {\r\n      if (!user) {\r\n        console.log('â³ Ø§Ù†ØªØ¸Ø§Ø± ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…...');\r\n        setLoading(true);\r\n        return;\r\n      }\r\n      \r\n      console.log('ðŸš€ Ø¨Ø¯Ø¡ ØªØ´ØºÙŠÙ„ Ø§Ù„Ù†Ø¸Ø§Ù… Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…:', user.name);\r\n      \r\n      try {\r\n        // ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©\r\n        storage.cleanupOldData();\r\n        \r\n        const shiftReady = await checkAndStartAutoShift();\r\n        \r\n        if (shiftReady) {\r\n          console.log('âœ… Ø§Ù„Ø´ÙŠÙØª Ø¬Ø§Ù‡Ø²ØŒ Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...');\r\n          \r\n          await Promise.all([\r\n            loadGames(),\r\n            loadActiveRentals()\r\n          ]);\r\n          \r\n          // Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ Ø´ÙŠÙØª Ù†Ø´Ø·ØŒ Ø¬Ù„Ø¨ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø© Ù…Ù† Ø§Ù„Ø³ÙŠØ±ÙØ±\r\n          if (currentShift) {\r\n            await loadCompletedRentalsFromServer();\r\n          }\r\n          \r\n          updateStatistics();\r\n          \r\n          console.log('âœ¨ ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†Ø¸Ø§Ù… Ø¨Ø§Ù„ÙƒØ§Ù…Ù„');\r\n          \r\n          setTimeout(() => {\r\n            showNotification('success', `\r\nðŸŽ® Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø¬Ø§Ù‡Ø²!\r\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\r\nðŸ‘¤ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ${user.name}\r\nðŸª Ø§Ù„ÙØ±Ø¹: ${user.branch_name}\r\nðŸ”¥ Ø§Ù„Ø´ÙŠÙØª: ${currentShift ? `#${currentShift.id}` : 'ØªÙ… Ø§Ù„Ø¨Ø¯Ø¡'}\r\nðŸ“Š Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ù…ØªØ§Ø­Ø©: ${games.length}\r\nðŸ“ˆ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©: ${activeRentals.length}\r\nðŸ“‹ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©: ${completedRentals.length}\r\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\r\nðŸ’¡ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¢Ù† Ø¨Ø¯Ø¡ ØªØ£Ø¬ÙŠØ±Ø§Øª Ø¬Ø¯ÙŠØ¯Ø©\r\n            `);\r\n          }, 1000);\r\n          \r\n        } else {\r\n          console.log('âš ï¸ Ù„Ù… ÙŠØªÙ…ÙƒÙ† Ù…Ù† Ø¨Ø¯Ø¡ Ø´ÙŠÙØª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹');\r\n          showNotification('warning', 'ÙŠØ¬Ø¨ Ø¨Ø¯Ø¡ Ø´ÙŠÙØª ÙŠØ¯ÙˆÙŠØ§Ù‹ Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù†Ø¸Ø§Ù…');\r\n        }\r\n        \r\n      } catch (error) {\r\n        console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªÙ‡ÙŠØ¦Ø©:', error);\r\n        showNotification('error', 'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†Ø¸Ø§Ù…. Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙØ­Ø©.');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    \r\n    const initTimer = setTimeout(() => {\r\n      initializeSystem();\r\n    }, 300);\r\n    \r\n    return () => {\r\n      clearTimeout(initTimer);\r\n    };\r\n  }, [user, refreshTrigger]);\r\n  \r\n  useEffect(() => {\r\n    updateStatistics();\r\n  }, [games, activeRentals, completedRentals, updateStatistics]);\r\n  \r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (showEnhancedRentalModal && modalRef.current && !modalRef.current.contains(event.target)) {\r\n        if (selectedGames.length > 0 || customerName || customerPhone) {\r\n          if (window.confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥ØºÙ„Ø§Ù‚ Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ£Ø¬ÙŠØ±ØŸ Ø³ÙŠØªÙ… ÙÙ‚Ø¯Ø§Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¯Ø®Ù„Ø©.')) {\r\n            setShowEnhancedRentalModal(false);\r\n            resetForm();\r\n          }\r\n        } else {\r\n          setShowEnhancedRentalModal(false);\r\n        }\r\n      }\r\n    };\r\n\r\n    document.addEventListener('mousedown', handleClickOutside);\r\n    document.addEventListener('touchstart', handleClickOutside);\r\n    \r\n    return () => {\r\n      document.removeEventListener('mousedown', handleClickOutside);\r\n      document.removeEventListener('touchstart', handleClickOutside);\r\n    };\r\n  }, [showEnhancedRentalModal, selectedGames, customerName, customerPhone]);\r\n  \r\n  // ==================== Ø¯ÙˆØ§Ù„ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø´ÙŠÙØª ====================\r\n  const startShift = async () => {\r\n    try {\r\n      showNotification('info', 'ðŸš€ Ø¬Ø§Ø±ÙŠ Ø¨Ø¯Ø¡ Ø´ÙŠÙØª Ø¬Ø¯ÙŠØ¯ Ù†Ø¸ÙŠÙ...');\r\n      \r\n      setActiveRentals([]);\r\n      setCompletedRentals([]);\r\n      setSelectedGames([]);\r\n      setSelectedGameQuantities({});\r\n      \r\n      const response = await api.post('/shifts/start-clean');\r\n      \r\n      console.log('ðŸ“¥ Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø¨Ø¯Ø¡ Ø§Ù„Ø´ÙŠÙØª:', response);\r\n      \r\n      if (response.success && response.data) {\r\n        const newShift = response.data;\r\n        localStorage.setItem('currentShift', JSON.stringify(newShift));\r\n        setCurrentShift(newShift);\r\n        \r\n        // Ø­Ø°Ù Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø© Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©\r\n        storage.clearCompletedRentals(newShift.id);\r\n        \r\n        showNotification('success', `\r\nâœ… ØªÙ… Ø¨Ø¯Ø¡ Ø´ÙŠÙØª Ø¬Ø¯ÙŠØ¯ #${newShift.id}\r\n\r\nðŸ•’ Ø§Ù„ÙˆÙ‚Øª: ${formatEgyptDateTime(newShift.start_time)}\r\nðŸ‘¤ Ø§Ù„Ù…ÙˆØ¸Ù: ${user?.name || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'}\r\nðŸŽ® Ø§Ù„Ø´ÙŠÙØª Ù†Ø¸ÙŠÙ ÙˆØ¬Ø§Ù‡Ø² Ù„Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©\r\n\r\nâš ï¸ **ØªÙ… ØªÙ†Ø¸ÙŠÙ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©**\r\n        `);\r\n        \r\n        setTimeout(() => {\r\n          loadGames();\r\n          loadActiveRentals();\r\n          showNotification('info', 'âœ¨ Ø§Ù„Ù†Ø¸Ø§Ù… Ø¬Ø§Ù‡Ø² Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ø´ÙŠÙØª Ø§Ù„Ø¬Ø¯ÙŠØ¯');\r\n        }, 1000);\r\n        \r\n      } else {\r\n        showNotification('error', response.message || 'ÙØ´Ù„ Ø¨Ø¯Ø¡ Ø§Ù„Ø´ÙŠÙØª');\r\n      }\r\n    } catch (error) {\r\n      console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¨Ø¯Ø¡ Ø§Ù„Ø´ÙŠÙØª:', error);\r\n      showNotification('error', error.message || 'ÙØ´Ù„ Ø¨Ø¯Ø¡ Ø§Ù„Ø´ÙŠÙØª');\r\n    }\r\n  };\r\n  \r\n  const handleEndCurrentShift = async () => {\r\n    if (!currentShift) {\r\n      showNotification('error', 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø´ÙŠÙØª Ù†Ø´Ø· Ù„Ø¥Ù†Ù‡Ø§Ø¦Ù‡');\r\n      return;\r\n    }\r\n    \r\n    const startTime = new Date(currentShift.start_time);\r\n    const now = new Date();\r\n    const shiftDuration = Math.floor((now - startTime) / (1000 * 60));\r\n    \r\n    const confirmMessage = `\r\nðŸ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø´ÙŠÙØª\r\n\r\nØ§Ù„Ø´ÙŠÙØª: #${currentShift.id}\r\nØ¨Ø¯Ø£ ÙÙŠ: ${formatEgyptDateTime(currentShift.start_time)}\r\nØ§Ù„Ù…Ø¯Ø©: ${Math.floor(shiftDuration / 60)} Ø³Ø§Ø¹Ø© Ùˆ ${shiftDuration % 60} Ø¯Ù‚ÙŠÙ‚Ø©\r\n\r\nðŸ“Š Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©:\r\nâ€¢ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©: ${activeRentals.length}\r\nâ€¢ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©: ${completedRentals.length}\r\nâ€¢ Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø§Ù„Ø´ÙŠÙØª: ${formatCurrency(statistics.shiftRevenue)}\r\n\r\nÙ‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø´ÙŠÙØªØŸ`;\r\n\r\n    if (!window.confirm(confirmMessage)) {\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      showNotification('info', 'Ø¬Ø§Ø±ÙŠ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø´ÙŠÙØª...');\r\n      \r\n      const response = await api.post(`/shifts/${currentShift.id}/end`, {\r\n        end_time: now.toISOString(),\r\n        employee_name: user?.name || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ',\r\n        notes: 'Ø¥Ù†Ù‡Ø§Ø¡ ÙŠØ¯ÙˆÙŠ',\r\n        final_stats: {\r\n          active_rentals: activeRentals.length,\r\n          completed_rentals: completedRentals.length,\r\n          total_revenue: statistics.shiftRevenue\r\n        }\r\n      });\r\n      \r\n      if (response.success) {\r\n        // Ø­ÙØ¸ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø© Ù‚Ø¨Ù„ Ø§Ù„Ø­Ø°Ù\r\n        if (completedRentals.length > 0) {\r\n          storage.saveCompletedRentals(currentShift.id, completedRentals);\r\n        }\r\n        \r\n        localStorage.removeItem('currentShift');\r\n        setCurrentShift(null);\r\n        setActiveRentals([]);\r\n        setCompletedRentals([]);\r\n        \r\n        showNotification('success', `\r\nâœ… ØªÙ… Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø´ÙŠÙØª Ø¨Ù†Ø¬Ø§Ø­!\r\n\r\nðŸ“Š Ù…Ù„Ø®Øµ Ø§Ù„Ø´ÙŠÙØª:\r\nâ€¢ Ø§Ù„Ù…Ø¯Ø©: ${Math.floor(shiftDuration / 60)} Ø³Ø§Ø¹Ø© Ùˆ ${shiftDuration % 60} Ø¯Ù‚ÙŠÙ‚Ø©\r\nâ€¢ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª: ${formatCurrency(response.data?.stats?.total_revenue || 0)}\r\nâ€¢ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©: ${activeRentals.length}\r\nâ€¢ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©: ${completedRentals.length}\r\n\r\nðŸ”„ Ø§Ø¨Ø¯Ø£ Ø´ÙŠÙØª Ø¬Ø¯ÙŠØ¯ Ù„Ù„Ø§Ø³ØªÙ…Ø±Ø§Ø±.\r\n        `);\r\n        \r\n      } else {\r\n        showNotification('error', response.message || 'ÙØ´Ù„ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø´ÙŠÙØª');\r\n      }\r\n      \r\n    } catch (error) {\r\n      console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø´ÙŠÙØª:', error);\r\n      \r\n      let errorMessage = 'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø´ÙŠÙØª';\r\n      if (error.response?.data?.error) {\r\n        errorMessage += `: ${error.response.data.error}`;\r\n      } else if (error.message) {\r\n        errorMessage += `: ${error.message}`;\r\n      }\r\n      \r\n      showNotification('error', errorMessage);\r\n    }\r\n  };\r\n  \r\n  // ==================== Ø¯ÙˆØ§Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­Ø³Ù†Ø© ====================\r\n  const loadGames = async () => {\r\n    try {\r\n      console.log('ðŸŽ® ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨...');\r\n      \r\n      if (!user?.branch_id) {\r\n        console.log('âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ branch_id Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…');\r\n        setGames([]);\r\n        return;\r\n      }\r\n      \r\n      const response = await api.get('/games', {\r\n        params: {\r\n          branch_id: user.branch_id,\r\n          is_active: 1,\r\n          _t: Date.now()\r\n        },\r\n        timeout: 10000\r\n      });\r\n      \r\n      if (response && response.success) {\r\n        let gamesData = [];\r\n        \r\n        if (Array.isArray(response.data)) {\r\n          gamesData = response.data;\r\n        } else if (response.data?.data && Array.isArray(response.data.data)) {\r\n          gamesData = response.data.data;\r\n        }\r\n        \r\n        const processedGames = gamesData\r\n          .filter(game => game.is_active)\r\n          .map(game => {\r\n            // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© Ù„ÙƒÙ„ Ù„Ø¹Ø¨Ø©\r\n            const imageUrl = getGameImageUrl(game);\r\n            console.log(`ðŸŽ® Ù…Ø¹Ø§Ù„Ø¬Ø© Ù„Ø¹Ø¨Ø©: ${game.name} -> ØµÙˆØ±Ø©: ${imageUrl}`);\r\n            \r\n            return {\r\n              id: game.id || game.game_id || Date.now() + Math.random(),\r\n              name: game.name || 'Ù„Ø¹Ø¨Ø© ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙØ©',\r\n              status: 'Ù…ØªØ§Ø­',\r\n              is_active: game.is_active === undefined ? 1 : game.is_active,\r\n              price_per_15min: game.price_per_15min || 100,\r\n              category: game.category || 'Ø¹Ø§Ù…',\r\n              image_url: game.image_url,\r\n              external_image_url: game.external_image_url,\r\n              thumbnail_url: game.thumbnail_url,\r\n              image: game.image,\r\n              unlimited_rentals: true,\r\n              // Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…Ø­Ø³Ù†Ø©\r\n              enhanced_image_url: imageUrl,\r\n              ...game\r\n            };\r\n          });\r\n        \r\n        console.log(`âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ ${processedGames.length} Ù„Ø¹Ø¨Ø© Ù…Ø¹ ØµÙˆØ± Ù…Ø­Ø³Ù†Ø©`);\r\n        setGames(processedGames);\r\n        \r\n      } else {\r\n        console.log('âŒ ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨');\r\n        setGames([]);\r\n      }\r\n    } catch (error) {\r\n      console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨:', error);\r\n      setGames([]);\r\n    }\r\n  };\r\n  \r\n  const loadActiveRentals = async () => {\r\n    try {\r\n      console.log('ðŸ”¥ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©...');\r\n      \r\n      if (!user?.branch_id) {\r\n        console.log('âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ branch_id Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…');\r\n        setActiveRentals([]);\r\n        return [];\r\n      }\r\n      \r\n      let rentalsData = [];\r\n      \r\n      try {\r\n        const response = await api.get('/rentals/active', {\r\n          params: {\r\n            branch_id: user.branch_id,\r\n            include_game: true,\r\n            _t: Date.now()\r\n          },\r\n          timeout: 8000\r\n        });\r\n        \r\n        if (response && response.success) {\r\n          if (Array.isArray(response.data)) {\r\n            rentalsData = response.data;\r\n          } else if (response.data && Array.isArray(response.data.data)) {\r\n            rentalsData = response.data.data;\r\n          }\r\n          console.log(`ðŸ“Š Ø§Ù„Ù…Ø³ØªÙ„Ù…Ø© Ù…Ù† /rentals/active: ${rentalsData.length} ØªØ£Ø¬ÙŠØ± Ù†Ø´Ø·`);\r\n        }\r\n        \r\n      } catch (activeError) {\r\n        console.log('âŒ ÙØ´Ù„ Ø¬Ù„Ø¨ /rentals/active:', activeError.message);\r\n        \r\n        try {\r\n          const alternativeResponse = await api.get('/rentals', {\r\n            params: {\r\n              branch_id: user.branch_id,\r\n              status: 'Ù†Ø´Ø·',\r\n              include_game: true,\r\n              _t: Date.now()\r\n            },\r\n            timeout: 8000\r\n          });\r\n          \r\n          if (alternativeResponse && alternativeResponse.success) {\r\n            if (Array.isArray(alternativeResponse.data)) {\r\n              rentalsData = alternativeResponse.data;\r\n            } else if (alternativeResponse.data && Array.isArray(alternativeResponse.data.data)) {\r\n              rentalsData = alternativeResponse.data.data;\r\n            }\r\n            console.log(`ðŸ“Š Ø§Ù„Ù…Ø³ØªÙ„Ù…Ø© Ù…Ù† /rentals: ${rentalsData.length} ØªØ£Ø¬ÙŠØ± Ù†Ø´Ø·`);\r\n          }\r\n          \r\n        } catch (alternativeError) {\r\n          console.log('âŒ ÙØ´Ù„ Ø¬Ù…ÙŠØ¹ Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø¬Ù„Ø¨ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª:', alternativeError.message);\r\n        }\r\n      }\r\n      \r\n      const nowTime = new Date();\r\n      const activeRentalsList = rentalsData.map(rental => {\r\n        try {\r\n          const startTime = new Date(rental.start_time || rental.created_at);\r\n          const duration = Number(rental.duration_minutes) || 0;\r\n          const isOpenTime = duration === 0 || rental.is_open_time;\r\n          \r\n          let time_left = 'Ù…ÙØªÙˆØ­';\r\n          let is_expired = false;\r\n          let remaining_seconds = 0;\r\n          \r\n          if (!isOpenTime && duration > 0) {\r\n            const endTime = new Date(startTime.getTime() + duration * 60000);\r\n            const timeLeftMs = endTime - nowTime;\r\n            \r\n            if (timeLeftMs > 0) {\r\n              remaining_seconds = Math.floor(timeLeftMs / 1000);\r\n              const minutes = Math.floor(remaining_seconds / 60);\r\n              const seconds = remaining_seconds % 60;\r\n              time_left = `${minutes}:${seconds.toString().padStart(2, '0')}`;\r\n            } else {\r\n              time_left = 'Ø§Ù†ØªÙ‡Ù‰';\r\n              is_expired = true;\r\n            }\r\n          }\r\n          \r\n          // ØªØ­Ø¶ÙŠØ± Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø© Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©\r\n          const gameData = rental.game || {\r\n            name: rental.game_name,\r\n            image_url: rental.image_url,\r\n            external_image_url: rental.external_image_url,\r\n            thumbnail_url: rental.thumbnail_url,\r\n            image: rental.image\r\n          };\r\n          \r\n          // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©\r\n          const imageUrl = getGameImageUrl(gameData);\r\n          \r\n          return {\r\n            id: rental.id,\r\n            rental_number: rental.rental_number || `RENT-${rental.id}`,\r\n            customer_name: rental.customer_name || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ',\r\n            customer_phone: rental.customer_phone || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ',\r\n            game_id: rental.game_id,\r\n            game_name: rental.game_name || rental.game?.name || 'Ù„Ø¹Ø¨Ø©',\r\n            start_time: rental.start_time,\r\n            duration_minutes: duration,\r\n            payment_status: isOpenTime ? 'Ø¹Ù†Ø¯ Ø§Ù„Ø¥Ù†Ù‡Ø§Ø¡' : (rental.payment_status || 'Ù…Ø¯ÙÙˆØ¹'),\r\n            payment_method: rental.payment_method || 'ÙƒØ§Ø´',\r\n            total_amount: Number(rental.total_amount) || 0,\r\n            status: 'Ù†Ø´Ø·',\r\n            time_left,\r\n            is_expired,\r\n            is_open_time: isOpenTime,\r\n            remaining_seconds,\r\n            branch_id: rental.branch_id || user.branch_id,\r\n            shift_id: rental.shift_id || currentShift?.id,\r\n            price_per_15min: Number(rental.price_per_15min) || 100,\r\n            notes: rental.notes || '',\r\n            image_url: rental.image_url || rental.game?.image_url,\r\n            external_image_url: rental.external_image_url || rental.game?.external_image_url,\r\n            thumbnail_url: rental.thumbnail_url || rental.game?.thumbnail_url,\r\n            quantity: rental.quantity || 1,\r\n            formatted_start_time: formatEgyptDateTime(rental.start_time || rental.created_at),\r\n            // Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…Ø­Ø³Ù†Ø©\r\n            enhanced_image_url: imageUrl\r\n          };\r\n        } catch (error) {\r\n          console.error(`âŒ Ø®Ø·Ø£ ÙÙŠ Ù…Ø¹Ø§Ù„Ø¬Ø© ØªØ£Ø¬ÙŠØ±:`, error);\r\n          return null;\r\n        }\r\n      }).filter(rental => rental !== null);\r\n      \r\n      console.log(`ðŸŽ¯ ØªÙ… ØªØ­Ù…ÙŠÙ„ ${activeRentalsList.length} ØªØ£Ø¬ÙŠØ± Ù†Ø´Ø·`);\r\n      setActiveRentals(activeRentalsList);\r\n      \r\n      return activeRentalsList;\r\n      \r\n    } catch (error) {\r\n      console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©:', error);\r\n      setActiveRentals([]);\r\n      return [];\r\n    }\r\n  };\r\n  \r\n  // Ø¯Ø§Ù„Ø© Ù…Ø­Ø³Ù†Ø© Ù„Ø¬Ù„Ø¨ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø© Ù…Ù† Ø§Ù„Ø³ÙŠØ±ÙØ±\r\n  const loadCompletedRentalsFromServer = async () => {\r\n    try {\r\n      if (!user?.branch_id || !currentShift) return;\r\n      \r\n      console.log('ðŸ“Š Ø¬Ù„Ø¨ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø© Ù…Ù† Ø§Ù„Ø³ÙŠØ±ÙØ±...');\r\n      \r\n      let response;\r\n      try {\r\n        response = await api.get('/rentals/completed', {\r\n          params: { \r\n            branch_id: user.branch_id,\r\n            shift_id: currentShift.id, // Ø§Ù„Ø±Ø¨Ø· Ø¨Ø§Ù„Ø´ÙŠÙØª\r\n            limit: 500,\r\n            include_game: true,\r\n            sort_order: 'DESC'\r\n          }\r\n        });\r\n      } catch (error) {\r\n        console.log('âš ï¸ Ù†Ù‚Ø·Ø© /rentals/completed ÙØ´Ù„ØªØŒ Ø¬Ø±Ø¨ Ù†Ù‚Ø·Ø© Ø¨Ø¯ÙŠÙ„Ø©');\r\n        \r\n        response = await api.get('/rentals', {\r\n          params: { \r\n            branch_id: user.branch_id,\r\n            shift_id: currentShift.id,\r\n            status: 'Ù…ÙƒØªÙ…Ù„',\r\n            limit: 500,\r\n            include_game: true\r\n          }\r\n        });\r\n      }\r\n      \r\n      if (response.success) {\r\n        let completedData = [];\r\n        \r\n        if (Array.isArray(response.data)) {\r\n          completedData = response.data;\r\n        } else if (response.data && Array.isArray(response.data.data)) {\r\n          completedData = response.data.data;\r\n        }\r\n        \r\n        console.log(`ðŸ“Š Ø¹Ø¯Ø¯ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…Ø­Ù…Ù„Ø© Ù…Ù† Ø§Ù„Ø³ÙŠØ±ÙØ±: ${completedData.length}`);\r\n        \r\n        const processedRentals = completedData\r\n          .filter(rental => {\r\n            const status = rental.status?.toLowerCase() || '';\r\n            return ['Ù…ÙƒØªÙ…Ù„', 'completed', 'Ù…Ù„ØºÙŠ', 'cancelled', 'Ù…Ø³ØªØ±Ø¯', 'refunded'].some(s => \r\n              status.includes(s)\r\n            );\r\n          })\r\n          .map(rental => {\r\n            const isRefunded = rental.status?.includes('Ù…Ø³ØªØ±Ø¯') || rental.status?.includes('refunded');\r\n            const isCancelled = rental.status?.includes('Ù…Ù„ØºÙŠ') || rental.status?.includes('cancelled');\r\n            const isCompleted = rental.status?.includes('Ù…ÙƒØªÙ…Ù„') || rental.status?.includes('completed');\r\n            \r\n            // ØªØ­Ø¶ÙŠØ± Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø© Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©\r\n            const gameData = rental.game || {\r\n              name: rental.game_name,\r\n              image_url: rental.image_url,\r\n              external_image_url: rental.external_image_url,\r\n              thumbnail_url: rental.thumbnail_url,\r\n              image: rental.image\r\n            };\r\n            \r\n            // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©\r\n            const imageUrl = getGameImageUrl(gameData);\r\n            \r\n            return {\r\n              ...rental,\r\n              game_name: rental.game_name || rental.game?.name || 'Ù„Ø¹Ø¨Ø©',\r\n              image_url: rental.image_url || rental.game?.image_url,\r\n              external_image_url: rental.external_image_url || rental.game?.external_image_url,\r\n              thumbnail_url: rental.thumbnail_url || rental.game?.thumbnail_url,\r\n              formatted_start_time: formatEgyptDateTime(rental.start_time),\r\n              formatted_end_time: formatEgyptDateTime(rental.actual_end_time || rental.end_time || rental.completed_at),\r\n              actual_duration_minutes: rental.actual_duration_minutes || rental.duration_minutes,\r\n              total_amount: isRefunded ? 0 : (rental.total_amount || 0),\r\n              refund_amount: rental.refund_amount || (isRefunded ? rental.total_amount : 0),\r\n              status: isRefunded ? 'Ù…Ø³ØªØ±Ø¯' : isCancelled ? 'Ù…Ù„ØºÙŠ' : 'Ù…ÙƒØªÙ…Ù„',\r\n              status_original: rental.status,\r\n              shift_id: rental.shift_id || currentShift.id,\r\n              // Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…Ø­Ø³Ù†Ø©\r\n              enhanced_image_url: imageUrl\r\n            };\r\n          });\r\n        \r\n        console.log(`âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ ${processedRentals.length} ØªØ£Ø¬ÙŠØ± Ù…ÙƒØªÙ…Ù„ Ù…Ù† Ø§Ù„Ø³ÙŠØ±ÙØ±`);\r\n        setCompletedRentals(prev => {\r\n          // Ø¯Ù…Ø¬ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ù…Ø¹ Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© (ØªØ¬Ù†Ø¨ Ø§Ù„ØªÙƒØ±Ø§Ø±)\r\n          const existingIds = new Set(prev.map(r => r.id));\r\n          const newRentals = processedRentals.filter(r => !existingIds.has(r.id));\r\n          return [...newRentals, ...prev];\r\n        });\r\n        \r\n        // Ø­ÙØ¸ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø© ÙÙŠ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ\r\n        if (currentShift && processedRentals.length > 0) {\r\n          storage.saveCompletedRentals(currentShift.id, processedRentals);\r\n        }\r\n        \r\n      } else {\r\n        console.log('âŒ ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø© Ù…Ù† Ø§Ù„Ø³ÙŠØ±ÙØ±');\r\n        // Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ ÙƒØ¨Ø¯ÙŠÙ„\r\n        const savedRentals = storage.getCompletedRentals(currentShift.id);\r\n        if (savedRentals.length > 0) {\r\n          console.log(`ðŸ“‚ Ø§Ø³ØªØ®Ø¯Ø§Ù… ${savedRentals.length} ØªØ£Ø¬ÙŠØ± Ù…ÙƒØªÙ…Ù„ Ù…Ù† Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ`);\r\n          setCompletedRentals(savedRentals);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©:', error);\r\n      // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ ÙÙŠ Ø­Ø§Ù„Ø© Ø§Ù„Ø®Ø·Ø£\r\n      if (currentShift) {\r\n        const savedRentals = storage.getCompletedRentals(currentShift.id);\r\n        if (savedRentals.length > 0) {\r\n          console.log(`ðŸ“‚ Ø§Ø³ØªØ®Ø¯Ø§Ù… ${savedRentals.length} ØªØ£Ø¬ÙŠØ± Ù…ÙƒØªÙ…Ù„ Ù…Ù† Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ Ø¨Ø¹Ø¯ Ø§Ù„Ø®Ø·Ø£`);\r\n          setCompletedRentals(savedRentals);\r\n        }\r\n      }\r\n    }\r\n  };\r\n  \r\n  // Ø¯Ø§Ù„Ø© Ù„Ø¬Ù„Ø¨ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø© (Ù…Ø­Ø³Ù†Ø©)\r\n  const loadCompletedRentals = async (forceRefresh = false) => {\r\n    if (!currentShift) return;\r\n    \r\n    console.log(`ðŸ”„ ${forceRefresh ? 'ØªØ­Ø¯ÙŠØ« Ù‚ÙˆÙŠ' : 'ØªØ­Ù…ÙŠÙ„'} Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©...`);\r\n    \r\n    if (forceRefresh) {\r\n      await loadCompletedRentalsFromServer();\r\n    } else {\r\n      // Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ Ø£ÙˆÙ„Ø§Ù‹\r\n      const savedRentals = storage.getCompletedRentals(currentShift.id);\r\n      if (savedRentals.length > 0) {\r\n        console.log(`ðŸ“‚ Ø§Ø³ØªØ®Ø¯Ø§Ù… ${savedRentals.length} ØªØ£Ø¬ÙŠØ± Ù…ÙƒØªÙ…Ù„ Ù…Ù† Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ`);\r\n        setCompletedRentals(savedRentals);\r\n      } else {\r\n        // Ø¥Ø°Ø§ Ù„Ù… ØªÙˆØ¬Ø¯ ÙÙŠ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠØŒ Ø¬Ù„Ø¨ Ù…Ù† Ø§Ù„Ø³ÙŠØ±ÙØ±\r\n        await loadCompletedRentalsFromServer();\r\n      }\r\n    }\r\n  };\r\n  \r\n  const loadTodaysShifts = async () => {\r\n    if (!isManager) {\r\n      console.log('ðŸ‘· Ø§Ù„Ù…ÙˆØ¸Ù Ù„Ø§ ÙŠÙ…ÙƒÙ†Ù‡ Ø±Ø¤ÙŠØ© Ø´ÙŠÙØªØ§Øª Ø§Ù„ÙŠÙˆÙ…');\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      console.log('ðŸ“… Ø¬Ù„Ø¨ Ø´ÙŠÙØªØ§Øª Ø§Ù„ÙŠÙˆÙ… Ù„Ù„Ù…Ø¯ÙŠØ±...');\r\n      \r\n      const today = new Date();\r\n      const todayStart = new Date(today.getFullYear(), today.getMonth(), today.getDate());\r\n      const todayEnd = new Date(today.getFullYear(), today.getMonth(), today.getDate() + 1);\r\n      \r\n      const response = await api.get('/shifts', {\r\n        params: { \r\n          branch_id: user?.branch_id,\r\n          start_date: todayStart.toISOString(),\r\n          end_date: todayEnd.toISOString(),\r\n          order_by: 'start_time',\r\n          order_direction: 'DESC'\r\n        }\r\n      });\r\n      \r\n      if (response.success) {\r\n        const shiftsData = Array.isArray(response.data) ? response.data : [];\r\n        console.log(`âœ… ØªÙ… Ø¬Ù„Ø¨ ${shiftsData.length} Ø´ÙŠÙØª Ù„Ù„ÙŠÙˆÙ…`);\r\n        setTodaysShifts(shiftsData);\r\n      }\r\n    } catch (error) {\r\n      console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø´ÙŠÙØªØ§Øª Ø§Ù„ÙŠÙˆÙ…:', error);\r\n    }\r\n  };\r\n  \r\n  const validateShift = () => {\r\n    if (!currentShift) {\r\n      showNotification('error', 'ÙŠØ¬Ø¨ Ø¨Ø¯Ø¡ Ø´ÙŠÙØª Ø£ÙˆÙ„Ø§Ù‹ Ù‚Ø¨Ù„ Ø¨Ø¯Ø¡ Ø£ÙŠ ØªØ£Ø¬ÙŠØ±Ø§Øª');\r\n      return false;\r\n    }\r\n\r\n    if (currentShift.status === 'Ù…Ù†ØªÙ‡ÙŠ') {\r\n      showNotification('error', 'Ø§Ù„Ø´ÙŠÙØª Ø§Ù„Ø­Ø§Ù„ÙŠ Ù…Ù†ØªÙ‡ÙŠ. ÙŠØ±Ø¬Ù‰ Ø¨Ø¯Ø¡ Ø´ÙŠÙØª Ø¬Ø¯ÙŠØ¯');\r\n      return false;\r\n    }\r\n\r\n    if (currentShift.start_time) {\r\n      const startTime = new Date(currentShift.start_time);\r\n      const now = new Date();\r\n      const hoursDiff = Math.floor((now - startTime) / (1000 * 60 * 60));\r\n      \r\n      if (hoursDiff > 24) {\r\n        showNotification('warning', 'Ø§Ù„Ø´ÙŠÙØª ØªØ¬Ø§ÙˆØ² 24 Ø³Ø§Ø¹Ø©. ÙŠÙˆØµÙ‰ Ø¨Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø´ÙŠÙØª ÙˆØ¨Ø¯Ø¡ Ø´ÙŠÙØª Ø¬Ø¯ÙŠØ¯');\r\n      }\r\n    }\r\n\r\n    return true;\r\n  };\r\n  \r\n  const handleGameClick = (game) => {\r\n    if (!validateShift()) {\r\n      return;\r\n    }\r\n    console.log('ðŸŽ¯ Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ù„Ø¹Ø¨Ø©:', game.name);\r\n    \r\n    if (!currentShift) {\r\n      showNotification('error', 'ÙŠØ¬Ø¨ Ø¨Ø¯Ø¡ Ø´ÙŠÙØª Ø£ÙˆÙ„Ø§Ù‹ Ù‚Ø¨Ù„ Ø¨Ø¯Ø¡ Ø£ÙŠ ØªØ£Ø¬ÙŠØ±Ø§Øª');\r\n      return;\r\n    }\r\n    \r\n    const isAlreadySelected = selectedGames.some(g => g.id === game.id);\r\n    \r\n    if (!isAlreadySelected) {\r\n      setSelectedGames(prev => [...prev, game]);\r\n      setSelectedGameQuantities(prev => ({\r\n        ...prev,\r\n        [game.id]: 1\r\n      }));\r\n    } else {\r\n      setSelectedGameQuantities(prev => ({\r\n        ...prev,\r\n        [game.id]: (prev[game.id] || 1) + 1\r\n      }));\r\n    }\r\n    \r\n    setShowEnhancedRentalModal(true);\r\n    \r\n    showNotification('success', `ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© ${game.name} Ø¥Ù„Ù‰ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªØ£Ø¬ÙŠØ±`);\r\n  };\r\n  \r\n  // ==================== Ø¯ÙˆØ§Ù„ Ø§Ù„ØªØ£Ø¬ÙŠØ± Ø§Ù„Ù…Ø­Ø³Ù†Ø© ====================\r\n  const handleStartEnhancedRentalMain = async (rentalData) => {\r\n    if (!validateShift()) {\r\n      return;\r\n    }\r\n    \r\n    console.log('ðŸš€ Ø¨Ø¯Ø¡ ØªØ£Ø¬ÙŠØ± Ù…ØªØ¹Ø¯Ø¯ Ù…Ø­Ø³Ù†:', rentalData);\r\n    \r\n    try {\r\n      if (!currentShift) {\r\n        showNotification('error', 'ÙŠØ¬Ø¨ Ø¨Ø¯Ø¡ Ø´ÙŠÙØª Ø£ÙˆÙ„Ø§Ù‹ Ù‚Ø¨Ù„ Ø¥Ù†Ø´Ø§Ø¡ ØªØ£Ø¬ÙŠØ±Ø§Øª');\r\n        return;\r\n      }\r\n      \r\n      const { customerName, customerPhone, customerNotes, paymentMethod, rentalList, totalFixedAmount } = rentalData;\r\n      \r\n      if (!customerName || !customerPhone) {\r\n        showNotification('error', 'Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„ ÙˆØ±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ');\r\n        return;\r\n      }\r\n      \r\n      if (!validatePhone(customerPhone)) {\r\n        showNotification('error', 'Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ ØºÙŠØ± ØµØ­ÙŠØ­. ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† 11 Ø±Ù‚Ù…Ø§Ù‹ ÙˆÙŠØ¨Ø¯Ø£ Ø¨Ù€ 01');\r\n        return;\r\n      }\r\n      \r\n      if (rentalList.length === 0) {\r\n        showNotification('error', 'Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¶Ø§ÙØ© Ø£Ù„Ø¹Ø§Ø¨ Ø¥Ù„Ù‰ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªØ£Ø¬ÙŠØ±');\r\n        return;\r\n      }\r\n      \r\n      showNotification('info', `ðŸ”„ Ø¬Ø§Ø±ÙŠ Ø¥Ù†Ø´Ø§Ø¡ ${rentalList.length} ØªØ£Ø¬ÙŠØ±...`);\r\n      \r\n      let successfulRentals = [];\r\n      let failedRentals = [];\r\n      \r\n      for (const rentalItem of rentalList) {\r\n        try {\r\n          const game = games.find(g => g.id === rentalItem.gameId);\r\n          if (!game) {\r\n            failedRentals.push({\r\n              gameName: rentalItem.gameName,\r\n              error: 'Ø§Ù„Ù„Ø¹Ø¨Ø© ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø© ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…'\r\n            });\r\n            continue;\r\n          }\r\n          \r\n          const isOpenTime = rentalItem.rentalType === 'open';\r\n          const durationMinutes = isOpenTime ? 0 : \r\n            (rentalItem.rentalType === 'custom' ? rentalItem.customMinutes : rentalItem.selectedTime);\r\n          \r\n          let totalAmount = 0;\r\n          if (!isOpenTime) {\r\n            const pricePer15min = game.price_per_15min || 100;\r\n            const units = Math.ceil(durationMinutes / 15);\r\n            totalAmount = pricePer15min * units * rentalItem.quantity;\r\n          }\r\n          \r\n          for (let i = 0; i < rentalItem.quantity; i++) {\r\n            try {\r\n              const rentalNumber = `RENT-${Date.now()}-${game.id}-${i}-${Math.floor(Math.random() * 1000)}`;\r\n              \r\n              const requestData = {\r\n                rental_number: rentalNumber,\r\n                game_id: game.id,\r\n                customer_name: customerName.trim(),\r\n                customer_phone: customerPhone.trim(),\r\n                branch_id: user.branch_id,\r\n                shift_id: currentShift.id, // Ø§Ù„Ø±Ø¨Ø· Ø¨Ø§Ù„Ø´ÙŠÙØª\r\n                duration_minutes: durationMinutes,\r\n                total_amount: totalAmount,\r\n                payment_method: paymentMethod === 'cash' ? 'ÙƒØ§Ø´' : \r\n                              paymentMethod === 'card' ? 'Ø¨Ø·Ø§Ù‚Ø©' : 'ÙÙˆØ¯Ø§ÙÙˆÙ† ÙƒØ§Ø´',\r\n                payment_status: isOpenTime ? 'Ø¹Ù†Ø¯ Ø§Ù„Ø¥Ù†Ù‡Ø§Ø¡' : 'Ù…Ø¯ÙÙˆØ¹',\r\n                paid_amount: isOpenTime ? 0 : totalAmount,\r\n                notes: `${customerNotes || ''} ${rentalItem.notes ? `| ${rentalItem.notes}` : ''}`.trim(),\r\n                status: 'Ù†Ø´Ø·',\r\n                start_time: new Date().toISOString(),\r\n                quantity: 1\r\n              };\r\n              \r\n              console.log(`ðŸ“¤ Ø¥Ø±Ø³Ø§Ù„ ØªØ£Ø¬ÙŠØ± ${i+1}/${rentalItem.quantity} Ù„Ù„Ø¹Ø¨Ø© ${game.name}:`, requestData);\r\n              \r\n              const response = await api.post('/api/rentals/new', requestData);\r\n              \r\n              if (response.success) {\r\n                const newRental = {\r\n                  id: response.data?.rental_id || response.data?.id || Date.now() + Math.random(),\r\n                  rental_number: response.data?.rental_number || requestData.rental_number,\r\n                  game_id: game.id,\r\n                  game_name: game.name,\r\n                  customer_name: customerName.trim(),\r\n                  customer_phone: customerPhone.trim(),\r\n                  start_time: new Date().toISOString(),\r\n                  duration_minutes: durationMinutes,\r\n                  total_amount: totalAmount,\r\n                  payment_status: isOpenTime ? 'Ø¹Ù†Ø¯ Ø§Ù„Ø¥Ù†Ù‡Ø§Ø¡' : 'Ù…Ø¯ÙÙˆØ¹',\r\n                  payment_method: requestData.payment_method,\r\n                  status: 'Ù†Ø´Ø·',\r\n                  time_left: isOpenTime ? 'Ù…ÙØªÙˆØ­' : `${durationMinutes}:00`,\r\n                  is_open_time: isOpenTime,\r\n                  price_per_15min: game.price_per_15min || 100,\r\n                  shift_id: currentShift.id,\r\n                  branch_id: user.branch_id,\r\n                  image_url: game.image_url,\r\n                  external_image_url: game.external_image_url,\r\n                  quantity: 1,\r\n                  enhanced_image_url: getGameImageUrl(game)\r\n                };\r\n                \r\n                successfulRentals.push({\r\n                  rental: newRental,\r\n                  game: game.name,\r\n                  duration: durationMinutes,\r\n                  amount: totalAmount\r\n                });\r\n                \r\n                setActiveRentals(prev => [...prev, newRental]);\r\n                \r\n                if (!isOpenTime && totalAmount > 0) {\r\n                  updateShiftRevenueInRealTime(totalAmount, newRental.rental_number);\r\n                }\r\n                \r\n              } else {\r\n                failedRentals.push({\r\n                  gameName: game.name,\r\n                  error: response.message || 'ÙØ´Ù„ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ±'\r\n                });\r\n              }\r\n              \r\n            } catch (error) {\r\n              console.error(`ðŸ”¥ Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ ØªØ£Ø¬ÙŠØ± ${game.name}:`, error);\r\n              failedRentals.push({\r\n                gameName: game.name,\r\n                error: error.message || 'Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„'\r\n              });\r\n            }\r\n          }\r\n          \r\n        } catch (error) {\r\n          console.error(`ðŸ”¥ Ø®Ø·Ø£ ÙØ§Ø¯Ø­ ÙÙŠ Ù…Ø¹Ø§Ù„Ø¬Ø© Ù„Ø¹Ø¨Ø© ${rentalItem.gameName}:`, error);\r\n          failedRentals.push({\r\n            gameName: rentalItem.gameName,\r\n            error: 'Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©'\r\n          });\r\n        }\r\n      }\r\n      \r\n      if (successfulRentals.length > 0) {\r\n        let successMessage = `âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ ${successfulRentals.length} ØªØ£Ø¬ÙŠØ± Ø¨Ù†Ø¬Ø§Ø­\\n\\n`;\r\n        successMessage += `ðŸ‘¤ Ø§Ù„Ø¹Ù…ÙŠÙ„: ${customerName}\\n`;\r\n        successMessage += `ðŸ“± Ø§Ù„Ù‡Ø§ØªÙ: ${customerPhone}\\n`;\r\n        successMessage += `ðŸŽ® Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨: ${rentalList.length}\\n`;\r\n        \r\n        if (totalFixedAmount > 0) {\r\n          successMessage += `ðŸ’° Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¯ÙÙˆØ¹: ${formatCurrency(totalFixedAmount)}\\n`;\r\n        }\r\n        \r\n        const openCount = rentalList.filter(r => r.rentalType === 'open').length;\r\n        if (openCount > 0) {\r\n          successMessage += `â³ ÙˆÙ‚Øª Ù…ÙØªÙˆØ­: ${openCount} Ù„Ø¹Ø¨Ø©\\n`;\r\n        }\r\n        \r\n        successMessage += `\\nðŸ“‹ ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª:\\n`;\r\n        successfulRentals.forEach((item, index) => {\r\n          successMessage += `${index + 1}. ${item.game} - ${item.duration > 0 ? `${item.duration} Ø¯Ù‚ÙŠÙ‚Ø©` : 'ÙˆÙ‚Øª Ù…ÙØªÙˆØ­'}\\n`;\r\n        });\r\n        \r\n        showNotification('success', successMessage);\r\n        \r\n        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø¹Ø¯ Ù†Ø¬Ø§Ø­ Ø§Ù„ØªØ£Ø¬ÙŠØ±\r\n        setTimeout(async () => {\r\n          try {\r\n            await loadActiveRentals();\r\n            await updateStatistics();\r\n            console.log('âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø¹Ø¯ Ø§Ù„ØªØ£Ø¬ÙŠØ± Ø§Ù„Ù…ØªØ¹Ø¯Ø¯');\r\n          } catch (updateError) {\r\n            console.log('âš ï¸ Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', updateError.message);\r\n          }\r\n        }, 1000);\r\n        \r\n      } else {\r\n        showNotification('error', `âŒ ÙØ´Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª (${failedRentals.length})\\n\\nØ§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰`);\r\n      }\r\n      \r\n      setShowEnhancedRentalModal(false);\r\n      resetForm();\r\n      \r\n    } catch (error) {\r\n      console.error('ðŸ”¥ðŸ”¥ðŸ”¥ Ø®Ø·Ø£ ÙØ§Ø¯Ø­ ÙÙŠ Ø¨Ø¯Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ± Ø§Ù„Ù…ØªØ¹Ø¯Ø¯:', error);\r\n      showNotification('error', 'âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹ ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…');\r\n    }\r\n  };\r\n  \r\n  const updateShiftRevenueInRealTime = async (amount, rentalNumber) => {\r\n    try {\r\n      console.log(`ðŸ’° ØªØ­Ø¯ÙŠØ« Ø¥ÙŠØ±Ø§Ø¯ Ø§Ù„Ø´ÙŠÙØª ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ: ${amount}`);\r\n      \r\n      if (!currentShift) return;\r\n      \r\n      setStatistics(prev => ({\r\n        ...prev,\r\n        shiftRevenue: (prev.shiftRevenue || 0) + amount,\r\n        todayRevenue: (prev.todayRevenue || 0) + amount\r\n      }));\r\n      \r\n      try {\r\n        const response = await api.put(`/api/shifts/${currentShift.id}/update-revenue`, {\r\n          revenue_added: amount,\r\n          rental_count: 1,\r\n          note: `Ø¥ÙŠØ±Ø§Ø¯ Ù…Ù† ØªØ£Ø¬ÙŠØ± ${rentalNumber}`\r\n        });\r\n        \r\n        if (response.success) {\r\n          console.log(`âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« Ø¥ÙŠØ±Ø§Ø¯ Ø§Ù„Ø´ÙŠÙØª Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø§Ø¯Ù…`);\r\n        }\r\n      } catch (serverError) {\r\n        console.warn('âš ï¸ Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø®Ø§Ø¯Ù…ØŒ Ø³ÙŠØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ« Ù…Ø­Ù„ÙŠØ§Ù‹ ÙÙ‚Ø·:', serverError.message);\r\n      }\r\n      \r\n      showNotification('success', `ðŸ’° ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø¥ÙŠØ±Ø§Ø¯ ${formatCurrency(amount)} Ù„Ù„Ø´ÙŠÙØª Ø§Ù„Ø­Ø§Ù„ÙŠ`);\r\n      \r\n    } catch (error) {\r\n      console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯:', error);\r\n    }\r\n  };\r\n  \r\n  const checkShiftRevenue = async () => {\r\n    try {\r\n      if (!currentShift) return;\r\n      \r\n      const response = await api.get(`/api/shifts/${currentShift.id}/revenue-check`);\r\n      \r\n      if (response.success) {\r\n        const shiftData = response.data.shift;\r\n        const currentRevenue = shiftData.total_revenue || 0;\r\n        \r\n        console.log(`ðŸ“Š Ø¥ÙŠØ±Ø§Ø¯ Ø§Ù„Ø´ÙŠÙØª Ø§Ù„Ø­Ø§Ù„ÙŠ: ${currentRevenue}`);\r\n        \r\n        setStatistics(prev => ({\r\n          ...prev,\r\n          shiftRevenue: currentRevenue\r\n        }));\r\n        \r\n        return currentRevenue;\r\n      }\r\n      \r\n    } catch (error) {\r\n      console.warn('âš ï¸ Ù„Ø§ ÙŠÙ…ÙƒÙ† ÙØ­Øµ Ø¥ÙŠØ±Ø§Ø¯ Ø§Ù„Ø´ÙŠÙØª:', error.message);\r\n    }\r\n  };\r\n  \r\n  // ==================== Ø¯ÙˆØ§Ù„ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ù…Ø­Ø³Ù†Ø© ====================\r\n  const handleChangeGameEnhanced = async (rental) => {\r\n    try {\r\n      const availableGames = games.filter(game => \r\n        game.id !== rental.game_id\r\n      );\r\n      \r\n      if (availableGames.length === 0) {\r\n        showNotification('error', 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ù„Ø¹Ø§Ø¨ Ø£Ø®Ø±Ù‰ Ù…ØªØ§Ø­Ø©');\r\n        return;\r\n      }\r\n      \r\n      setShowChangeGameModal(true);\r\n      setSelectedRentalForChange(rental);\r\n      setAvailableGamesForChange(availableGames);\r\n      \r\n    } catch (error) {\r\n      console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØºÙŠÙŠØ± Ø§Ù„Ù„Ø¹Ø¨Ø©:', error);\r\n      showNotification('error', 'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¶ÙŠØ± ØªØºÙŠÙŠØ± Ø§Ù„Ù„Ø¹Ø¨Ø©');\r\n    }\r\n  };\r\n  \r\n  const handleCancelRentalEnhanced = async (rental) => {\r\n    const startTime = new Date(rental.start_time);\r\n    const now = new Date();\r\n    const minutesPassed = Math.floor((now - startTime) / 60000);\r\n    \r\n    if (minutesPassed > 3) {\r\n      showNotification('error', 'Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ± Ø¨Ø¹Ø¯ Ù…Ø±ÙˆØ± Ø£ÙƒØ«Ø± Ù…Ù† 3 Ø¯Ù‚Ø§Ø¦Ù‚');\r\n      return;\r\n    }\r\n    \r\n    const confirmMessage = `\r\nâš ï¸ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ± Ø®Ù„Ø§Ù„ Ø£ÙˆÙ„ 3 Ø¯Ù‚Ø§Ø¦Ù‚\r\n\r\nØ§Ù„ØªØ£Ø¬ÙŠØ±: #${rental.rental_number}\r\nØ§Ù„Ø¹Ù…ÙŠÙ„: ${rental.customer_name}\r\nØ§Ù„Ù„Ø¹Ø¨Ø©: ${rental.game_name}\r\nØ§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ù†Ù‚Ø¶ÙŠ: ${minutesPassed} Ø¯Ù‚ÙŠÙ‚Ø©\r\n\r\nâœ… Ø³ÙŠØªÙ…:\r\nâ€¢ Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ù…Ø¨Ù„Øº Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ Ù„Ù„Ø¹Ù…ÙŠÙ„\r\nâ€¢ ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„ØªØ£Ø¬ÙŠØ± Ø¥Ù„Ù‰ \"Ù…Ø³ØªØ±Ø¯\"\r\n\r\nÙ‡Ù„ ØªØ±ÙŠØ¯ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©ØŸ`;\r\n\r\n    if (!window.confirm(confirmMessage)) return;\r\n    \r\n    try {\r\n      showNotification('info', 'Ø¬Ø§Ø±ÙŠ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ± ÙˆØ§Ø³ØªØ±Ø¯Ø§Ø¯ Ø§Ù„Ù…Ø¨Ù„Øº...');\r\n      \r\n      const response = await api.put(`/rentals/${rental.id}/cancel`, {\r\n        refund_amount: rental.total_amount || 0,\r\n        reason: 'Ø¥Ù„ØºØ§Ø¡ Ø®Ù„Ø§Ù„ Ø£ÙˆÙ„ 3 Ø¯Ù‚Ø§Ø¦Ù‚',\r\n        shift_id: currentShift.id // Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ø±Ù Ø§Ù„Ø´ÙŠÙØª\r\n      });\r\n\r\n      if (response.success) {\r\n        showNotification('success', 'âœ… ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ± ÙˆØ§Ø³ØªØ±Ø¯Ø§Ø¯ Ø§Ù„Ù…Ø¨Ù„Øº Ø¨Ù†Ø¬Ø§Ø­');\r\n        \r\n        setActiveRentals(prev => prev.filter(r => r.id !== rental.id));\r\n        \r\n        // Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØ£Ø¬ÙŠØ± Ø§Ù„Ù…Ù„ØºÙŠ Ø¥Ù„Ù‰ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©\r\n        const cancelledRental = {\r\n          ...rental,\r\n          status: 'Ù…Ø³ØªØ±Ø¯',\r\n          refund_amount: rental.total_amount || 0,\r\n          actual_end_time: new Date().toISOString(),\r\n          shift_id: currentShift.id\r\n        };\r\n        \r\n        setCompletedRentals(prev => [cancelledRental, ...prev]);\r\n        \r\n        // Ø­ÙØ¸ ÙÙŠ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ\r\n        storage.saveCompletedRentals(currentShift.id, [cancelledRental, ...completedRentals]);\r\n        \r\n        updateStatistics();\r\n        \r\n      } else {\r\n        showNotification('error', response.message || 'ÙØ´Ù„ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ±');\r\n      }\r\n      \r\n    } catch (error) {\r\n      console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ±:', error);\r\n      showNotification('error', 'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ±');\r\n    }\r\n  };\r\n  \r\n  const handleEndOpenTimeEnhanced = async (rental) => {\r\n    try {\r\n      if (rental.status === 'Ù…ÙƒØªÙ…Ù„') {\r\n        showNotification('info', `âœ… Ø§Ù„ØªØ£Ø¬ÙŠØ± ${rental.rental_number} Ù…ÙƒØªÙ…Ù„ Ø¨Ø§Ù„ÙØ¹Ù„!`);\r\n        return;\r\n      }\r\n      \r\n      if (rental.status !== 'Ù†Ø´Ø·') {\r\n        showNotification('error', `âš ï¸ Ø§Ù„ØªØ£Ø¬ÙŠØ± Ø¨Ø­Ø§Ù„Ø©: ${rental.status} - Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø¥Ù†Ù‡Ø§Ø¤Ù‡`);\r\n        return;\r\n      }\r\n\r\n      const startTime = new Date(rental.start_time);\r\n      const now = new Date();\r\n      const elapsedMinutes = Math.floor((now - startTime) / 60000);\r\n      \r\n      if (elapsedMinutes < 1) {\r\n        showNotification('error', 'ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ø§Ù„Ù…Ø¯Ø© Ø¯Ù‚ÙŠÙ‚Ø© ÙˆØ§Ø­Ø¯Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„');\r\n        return;\r\n      }\r\n      \r\n      const pricePer15Min = rental.price_per_15min || 100;\r\n      const units = Math.ceil(elapsedMinutes / 15);\r\n      const finalAmount = pricePer15Min * units;\r\n      \r\n      const confirmMessage = `\r\nðŸ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ±\r\n\r\nØ§Ù„ØªØ£Ø¬ÙŠØ±: #${rental.rental_number}\r\nØ§Ù„Ø¹Ù…ÙŠÙ„: ${rental.customer_name}\r\nØ§Ù„Ù„Ø¹Ø¨Ø©: ${rental.game_name}\r\n\r\nâ±ï¸ Ø§Ù„Ù…Ø¯Ø© Ø§Ù„ÙØ¹Ù„ÙŠØ©: ${elapsedMinutes} Ø¯Ù‚ÙŠÙ‚Ø©\r\nðŸ’° Ø§Ù„Ø³Ø¹Ø±/15 Ø¯Ù‚ÙŠÙ‚Ø©: ${formatCurrency(pricePer15Min)}\r\nðŸ“¦ Ø¹Ø¯Ø¯ Ø§Ù„ÙˆØ­Ø¯Ø§Øª: ${units}\r\n\r\nðŸŽ¯ Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${formatCurrency(finalAmount)}\r\n\r\nÙ‡Ù„ ØªØ±ÙŠØ¯ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©ØŸ`;\r\n\r\n    if (!window.confirm(confirmMessage)) return;\r\n    \r\n    const paymentMethod = prompt(\r\n      `Ø§Ø®ØªØ± Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹ Ù„Ù„Ù…Ø¨Ù„Øº ${formatCurrency(finalAmount)}:\\n\\n1. ÙƒØ§Ø´ ðŸ’µ\\n2. Ø¨Ø·Ø§Ù‚Ø© ðŸ’³\\n3. ÙÙˆØ¯Ø§ÙÙˆÙ† ÙƒØ§Ø´ ðŸ“±\\n\\nØ£Ø¯Ø®Ù„ Ø§Ù„Ø±Ù‚Ù…:`,\r\n      '1'\r\n    );\r\n    \r\n    let paymentMethodText = 'ÙƒØ§Ø´';\r\n    if (paymentMethod === '2') paymentMethodText = 'Ø¨Ø·Ø§Ù‚Ø©';\r\n    if (paymentMethod === '3') paymentMethodText = 'ÙÙˆØ¯Ø§ÙÙˆÙ† ÙƒØ§Ø´';\r\n    \r\n    showNotification('info', 'ðŸ”„ Ø¬Ø§Ø±ÙŠ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ±...');\r\n    \r\n    try {\r\n      const response = await api.put(`/rentals/${rental.id}/finish`, {\r\n        final_amount: finalAmount,\r\n        payment_method: paymentMethodText,\r\n        notes: `Ø¥Ù†Ù‡Ø§Ø¡ ÙŠØ¯ÙˆÙŠ - Ø§Ù„Ù…Ø¯Ø©: ${elapsedMinutes} Ø¯Ù‚ÙŠÙ‚Ø©`,\r\n        shift_id: rental.shift_id || currentShift?.id\r\n      });\r\n      \r\n      if (response.success) {\r\n        showNotification('success', `âœ… ØªÙ… Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ± Ø¨Ù†Ø¬Ø§Ø­!\\nðŸ’° Ø§Ù„Ù…Ø¨Ù„Øº: ${formatCurrency(finalAmount)}`);\r\n        \r\n        setActiveRentals(prev => prev.filter(r => r.id !== rental.id));\r\n        \r\n        // Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØ£Ø¬ÙŠØ± Ø§Ù„Ù…ÙƒØªÙ…Ù„ Ø¥Ù„Ù‰ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©\r\n        const completedRental = {\r\n          ...rental,\r\n          status: 'Ù…ÙƒØªÙ…Ù„',\r\n          actual_end_time: new Date().toISOString(),\r\n          actual_duration_minutes: elapsedMinutes,\r\n          total_amount: finalAmount,\r\n          payment_method: paymentMethodText,\r\n          payment_status: 'Ù…Ø¯ÙÙˆØ¹',\r\n          shift_id: currentShift.id\r\n        };\r\n        \r\n        setCompletedRentals(prev => [completedRental, ...prev]);\r\n        \r\n        // Ø­ÙØ¸ ÙÙŠ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ\r\n        storage.saveCompletedRentals(currentShift.id, [completedRental, ...completedRentals]);\r\n        \r\n        updateStatistics();\r\n        \r\n      } else {\r\n        showNotification('error', response.message || 'ÙØ´Ù„ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ±');\r\n      }\r\n      \r\n    } catch (error) {\r\n      console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ±:', error);\r\n      showNotification('error', 'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ±');\r\n    }\r\n    \r\n  } catch (error) {\r\n    console.error('ðŸ”¥ Ø®Ø·Ø£ ÙØ§Ø¯Ø­ ÙÙŠ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ÙØªÙˆØ­:', error);\r\n    showNotification('error', 'Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹');\r\n  }\r\n};\r\n  \r\n  const handleAutoCompleteRental = async (rental) => {\r\n    try {\r\n      console.log(`ðŸ”„ Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„ØªØ£Ø¬ÙŠØ± ${rental.rental_number} ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹`);\r\n      \r\n      setActiveRentals(prev => prev.filter(r => r.id !== rental.id));\r\n      \r\n      const completedRental = {\r\n        ...rental,\r\n        status: 'Ù…ÙƒØªÙ…Ù„',\r\n        actual_end_time: new Date().toISOString(),\r\n        actual_duration_minutes: rental.duration_minutes,\r\n        total_amount: rental.total_amount,\r\n        payment_status: 'Ù…Ø¯ÙÙˆØ¹',\r\n        formatted_start_time: formatEgyptDateTime(rental.start_time),\r\n        formatted_end_time: formatEgyptDateTime(new Date().toISOString()),\r\n        shift_id: currentShift.id\r\n      };\r\n      \r\n      setCompletedRentals(prev => [completedRental, ...prev]);\r\n      \r\n      // Ø­ÙØ¸ ÙÙŠ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ\r\n      storage.saveCompletedRentals(currentShift.id, [completedRental, ...completedRentals]);\r\n      \r\n      setStatistics(prev => ({\r\n        ...prev,\r\n        activeRentals: prev.activeRentals - 1,\r\n        todayRentals: prev.todayRentals + 1,\r\n        todayRevenue: prev.todayRevenue + (Number(rental.total_amount) || 0),\r\n        shiftRevenue: prev.shiftRevenue + (Number(rental.total_amount) || 0)\r\n      }));\r\n      \r\n      console.log(`âœ… ØªÙ… Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„ØªØ£Ø¬ÙŠØ± ${rental.rental_number} Ù…Ø­Ù„ÙŠØ§Ù‹`);\r\n      \r\n    } catch (error) {\r\n      console.error(`ðŸ”¥ Ø®Ø·Ø£ ÙÙŠ Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„ØªØ£Ø¬ÙŠØ±:`, error);\r\n    }\r\n  };\r\n  \r\n  // ==================== Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© ====================\r\n  const filteredGames = useMemo(() => {\r\n    console.log('ðŸ”„ Ø­Ø³Ø§Ø¨ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ù…ØµÙØ§Ø©...');\r\n    \r\n    if (!games || !Array.isArray(games)) return [];\r\n    \r\n    const gamesWithAvailability = games.map(game => {\r\n      return {\r\n        ...game,\r\n        rented_count: 0,\r\n        available_count: 999,\r\n        status: 'Ù…ØªØ§Ø­'\r\n      };\r\n    });\r\n    \r\n    let filtered = gamesWithAvailability.filter(game => {\r\n      if (!game) return false;\r\n      \r\n      const isActive = game.is_active === 1 || game.is_active === true;\r\n      if (!isActive) return false;\r\n      \r\n      return true;\r\n    });\r\n    \r\n    console.log(`âœ… Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ù…ØµÙØ§Ø©: ${filtered.length} Ù…Ù† ${games.length}`);\r\n    \r\n    return filtered;\r\n  }, [games]);\r\n  \r\n  const removeGame = (gameId) => {\r\n    console.log('ðŸ—‘ï¸ Ø¥Ø²Ø§Ù„Ø© Ù„Ø¹Ø¨Ø©:', gameId);\r\n    setSelectedGames(prev => prev.filter(game => game.id !== gameId));\r\n    setSelectedGameQuantities(prev => {\r\n      const newQuantities = { ...prev };\r\n      delete newQuantities[gameId];\r\n      return newQuantities;\r\n    });\r\n  };\r\n  \r\n  const updateGameQuantity = (gameId, newQuantity) => {\r\n    if (newQuantity < 1) {\r\n      removeGame(gameId);\r\n      return;\r\n    }\r\n    \r\n    setSelectedGameQuantities(prev => ({\r\n      ...prev,\r\n      [gameId]: newQuantity\r\n    }));\r\n  };\r\n  \r\n  const resetForm = () => {\r\n    console.log('ðŸ”„ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù†Ù…ÙˆØ°Ø¬');\r\n    setCustomerName('');\r\n    setCustomerPhone('');\r\n    setCustomerNotes('');\r\n    setSelectedGames([]);\r\n    setSelectedGameQuantities({});\r\n  };\r\n  \r\n  const handleQuickStartRental = () => {\r\n    console.log('âš¡ Ø¨Ø¯Ø¡ ØªØ£Ø¬ÙŠØ± Ù…ØªØ¹Ø¯Ø¯');\r\n    \r\n    if (!currentShift) {\r\n      showNotification('error', 'ÙŠØ¬Ø¨ Ø¨Ø¯Ø¡ Ø´ÙŠÙØª Ø£ÙˆÙ„Ø§Ù‹');\r\n      return;\r\n    }\r\n    \r\n    setShowEnhancedRentalModal(true);\r\n    showNotification('info', 'Ø§ÙØªØ­Øª Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ£Ø¬ÙŠØ± Ø§Ù„Ù…ØªØ¹Ø¯Ø¯. ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¯Ø§Ø±Ø© ÙƒÙ„ Ù„Ø¹Ø¨Ø© Ø¨Ø´ÙƒÙ„ Ù…Ù†ÙØµÙ„.');\r\n  };\r\n  \r\n  const handleQuickAction = (action) => {\r\n    switch(action) {\r\n      case 'startShift':\r\n        startShift();\r\n        break;\r\n      case 'quickRental':\r\n        handleQuickStartRental();\r\n        break;\r\n      case 'refreshData':\r\n        triggerRefresh();\r\n        showNotification('info', 'Ø¬Ø§Ø±ÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...');\r\n        break;\r\n      case 'refreshCompleted':\r\n        loadCompletedRentals(true);\r\n        showNotification('info', 'Ø¬Ø§Ø±ÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©...');\r\n        break;\r\n      case 'viewStats':\r\n        showNotification('info', `\r\nðŸ“Š Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©:\r\nâ€¢ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ù…ØªØ§Ø­Ø©: ${statistics.availableGames}\r\nâ€¢ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©: ${statistics.activeRentals}\r\nâ€¢ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©: ${statistics.completedCount || completedRentals.length}\r\nâ€¢ Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø§Ù„ÙŠÙˆÙ…: ${formatCurrency(statistics.todayRevenue)}\r\nâ€¢ ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„ÙŠÙˆÙ…: ${statistics.todayRentals}\r\n${isManager ? `â€¢ Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø§Ù„Ø´ÙŠÙØª: ${formatCurrency(statistics.shiftRevenue)}` : ''}\r\n        `);\r\n        break;\r\n      case 'endShift':\r\n        handleEndCurrentShift();\r\n        break;\r\n      default:\r\n        console.log('Ø¥Ø¬Ø±Ø§Ø¡ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ:', action);\r\n    }\r\n  };\r\n  \r\n  const NoShiftScreen = () => {\r\n    return (\r\n      <div className=\"no-shift-screen\">\r\n        <div className=\"no-shift-container\">\r\n          <div className=\"no-shift-icon\">ðŸŽ®</div>\r\n          <h1 className=\"no-shift-title\">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø´ÙŠÙØª Ù†Ø´Ø·</h1>\r\n          <p className=\"no-shift-description\">\r\n            ÙŠØ¬Ø¨ Ø¨Ø¯Ø¡ Ø´ÙŠÙØª Ø¬Ø¯ÙŠØ¯ Ù„Ù„ØªÙ…ÙƒÙ† Ù…Ù† Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª\r\n          </p>\r\n          \r\n          <div className=\"no-shift-actions\">\r\n            <button \r\n              className=\"start-shift-btn-primary\"\r\n              onClick={startShift}\r\n            >\r\n              ðŸš€ Ø¨Ø¯Ø¡ Ø´ÙŠÙØª Ø¬Ø¯ÙŠØ¯\r\n            </button>\r\n            \r\n            <button \r\n              className=\"refresh-system-btn\"\r\n              onClick={() => window.location.reload()}\r\n            >\r\n              ðŸ”„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†Ø¸Ø§Ù…\r\n            </button>\r\n          </div>\r\n          \r\n          <div className=\"no-shift-info\">\r\n            <p>ðŸ‘¤ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: <strong>{user?.name}</strong></p>\r\n            <p>ðŸª Ø§Ù„ÙØ±Ø¹: <strong>{user?.branch_name}</strong></p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"rentals-page-loading-container\">\r\n        <div className=\"rentals-page-spinner\"></div>\r\n        <p>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!currentShift) {\r\n    return <NoShiftScreen />;\r\n  }\r\n\r\n  // Ø¯Ø§Ù„Ø© Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© Ù„Ø¹Ø±Ø¶Ù‡Ø§ ÙÙŠ Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„\r\n  const getDisplayImage = (item) => {\r\n    return item.enhanced_image_url || getGameImageUrl(item);\r\n  };\r\n\r\n\r\n\r\n  return (\r\n    <div className=\"rentals-page-main\">\r\n      <div className=\"rentals-page-top-controls\">\r\n        <div className=\"rentals-page-header-section\">\r\n          <h1 className=\"rentals-page-title\">\r\n            <span className=\"rentals-page-title-icon\">ðŸŽ®</span>\r\n            Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª\r\n          </h1>\r\n          <div className=\"rentals-page-user-info\">\r\n            <span className=\"rentals-page-user-name\">{user?.name || 'Ù…Ø³ØªØ®Ø¯Ù…'}</span>\r\n            <span className=\"rentals-page-user-role\">\r\n              {user?.role === 'employee' ? 'ðŸ‘· Ù…ÙˆØ¸Ù' : 'ðŸ‘‘ Ù…Ø¯ÙŠØ±'}\r\n            </span>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"rentals-page-controls-row\">\r\n          <QuickActionsMenu onActionClick={handleQuickAction} />\r\n          \r\n          <div className=\"rentals-page-shift-info-display\">\r\n            <div className=\"rentals-page-shift-timer\">\r\n              <span className=\"rentals-page-timer-icon\">â±ï¸</span>\r\n              <span className=\"rentals-page-timer-text\">\r\n                Ø§Ù„Ø´ÙŠÙØª #{currentShift.id} - Ø¨Ø¯Ø£: {formatEgyptDateTime(currentShift.start_time)}\r\n              </span>\r\n              <span className=\"rentals-page-current-time\">\r\n                Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø­Ø§Ù„ÙŠ: {currentEgyptTime}\r\n              </span>\r\n            </div>\r\n            <div className=\"rentals-page-shift-actions\">\r\n              <button \r\n                className=\"rentals-page-btn-quick-rental\"\r\n                onClick={handleQuickStartRental}\r\n                title=\"Ø¨Ø¯Ø¡ ØªØ£Ø¬ÙŠØ± Ø¬Ø¯ÙŠØ¯\"\r\n              >\r\n                <span className=\"rentals-page-btn-icon\">ðŸš€</span>\r\n                <span className=\"rentals-page-btn-text\">Ø¨Ø¯Ø¡ ØªØ£Ø¬ÙŠØ±</span>\r\n              </button>\r\n              {isManager && (\r\n                <button \r\n                  className=\"rentals-page-btn-end-shift\"\r\n                  onClick={handleEndCurrentShift}\r\n                  title=\"Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø´ÙŠÙØª Ø§Ù„Ø­Ø§Ù„ÙŠ\"\r\n                >\r\n                  <span className=\"rentals-page-btn-icon\">ðŸ</span>\r\n                  <span className=\"rentals-page-btn-text\">Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø´ÙŠÙØª</span>\r\n                </button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      {isManager && todaysShifts.length > 0 && (\r\n        <div className=\"manager-todays-shifts\">\r\n          <div className=\"section-header\">\r\n            <h3>\r\n              <span className=\"section-icon\">ðŸ“…</span>\r\n              Ø´ÙŠÙØªØ§Øª Ø§Ù„ÙŠÙˆÙ…\r\n              <span className=\"badge-count\">{todaysShifts.length}</span>\r\n            </h3>\r\n            <button \r\n              className=\"refresh-btn\"\r\n              onClick={loadTodaysShifts}\r\n              title=\"ØªØ­Ø¯ÙŠØ« Ø´ÙŠÙØªØ§Øª Ø§Ù„ÙŠÙˆÙ…\"\r\n            >\r\n              ðŸ”„\r\n            </button>\r\n          </div>\r\n          \r\n          <div className=\"shifts-scroll-container\">\r\n            {todaysShifts.map(shift => (\r\n              <div key={shift.id} className=\"todays-shift-mini-card\">\r\n                <div className=\"shift-mini-header\">\r\n                  <span className=\"shift-id\">#{shift.id}</span>\r\n                  <span className={`shift-mini-status ${shift.status === 'Ù…Ù†ØªÙ‡ÙŠ' ? 'ended' : 'active'}`}>\r\n                    {shift.status === 'Ù…Ù†ØªÙ‡ÙŠ' ? 'âœ…' : 'ðŸ”¥'}\r\n                  </span>\r\n                </div>\r\n                <div className=\"shift-mini-body\">\r\n                  <div className=\"shift-mini-info\">\r\n                    <span className=\"employee\">{shift.employee_name}</span>\r\n                    <span className=\"time\">{formatEgyptDateTime(shift.start_time).split(' ')[1]}</span>\r\n                  </div>\r\n                  <div className=\"shift-mini-stats\">\r\n                    <span className=\"revenue\">{formatCurrency(shift.total_revenue || 0)}</span>\r\n                    <span className=\"rentals\">{shift.total_rentals || 0} ØªØ£Ø¬ÙŠØ±</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n      \r\n      <div className=\"rentals-page-stats-container\">\r\n        <div className=\"rentals-page-stats-header\">\r\n          <div className=\"stats-title-section\">\r\n            <h3>\r\n              <span className=\"stats-title-icon\">ðŸ“Š</span>\r\n              Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø­ÙŠØ©\r\n            </h3>\r\n          </div>\r\n          \r\n          <div className=\"stats-controls\">\r\n            <button \r\n              className=\"stats-refresh-btn\"\r\n              onClick={() => {\r\n                loadActiveRentals();\r\n                loadGames();\r\n                showNotification('info', 'Ø¬Ø§Ø±ÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...');\r\n              }}\r\n            >\r\n              ðŸ”„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª\r\n            </button>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"rentals-page-stats-grid\">\r\n          <div className=\"rentals-page-stat-card\">\r\n            <div className=\"stat-card-header\">\r\n              <div className=\"stat-icon\">ðŸ”¥</div>\r\n            </div>\r\n            <div className=\"stat-card-body\">\r\n              <div className=\"stat-main-value\">{statistics.activeRentals}</div>\r\n              <div className=\"stat-label\">ØªØ£Ø¬ÙŠØ±Ø§Øª Ù†Ø´Ø·Ø©</div>\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"rentals-page-stat-card\">\r\n            <div className=\"stat-card-header\">\r\n              <div className=\"stat-icon\">ðŸŽ®</div>\r\n            </div>\r\n            <div className=\"stat-card-body\">\r\n              <div className=\"stat-main-value\">{statistics.availableGames}</div>\r\n              <div className=\"stat-label\">Ø£Ù„Ø¹Ø§Ø¨ Ù…ØªØ§Ø­Ø©</div>\r\n              <div className=\"stat-sub-info\">\r\n                Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ù…ØªØ§Ø­Ø© Ø¯Ø§Ø¦Ù…Ø§Ù‹\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"rentals-page-stat-card revenue-highlight\">\r\n            <div className=\"stat-card-header\">\r\n              <div className=\"stat-icon\">ðŸ’°</div>\r\n              <button \r\n                className=\"refresh-revenue-btn\"\r\n                onClick={checkShiftRevenue}\r\n                title=\"ØªØ­Ø¯ÙŠØ« Ø¥ÙŠØ±Ø§Ø¯ Ø§Ù„Ø´ÙŠÙØª\"\r\n              >\r\n                ðŸ”„\r\n              </button>\r\n            </div>\r\n            <div className=\"stat-card-body\">\r\n              <div className=\"stat-main-value\">{formatCurrency(statistics.shiftRevenue)}</div>\r\n              <div className=\"stat-label\">Ø¥ÙŠØ±Ø§Ø¯ Ø§Ù„Ø´ÙŠÙØª Ø§Ù„Ø­Ø§Ù„ÙŠ</div>\r\n              <div className=\"stat-sub-info\">\r\n                {currentShift ? `Ø§Ù„Ø´ÙŠÙØª #${currentShift.id}` : 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø´ÙŠÙØª'}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"rentals-page-stat-card system-card\">\r\n            <div className=\"stat-card-header\">\r\n              <div className=\"stat-icon\">âš™ï¸</div>\r\n            </div>\r\n            <div className=\"stat-card-body\">\r\n              <div className=\"stat-main-value\">\r\n                #{currentShift.id}\r\n              </div>\r\n              <div className=\"stat-label\">Ø§Ù„Ø´ÙŠÙØª Ø§Ù„Ø­Ø§Ù„ÙŠ</div>\r\n              <div className=\"stat-sub-info\">\r\n                {formatEgyptDateTime(currentShift.start_time)}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      <div className=\"rentals-page-games-section\">\r\n        <div className=\"rentals-page-section-header\">\r\n          <h2>\r\n            <span className=\"rentals-page-header-icon\">ðŸŽ®</span>\r\n            Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ù…ØªØ§Ø­Ø©\r\n            <span className=\"rentals-page-games-count\">\r\n              ({filteredGames.length} Ù„Ø¹Ø¨Ø©)\r\n            </span>\r\n          </h2>\r\n          <div className=\"rentals-page-section-controls\">\r\n            <button \r\n              className=\"rentals-page-refresh-btn\"\r\n              onClick={loadGames}\r\n              title=\"ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨\"\r\n            >\r\n              ðŸ”„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨\r\n            </button>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"rentals-page-games-grid\">\r\n          {filteredGames.length > 0 ? (\r\n            filteredGames.map(game => (\r\n              <div \r\n                key={game.id}\r\n                className=\"rentals-page-game-card available\"\r\n                onClick={() => handleGameClick(game)}\r\n                title={`Ø¥Ø¶Ø§ÙØ© ${game.name} Ù„Ù„ØªØ£Ø¬ÙŠØ±`}\r\n              >\r\n                <div className=\"rentals-page-game-image-container\">\r\n                  <img \r\n                    src={getGameImageUrl(game)}\r\n                    alt={game.name}\r\n                    className=\"rentals-page-game-image clear-image\"\r\n                    style={{ \r\n                      objectFit: 'cover',\r\n                      objectPosition: 'center'\r\n                    }}\r\n                    onError={handleImageError}\r\n                  />\r\n                </div>\r\n                \r\n                <div className=\"rentals-page-game-info\">\r\n                  <div className=\"rentals-page-game-price-badge\">\r\n                    {formatCurrency(game.price_per_15min)}\r\n                  </div>\r\n                  \r\n                  <h3 className=\"rentals-page-game-title\">\r\n                    <span>{game.name}</span>\r\n                    {selectedGames.some(g => g.id === game.id) && (\r\n                      <span className=\"rentals-page-selected-indicator\">\r\n                        âœ¨ {selectedGameQuantities[game.id] || 1}x\r\n                      </span>\r\n                    )}\r\n                  </h3>\r\n                  \r\n                  <div className=\"rentals-page-game-actions\">\r\n                    <button \r\n                      className={`rentals-page-select-game-btn ${\r\n                        selectedGames.some(g => g.id === game.id) ? 'selected-btn' : 'available-btn'\r\n                      }`}\r\n                      onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        handleGameClick(game);\r\n                      }}\r\n                    >\r\n                      {selectedGames.some(g => g.id === game.id) \r\n                        ? `âœ… Ù…Ø®ØªØ§Ø±Ø© (${selectedGameQuantities[game.id] || 1})` \r\n                        : 'âž• Ø¥Ø¶Ø§ÙØ© Ù„Ù„ØªØ£Ø¬ÙŠØ±'}\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))\r\n          ) : (\r\n            <div className=\"rentals-page-no-games\">\r\n              <div className=\"rentals-page-empty-icon\">ðŸŽ®</div>\r\n              <h3>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ù„Ø¹Ø§Ø¨ Ù…ØªØ§Ø­Ø© Ø­Ø§Ù„ÙŠØ§Ù‹</h3>\r\n              <button \r\n                className=\"rentals-page-refresh-games-btn\"\r\n                onClick={loadGames}\r\n              >\r\n                ðŸ”„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨\r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n      \r\n      <div className=\"rentals-page-active-rentals-section\">\r\n        <div className=\"rentals-page-section-header\">\r\n          <h2>\r\n            <span className=\"rentals-page-header-icon\">ðŸ”¥</span>\r\n            Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©\r\n            <span className=\"rentals-page-active-count\">\r\n              ({activeRentals.length} ØªØ£Ø¬ÙŠØ±)\r\n            </span>\r\n          </h2>\r\n          \r\n          <div className=\"rentals-page-section-controls\">\r\n            <button \r\n              className=\"rentals-page-refresh-btn\"\r\n              onClick={loadActiveRentals}\r\n              title=\"ØªØ­Ø¯ÙŠØ¯ ÙŠØ¯ÙˆÙŠ\"\r\n            >\r\n              ðŸ”„ ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª\r\n            </button>\r\n          </div>\r\n        </div>\r\n        \r\n        {activeRentals.length === 0 ? (\r\n          <div className=\"rentals-page-empty-state\">\r\n            <div className=\"rentals-page-empty-icon\">ðŸ“­</div>\r\n            <h3>Ù„Ø§ ØªÙˆØ¬Ø¯ ØªØ£Ø¬ÙŠØ±Ø§Øª Ù†Ø´Ø·Ø© Ø­Ø§Ù„ÙŠØ§Ù‹</h3>\r\n            <div className=\"rentals-page-empty-actions\">\r\n              <button onClick={handleQuickStartRental} className=\"rentals-page-btn-quick-rental\">\r\n                ðŸš€ Ø¨Ø¯Ø¡ ØªØ£Ø¬ÙŠØ± Ø¬Ø¯ÙŠØ¯\r\n              </button>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <div className=\"rentals-page-active-rentals-table-container\">\r\n            <table className=\"rentals-page-active-rentals-table\">\r\n              <thead>\r\n                <tr>\r\n                  <th>Ø±Ù‚Ù… Ø§Ù„ØªØ£Ø¬ÙŠØ±</th>\r\n                  <th>Ø§Ù„Ø¹Ù…ÙŠÙ„</th>\r\n                  <th>Ø§Ù„Ù„Ø¹Ø¨Ø©</th>\r\n                  <th>Ø§Ù„ÙƒÙ…ÙŠØ©</th>\r\n                  <th>ÙˆÙ‚Øª Ø§Ù„Ø¨Ø¯Ø¡</th>\r\n                  <th>Ø§Ù„Ù…Ø¯Ø©</th>\r\n                  <th>Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ</th>\r\n                  <th>Ø­Ø§Ù„Ø© Ø§Ù„Ø¯ÙØ¹</th>\r\n                  <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {activeRentals.map(rental => (\r\n                  <tr key={rental.id} className={rental.is_expired ? 'expired' : ''}>\r\n                    <td>\r\n                      <span className=\"rentals-page-rental-number\">\r\n                        #{rental.rental_number}\r\n                      </span>\r\n                    </td>\r\n                    <td>\r\n                      <div className=\"rentals-page-customer-info\">\r\n                        <span className=\"rentals-page-customer-name\">{rental.customer_name}</span>\r\n                        <span className=\"rentals-page-customer-phone\">{rental.customer_phone}</span>\r\n                      </div>\r\n                    </td>\r\n                    <td>\r\n                      <div className=\"rentals-page-rental-game-info\">\r\n                        <img \r\n        src={getDisplayImage(rental)}\r\n        alt={rental.game_name}\r\n        className=\"rentals-page-rental-game-image\"\r\n        onError={handleImageError}\r\n        crossOrigin=\"anonymous\"\r\n        loading=\"lazy\"\r\n      />\r\n                        <span className=\"rentals-page-game-name-only\">{rental.game_name}</span>\r\n                      </div>\r\n                    </td>\r\n                    <td>\r\n                      <span className=\"rentals-page-quantity\">\r\n                        {rental.quantity || 1} Ù‚Ø·Ø¹Ø©\r\n                      </span>\r\n                    </td>\r\n                    <td>\r\n                      <span className=\"rentals-page-start-time\">\r\n                        {formatEgyptDateTime(rental.start_time)}\r\n                      </span>\r\n                    </td>\r\n                    <td>\r\n                      <span className=\"rentals-page-duration\">\r\n                        {formatDuration(rental.duration_minutes)}\r\n                      </span>\r\n                    </td>\r\n                    <td>\r\n                      <div className=\"rentals-page-time-left-container\">\r\n                        {rental.is_open_time ? (\r\n                          <span className=\"rentals-page-open-time-badge\">â³ ÙˆÙ‚Øª Ù…ÙØªÙˆØ­</span>\r\n                        ) : rental.duration_minutes > 0 ? (\r\n                          <>\r\n                            <span className={`rentals-page-time-left ${rental.is_expired ? 'expired' : ''}`}>\r\n                              {rental.time_left || 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­Ø³Ø§Ø¨...'}\r\n                              {rental.time_left === 'Ø§Ù†ØªÙ‡Ù‰' && (\r\n                                <span className=\"rentals-page-expired-indicator\">â°</span>\r\n                              )}\r\n                            </span>\r\n                            {rental.is_expired && (\r\n                              <button \r\n                                className=\"rentals-page-auto-complete-btn\"\r\n                                onClick={() => handleAutoCompleteRental(rental)}\r\n                                title=\"Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„ØªØ£Ø¬ÙŠØ± ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹\"\r\n                              >\r\n                                âœ… Ø¥ÙƒÙ…Ø§Ù„\r\n                              </button>\r\n                            )}\r\n                          </>\r\n                        ) : (\r\n                          <span className=\"rentals-page-open-time-badge\">â³ ÙˆÙ‚Øª Ù…ÙØªÙˆØ­</span>\r\n                        )}\r\n                      </div>\r\n                    </td>\r\n                    <td>\r\n                      <div className=\"rentals-page-payment-status\">\r\n                        {rental.payment_status === 'Ù…Ø¯ÙÙˆØ¹' ? (\r\n                          <span className=\"rentals-page-paid-badge\">\r\n                            âœ… Ù…Ø¯ÙÙˆØ¹\r\n                            {rental.duration_minutes > 0 && (\r\n                              <span className=\"rentals-page-fixed-badge\">â° Ø«Ø§Ø¨Øª</span>\r\n                            )}\r\n                          </span>\r\n                        ) : rental.payment_status === 'Ø¹Ù†Ø¯ Ø§Ù„Ø¥Ù†Ù‡Ø§Ø¡' ? (\r\n                          <span className=\"rentals-page-pending-badge\">\r\n                            â³ Ø¹Ù†Ø¯ Ø§Ù„Ø¥Ù†Ù‡Ø§Ø¡\r\n                            {rental.duration_minutes === 0 && (\r\n                              <span className=\"rentals-page-open-badge\">âˆž Ù…ÙØªÙˆØ­</span>\r\n                            )}\r\n                          </span>\r\n                        ) : (\r\n                          <span className=\"rentals-page-unpaid-badge\">âŒ ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹</span>\r\n                        )}\r\n                      </div>\r\n                    </td>\r\n                    <td>\r\n                      <div className=\"rentals-page-actions-container\">\r\n                        <button \r\n                          className=\"rentals-page-details-btn\"\r\n                          onClick={() => setSelectedRentalDetails(rental)}\r\n                          title=\"Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„\"\r\n                        >\r\n                          <span className=\"rentals-page-btn-icon\">ðŸ‘ï¸</span>\r\n                          <span className=\"rentals-page-btn-text\">Ø¹Ø±Ø¶</span>\r\n                        </button>\r\n                        \r\n                        <RentalActionsDropdown\r\n                          rental={rental}\r\n                          onActionClick={(action, rentalData) => {\r\n                            switch(action) {\r\n                              case 'changeGame':\r\n                                handleChangeGameEnhanced(rentalData);\r\n                                break;\r\n                              case 'cancel':\r\n                                handleCancelRentalEnhanced(rentalData);\r\n                                break;\r\n                              case 'endTime':\r\n                                handleEndOpenTimeEnhanced(rentalData);\r\n                                break;\r\n                              default:\r\n                                console.log('Ø¥Ø¬Ø±Ø§Ø¡ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ:', action);\r\n                            }\r\n                          }}\r\n                        />\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        )}\r\n      </div>\r\n      \r\n      {!isEmployee && (\r\n        <div className=\"rentals-page-completed-section\">\r\n          <div className=\"rentals-page-section-header\">\r\n            <h2>\r\n              <span className=\"rentals-page-header-icon\">âœ…</span>\r\n              Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©\r\n              <span className=\"rentals-page-completed-count\">\r\n                ({completedRentals.length} ØªØ£Ø¬ÙŠØ±)\r\n              </span>\r\n            </h2>\r\n          </div>\r\n          \r\n          {completedRentals.length === 0 ? (\r\n            <div className=\"rentals-page-empty-state\">\r\n              <div className=\"rentals-page-empty-icon\">ðŸ“Š</div>\r\n              <h3>Ù„Ø§ ØªÙˆØ¬Ø¯ ØªØ£Ø¬ÙŠØ±Ø§Øª Ù…ÙƒØªÙ…Ù„Ø©</h3>\r\n            </div>\r\n          ) : (\r\n            <div className=\"rentals-page-completed-table-container\">\r\n              <table className=\"rentals-page-completed-rentals-table\">\r\n                <thead>\r\n                  <tr>\r\n                    <th>Ø±Ù‚Ù… Ø§Ù„ØªØ£Ø¬ÙŠØ±</th>\r\n                    <th>Ø§Ù„Ø¹Ù…ÙŠÙ„</th>\r\n                    <th>Ø§Ù„Ù„Ø¹Ø¨Ø©</th>\r\n                    <th>ÙˆÙ‚Øª Ø§Ù„Ø¨Ø¯Ø¡</th>\r\n                    <th>ÙˆÙ‚Øª Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡</th>\r\n                    <th>Ø§Ù„Ù…Ø¯Ø©</th>\r\n                    <th>Ø§Ù„Ù…Ø¨Ù„Øº</th>\r\n                    <th>Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹</th>\r\n                    <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {completedRentals.map(rental => (\r\n                    <tr key={rental.id} className={\r\n                      rental.status === 'Ù…Ø³ØªØ±Ø¯' ? 'refunded-row' : \r\n                      rental.status === 'Ù…Ù„ØºÙŠ' ? 'cancelled-row' : \r\n                      'completed-row'\r\n                    }>\r\n                      <td>#{rental.rental_number}</td>\r\n                      <td>\r\n                        <div className=\"rentals-page-customer-info\">\r\n                          <span className=\"rentals-page-customer-name\">{rental.customer_name}</span>\r\n                          <span className=\"rentals-page-customer-phone\">{rental.customer_phone}</span>\r\n                        </div>\r\n                      </td>\r\n                      <td>\r\n                        <div className=\"rentals-page-completed-game-info\">\r\n                          <img \r\n                            src={getGameImageUrl(rental)}\r\n                            alt={rental.game_name}\r\n                            className=\"rentals-page-completed-game-image\"\r\n                            onError={handleImageError}\r\n                          />\r\n                          {rental.game_name}\r\n                        </div>\r\n                      </td>\r\n                      <td>{formatEgyptDateTime(rental.start_time)}</td>\r\n                      <td>{formatEgyptDateTime(rental.actual_end_time || rental.end_time)}</td>\r\n                      <td>{formatDuration(rental.actual_duration_minutes || rental.duration_minutes)}</td>\r\n                      <td className=\"rentals-page-amount-cell\">\r\n                        {rental.status === 'Ù…Ø³ØªØ±Ø¯' ? (\r\n                          <>\r\n                            <span className=\"rentals-page-amount-zero\">0 Ø¬.Ù…</span>\r\n                            <span className=\"rentals-page-refund-badge\">\r\n                              ðŸ’¸ Ù…Ø³ØªØ±Ø¯: {formatCurrency(rental.refund_amount || rental.total_amount || 0)}\r\n                            </span>\r\n                          </>\r\n                        ) : rental.status === 'Ù…Ù„ØºÙŠ' ? (\r\n                          <span className=\"rentals-page-amount-cancelled\">âŒ Ù…Ù„ØºÙŠ</span>\r\n                        ) : (\r\n                          <span className=\"rentals-page-amount-completed\">\r\n                            {formatCurrency(rental.total_amount || 0)}\r\n                          </span>\r\n                        )}\r\n                      </td>\r\n                      <td>{rental.payment_method || 'ÙƒØ§Ø´'}</td>\r\n                      <td>\r\n                        <span className={`rentals-page-status-badge ${\r\n                          rental.status === 'Ù…Ø³ØªØ±Ø¯' ? 'refunded' : \r\n                          rental.status === 'Ù…Ù„ØºÙŠ' ? 'cancelled' : \r\n                          'completed'\r\n                        }`}>\r\n                          {rental.status === 'Ù…Ø³ØªØ±Ø¯' ? 'ðŸ’¸ Ù…Ø³ØªØ±Ø¯' : \r\n                           rental.status === 'Ù…Ù„ØºÙŠ' ? 'âŒ Ù…Ù„ØºÙŠ' : \r\n                           'âœ… Ù…ÙƒØªÙ…Ù„'}\r\n                        </span>\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n      \r\n      {showEnhancedRentalModal && (\r\n        <EnhancedRentalListModal\r\n          show={showEnhancedRentalModal}\r\n          onClose={() => setShowEnhancedRentalModal(false)}\r\n          games={games}\r\n          selectedGames={selectedGames}\r\n          selectedGameQuantities={selectedGameQuantities}\r\n          onStartRental={handleStartEnhancedRentalMain}\r\n          currentShift={currentShift}\r\n        />\r\n      )}\r\n      \r\n      {selectedRentalDetails && (\r\n        <RentalDetailsModal\r\n          rental={selectedRentalDetails}\r\n          onClose={() => setSelectedRentalDetails(null)}\r\n        />\r\n      )}\r\n      \r\n      {showChangeGameModal && selectedRentalForChange && (\r\n        <ChangeGameModal\r\n          rental={selectedRentalForChange}\r\n          availableGames={availableGamesForChange}\r\n          onClose={() => {\r\n            setShowChangeGameModal(false);\r\n            setSelectedRentalForChange(null);\r\n          }}\r\n          onGameSelected={handleChangeGameEnhanced}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Rentals;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}