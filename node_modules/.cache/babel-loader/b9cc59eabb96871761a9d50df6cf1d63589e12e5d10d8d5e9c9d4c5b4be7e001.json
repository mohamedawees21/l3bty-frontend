{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP\\\\OneDrive\\\\project\\\\l3bty-rental-system\\\\frontend\\\\src\\\\context\\\\AuthContext.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n// src/context/AuthContext.jsx\nimport React, { createContext, useState, useEffect, useContext } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport api from '../services/api';\nimport { toast } from 'react-toastify';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext();\nexport const useAuth = () => {\n  _s();\n  return useContext(AuthContext);\n};\n_s(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport const AuthProvider = ({\n  children\n}) => {\n  _s2();\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [authChecked, setAuthChecked] = useState(false);\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  // ðŸ”¥ **ØªØ­Ø¯ÙŠØ« useEffect Ù„ÙŠØªØ§Ø¨Ø¹ ØªØºÙŠØ±Ø§Øª Ø§Ù„Ù€ token**\n  useEffect(() => {\n    checkAuth();\n\n    // Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„ØªØºÙŠØ±Ø§Øª localStorage (Ù„Ù„ØªØ²Ø§Ù…Ù† Ø¨ÙŠÙ† Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª)\n    const handleStorageChange = e => {\n      if (e.key === 'token' || e.key === 'user') {\n        checkAuth();\n      }\n    };\n    window.addEventListener('storage', handleStorageChange);\n    return () => window.removeEventListener('storage', handleStorageChange);\n  }, []);\n\n  // ðŸ”¥ **ØªØ­Ø¯ÙŠØ« checkAuth Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø£Ø¯Ø§Ø¡**\n  const checkAuth = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      const userData = localStorage.getItem('user');\n      if (!token || !userData) {\n        throw new Error('No auth data');\n      }\n\n      // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„ØªÙˆÙƒÙ† Ù…Ø¹ Ø§Ù„Ø®Ø§Ø¯Ù…\n      const response = await api.get('/auth/profile');\n      if (response.success) {\n        const parsedUser = JSON.parse(userData);\n        const updatedUser = {\n          ...parsedUser,\n          ...response.data,\n          token: token\n        };\n        setUser(updatedUser);\n        setIsAuthenticated(true);\n        localStorage.setItem('user', JSON.stringify(updatedUser));\n\n        // ðŸ”¥ **Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„ØªØ­ÙˆÙŠÙ„Ø§Øª Ø§Ù„Ø°ÙƒÙŠØ©**\n        handleSmartRedirect(updatedUser);\n      } else {\n        throw new Error('Invalid token');\n      }\n    } catch (error) {\n      console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©:', error);\n      // ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©\n      localStorage.removeItem('token');\n      localStorage.removeItem('user');\n      setUser(null);\n      setIsAuthenticated(false);\n\n      // Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† ÙÙŠ ØµÙØ­Ø© loginØŒ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªÙˆØ¬ÙŠÙ‡\n      if (location.pathname !== '/login') {\n        navigate('/login', {\n          state: {\n            from: location.pathname,\n            message: 'Ø§Ù†ØªÙ‡Øª Ø§Ù„Ø¬Ù„Ø³Ø©ØŒ ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰'\n          }\n        });\n      }\n    } finally {\n      setLoading(false);\n      setAuthChecked(true);\n    }\n  };\n\n  // ðŸ”¥ **Ø¯Ø§Ù„Ø© Ù…Ø­Ø³Ù†Ø© Ù„Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ**\n  const handleSmartRedirect = currentUser => {\n    if (!currentUser) return;\n    const currentPath = window.location.pathname;\n    const protectedRoutes = ['/admin/', '/employee/', '/dashboard', '/rentals'];\n\n    // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…ØµØ±Ø­ Ù„Ù‡ Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©\n    const isUnauthorizedAccess = () => {\n      if (currentPath.startsWith('/admin') && currentUser.role !== 'admin') {\n        return true;\n      }\n      if (currentPath.startsWith('/employee') && !['branch_manager', 'employee'].includes(currentUser.role)) {\n        return true;\n      }\n      return false;\n    };\n    if (isUnauthorizedAccess()) {\n      toast.error('ØºÙŠØ± Ù…ØµØ±Ø­ Ù„Ùƒ Ø¨Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø©');\n      navigate(getDefaultRoute(currentUser.role));\n      return;\n    }\n\n    // Ø¥Ø°Ø§ ÙƒØ§Ù† ÙÙŠ ØµÙØ­Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆÙ‡Ùˆ Ø¨Ø§Ù„ÙØ¹Ù„ Ù…Ø³Ø¬Ù„\n    if (currentPath === '/login' && isAuthenticated) {\n      navigate(getDefaultRoute(currentUser.role));\n    }\n  };\n\n  // ðŸ”¥ **Ø¯Ø§Ù„Ø© Ù„Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ Ø­Ø³Ø¨ Ø§Ù„Ø¯ÙˆØ±**\n  const getDefaultRoute = role => {\n    switch (role) {\n      case 'admin':\n        return '/admin/dashboard';\n      case 'branch_manager':\n        return '/employee/rentals';\n      case 'employee':\n        return '/employee/rentals';\n      default:\n        return '/';\n    }\n  };\n\n  // ðŸ”¥ **Ø¯Ø§Ù„Ø© login Ù…Ø­Ø³Ù†Ø©**\n  const login = async (email, password) => {\n    try {\n      setLoading(true);\n      const response = await api.post('/auth/login', {\n        email,\n        password\n      });\n      if (response.success) {\n        const userData = {\n          ...response.user,\n          token: response.token,\n          branch_id: response.user.branch_id || response.user.branchId,\n          permissions: getUserPermissions(response.user.role)\n        };\n\n        // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª\n        localStorage.setItem('user', JSON.stringify(userData));\n        localStorage.setItem('token', response.token);\n\n        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø³ÙŠØ§Ù‚\n        setUser(userData);\n        setIsAuthenticated(true);\n\n        // ðŸ”¥ **ØªØ³Ø¬ÙŠÙ„ Ù†Ø´Ø§Ø· Ø§Ù„Ø¯Ø®ÙˆÙ„**\n        await logLoginActivity(userData.id, email);\n\n        // ðŸ”¥ **Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø°ÙƒÙŠ**\n        navigate(getDefaultRoute(userData.role), {\n          replace: true,\n          state: {\n            welcome: true,\n            name: userData.name\n          }\n        });\n        return {\n          success: true,\n          user: userData\n        };\n      } else {\n        return {\n          success: false,\n          message: response.message || 'ÙØ´Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„'\n        };\n      }\n    } catch (error) {\n      var _error$response, _error$response2;\n      console.error('âŒ Login error:', error);\n      let errorMessage = 'ÙØ´Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„';\n      if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 401) {\n        errorMessage = 'Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©';\n      } else if (((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.status) === 403) {\n        errorMessage = 'Ø§Ù„Ø­Ø³Ø§Ø¨ ØºÙŠØ± Ù…ÙØ¹Ù„ Ø£Ùˆ ØºÙŠØ± Ù…ØµØ±Ø­ Ù„Ù‡';\n      } else if (!error.response) {\n        errorMessage = 'ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…';\n      }\n      return {\n        success: false,\n        message: errorMessage\n      };\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // ðŸ”¥ **Ø¯Ø§Ù„Ø© logout Ù…Ø­Ø³Ù†Ø©**\n  const logout = async (manual = true) => {\n    try {\n      const userId = user === null || user === void 0 ? void 0 : user.id;\n      const userName = user === null || user === void 0 ? void 0 : user.name;\n\n      // Ø¥Ø°Ø§ ÙƒØ§Ù† ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬ ÙŠØ¯ÙˆÙŠØŒ Ø³Ø¬Ù„ Ø§Ù„Ù†Ø´Ø§Ø·\n      if (manual && userId) {\n        await logLogoutActivity(userId, userName);\n      }\n\n      // ØªÙ†Ø¸ÙŠÙ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ\n      localStorage.removeItem('user');\n      localStorage.removeItem('token');\n\n      // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø³ÙŠØ§Ù‚\n      setUser(null);\n      setIsAuthenticated(false);\n\n      // Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø¥Ù„Ù‰ ØµÙØ­Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„\n      navigate('/login', {\n        replace: true,\n        state: {\n          loggedOut: true,\n          manual: manual\n        }\n      });\n      toast.info(manual ? 'ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ø¨Ù†Ø¬Ø§Ø­' : 'Ø§Ù†ØªÙ‡Øª Ø§Ù„Ø¬Ù„Ø³Ø©ØŒ ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰');\n    } catch (error) {\n      console.error('âŒ Logout error:', error);\n      // ÙØ±Ø¶ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬\n      localStorage.clear();\n      window.location.href = '/login';\n    }\n  };\n\n  // ðŸ”¥ **Ø¯Ø§Ù„Ø© Ù„ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…**\n  const updateUser = updates => {\n    const updatedUser = {\n      ...user,\n      ...updates\n    };\n    setUser(updatedUser);\n    localStorage.setItem('user', JSON.stringify(updatedUser));\n  };\n\n  // ðŸ”¥ **Ø¯Ø§Ù„Ø© Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…**\n  const getUserPermissions = role => {\n    const permissions = {\n      admin: ['view_dashboard', 'manage_users', 'manage_branches', 'manage_games', 'view_all_rentals', 'view_reports', 'manage_settings'],\n      branch_manager: ['view_dashboard', 'manage_games', 'manage_rentals', 'view_branch_reports', 'manage_employees'],\n      employee: ['create_rentals', 'view_rentals', 'end_rentals', 'manage_shifts']\n    };\n    return permissions[role] || [];\n  };\n\n  // ðŸ”¥ **Ø¯Ø§Ù„Ø© Ù„ØªØ³Ø¬ÙŠÙ„ Ù†Ø´Ø§Ø· Ø§Ù„Ø¯Ø®ÙˆÙ„**\n  const logLoginActivity = async (userId, email) => {\n    try {\n      await api.post('/activity/log', {\n        user_id: userId,\n        action: 'login',\n        details: `ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ù…Ù† IP: ${window.location.hostname}`,\n        metadata: {\n          browser: navigator.userAgent,\n          platform: navigator.platform,\n          timestamp: new Date().toISOString()\n        }\n      });\n    } catch (error) {\n      console.warn('âš ï¸ Failed to log login activity:', error);\n    }\n  };\n\n  // ðŸ”¥ **Ø¯Ø§Ù„Ø© Ù„ØªØ³Ø¬ÙŠÙ„ Ù†Ø´Ø§Ø· Ø§Ù„Ø®Ø±ÙˆØ¬**\n  const logLogoutActivity = async (userId, userName) => {\n    try {\n      await api.post('/activity/log', {\n        user_id: userId,\n        action: 'logout',\n        details: `ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ${userName}`,\n        metadata: {\n          timestamp: new Date().toISOString(),\n          session_duration: 'N/A'\n        }\n      });\n    } catch (error) {\n      console.warn('âš ï¸ Failed to log logout activity:', error);\n    }\n  };\n\n  // ðŸ”¥ **Ø¯Ø§Ù„Ø© Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª**\n  const hasPermission = permission => {\n    if (!user || !user.permissions) return false;\n    return user.permissions.includes(permission);\n  };\n\n  // ðŸ”¥ **Ø¯Ø§Ù„Ø© Ù„ØªØ¬Ø¯ÙŠØ¯ Ø§Ù„ØªÙˆÙƒÙ†**\n  const refreshToken = async () => {\n    try {\n      const response = await api.post('/auth/refresh');\n      if (response.success && response.token) {\n        localStorage.setItem('token', response.token);\n        return true;\n      }\n    } catch (error) {\n      console.error('âŒ Failed to refresh token:', error);\n      logout(false); // ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬ ØªÙ„Ù‚Ø§Ø¦ÙŠ\n    }\n    return false;\n  };\n  const value = {\n    user,\n    loading,\n    isAuthenticated,\n    authChecked,\n    login,\n    logout,\n    checkAuth,\n    updateUser,\n    hasPermission,\n    refreshToken,\n    getUserRole: () => user === null || user === void 0 ? void 0 : user.role,\n    getBranchId: () => user === null || user === void 0 ? void 0 : user.branch_id,\n    getUserName: () => user === null || user === void 0 ? void 0 : user.name,\n    getUserId: () => user === null || user === void 0 ? void 0 : user.id\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 345,\n    columnNumber: 5\n  }, this);\n};\n_s2(AuthProvider, \"2/sz0DmX5bJQ7X6gaUlgnPj6XHs=\", false, function () {\n  return [useNavigate, useLocation];\n});\n_c = AuthProvider;\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["React","createContext","useState","useEffect","useContext","useNavigate","useLocation","api","toast","jsxDEV","_jsxDEV","AuthContext","useAuth","_s","AuthProvider","children","_s2","user","setUser","loading","setLoading","isAuthenticated","setIsAuthenticated","authChecked","setAuthChecked","navigate","location","checkAuth","handleStorageChange","e","key","window","addEventListener","removeEventListener","token","localStorage","getItem","userData","Error","response","get","success","parsedUser","JSON","parse","updatedUser","data","setItem","stringify","handleSmartRedirect","error","console","removeItem","pathname","state","from","message","currentUser","currentPath","protectedRoutes","isUnauthorizedAccess","startsWith","role","includes","getDefaultRoute","login","email","password","post","branch_id","branchId","permissions","getUserPermissions","logLoginActivity","id","replace","welcome","name","_error$response","_error$response2","errorMessage","status","logout","manual","userId","userName","logLogoutActivity","loggedOut","info","clear","href","updateUser","updates","admin","branch_manager","employee","user_id","action","details","hostname","metadata","browser","navigator","userAgent","platform","timestamp","Date","toISOString","warn","session_duration","hasPermission","permission","refreshToken","value","getUserRole","getBranchId","getUserName","getUserId","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/HP/OneDrive/project/l3bty-rental-system/frontend/src/context/AuthContext.jsx"],"sourcesContent":["// src/context/AuthContext.jsx\r\nimport React, { createContext, useState, useEffect, useContext } from 'react';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\nimport api from '../services/api';\r\nimport { toast } from 'react-toastify';\r\n\r\nconst AuthContext = createContext();\r\n\r\nexport const useAuth = () => useContext(AuthContext);\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n  const [user, setUser] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\r\n  const [authChecked, setAuthChecked] = useState(false);\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n\r\n  // ðŸ”¥ **ØªØ­Ø¯ÙŠØ« useEffect Ù„ÙŠØªØ§Ø¨Ø¹ ØªØºÙŠØ±Ø§Øª Ø§Ù„Ù€ token**\r\n  useEffect(() => {\r\n    checkAuth();\r\n    \r\n    // Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„ØªØºÙŠØ±Ø§Øª localStorage (Ù„Ù„ØªØ²Ø§Ù…Ù† Ø¨ÙŠÙ† Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª)\r\n    const handleStorageChange = (e) => {\r\n      if (e.key === 'token' || e.key === 'user') {\r\n        checkAuth();\r\n      }\r\n    };\r\n    \r\n    window.addEventListener('storage', handleStorageChange);\r\n    return () => window.removeEventListener('storage', handleStorageChange);\r\n  }, []);\r\n\r\n  // ðŸ”¥ **ØªØ­Ø¯ÙŠØ« checkAuth Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø£Ø¯Ø§Ø¡**\r\n  const checkAuth = async () => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const userData = localStorage.getItem('user');\r\n      \r\n      if (!token || !userData) {\r\n        throw new Error('No auth data');\r\n      }\r\n      \r\n      // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„ØªÙˆÙƒÙ† Ù…Ø¹ Ø§Ù„Ø®Ø§Ø¯Ù…\r\n      const response = await api.get('/auth/profile');\r\n      \r\n      if (response.success) {\r\n        const parsedUser = JSON.parse(userData);\r\n        const updatedUser = {\r\n          ...parsedUser,\r\n          ...response.data,\r\n          token: token\r\n        };\r\n        \r\n        setUser(updatedUser);\r\n        setIsAuthenticated(true);\r\n        localStorage.setItem('user', JSON.stringify(updatedUser));\r\n        \r\n        // ðŸ”¥ **Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„ØªØ­ÙˆÙŠÙ„Ø§Øª Ø§Ù„Ø°ÙƒÙŠØ©**\r\n        handleSmartRedirect(updatedUser);\r\n      } else {\r\n        throw new Error('Invalid token');\r\n      }\r\n    } catch (error) {\r\n      console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©:', error);\r\n      // ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©\r\n      localStorage.removeItem('token');\r\n      localStorage.removeItem('user');\r\n      setUser(null);\r\n      setIsAuthenticated(false);\r\n      \r\n      // Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† ÙÙŠ ØµÙØ­Ø© loginØŒ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªÙˆØ¬ÙŠÙ‡\r\n      if (location.pathname !== '/login') {\r\n        navigate('/login', { \r\n          state: { \r\n            from: location.pathname,\r\n            message: 'Ø§Ù†ØªÙ‡Øª Ø§Ù„Ø¬Ù„Ø³Ø©ØŒ ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰'\r\n          }\r\n        });\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n      setAuthChecked(true);\r\n    }\r\n  };\r\n\r\n  // ðŸ”¥ **Ø¯Ø§Ù„Ø© Ù…Ø­Ø³Ù†Ø© Ù„Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ**\r\n  const handleSmartRedirect = (currentUser) => {\r\n    if (!currentUser) return;\r\n    \r\n    const currentPath = window.location.pathname;\r\n    const protectedRoutes = ['/admin/', '/employee/', '/dashboard', '/rentals'];\r\n    \r\n    // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…ØµØ±Ø­ Ù„Ù‡ Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©\r\n    const isUnauthorizedAccess = () => {\r\n      if (currentPath.startsWith('/admin') && currentUser.role !== 'admin') {\r\n        return true;\r\n      }\r\n      if (currentPath.startsWith('/employee') && \r\n          !['branch_manager', 'employee'].includes(currentUser.role)) {\r\n        return true;\r\n      }\r\n      return false;\r\n    };\r\n    \r\n    if (isUnauthorizedAccess()) {\r\n      toast.error('ØºÙŠØ± Ù…ØµØ±Ø­ Ù„Ùƒ Ø¨Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø©');\r\n      navigate(getDefaultRoute(currentUser.role));\r\n      return;\r\n    }\r\n    \r\n    // Ø¥Ø°Ø§ ÙƒØ§Ù† ÙÙŠ ØµÙØ­Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆÙ‡Ùˆ Ø¨Ø§Ù„ÙØ¹Ù„ Ù…Ø³Ø¬Ù„\r\n    if (currentPath === '/login' && isAuthenticated) {\r\n      navigate(getDefaultRoute(currentUser.role));\r\n    }\r\n  };\r\n\r\n  // ðŸ”¥ **Ø¯Ø§Ù„Ø© Ù„Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ Ø­Ø³Ø¨ Ø§Ù„Ø¯ÙˆØ±**\r\n  const getDefaultRoute = (role) => {\r\n    switch(role) {\r\n      case 'admin':\r\n        return '/admin/dashboard';\r\n      case 'branch_manager':\r\n        return '/employee/rentals';\r\n      case 'employee':\r\n        return '/employee/rentals';\r\n      default:\r\n        return '/';\r\n    }\r\n  };\r\n\r\n  // ðŸ”¥ **Ø¯Ø§Ù„Ø© login Ù…Ø­Ø³Ù†Ø©**\r\n  const login = async (email, password) => {\r\n    try {\r\n      setLoading(true);\r\n      \r\n      const response = await api.post('/auth/login', { email, password });\r\n      \r\n      if (response.success) {\r\n        const userData = {\r\n          ...response.user,\r\n          token: response.token,\r\n          branch_id: response.user.branch_id || response.user.branchId,\r\n          permissions: getUserPermissions(response.user.role)\r\n        };\r\n        \r\n        // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª\r\n        localStorage.setItem('user', JSON.stringify(userData));\r\n        localStorage.setItem('token', response.token);\r\n        \r\n        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø³ÙŠØ§Ù‚\r\n        setUser(userData);\r\n        setIsAuthenticated(true);\r\n        \r\n        // ðŸ”¥ **ØªØ³Ø¬ÙŠÙ„ Ù†Ø´Ø§Ø· Ø§Ù„Ø¯Ø®ÙˆÙ„**\r\n        await logLoginActivity(userData.id, email);\r\n        \r\n        // ðŸ”¥ **Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø°ÙƒÙŠ**\r\n        navigate(getDefaultRoute(userData.role), { \r\n          replace: true,\r\n          state: { \r\n            welcome: true,\r\n            name: userData.name \r\n          }\r\n        });\r\n        \r\n        return { \r\n          success: true, \r\n          user: userData \r\n        };\r\n      } else {\r\n        return { \r\n          success: false, \r\n          message: response.message || 'ÙØ´Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„' \r\n        };\r\n      }\r\n    } catch (error) {\r\n      console.error('âŒ Login error:', error);\r\n      let errorMessage = 'ÙØ´Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„';\r\n      \r\n      if (error.response?.status === 401) {\r\n        errorMessage = 'Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©';\r\n      } else if (error.response?.status === 403) {\r\n        errorMessage = 'Ø§Ù„Ø­Ø³Ø§Ø¨ ØºÙŠØ± Ù…ÙØ¹Ù„ Ø£Ùˆ ØºÙŠØ± Ù…ØµØ±Ø­ Ù„Ù‡';\r\n      } else if (!error.response) {\r\n        errorMessage = 'ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…';\r\n      }\r\n      \r\n      return { \r\n        success: false, \r\n        message: errorMessage \r\n      };\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // ðŸ”¥ **Ø¯Ø§Ù„Ø© logout Ù…Ø­Ø³Ù†Ø©**\r\n  const logout = async (manual = true) => {\r\n    try {\r\n      const userId = user?.id;\r\n      const userName = user?.name;\r\n      \r\n      // Ø¥Ø°Ø§ ÙƒØ§Ù† ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬ ÙŠØ¯ÙˆÙŠØŒ Ø³Ø¬Ù„ Ø§Ù„Ù†Ø´Ø§Ø·\r\n      if (manual && userId) {\r\n        await logLogoutActivity(userId, userName);\r\n      }\r\n      \r\n      // ØªÙ†Ø¸ÙŠÙ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ\r\n      localStorage.removeItem('user');\r\n      localStorage.removeItem('token');\r\n      \r\n      // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø³ÙŠØ§Ù‚\r\n      setUser(null);\r\n      setIsAuthenticated(false);\r\n      \r\n      // Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø¥Ù„Ù‰ ØµÙØ­Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„\r\n      navigate('/login', { \r\n        replace: true,\r\n        state: { \r\n          loggedOut: true,\r\n          manual: manual \r\n        }\r\n      });\r\n      \r\n      toast.info(manual ? 'ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ø¨Ù†Ø¬Ø§Ø­' : 'Ø§Ù†ØªÙ‡Øª Ø§Ù„Ø¬Ù„Ø³Ø©ØŒ ÙŠØ±Ø¬Ù‰ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰');\r\n    } catch (error) {\r\n      console.error('âŒ Logout error:', error);\r\n      // ÙØ±Ø¶ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬\r\n      localStorage.clear();\r\n      window.location.href = '/login';\r\n    }\r\n  };\r\n\r\n  // ðŸ”¥ **Ø¯Ø§Ù„Ø© Ù„ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…**\r\n  const updateUser = (updates) => {\r\n    const updatedUser = { ...user, ...updates };\r\n    setUser(updatedUser);\r\n    localStorage.setItem('user', JSON.stringify(updatedUser));\r\n  };\r\n\r\n  // ðŸ”¥ **Ø¯Ø§Ù„Ø© Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…**\r\n  const getUserPermissions = (role) => {\r\n    const permissions = {\r\n      admin: [\r\n        'view_dashboard',\r\n        'manage_users',\r\n        'manage_branches',\r\n        'manage_games',\r\n        'view_all_rentals',\r\n        'view_reports',\r\n        'manage_settings'\r\n      ],\r\n      branch_manager: [\r\n        'view_dashboard',\r\n        'manage_games',\r\n        'manage_rentals',\r\n        'view_branch_reports',\r\n        'manage_employees'\r\n      ],\r\n      employee: [\r\n        'create_rentals',\r\n        'view_rentals',\r\n        'end_rentals',\r\n        'manage_shifts'\r\n      ]\r\n    };\r\n    return permissions[role] || [];\r\n  };\r\n\r\n  // ðŸ”¥ **Ø¯Ø§Ù„Ø© Ù„ØªØ³Ø¬ÙŠÙ„ Ù†Ø´Ø§Ø· Ø§Ù„Ø¯Ø®ÙˆÙ„**\r\n  const logLoginActivity = async (userId, email) => {\r\n    try {\r\n      await api.post('/activity/log', {\r\n        user_id: userId,\r\n        action: 'login',\r\n        details: `ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ù…Ù† IP: ${window.location.hostname}`,\r\n        metadata: {\r\n          browser: navigator.userAgent,\r\n          platform: navigator.platform,\r\n          timestamp: new Date().toISOString()\r\n        }\r\n      });\r\n    } catch (error) {\r\n      console.warn('âš ï¸ Failed to log login activity:', error);\r\n    }\r\n  };\r\n\r\n  // ðŸ”¥ **Ø¯Ø§Ù„Ø© Ù„ØªØ³Ø¬ÙŠÙ„ Ù†Ø´Ø§Ø· Ø§Ù„Ø®Ø±ÙˆØ¬**\r\n  const logLogoutActivity = async (userId, userName) => {\r\n    try {\r\n      await api.post('/activity/log', {\r\n        user_id: userId,\r\n        action: 'logout',\r\n        details: `ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: ${userName}`,\r\n        metadata: {\r\n          timestamp: new Date().toISOString(),\r\n          session_duration: 'N/A'\r\n        }\r\n      });\r\n    } catch (error) {\r\n      console.warn('âš ï¸ Failed to log logout activity:', error);\r\n    }\r\n  };\r\n\r\n  // ðŸ”¥ **Ø¯Ø§Ù„Ø© Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª**\r\n  const hasPermission = (permission) => {\r\n    if (!user || !user.permissions) return false;\r\n    return user.permissions.includes(permission);\r\n  };\r\n\r\n  // ðŸ”¥ **Ø¯Ø§Ù„Ø© Ù„ØªØ¬Ø¯ÙŠØ¯ Ø§Ù„ØªÙˆÙƒÙ†**\r\n  const refreshToken = async () => {\r\n    try {\r\n      const response = await api.post('/auth/refresh');\r\n      if (response.success && response.token) {\r\n        localStorage.setItem('token', response.token);\r\n        return true;\r\n      }\r\n    } catch (error) {\r\n      console.error('âŒ Failed to refresh token:', error);\r\n      logout(false); // ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬ ØªÙ„Ù‚Ø§Ø¦ÙŠ\r\n    }\r\n    return false;\r\n  };\r\n\r\n  const value = {\r\n    user,\r\n    loading,\r\n    isAuthenticated,\r\n    authChecked,\r\n    login,\r\n    logout,\r\n    checkAuth,\r\n    updateUser,\r\n    hasPermission,\r\n    refreshToken,\r\n    getUserRole: () => user?.role,\r\n    getBranchId: () => user?.branch_id,\r\n    getUserName: () => user?.name,\r\n    getUserId: () => user?.id\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={value}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}