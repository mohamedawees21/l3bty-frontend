{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP\\\\OneDrive\\\\project\\\\l3bty-rental-system\\\\frontend\\\\src\\\\context\\\\RentalContext.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n// src/context/RentalContext.jsx\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport { useAuth } from './AuthContext';\nimport api from '../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst RentalContext = /*#__PURE__*/createContext();\nexport const useRental = () => {\n  _s();\n  return useContext(RentalContext);\n};\n_s(useRental, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport const RentalProvider = ({\n  children\n}) => {\n  _s2();\n  const {\n    user\n  } = useAuth();\n  const [branchGames, setBranchGames] = useState([]);\n  const [branch, setBranch] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const loadBranchGames = async () => {\n    if (!(user !== null && user !== void 0 && user.branch_id)) return;\n    try {\n      console.log(`ðŸŽ® Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„ÙØ±Ø¹ ${user.branch_id}...`);\n\n      // âš¡ **ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø³Ø§Ø±: Ø¥Ø²Ø§Ù„Ø© api Ø§Ù„Ù…ÙƒØ±Ø±**\n      const response = await api.get(`/branches/${user.branch_id}/games`);\n      // Ø£Ùˆ: await api.get(`/api/games?branch_id=${user.branch_id}`);\n\n      if (response.success) {\n        setBranchGames(response.data);\n        setError(null);\n      } else {\n        setError(response.message || 'ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„ÙØ±Ø¹');\n        setBranchGames([]);\n      }\n    } catch (error) {\n      console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„ÙØ±Ø¹:', error);\n      setError('ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…');\n      setBranchGames([]);\n    }\n  };\n  const loadBranchData = async () => {\n    if (!(user !== null && user !== void 0 && user.branch_id)) return;\n    try {\n      console.log(`ðŸ¬ Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙØ±Ø¹ ${user.branch_id}...`);\n\n      // âš¡ **ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø³Ø§Ø±: Ø¥Ø²Ø§Ù„Ø© api Ø§Ù„Ù…ÙƒØ±Ø±**\n      const response = await api.get(`/branches/${user.branch_id}`);\n      if (response.success) {\n        setBranch(response.data);\n        setError(null);\n      } else {\n        setError(response.message || 'ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙØ±Ø¹');\n        setBranch(null);\n      }\n    } catch (error) {\n      console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙØ±Ø¹:', error);\n      setError('ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…');\n      setBranch(null);\n    }\n  };\n  const refreshData = async () => {\n    if (!(user !== null && user !== void 0 && user.branch_id)) return;\n    setLoading(true);\n    try {\n      await Promise.all([loadBranchData(), loadBranchGames()]);\n    } catch (error) {\n      console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    if (user !== null && user !== void 0 && user.branch_id) {\n      refreshData();\n    }\n  }, [user === null || user === void 0 ? void 0 : user.branch_id]);\n  return /*#__PURE__*/_jsxDEV(RentalContext.Provider, {\n    value: {\n      branchGames,\n      branch,\n      loading,\n      error,\n      refreshData,\n      loadBranchGames,\n      loadBranchData\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 5\n  }, this);\n};\n_s2(RentalProvider, \"T+tcTzKJMv6MxYDZY+YdqgZmbfE=\", false, function () {\n  return [useAuth];\n});\n_c = RentalProvider;\nvar _c;\n$RefreshReg$(_c, \"RentalProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","useAuth","api","jsxDEV","_jsxDEV","RentalContext","useRental","_s","RentalProvider","children","_s2","user","branchGames","setBranchGames","branch","setBranch","loading","setLoading","error","setError","loadBranchGames","branch_id","console","log","response","get","success","data","message","loadBranchData","refreshData","Promise","all","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/HP/OneDrive/project/l3bty-rental-system/frontend/src/context/RentalContext.jsx"],"sourcesContent":["// src/context/RentalContext.jsx\r\nimport React, { createContext, useContext, useState, useEffect } from 'react';\r\nimport { useAuth } from './AuthContext';\r\nimport api from '../services/api';\r\n\r\nconst RentalContext = createContext();\r\n\r\nexport const useRental = () => useContext(RentalContext);\r\n\r\nexport const RentalProvider = ({ children }) => {\r\n  const { user } = useAuth();\r\n  const [branchGames, setBranchGames] = useState([]);\r\n  const [branch, setBranch] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  \r\n  const loadBranchGames = async () => {\r\n    if (!user?.branch_id) return;\r\n    \r\n    try {\r\n      console.log(`ðŸŽ® Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„ÙØ±Ø¹ ${user.branch_id}...`);\r\n      \r\n      // âš¡ **ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø³Ø§Ø±: Ø¥Ø²Ø§Ù„Ø© api Ø§Ù„Ù…ÙƒØ±Ø±**\r\n      const response = await api.get(`/branches/${user.branch_id}/games`);\r\n      // Ø£Ùˆ: await api.get(`/api/games?branch_id=${user.branch_id}`);\r\n      \r\n      if (response.success) {\r\n        setBranchGames(response.data);\r\n        setError(null);\r\n      } else {\r\n        setError(response.message || 'ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„ÙØ±Ø¹');\r\n        setBranchGames([]);\r\n      }\r\n    } catch (error) {\r\n      console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„ÙØ±Ø¹:', error);\r\n      setError('ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…');\r\n      setBranchGames([]);\r\n    }\r\n  };\r\n  \r\n  const loadBranchData = async () => {\r\n    if (!user?.branch_id) return;\r\n    \r\n    try {\r\n      console.log(`ðŸ¬ Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙØ±Ø¹ ${user.branch_id}...`);\r\n      \r\n      // âš¡ **ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø³Ø§Ø±: Ø¥Ø²Ø§Ù„Ø© api Ø§Ù„Ù…ÙƒØ±Ø±**\r\n      const response = await api.get(`/branches/${user.branch_id}`);\r\n      \r\n      if (response.success) {\r\n        setBranch(response.data);\r\n        setError(null);\r\n      } else {\r\n        setError(response.message || 'ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙØ±Ø¹');\r\n        setBranch(null);\r\n      }\r\n    } catch (error) {\r\n      console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙØ±Ø¹:', error);\r\n      setError('ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…');\r\n      setBranch(null);\r\n    }\r\n  };\r\n  \r\n  const refreshData = async () => {\r\n    if (!user?.branch_id) return;\r\n    \r\n    setLoading(true);\r\n    try {\r\n      await Promise.all([\r\n        loadBranchData(),\r\n        loadBranchGames()\r\n      ]);\r\n    } catch (error) {\r\n      console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n  \r\n  useEffect(() => {\r\n    if (user?.branch_id) {\r\n      refreshData();\r\n    }\r\n  }, [user?.branch_id]);\r\n  \r\n  return (\r\n    <RentalContext.Provider value={{\r\n      branchGames,\r\n      branch,\r\n      loading,\r\n      error,\r\n      refreshData,\r\n      loadBranchGames,\r\n      loadBranchData\r\n    }}>\r\n      {children}\r\n    </RentalContext.Provider>\r\n  );\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}