{"ast":null,"code":"import api from './api';\nclass ActivityService {\n  // جلب سجل الأنشطة\n  static async getActivities(filters = {}) {\n    try {\n      const params = new URLSearchParams();\n      Object.keys(filters).forEach(key => {\n        if (filters[key] && filters[key] !== 'all') {\n          params.append(key, filters[key]);\n        }\n      });\n      const response = await api.get(`/activities?${params.toString()}`);\n      return response.data;\n    } catch (error) {\n      console.error('Error fetching activities:', error);\n      throw error;\n    }\n  }\n\n  // جلب إحصائيات الأنشطة\n  static async getActivityStats() {\n    try {\n      const response = await api.get('/activities/stats');\n      return response.data;\n    } catch (error) {\n      console.error('Error fetching activity stats:', error);\n      throw error;\n    }\n  }\n\n  // تسجيل نشاط جديد\n  static async logActivity(activityData) {\n    try {\n      const response = await api.post('/activities/log', activityData);\n      return response.data;\n    } catch (error) {\n      console.error('Error logging activity:', error);\n      throw error;\n    }\n  }\n\n  // تسجيل نشاط (وظيفة مساعدة)\n  static async log(action_type, entity_type, entity_id, entity_name, description, metadata = {}) {\n    try {\n      const user = JSON.parse(localStorage.getItem('user'));\n      if (!user) return;\n      const activityData = {\n        user_id: user.id,\n        user_name: user.name,\n        user_role: user.role,\n        action_type,\n        entity_type,\n        entity_id,\n        entity_name,\n        description,\n        metadata\n      };\n\n      // لا تنتظر الرد\n      this.logActivity(activityData).catch(console.error);\n    } catch (error) {\n      console.error('Error in activity log helper:', error);\n    }\n  }\n}\nexport default ActivityService;","map":{"version":3,"names":["api","ActivityService","getActivities","filters","params","URLSearchParams","Object","keys","forEach","key","append","response","get","toString","data","error","console","getActivityStats","logActivity","activityData","post","log","action_type","entity_type","entity_id","entity_name","description","metadata","user","JSON","parse","localStorage","getItem","user_id","id","user_name","name","user_role","role","catch"],"sources":["C:/Users/HP/OneDrive/project/l3bty-rental-system/frontend/src/services/activityService.js"],"sourcesContent":["import api from './api';\r\n\r\nclass ActivityService {\r\n  // جلب سجل الأنشطة\r\n  static async getActivities(filters = {}) {\r\n    try {\r\n      const params = new URLSearchParams();\r\n      \r\n      Object.keys(filters).forEach(key => {\r\n        if (filters[key] && filters[key] !== 'all') {\r\n          params.append(key, filters[key]);\r\n        }\r\n      });\r\n      \r\n      const response = await api.get(`/activities?${params.toString()}`);\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('Error fetching activities:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  // جلب إحصائيات الأنشطة\r\n  static async getActivityStats() {\r\n    try {\r\n      const response = await api.get('/activities/stats');\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('Error fetching activity stats:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  // تسجيل نشاط جديد\r\n  static async logActivity(activityData) {\r\n    try {\r\n      const response = await api.post('/activities/log', activityData);\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('Error logging activity:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  // تسجيل نشاط (وظيفة مساعدة)\r\n  static async log(action_type, entity_type, entity_id, entity_name, description, metadata = {}) {\r\n    try {\r\n      const user = JSON.parse(localStorage.getItem('user'));\r\n      \r\n      if (!user) return;\r\n      \r\n      const activityData = {\r\n        user_id: user.id,\r\n        user_name: user.name,\r\n        user_role: user.role,\r\n        action_type,\r\n        entity_type,\r\n        entity_id,\r\n        entity_name,\r\n        description,\r\n        metadata\r\n      };\r\n      \r\n      // لا تنتظر الرد\r\n      this.logActivity(activityData).catch(console.error);\r\n    } catch (error) {\r\n      console.error('Error in activity log helper:', error);\r\n    }\r\n  }\r\n}\r\n\r\nexport default ActivityService;"],"mappings":"AAAA,OAAOA,GAAG,MAAM,OAAO;AAEvB,MAAMC,eAAe,CAAC;EACpB;EACA,aAAaC,aAAaA,CAACC,OAAO,GAAG,CAAC,CAAC,EAAE;IACvC,IAAI;MACF,MAAMC,MAAM,GAAG,IAAIC,eAAe,CAAC,CAAC;MAEpCC,MAAM,CAACC,IAAI,CAACJ,OAAO,CAAC,CAACK,OAAO,CAACC,GAAG,IAAI;QAClC,IAAIN,OAAO,CAACM,GAAG,CAAC,IAAIN,OAAO,CAACM,GAAG,CAAC,KAAK,KAAK,EAAE;UAC1CL,MAAM,CAACM,MAAM,CAACD,GAAG,EAAEN,OAAO,CAACM,GAAG,CAAC,CAAC;QAClC;MACF,CAAC,CAAC;MAEF,MAAME,QAAQ,GAAG,MAAMX,GAAG,CAACY,GAAG,CAAC,eAAeR,MAAM,CAACS,QAAQ,CAAC,CAAC,EAAE,CAAC;MAClE,OAAOF,QAAQ,CAACG,IAAI;IACtB,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,4BAA4B,EAAEA,KAAK,CAAC;MAClD,MAAMA,KAAK;IACb;EACF;;EAEA;EACA,aAAaE,gBAAgBA,CAAA,EAAG;IAC9B,IAAI;MACF,MAAMN,QAAQ,GAAG,MAAMX,GAAG,CAACY,GAAG,CAAC,mBAAmB,CAAC;MACnD,OAAOD,QAAQ,CAACG,IAAI;IACtB,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,gCAAgC,EAAEA,KAAK,CAAC;MACtD,MAAMA,KAAK;IACb;EACF;;EAEA;EACA,aAAaG,WAAWA,CAACC,YAAY,EAAE;IACrC,IAAI;MACF,MAAMR,QAAQ,GAAG,MAAMX,GAAG,CAACoB,IAAI,CAAC,iBAAiB,EAAED,YAAY,CAAC;MAChE,OAAOR,QAAQ,CAACG,IAAI;IACtB,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;MAC/C,MAAMA,KAAK;IACb;EACF;;EAEA;EACA,aAAaM,GAAGA,CAACC,WAAW,EAAEC,WAAW,EAAEC,SAAS,EAAEC,WAAW,EAAEC,WAAW,EAAEC,QAAQ,GAAG,CAAC,CAAC,EAAE;IAC7F,IAAI;MACF,MAAMC,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC;MAErD,IAAI,CAACJ,IAAI,EAAE;MAEX,MAAMT,YAAY,GAAG;QACnBc,OAAO,EAAEL,IAAI,CAACM,EAAE;QAChBC,SAAS,EAAEP,IAAI,CAACQ,IAAI;QACpBC,SAAS,EAAET,IAAI,CAACU,IAAI;QACpBhB,WAAW;QACXC,WAAW;QACXC,SAAS;QACTC,WAAW;QACXC,WAAW;QACXC;MACF,CAAC;;MAED;MACA,IAAI,CAACT,WAAW,CAACC,YAAY,CAAC,CAACoB,KAAK,CAACvB,OAAO,CAACD,KAAK,CAAC;IACrD,CAAC,CAAC,OAAOA,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,+BAA+B,EAAEA,KAAK,CAAC;IACvD;EACF;AACF;AAEA,eAAed,eAAe","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}