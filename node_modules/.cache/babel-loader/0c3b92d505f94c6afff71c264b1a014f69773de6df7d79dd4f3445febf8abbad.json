{"ast":null,"code":"// src/services/authService.js - Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©\nimport api from './api';\nconst authService = {\n  // ================= AUTHENTICATION =================\n\n  login: async (email, password) => {\n    try {\n      const response = await api.login(email, password);\n      return response.success ? {\n        success: true,\n        data: response.data,\n        message: 'ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­'\n      } : {\n        success: false,\n        message: response.message || 'ÙØ´Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„'\n      };\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…. ØªØ£ÙƒØ¯ Ù…Ù† ØªØ´ØºÙŠÙ„ Ø§Ù„Ø®Ø§Ø¯Ù… Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†ÙØ° 5000'\n      };\n    }\n  },\n  logout: () => {\n    api.logout();\n  },\n  getCurrentUser: () => {\n    try {\n      const userStr = localStorage.getItem('user');\n      return userStr ? JSON.parse(userStr) : null;\n    } catch (error) {\n      return null;\n    }\n  },\n  getToken: () => {\n    const token = localStorage.getItem('token');\n    return token ? token.trim() : null;\n  },\n  isAuthenticated: () => {\n    const token = authService.getToken();\n    const user = authService.getCurrentUser();\n    return !!(token && user);\n  },\n  // ================= PROFILE MANAGEMENT =================\n\n  updateProfile: async profileData => {\n    try {\n      const response = await api.updateProfile(profileData);\n      if (response.success && response.user) {\n        localStorage.setItem('user', JSON.stringify(response.user));\n      }\n      return response;\n    } catch (error) {\n      return {\n        success: false,\n        message: error.message || 'ØªØ¹Ø°Ø± ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ'\n      };\n    }\n  },\n  changePassword: async passwordData => {\n    try {\n      return await api.changePassword(passwordData);\n    } catch (error) {\n      return {\n        success: false,\n        message: error.message || 'ØªØ¹Ø°Ø± ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±'\n      };\n    }\n  },\n  // ================= BRANCHES MANAGEMENT =================\n\n  getBranches: async () => {\n    try {\n      return await api.get('/branches');\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙØ±ÙˆØ¹',\n        data: []\n      };\n    }\n  },\n  // ÙÙŠ authService.jsØŒ Ø¹Ø¯Ù„ Ø¯Ø§Ù„Ø© createBranch:\n  createBranch: async branchData => {\n    try {\n      console.log('ğŸ”‘ Ø§Ù„ØªÙˆÙƒÙ† Ø§Ù„Ø­Ø§Ù„ÙŠ:', authService.getToken());\n      console.log('ğŸ‘¤ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ:', authService.getCurrentUser());\n      const response = await api.post('/branches', branchData);\n      console.log('ğŸ“¥ Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ±Ø¹:', response);\n      return response;\n    } catch (error) {\n      var _error$response, _error$response2;\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ createBranch:', {\n        message: error.message,\n        response: (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data,\n        status: (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.status\n      });\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ±Ø¹: ' + (error.message || 'Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ')\n      };\n    }\n  },\n  updateBranch: async (id, branchData) => {\n    try {\n      return await api.put(`/branches/${id}`, branchData);\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙØ±Ø¹'\n      };\n    }\n  },\n  deleteBranch: async id => {\n    try {\n      return await api.delete(`/branches/${id}`);\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± Ø­Ø°Ù Ø§Ù„ÙØ±Ø¹'\n      };\n    }\n  },\n  // ================= GAMES MANAGEMENT =================\n\n  getGames: async (params = {}) => {\n    try {\n      return await api.get('/games', {\n        params\n      });\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨',\n        data: [],\n        stats: {\n          total: 0,\n          available: 0,\n          rented: 0,\n          maintenance: 0\n        }\n      };\n    }\n  },\n  createGame: async gameData => {\n    try {\n      const cleanGameData = {\n        ...gameData\n      };\n\n      // âš¡ **Ø¥Ø¶Ø§ÙØ© price_per_hour ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù…ÙˆØ¬ÙˆØ¯Ø§Ù‹**\n      if (!cleanGameData.price_per_hour && cleanGameData.price_per_15min) {\n        cleanGameData.price_per_hour = Math.ceil(cleanGameData.price_per_15min * 4);\n        console.log('ğŸ’° ØªÙ… Ø­Ø³Ø§Ø¨ price_per_hour ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹:', cleanGameData.price_per_hour);\n      }\n      if (cleanGameData.max_speed && typeof cleanGameData.max_speed !== 'number') {\n        cleanGameData.max_speed = parseInt(cleanGameData.max_speed) || 30;\n      }\n      if (!cleanGameData.min_rental_time) cleanGameData.min_rental_time = 15;\n      if (!cleanGameData.max_rental_time) cleanGameData.max_rental_time = 120;\n      console.log('ğŸ”„ Ø¥Ø±Ø³Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø·Ø§Ø¨Ù‚Ø© Ù„Ù„Ø¬Ø¯ÙˆÙ„:', cleanGameData);\n      console.log('ğŸ¯ Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„ÙƒØ§Ù…Ù„ Ø³ÙŠÙƒÙˆÙ†: /games');\n      const response = await api.createGame(cleanGameData);\n      if (response.success) {\n        console.log('âœ… Ù†Ø¬Ø§Ø­ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©:', response.data);\n        return response;\n      } else {\n        console.warn('âš ï¸ Ø§Ø³ØªØ¬Ø§Ø¨Ø© ØºÙŠØ± Ù†Ø§Ø¬Ø­Ø©:', response.message);\n        return response;\n      }\n    } catch (error) {\n      var _error$response3, _error$response4;\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ createGame:', error);\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©: ' + (error.message || 'Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'),\n        status: (_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.status,\n        data: (_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : _error$response4.data\n      };\n    }\n  },\n  updateGame: async (gameId, gameData) => {\n    try {\n      // Ø¥Ø°Ø§ ØªÙ… Ø¥Ø±Ø³Ø§Ù„ price_per_15min ÙÙ‚Ø·ØŒ Ø§Ø­Ø³Ø¨ price_per_hour\n      if (gameData.price_per_15min && !gameData.price_per_hour) {\n        gameData.price_per_hour = Math.ceil(gameData.price_per_15min * 4);\n      }\n      console.log('ğŸ”„ ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø©:', gameId, gameData);\n      const response = await api.put(`/games/${gameId}`, gameData);\n      if (response.data.success) {\n        console.log('âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù„Ø¹Ø¨Ø© Ø¨Ù†Ø¬Ø§Ø­');\n        return response.data;\n      } else {\n        console.error('âŒ ÙØ´Ù„ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù„Ø¹Ø¨Ø©:', response.data);\n        return response.data;\n      }\n    } catch (error) {\n      var _error$response5, _error$response6, _error$response6$data;\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ updateGame:', error);\n      return {\n        success: false,\n        status: ((_error$response5 = error.response) === null || _error$response5 === void 0 ? void 0 : _error$response5.status) || 500,\n        message: ((_error$response6 = error.response) === null || _error$response6 === void 0 ? void 0 : (_error$response6$data = _error$response6.data) === null || _error$response6$data === void 0 ? void 0 : _error$response6$data.message) || 'ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…',\n        error\n      };\n    }\n  },\n  deleteGame: async id => {\n    try {\n      return await api.delete(`/games/${id}`);\n    } catch (error) {\n      return {\n        success: false,\n        message: error.message || 'ØªØ¹Ø°Ø± Ø­Ø°Ù Ø§Ù„Ù„Ø¹Ø¨Ø©'\n      };\n    }\n  },\n  // ================= USERS MANAGEMENT =================\n\n  getUsers: async () => {\n    try {\n      return await api.get('/users');\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†',\n        data: []\n      };\n    }\n  },\n  createUser: async userData => {\n    try {\n      return await api.post('/users', userData);\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…'\n      };\n    }\n  },\n  updateUser: async (id, userData) => {\n    try {\n      return await api.put(`/users/${id}`, userData);\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…'\n      };\n    }\n  },\n  deleteUser: async id => {\n    try {\n      return await api.delete(`/users/${id}`);\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…'\n      };\n    }\n  },\n  // ================= DASHBOARD & ANALYTICS =================\n\n  getDashboardStats: async () => {\n    try {\n      return await api.get('/dashboard/stats');\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª',\n        data: {\n          summary: {}\n        }\n      };\n    }\n  },\n  // ================= CUSTOMERS =================\n\n  getCustomers: async (search = '') => {\n    try {\n      const params = search ? {\n        search\n      } : {};\n      return await api.get('/customers', {\n        params\n      });\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡',\n        data: []\n      };\n    }\n  },\n  createCustomer: async customerData => {\n    try {\n      return await api.post('/customers', customerData);\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¹Ù…ÙŠÙ„'\n      };\n    }\n  },\n  // ================= RENTALS =================\n\n  getRentals: async (params = {}) => {\n    try {\n      return await api.get('/rentals', {\n        params\n      });\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª',\n        data: []\n      };\n    }\n  },\n  createRental: async rentalData => {\n    try {\n      return await api.post('/rentals', rentalData);\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ±'\n      };\n    }\n  },\n  completeRental: async (id, paymentData = {}) => {\n    try {\n      return await api.put(`/rentals/${id}/complete`, paymentData);\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„ØªØ£Ø¬ÙŠØ±'\n      };\n    }\n  },\n  // ================= ACTIVITIES =================\n\n  getActivities: async (filters = {}) => {\n    try {\n      return await api.get('/activities', {\n        params: filters\n      });\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø³Ø¬Ù„ Ø§Ù„Ø£Ù†Ø´Ø·Ø©',\n        data: []\n      };\n    }\n  },\n  // ================= HEALTH CHECK =================\n\n  healthCheck: async () => {\n    try {\n      return await api.get('/health');\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…'\n      };\n    }\n  },\n  // ================= BRANCH GAMES =================\n\n  getBranchGames: async branchId => {\n    try {\n      return await api.get(`/branches/${branchId}/games`);\n    } catch (error) {\n      return {\n        success: false,\n        message: error.message || 'ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„ÙØ±Ø¹',\n        data: []\n      };\n    }\n  },\n  addGameToBranch: async (branchId, gameData) => {\n    try {\n      return await api.post(`/branches/${branchId}/games`, gameData);\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± Ø¥Ø¶Ø§ÙØ© Ù„Ø¹Ø¨Ø© Ù„Ù„ÙØ±Ø¹'\n      };\n    }\n  },\n  // ================= TESTING =================\n\n  testApiConnection: async () => {\n    try {\n      const response = await api.get('/health');\n      return {\n        success: response.success,\n        message: 'âœ… Ø§ØªØµØ§Ù„ API ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­',\n        data: response.data\n      };\n    } catch (error) {\n      return {\n        success: false,\n        message: 'âŒ ÙØ´Ù„ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…'\n      };\n    }\n  },\n  // ================= UTILITY FUNCTIONS =================\n\n  formatError: error => {\n    if (error.response) {\n      var _error$response$data;\n      return ((_error$response$data = error.response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || `Ø®Ø·Ø£ ${error.response.status}: ${error.response.statusText}`;\n    } else if (error.request) {\n      return 'ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…. ØªØ£ÙƒØ¯ Ù…Ù† ØªØ´ØºÙŠÙ„ Ø§Ù„Ø®Ø§Ø¯Ù…';\n    } else {\n      return error.message || 'Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';\n    }\n  },\n  hasRole: role => {\n    const user = authService.getCurrentUser();\n    return (user === null || user === void 0 ? void 0 : user.role) === role;\n  },\n  hasAnyRole: roles => {\n    const user = authService.getCurrentUser();\n    return roles.includes(user === null || user === void 0 ? void 0 : user.role);\n  },\n  // ================= ADVANCED ANALYTICS =================\n\n  getMonthlyStats: async (month, year) => {\n    try {\n      return await api.getMonthlyStats(month, year);\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø´Ù‡Ø±ÙŠØ©',\n        data: {}\n      };\n    }\n  },\n  getTopGames: async (params = {}) => {\n    try {\n      return await api.getTopGames(params);\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø£ÙØ¶Ù„ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨',\n        data: []\n      };\n    }\n  },\n  getBranchPerformance: async (params = {}) => {\n    try {\n      return await api.getBranchPerformance(params);\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø£Ø¯Ø§Ø¡ Ø§Ù„ÙØ±ÙˆØ¹',\n        data: []\n      };\n    }\n  },\n  getRevenueTrend: async (params = {}) => {\n    try {\n      return await api.getRevenueTrend(params);\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª',\n        data: []\n      };\n    }\n  },\n  getAdvancedReport: async (reportType, params = {}) => {\n    try {\n      return await api.getAdvancedReport(reportType, params);\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙ‚Ø±ÙŠØ±',\n        data: []\n      };\n    }\n  },\n  getSalesReport: async (params = {}) => {\n    try {\n      return await api.getSalesReport(params);\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª',\n        data: []\n      };\n    }\n  },\n  // ================= AVAILABLE & RENTED GAMES =================\n\n  getAvailableGames: async (params = {}) => {\n    try {\n      return await api.getAvailableGames(params);\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ù…ØªØ§Ø­Ø©',\n        data: []\n      };\n    }\n  },\n  getRentedGames: async (params = {}) => {\n    try {\n      return await api.getRentedGames(params);\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ù…Ø¤Ø¬Ø±Ø©',\n        data: []\n      };\n    }\n  },\n  // ================= PERMANENT DELETION =================\n\n  deleteBranchPermanent: async id => {\n    try {\n      return await api.deleteBranchPermanent(id);\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± Ø­Ø°Ù Ø§Ù„ÙØ±Ø¹ Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹'\n      };\n    }\n  },\n  deleteGamePermanent: async id => {\n    try {\n      return await api.deleteGamePermanent(id);\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± Ø­Ø°Ù Ø§Ù„Ù„Ø¹Ø¨Ø© Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹'\n      };\n    }\n  },\n  deleteUserPermanent: async id => {\n    try {\n      return await api.deleteUserPermanent(id);\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹'\n      };\n    }\n  },\n  // ================= DEBUG & TESTING =================\n\n  testToken: async () => {\n    try {\n      return await api.testToken();\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªÙˆÙƒÙ†',\n        error: error.message\n      };\n    }\n  },\n  // ================= UPDATE BRANCH GAME =================\n\n  updateBranchGame: async (branchId, gameId, updateData) => {\n    try {\n      return await api.updateBranchGame(branchId, gameId, updateData);\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± ØªØ­Ø¯ÙŠØ« Ù„Ø¹Ø¨Ø© Ø§Ù„ÙØ±Ø¹'\n      };\n    }\n  },\n  // ================= DELETE BRANCH GAME =================\n\n  deleteBranchGame: async (branchId, gameId) => {\n    try {\n      return await api.deleteBranchGame(branchId, gameId);\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± Ø¥Ø²Ø§Ù„Ø© Ù„Ø¹Ø¨Ø© Ù…Ù† Ø§Ù„ÙØ±Ø¹'\n      };\n    }\n  },\n  // ================= GET AVAILABLE GAMES FOR BRANCH =================\n\n  getAvailableGamesForBranch: async branchId => {\n    try {\n      const [allGames, branchGames] = await Promise.all([authService.getGames(), authService.getBranchGames(branchId)]);\n      if (allGames.success && branchGames.success) {\n        const addedGameIds = branchGames.data.map(g => g.game_id || g.id);\n        const availableGames = allGames.data.filter(game => !addedGameIds.includes(game.id));\n        return {\n          success: true,\n          data: availableGames\n        };\n      }\n      return {\n        success: false,\n        message: 'ÙØ´Ù„ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ù…ØªØ§Ø­Ø©'\n      };\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ÙØ´Ù„ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ù…ØªØ§Ø­Ø©'\n      };\n    }\n  },\n  // ====================== Ø§Ù„Ø¥Ø¶Ø§ÙØ§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ======================\n\n  // ğŸ® **Ø¬Ù„Ø¨ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ù…ØªØ§Ø­Ø© Ù„Ù„ÙØ±Ø¹ Ø§Ù„Ø­Ø§Ù„ÙŠ Ù„Ù„Ù…ÙˆØ¸Ù**\n  getAvailableGamesForCurrentBranch: async () => {\n    try {\n      const user = authService.getCurrentUser();\n      if (!(user !== null && user !== void 0 && user.branch_id)) {\n        return {\n          success: false,\n          message: 'Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…Ø±ØªØ¨Ø· Ø¨ÙØ±Ø¹',\n          data: []\n        };\n      }\n      const response = await api.get(`/api/branches/${user.branch_id}/games`);\n      if (response.success) {\n        // ØªØµÙÙŠØ© Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ù…ØªØ§Ø­Ø© ÙÙ‚Ø·\n        const availableGames = response.data.filter(game => game.status === 'Ù…ØªØ§Ø­' && game.available_quantity > 0);\n        return {\n          success: true,\n          data: availableGames,\n          message: `ØªÙ… ØªØ­Ù…ÙŠÙ„ ${availableGames.length} Ù„Ø¹Ø¨Ø© Ù…ØªØ§Ø­Ø©`\n        };\n      }\n      return response;\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„ÙØ±Ø¹',\n        data: []\n      };\n    }\n  },\n  // ğŸ¬ **Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙØ±Ø¹ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ**\n  getCurrentUserBranch: async () => {\n    try {\n      const user = authService.getCurrentUser();\n      if (!(user !== null && user !== void 0 && user.branch_id)) {\n        return {\n          success: false,\n          message: 'Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…Ø±ØªØ¨Ø· Ø¨ÙØ±Ø¹',\n          data: null\n        };\n      }\n      const response = await api.get(`/api/branches/${user.branch_id}`);\n      return response;\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙØ±Ø¹',\n        data: null\n      };\n    }\n  },\n  // â±ï¸ **Ø¬Ù„Ø¨ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø© Ù„Ù„ÙØ±Ø¹ Ø§Ù„Ø­Ø§Ù„ÙŠ**\n  getActiveRentalsForCurrentBranch: async () => {\n    try {\n      const user = authService.getCurrentUser();\n      if (!(user !== null && user !== void 0 && user.branch_id)) {\n        return {\n          success: false,\n          message: 'Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…Ø±ØªØ¨Ø· Ø¨ÙØ±Ø¹',\n          data: []\n        };\n      }\n      const response = await api.get('/rentals/active', {\n        params: {\n          branch_id: user.branch_id\n        }\n      });\n      return response;\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©',\n        data: []\n      };\n    }\n  },\n  // ğŸ“Š **Ø¬Ù„Ø¨ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ÙØ±Ø¹ Ø§Ù„Ø­Ø§Ù„ÙŠ**\n  getCurrentBranchStats: async () => {\n    try {\n      const user = authService.getCurrentUser();\n      if (!(user !== null && user !== void 0 && user.branch_id)) {\n        return {\n          success: false,\n          message: 'Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…Ø±ØªØ¨Ø· Ø¨ÙØ±Ø¹',\n          data: null\n        };\n      }\n      const response = await api.get('/dashboard/stats', {\n        params: {\n          branch_id: user.branch_id\n        }\n      });\n      return response;\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ÙØ±Ø¹',\n        data: null\n      };\n    }\n  },\n  // ğŸš€ **Ø¨Ø¯Ø¡ ØªØ£Ø¬ÙŠØ± Ø¬Ø¯ÙŠØ¯ ÙÙŠ Ø§Ù„ÙØ±Ø¹ Ø§Ù„Ø­Ø§Ù„ÙŠ**\n  startRentalInCurrentBranch: async rentalData => {\n    try {\n      const user = authService.getCurrentUser();\n      if (!(user !== null && user !== void 0 && user.branch_id)) {\n        return {\n          success: false,\n          message: 'Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…Ø±ØªØ¨Ø· Ø¨ÙØ±Ø¹'\n        };\n      }\n      const fullRentalData = {\n        ...rentalData,\n        branch_id: user.branch_id,\n        employee_id: user.id,\n        employee_name: user.name\n      };\n      console.log('ğŸ“¤ Ø¥Ø±Ø³Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ£Ø¬ÙŠØ±:', fullRentalData);\n      const response = await api.post('/api/rentals/new', fullRentalData);\n      return response;\n    } catch (error) {\n      var _error$response7, _error$response7$data;\n      console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¨Ø¯Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ±:', error);\n      return {\n        success: false,\n        message: ((_error$response7 = error.response) === null || _error$response7 === void 0 ? void 0 : (_error$response7$data = _error$response7.data) === null || _error$response7$data === void 0 ? void 0 : _error$response7$data.message) || 'ØªØ¹Ø°Ø± Ø¨Ø¯Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ±'\n      };\n    }\n  },\n  // âœ… **Ø¥Ù†Ù‡Ø§Ø¡ ØªØ£Ø¬ÙŠØ±**\n  endRental: async (rentalId, finalAmount = null) => {\n    try {\n      const payload = {};\n      if (finalAmount !== null) {\n        payload.final_amount = finalAmount;\n      }\n      const response = await api.put(`/api/rentals/${rentalId}/complete/new`, payload);\n      return response;\n    } catch (error) {\n      var _error$response8, _error$response8$data;\n      return {\n        success: false,\n        message: ((_error$response8 = error.response) === null || _error$response8 === void 0 ? void 0 : (_error$response8$data = _error$response8.data) === null || _error$response8$data === void 0 ? void 0 : _error$response8$data.message) || 'ØªØ¹Ø°Ø± Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ±'\n      };\n    }\n  },\n  // ğŸ” **Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø£Ù„Ø¹Ø§Ø¨ ÙÙŠ Ø§Ù„ÙØ±Ø¹ Ø§Ù„Ø­Ø§Ù„ÙŠ**\n  searchGamesInCurrentBranch: async searchTerm => {\n    try {\n      const user = authService.getCurrentUser();\n      if (!(user !== null && user !== void 0 && user.branch_id)) {\n        return {\n          success: false,\n          message: 'Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…Ø±ØªØ¨Ø· Ø¨ÙØ±Ø¹',\n          data: []\n        };\n      }\n      const response = await api.get(`/api/branches/${user.branch_id}/games/search`, {\n        params: {\n          q: searchTerm\n        }\n      });\n      return response;\n    } catch (error) {\n      // fallback: ØªØµÙÙŠØ© Ù…Ø­Ù„ÙŠØ©\n      const allGames = await authService.getAvailableGamesForCurrentBranch();\n      if (allGames.success) {\n        const filtered = allGames.data.filter(game => game.name.toLowerCase().includes(searchTerm.toLowerCase()) || game.category.toLowerCase().includes(searchTerm.toLowerCase()));\n        return {\n          success: true,\n          data: filtered,\n          message: `ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ ${filtered.length} Ù†ØªÙŠØ¬Ø©`\n        };\n      }\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨',\n        data: []\n      };\n    }\n  },\n  // ğŸ• **ØªØ­Ø¯ÙŠØ« Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ÙˆÙ‚Øª Ù„Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª**\n  updateRentalTimers: async () => {\n    try {\n      const user = authService.getCurrentUser();\n      if (!(user !== null && user !== void 0 && user.branch_id)) return;\n      const response = await api.get(`/api/rentals/${user.branch_id}/check-expired`);\n      return response;\n    } catch (error) {\n      console.warn('âš ï¸ ØªØ¹Ø°Ø± ØªØ­Ø¯ÙŠØ« Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ÙˆÙ‚Øª:', error.message);\n    }\n  },\n  // ğŸ“± **Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø±Ù‚Ù… Ù‡Ø§ØªÙ Ø¹Ù…ÙŠÙ„**\n  validateCustomerPhone: phone => {\n    const phoneRegex = /^01[0-9]{9}$/;\n    return phoneRegex.test(phone);\n  },\n  // ğŸ’° **ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø¹Ù…Ù„Ø©**\n  formatCurrency: amount => {\n    const num = parseFloat(amount) || 0;\n    return new Intl.NumberFormat('ar-EG', {\n      style: 'currency',\n      currency: 'EGP',\n      minimumFractionDigits: 0\n    }).format(num);\n  },\n  // â³ **ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ù…Ø¯Ø©**\n  formatDuration: minutes => {\n    if (!minutes || minutes === 0) return 'ÙˆÙ‚Øª Ù…ÙØªÙˆØ­';\n    if (minutes < 60) return `${minutes} Ø¯Ù‚ÙŠÙ‚Ø©`;\n    const hours = Math.floor(minutes / 60);\n    const remainingMinutes = minutes % 60;\n    return `${hours} Ø³Ø§Ø¹Ø©${remainingMinutes > 0 ? ` ${remainingMinutes} Ø¯Ù‚ÙŠÙ‚Ø©` : ''}`;\n  },\n  // â° **ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„ÙˆÙ‚Øª**\n  formatTime: dateString => {\n    try {\n      return new Date(dateString).toLocaleTimeString('ar-EG', {\n        hour: '2-digit',\n        minute: '2-digit'\n      });\n    } catch {\n      return '--:--';\n    }\n  },\n  // ğŸ“… **ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„ØªØ§Ø±ÙŠØ®**\n  formatDate: dateString => {\n    try {\n      return new Date(dateString).toLocaleDateString('ar-EG', {\n        weekday: 'short',\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric'\n      });\n    } catch {\n      return '--/--/----';\n    }\n  },\n  // ğŸ”” **Ø¹Ø±Ø¶ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª**\n  showNotification: (type, message) => {\n    const messages = {\n      error: `âŒ ${message}`,\n      success: `âœ… ${message}`,\n      warning: `âš ï¸ ${message}`,\n      info: `â„¹ï¸ ${message}`\n    };\n    alert(messages[type] || message);\n  },\n  // ğŸ¯ **Ø­Ø³Ø§Ø¨ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ Ù„Ù„ØªØ£Ø¬ÙŠØ±**\n  calculateTimeRemaining: endTime => {\n    if (!endTime) return null;\n    try {\n      const end = new Date(endTime);\n      const now = new Date();\n      const timeLeftMs = end - now;\n      if (timeLeftMs <= 0) return {\n        expired: true,\n        minutes: 0,\n        formatted: 'Ø§Ù†ØªÙ‡Ù‰'\n      };\n      const minutesLeft = Math.floor(timeLeftMs / 60000);\n      const hours = Math.floor(minutesLeft / 60);\n      const minutes = minutesLeft % 60;\n      return {\n        expired: false,\n        minutes: minutesLeft,\n        formatted: hours > 0 ? `${hours} Ø³Ø§Ø¹Ø© ${minutes} Ø¯Ù‚ÙŠÙ‚Ø©` : `${minutes} Ø¯Ù‚ÙŠÙ‚Ø©`\n      };\n    } catch (error) {\n      return null;\n    }\n  },\n  // ğŸ”„ **Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙØ±Ø¹ Ø§Ù„Ø­Ø§Ù„ÙŠ**\n  refreshCurrentBranchData: async () => {\n    try {\n      const user = authService.getCurrentUser();\n      if (!(user !== null && user !== void 0 && user.branch_id)) return null;\n      const [gamesResponse, rentalsResponse, statsResponse] = await Promise.all([authService.getAvailableGamesForCurrentBranch(), authService.getActiveRentalsForCurrentBranch(), authService.getCurrentBranchStats()]);\n      return {\n        success: true,\n        games: gamesResponse.success ? gamesResponse.data : [],\n        activeRentals: rentalsResponse.success ? rentalsResponse.data : [],\n        stats: statsResponse.success ? statsResponse.data : null,\n        message: 'ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª'\n      };\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª',\n        games: [],\n        activeRentals: [],\n        stats: null\n      };\n    }\n  },\n  // ğŸ“‹ **Ø¬Ù…Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ£Ø¬ÙŠØ± Ù„Ù†Ù…ÙˆØ°Ø¬ Ø¬Ø¯ÙŠØ¯**\n  prepareRentalFormData: () => {\n    return {\n      customer_name: '',\n      customer_phone: '',\n      customer_notes: '',\n      duration_type: 'fixed',\n      duration_minutes: 60,\n      selected_games: [],\n      quantities: {},\n      discount: 0,\n      payment_method: 'cash'\n    };\n  },\n  // âœ… **Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„ØªØ£Ø¬ÙŠØ±**\n  validateRentalForm: formData => {\n    var _formData$customer_na, _formData$customer_ph;\n    const errors = [];\n    if (!((_formData$customer_na = formData.customer_name) !== null && _formData$customer_na !== void 0 && _formData$customer_na.trim())) {\n      errors.push('Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù…Ø·Ù„ÙˆØ¨');\n    }\n    if (!((_formData$customer_ph = formData.customer_phone) !== null && _formData$customer_ph !== void 0 && _formData$customer_ph.trim())) {\n      errors.push('Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ù…Ø·Ù„ÙˆØ¨');\n    } else if (!authService.validateCustomerPhone(formData.customer_phone)) {\n      errors.push('Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ ØºÙŠØ± ØµØ­ÙŠØ­. ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ¨Ø¯Ø£ Ø¨Ù€ 01 ÙˆÙŠØªÙƒÙˆÙ† Ù…Ù† 11 Ø±Ù‚Ù…');\n    }\n    if (formData.selected_games.length === 0) {\n      errors.push('ÙŠØ¬Ø¨ Ø§Ø®ØªÙŠØ§Ø± Ù„Ø¹Ø¨Ø© ÙˆØ§Ø­Ø¯Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„');\n    }\n    if (formData.duration_type === 'fixed' && !formData.duration_minutes) {\n      errors.push('ÙŠØ¬Ø¨ ØªØ­Ø¯ÙŠØ¯ Ù…Ø¯Ø© Ø§Ù„ØªØ£Ø¬ÙŠØ±');\n    }\n    return {\n      isValid: errors.length === 0,\n      errors: errors\n    };\n  },\n  // ğŸ’µ **Ø­Ø³Ø§Ø¨ Ø³Ø¹Ø± Ø§Ù„ØªØ£Ø¬ÙŠØ±**\n  calculateRentalPrice: (game, durationMinutes, quantity = 1) => {\n    if (!game) return 0;\n    let price = 0;\n    if (durationMinutes >= 60) {\n      price = (game.price_per_hour || 0) * (durationMinutes / 60);\n    } else {\n      const quarters = Math.ceil(durationMinutes / 15);\n      price = (game.price_per_15min || 0) * quarters;\n    }\n    return price * quantity;\n  }\n};\nexport default authService;","map":{"version":3,"names":["api","authService","login","email","password","response","success","data","message","error","logout","getCurrentUser","userStr","localStorage","getItem","JSON","parse","getToken","token","trim","isAuthenticated","user","updateProfile","profileData","setItem","stringify","changePassword","passwordData","getBranches","get","createBranch","branchData","console","log","post","_error$response","_error$response2","status","updateBranch","id","put","deleteBranch","delete","getGames","params","stats","total","available","rented","maintenance","createGame","gameData","cleanGameData","price_per_hour","price_per_15min","Math","ceil","max_speed","parseInt","min_rental_time","max_rental_time","warn","_error$response3","_error$response4","updateGame","gameId","_error$response5","_error$response6","_error$response6$data","deleteGame","getUsers","createUser","userData","updateUser","deleteUser","getDashboardStats","summary","getCustomers","search","createCustomer","customerData","getRentals","createRental","rentalData","completeRental","paymentData","getActivities","filters","healthCheck","getBranchGames","branchId","addGameToBranch","testApiConnection","formatError","_error$response$data","statusText","request","hasRole","role","hasAnyRole","roles","includes","getMonthlyStats","month","year","getTopGames","getBranchPerformance","getRevenueTrend","getAdvancedReport","reportType","getSalesReport","getAvailableGames","getRentedGames","deleteBranchPermanent","deleteGamePermanent","deleteUserPermanent","testToken","updateBranchGame","updateData","deleteBranchGame","getAvailableGamesForBranch","allGames","branchGames","Promise","all","addedGameIds","map","g","game_id","availableGames","filter","game","getAvailableGamesForCurrentBranch","branch_id","available_quantity","length","getCurrentUserBranch","getActiveRentalsForCurrentBranch","getCurrentBranchStats","startRentalInCurrentBranch","fullRentalData","employee_id","employee_name","name","_error$response7","_error$response7$data","endRental","rentalId","finalAmount","payload","final_amount","_error$response8","_error$response8$data","searchGamesInCurrentBranch","searchTerm","q","filtered","toLowerCase","category","updateRentalTimers","validateCustomerPhone","phone","phoneRegex","test","formatCurrency","amount","num","parseFloat","Intl","NumberFormat","style","currency","minimumFractionDigits","format","formatDuration","minutes","hours","floor","remainingMinutes","formatTime","dateString","Date","toLocaleTimeString","hour","minute","formatDate","toLocaleDateString","weekday","day","showNotification","type","messages","warning","info","alert","calculateTimeRemaining","endTime","end","now","timeLeftMs","expired","formatted","minutesLeft","refreshCurrentBranchData","gamesResponse","rentalsResponse","statsResponse","games","activeRentals","prepareRentalFormData","customer_name","customer_phone","customer_notes","duration_type","duration_minutes","selected_games","quantities","discount","payment_method","validateRentalForm","formData","_formData$customer_na","_formData$customer_ph","errors","push","isValid","calculateRentalPrice","durationMinutes","quantity","price","quarters"],"sources":["C:/Users/HP/OneDrive/project/l3bty-rental-system/frontend/src/services/authService.js"],"sourcesContent":["                                                        // src/services/authService.js - Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©\r\n                                                        import api from './api';\r\n\r\n                                                        const authService = {\r\n                                                          // ================= AUTHENTICATION =================\r\n                                                          \r\n                                                          login: async (email, password) => {\r\n                                                            try {\r\n                                                              const response = await api.login(email, password);\r\n                                                              \r\n                                                              return response.success ? {\r\n                                                                success: true,\r\n                                                                data: response.data,\r\n                                                                message: 'ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­'\r\n                                                              } : {\r\n                                                                success: false,\r\n                                                                message: response.message || 'ÙØ´Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„'\r\n                                                              };\r\n                                                            } catch (error) {\r\n                                                              return {\r\n                                                                success: false,\r\n                                                                message: 'ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…. ØªØ£ÙƒØ¯ Ù…Ù† ØªØ´ØºÙŠÙ„ Ø§Ù„Ø®Ø§Ø¯Ù… Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†ÙØ° 5000'\r\n                                                              };\r\n                                                            }\r\n                                                          },\r\n\r\n                                                          logout: () => {\r\n                                                            api.logout();\r\n                                                          },\r\n\r\n                                                          getCurrentUser: () => {\r\n                                                            try {\r\n                                                              const userStr = localStorage.getItem('user');\r\n                                                              return userStr ? JSON.parse(userStr) : null;\r\n                                                            } catch (error) {\r\n                                                              return null;\r\n                                                            }\r\n                                                          },\r\n\r\n                                                          getToken: () => {\r\n                                                            const token = localStorage.getItem('token');\r\n                                                            return token ? token.trim() : null;\r\n                                                          },\r\n\r\n                                                          isAuthenticated: () => {\r\n                                                            const token = authService.getToken();\r\n                                                            const user = authService.getCurrentUser();\r\n                                                            return !!(token && user);\r\n                                                          },\r\n\r\n                                                          // ================= PROFILE MANAGEMENT =================\r\n                                                          \r\n                                                          updateProfile: async (profileData) => {\r\n                                                            try {\r\n                                                              const response = await api.updateProfile(profileData);\r\n                                                              \r\n                                                              if (response.success && response.user) {\r\n                                                                localStorage.setItem('user', JSON.stringify(response.user));\r\n                                                              }\r\n                                                              \r\n                                                              return response;\r\n                                                            } catch (error) {\r\n                                                              return {\r\n                                                                success: false,\r\n                                                                message: error.message || 'ØªØ¹Ø°Ø± ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ'\r\n                                                              };\r\n                                                            }\r\n                                                          },\r\n\r\n                                                          changePassword: async (passwordData) => {\r\n                                                            try {\r\n                                                              return await api.changePassword(passwordData);\r\n                                                            } catch (error) {\r\n                                                              return {\r\n                                                                success: false,\r\n                                                                message: error.message || 'ØªØ¹Ø°Ø± ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±'\r\n                                                              };\r\n                                                            }\r\n                                                          },\r\n\r\n                                                          // ================= BRANCHES MANAGEMENT =================\r\n                                                          \r\n                                                          getBranches: async () => {\r\n                                                            try {\r\n                                                              return await api.get('/branches');\r\n                                                            } catch (error) {\r\n                                                              return {\r\n                                                                success: false,\r\n                                                                message: 'ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙØ±ÙˆØ¹',\r\n                                                                data: []\r\n                                                              };\r\n                                                            }\r\n                                                          },\r\n\r\n// ÙÙŠ authService.jsØŒ Ø¹Ø¯Ù„ Ø¯Ø§Ù„Ø© createBranch:\r\ncreateBranch: async (branchData) => {\r\n  try {\r\n    console.log('ğŸ”‘ Ø§Ù„ØªÙˆÙƒÙ† Ø§Ù„Ø­Ø§Ù„ÙŠ:', authService.getToken());\r\n    console.log('ğŸ‘¤ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ:', authService.getCurrentUser());\r\n    \r\n    const response = await api.post('/branches', branchData);\r\n    console.log('ğŸ“¥ Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ±Ø¹:', response);\r\n    return response;\r\n  } catch (error) {\r\n    console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ createBranch:', {\r\n      message: error.message,\r\n      response: error.response?.data,\r\n      status: error.response?.status\r\n    });\r\n    return {\r\n      success: false,\r\n      message: 'ØªØ¹Ø°Ø± Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ±Ø¹: ' + (error.message || 'Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ')\r\n    };\r\n  }\r\n},\r\n\r\n                                                          updateBranch: async (id, branchData) => {\r\n                                                            try {\r\n                                                              return await api.put(`/branches/${id}`, branchData);\r\n                                                            } catch (error) {\r\n                                                              return {\r\n                                                                success: false,\r\n                                                                message: 'ØªØ¹Ø°Ø± ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙØ±Ø¹'\r\n                                                              };\r\n                                                            }\r\n                                                          },\r\n\r\n                                                          deleteBranch: async (id) => {\r\n                                                            try {\r\n                                                              return await api.delete(`/branches/${id}`);\r\n                                                            } catch (error) {\r\n                                                              return {\r\n                                                                success: false,\r\n                                                                message: 'ØªØ¹Ø°Ø± Ø­Ø°Ù Ø§Ù„ÙØ±Ø¹'\r\n                                                              };\r\n                                                            }\r\n                                                          },\r\n\r\n                                                          // ================= GAMES MANAGEMENT =================\r\n                                                          \r\n                                                          getGames: async (params = {}) => {\r\n                                                            try {\r\n                                                              return await api.get('/games', { params });\r\n                                                            } catch (error) {\r\n                                                              return {\r\n                                                                success: false,\r\n                                                                message: 'ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨',\r\n                                                                data: [],\r\n                                                                stats: { total: 0, available: 0, rented: 0, maintenance: 0 }\r\n                                                              };\r\n                                                            }\r\n                                                          },\r\n\r\n                                                        createGame: async (gameData) => {\r\n                                                          try {\r\n                                                            const cleanGameData = { ...gameData };\r\n                                                            \r\n                                                            // âš¡ **Ø¥Ø¶Ø§ÙØ© price_per_hour ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù…ÙˆØ¬ÙˆØ¯Ø§Ù‹**\r\n                                                            if (!cleanGameData.price_per_hour && cleanGameData.price_per_15min) {\r\n                                                              cleanGameData.price_per_hour = Math.ceil(cleanGameData.price_per_15min * 4);\r\n                                                              console.log('ğŸ’° ØªÙ… Ø­Ø³Ø§Ø¨ price_per_hour ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹:', cleanGameData.price_per_hour);\r\n                                                            }\r\n                                                            \r\n                                                            if (cleanGameData.max_speed && typeof cleanGameData.max_speed !== 'number') {\r\n                                                              cleanGameData.max_speed = parseInt(cleanGameData.max_speed) || 30;\r\n                                                            }\r\n                                                            \r\n                                                            if (!cleanGameData.min_rental_time) cleanGameData.min_rental_time = 15;\r\n                                                            if (!cleanGameData.max_rental_time) cleanGameData.max_rental_time = 120;\r\n                                                            \r\n                                                            console.log('ğŸ”„ Ø¥Ø±Ø³Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø·Ø§Ø¨Ù‚Ø© Ù„Ù„Ø¬Ø¯ÙˆÙ„:', cleanGameData);\r\n                                                            console.log('ğŸ¯ Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„ÙƒØ§Ù…Ù„ Ø³ÙŠÙƒÙˆÙ†: /games');\r\n                                                            \r\n                                                            const response = await api.createGame(cleanGameData);\r\n                                                            \r\n                                                            if (response.success) {\r\n                                                              console.log('âœ… Ù†Ø¬Ø§Ø­ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©:', response.data);\r\n                                                              return response;\r\n                                                            } else {\r\n                                                              console.warn('âš ï¸ Ø§Ø³ØªØ¬Ø§Ø¨Ø© ØºÙŠØ± Ù†Ø§Ø¬Ø­Ø©:', response.message);\r\n                                                              return response;\r\n                                                            }\r\n                                                            \r\n                                                          } catch (error) {\r\n                                                            console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ createGame:', error);\r\n                                                            \r\n                                                            return {\r\n                                                              success: false,\r\n                                                              message: 'ØªØ¹Ø°Ø± Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©: ' + (error.message || 'Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'),\r\n                                                              status: error.response?.status,\r\n                                                              data: error.response?.data\r\n                                                            };\r\n                                                          }\r\n                                                        },\r\n\r\n                                                        updateGame: async (gameId, gameData) => {\r\n                                                          try {\r\n                                                            // Ø¥Ø°Ø§ ØªÙ… Ø¥Ø±Ø³Ø§Ù„ price_per_15min ÙÙ‚Ø·ØŒ Ø§Ø­Ø³Ø¨ price_per_hour\r\n                                                            if (gameData.price_per_15min && !gameData.price_per_hour) {\r\n                                                              gameData.price_per_hour = Math.ceil(gameData.price_per_15min * 4);\r\n                                                            }\r\n                                                            \r\n                                                            console.log('ğŸ”„ ØªØ­Ø¯ÙŠØ« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø©:', gameId, gameData);\r\n                                                            \r\n                                                            const response = await api.put(`/games/${gameId}`, gameData);\r\n                                                            \r\n                                                            if (response.data.success) {\r\n                                                              console.log('âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù„Ø¹Ø¨Ø© Ø¨Ù†Ø¬Ø§Ø­');\r\n                                                              return response.data;\r\n                                                            } else {\r\n                                                              console.error('âŒ ÙØ´Ù„ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù„Ø¹Ø¨Ø©:', response.data);\r\n                                                              return response.data;\r\n                                                            }\r\n                                                          } catch (error) {\r\n                                                            console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ updateGame:', error);\r\n                                                            \r\n                                                            return {\r\n                                                              success: false,\r\n                                                              status: error.response?.status || 500,\r\n                                                              message: error.response?.data?.message || 'ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…',\r\n                                                              error\r\n                                                            };\r\n                                                          }\r\n                                                        },\r\n\r\n                                                          deleteGame: async (id) => {\r\n                                                            try {\r\n                                                              return await api.delete(`/games/${id}`);\r\n                                                            } catch (error) {\r\n                                                              return {\r\n                                                                success: false,\r\n                                                                message: error.message || 'ØªØ¹Ø°Ø± Ø­Ø°Ù Ø§Ù„Ù„Ø¹Ø¨Ø©'\r\n                                                              };\r\n                                                            }\r\n                                                          },\r\n\r\n                                                          // ================= USERS MANAGEMENT =================\r\n                                                          \r\n                                                          getUsers: async () => {\r\n                                                            try {\r\n                                                              return await api.get('/users');\r\n                                                            } catch (error) {\r\n                                                              return {\r\n                                                                success: false,\r\n                                                                message: 'ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†',\r\n                                                                data: []\r\n                                                              };\r\n                                                            }\r\n                                                          },\r\n\r\n                                                          createUser: async (userData) => {\r\n                                                            try {\r\n                                                              return await api.post('/users', userData);\r\n                                                            } catch (error) {\r\n                                                              return {\r\n                                                                success: false,\r\n                                                                message: 'ØªØ¹Ø°Ø± Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…'\r\n                                                              };\r\n                                                            }\r\n                                                          },\r\n\r\n                                                          updateUser: async (id, userData) => {\r\n                                                            try {\r\n                                                              return await api.put(`/users/${id}`, userData);\r\n                                                            } catch (error) {\r\n                                                              return {\r\n                                                                success: false,\r\n                                                                message: 'ØªØ¹Ø°Ø± ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…'\r\n                                                              };\r\n                                                            }\r\n                                                          },\r\n\r\n                                                          deleteUser: async (id) => {\r\n                                                            try {\r\n                                                              return await api.delete(`/users/${id}`);\r\n                                                            } catch (error) {\r\n                                                              return {\r\n                                                                success: false,\r\n                                                                message: 'ØªØ¹Ø°Ø± Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…'\r\n                                                              };\r\n                                                            }\r\n                                                          },\r\n\r\n                                                          // ================= DASHBOARD & ANALYTICS =================\r\n                                                          \r\n                                                          getDashboardStats: async () => {\r\n                                                            try {\r\n                                                              return await api.get('/dashboard/stats');\r\n                                                            } catch (error) {\r\n                                                              return {\r\n                                                                success: false,\r\n                                                                message: 'ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª',\r\n                                                                data: { summary: {} }\r\n                                                              };\r\n                                                            }\r\n                                                          },\r\n\r\n                                                          // ================= CUSTOMERS =================\r\n                                                          \r\n                                                          getCustomers: async (search = '') => {\r\n                                                            try {\r\n                                                              const params = search ? { search } : {};\r\n                                                              return await api.get('/customers', { params });\r\n                                                            } catch (error) {\r\n                                                              return {\r\n                                                                success: false,\r\n                                                                message: 'ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡',\r\n                                                                data: []\r\n                                                              };\r\n                                                            }\r\n                                                          },\r\n\r\n                                                          createCustomer: async (customerData) => {\r\n                                                            try {\r\n                                                              return await api.post('/customers', customerData);\r\n                                                            } catch (error) {\r\n                                                              return {\r\n                                                                success: false,\r\n                                                                message: 'ØªØ¹Ø°Ø± Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¹Ù…ÙŠÙ„'\r\n                                                              };\r\n                                                            }\r\n                                                          },\r\n\r\n                                                          // ================= RENTALS =================\r\n                                                          \r\n                                                          getRentals: async (params = {}) => {\r\n                                                            try {\r\n                                                              return await api.get('/rentals', { params });\r\n                                                            } catch (error) {\r\n                                                              return {\r\n                                                                success: false,\r\n                                                                message: 'ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª',\r\n                                                                data: []\r\n                                                              };\r\n                                                            }\r\n                                                          },\r\n\r\n                                                          createRental: async (rentalData) => {\r\n                                                            try {\r\n                                                              return await api.post('/rentals', rentalData);\r\n                                                            } catch (error) {\r\n                                                              return {\r\n                                                                success: false,\r\n                                                                message: 'ØªØ¹Ø°Ø± Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ±'\r\n                                                              };\r\n                                                            }\r\n                                                          },\r\n\r\n                                                          completeRental: async (id, paymentData = {}) => {\r\n                                                            try {\r\n                                                              return await api.put(`/rentals/${id}/complete`, paymentData);\r\n                                                            } catch (error) {\r\n                                                              return {\r\n                                                                success: false,\r\n                                                                message: 'ØªØ¹Ø°Ø± Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„ØªØ£Ø¬ÙŠØ±'\r\n                                                              };\r\n                                                            }\r\n                                                          },\r\n\r\n                                                          // ================= ACTIVITIES =================\r\n                                                          \r\n                                                          getActivities: async (filters = {}) => {\r\n                                                            try {\r\n                                                              return await api.get('/activities', { params: filters });\r\n                                                            } catch (error) {\r\n                                                              return {\r\n                                                                success: false,\r\n                                                                message: 'ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø³Ø¬Ù„ Ø§Ù„Ø£Ù†Ø´Ø·Ø©',\r\n                                                                data: []\r\n                                                              };\r\n                                                            }\r\n                                                          },\r\n\r\n                                                          // ================= HEALTH CHECK =================\r\n                                                          \r\n                                                          healthCheck: async () => {\r\n                                                            try {\r\n                                                              return await api.get('/health');\r\n                                                            } catch (error) {\r\n                                                              return {\r\n                                                                success: false,\r\n                                                                message: 'ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…'\r\n                                                              };\r\n                                                            }\r\n                                                          },\r\n\r\n                                                          // ================= BRANCH GAMES =================\r\n                                                          \r\n                                                          getBranchGames: async (branchId) => {\r\n                                                            try {\r\n                                                              return await api.get(`/branches/${branchId}/games`);\r\n                                                            } catch (error) {\r\n                                                              return {\r\n                                                                success: false,\r\n                                                                message: error.message || 'ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„ÙØ±Ø¹',\r\n                                                                data: []\r\n                                                              };\r\n                                                            }\r\n                                                          },\r\n\r\n                                                          addGameToBranch: async (branchId, gameData) => {\r\n                                                            try {\r\n                                                              return await api.post(`/branches/${branchId}/games`, gameData);\r\n                                                            } catch (error) {\r\n                                                              return {\r\n                                                                success: false,\r\n                                                                message: 'ØªØ¹Ø°Ø± Ø¥Ø¶Ø§ÙØ© Ù„Ø¹Ø¨Ø© Ù„Ù„ÙØ±Ø¹'\r\n                                                              };\r\n                                                            }\r\n                                                          },\r\n\r\n                                                          // ================= TESTING =================\r\n                                                          \r\n                                                          testApiConnection: async () => {\r\n                                                            try {\r\n                                                              const response = await api.get('/health');\r\n                                                              return {\r\n                                                                success: response.success,\r\n                                                                message: 'âœ… Ø§ØªØµØ§Ù„ API ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­',\r\n                                                                data: response.data\r\n                                                              };\r\n                                                            } catch (error) {\r\n                                                              return {\r\n                                                                success: false,\r\n                                                                message: 'âŒ ÙØ´Ù„ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…'\r\n                                                              };\r\n                                                            }\r\n                                                          },\r\n\r\n                                                          // ================= UTILITY FUNCTIONS =================\r\n                                                          \r\n                                                          formatError: (error) => {\r\n                                                            if (error.response) {\r\n                                                              return error.response.data?.message || `Ø®Ø·Ø£ ${error.response.status}: ${error.response.statusText}`;\r\n                                                            } else if (error.request) {\r\n                                                              return 'ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…. ØªØ£ÙƒØ¯ Ù…Ù† ØªØ´ØºÙŠÙ„ Ø§Ù„Ø®Ø§Ø¯Ù…';\r\n                                                            } else {\r\n                                                              return error.message || 'Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';\r\n                                                            }\r\n                                                          },\r\n\r\n                                                          hasRole: (role) => {\r\n                                                            const user = authService.getCurrentUser();\r\n                                                            return user?.role === role;\r\n                                                          },\r\n\r\n                                                          hasAnyRole: (roles) => {\r\n                                                            const user = authService.getCurrentUser();\r\n                                                            return roles.includes(user?.role);\r\n                                                          },\r\n\r\n                                                          // ================= ADVANCED ANALYTICS =================\r\n                                                          \r\n                                                          getMonthlyStats: async (month, year) => {\r\n                                                            try {\r\n                                                              return await api.getMonthlyStats(month, year);\r\n                                                            } catch (error) {\r\n                                                              return {\r\n                                                                success: false,\r\n                                                                message: 'ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø´Ù‡Ø±ÙŠØ©',\r\n                                                                data: {}\r\n                                                              };\r\n                                                            }\r\n                                                          },\r\n\r\n                                                          getTopGames: async (params = {}) => {\r\n                                                            try {\r\n                                                              return await api.getTopGames(params);\r\n                                                            } catch (error) {\r\n                                                              return {\r\n                                                                success: false,\r\n                                                                message: 'ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø£ÙØ¶Ù„ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨',\r\n                                                                data: []\r\n                                                              };\r\n                                                            }\r\n                                                          },\r\n\r\n                                                          getBranchPerformance: async (params = {}) => {\r\n                                                            try {\r\n                                                              return await api.getBranchPerformance(params);\r\n                                                            } catch (error) {\r\n                                                              return {\r\n                                                                success: false,\r\n                                                                message: 'ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø£Ø¯Ø§Ø¡ Ø§Ù„ÙØ±ÙˆØ¹',\r\n                                                                data: []\r\n                                                              };\r\n                                                            }\r\n                                                          },\r\n\r\n                                                          getRevenueTrend: async (params = {}) => {\r\n                                                            try {\r\n                                                              return await api.getRevenueTrend(params);\r\n                                                            } catch (error) {\r\n                                                              return {\r\n                                                                success: false,\r\n                                                                message: 'ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª',\r\n                                                                data: []\r\n                                                              };\r\n                                                            }\r\n                                                          },\r\n\r\n                                                          getAdvancedReport: async (reportType, params = {}) => {\r\n                                                            try {\r\n                                                              return await api.getAdvancedReport(reportType, params);\r\n                                                            } catch (error) {\r\n                                                              return {\r\n                                                                success: false,\r\n                                                                message: 'ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙ‚Ø±ÙŠØ±',\r\n                                                                data: []\r\n                                                              };\r\n                                                            }\r\n                                                          },\r\n\r\n                                                          getSalesReport: async (params = {}) => {\r\n                                                            try {\r\n                                                              return await api.getSalesReport(params);\r\n                                                            } catch (error) {\r\n                                                              return {\r\n                                                                success: false,\r\n                                                                message: 'ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª',\r\n                                                                data: []\r\n                                                              };\r\n                                                            }\r\n                                                          },\r\n\r\n                                                          // ================= AVAILABLE & RENTED GAMES =================\r\n                                                          \r\n                                                          getAvailableGames: async (params = {}) => {\r\n                                                            try {\r\n                                                              return await api.getAvailableGames(params);\r\n                                                            } catch (error) {\r\n                                                              return {\r\n                                                                success: false,\r\n                                                                message: 'ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ù…ØªØ§Ø­Ø©',\r\n                                                                data: []\r\n                                                              };\r\n                                                            }\r\n                                                          },\r\n\r\n                                                          getRentedGames: async (params = {}) => {\r\n                                                            try {\r\n                                                              return await api.getRentedGames(params);\r\n                                                            } catch (error) {\r\n                                                              return {\r\n                                                                success: false,\r\n                                                                message: 'ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ù…Ø¤Ø¬Ø±Ø©',\r\n                                                                data: []\r\n                                                              };\r\n                                                            }\r\n                                                          },\r\n\r\n                                                          // ================= PERMANENT DELETION =================\r\n                                                          \r\n                                                          deleteBranchPermanent: async (id) => {\r\n                                                            try {\r\n                                                              return await api.deleteBranchPermanent(id);\r\n                                                            } catch (error) {\r\n                                                              return {\r\n                                                                success: false,\r\n                                                                message: 'ØªØ¹Ø°Ø± Ø­Ø°Ù Ø§Ù„ÙØ±Ø¹ Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹'\r\n                                                              };\r\n                                                            }\r\n                                                          },\r\n\r\n                                                          deleteGamePermanent: async (id) => {\r\n                                                            try {\r\n                                                              return await api.deleteGamePermanent(id);\r\n                                                            } catch (error) {\r\n                                                              return {\r\n                                                                success: false,\r\n                                                                message: 'ØªØ¹Ø°Ø± Ø­Ø°Ù Ø§Ù„Ù„Ø¹Ø¨Ø© Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹'\r\n                                                              };\r\n                                                            }\r\n                                                          },\r\n\r\n                                                          deleteUserPermanent: async (id) => {\r\n                                                            try {\r\n                                                              return await api.deleteUserPermanent(id);\r\n                                                            } catch (error) {\r\n                                                              return {\r\n                                                                success: false,\r\n                                                                message: 'ØªØ¹Ø°Ø± Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹'\r\n                                                              };\r\n                                                            }\r\n                                                          },\r\n\r\n                                                          // ================= DEBUG & TESTING =================\r\n                                                          \r\n                                                          testToken: async () => {\r\n                                                            try {\r\n                                                              return await api.testToken();\r\n                                                            } catch (error) {\r\n                                                              return {\r\n                                                                success: false,\r\n                                                                message: 'ØªØ¹Ø°Ø± Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªÙˆÙƒÙ†',\r\n                                                                error: error.message\r\n                                                              };\r\n                                                            }\r\n                                                          },\r\n\r\n                                                          // ================= UPDATE BRANCH GAME =================\r\n                                                          \r\n                                                          updateBranchGame: async (branchId, gameId, updateData) => {\r\n                                                            try {\r\n                                                              return await api.updateBranchGame(branchId, gameId, updateData);\r\n                                                            } catch (error) {\r\n                                                              return {\r\n                                                                success: false,\r\n                                                                message: 'ØªØ¹Ø°Ø± ØªØ­Ø¯ÙŠØ« Ù„Ø¹Ø¨Ø© Ø§Ù„ÙØ±Ø¹'\r\n                                                              };\r\n                                                            }\r\n                                                          },\r\n\r\n                                                          // ================= DELETE BRANCH GAME =================\r\n                                                          \r\n                                                          deleteBranchGame: async (branchId, gameId) => {\r\n                                                            try {\r\n                                                              return await api.deleteBranchGame(branchId, gameId);\r\n                                                            } catch (error) {\r\n                                                              return {\r\n                                                                success: false,\r\n                                                                message: 'ØªØ¹Ø°Ø± Ø¥Ø²Ø§Ù„Ø© Ù„Ø¹Ø¨Ø© Ù…Ù† Ø§Ù„ÙØ±Ø¹'\r\n                                                              };\r\n                                                            }\r\n                                                          },\r\n\r\n                                                          // ================= GET AVAILABLE GAMES FOR BRANCH =================\r\n                                                          \r\n                                                          getAvailableGamesForBranch: async (branchId) => {\r\n                                                            try {\r\n                                                              const [allGames, branchGames] = await Promise.all([\r\n                                                                authService.getGames(),\r\n                                                                authService.getBranchGames(branchId)\r\n                                                              ]);\r\n                                                              \r\n                                                              if (allGames.success && branchGames.success) {\r\n                                                                const addedGameIds = branchGames.data.map(g => g.game_id || g.id);\r\n                                                                const availableGames = allGames.data.filter(game => !addedGameIds.includes(game.id));\r\n                                                                \r\n                                                                return { \r\n                                                                  success: true, \r\n                                                                  data: availableGames \r\n                                                                };\r\n                                                              }\r\n                                                              return { success: false, message: 'ÙØ´Ù„ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ù…ØªØ§Ø­Ø©' };\r\n                                                            } catch (error) {\r\n                                                              return { success: false, message: 'ÙØ´Ù„ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ù…ØªØ§Ø­Ø©' };\r\n                                                            }\r\n                                                          },\r\n                                                          \r\n                                                          // ====================== Ø§Ù„Ø¥Ø¶Ø§ÙØ§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ======================\r\n                                                          \r\n                                                          // ğŸ® **Ø¬Ù„Ø¨ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ù…ØªØ§Ø­Ø© Ù„Ù„ÙØ±Ø¹ Ø§Ù„Ø­Ø§Ù„ÙŠ Ù„Ù„Ù…ÙˆØ¸Ù**\r\n                                                          getAvailableGamesForCurrentBranch: async () => {\r\n                                                            try {\r\n                                                              const user = authService.getCurrentUser();\r\n                                                              if (!user?.branch_id) {\r\n                                                                return {\r\n                                                                  success: false,\r\n                                                                  message: 'Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…Ø±ØªØ¨Ø· Ø¨ÙØ±Ø¹',\r\n                                                                  data: []\r\n                                                                };\r\n                                                              }\r\n                                                              \r\n                                                              const response = await api.get(`/api/branches/${user.branch_id}/games`);\r\n                                                              \r\n                                                              if (response.success) {\r\n                                                                // ØªØµÙÙŠØ© Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ù…ØªØ§Ø­Ø© ÙÙ‚Ø·\r\n                                                                const availableGames = response.data.filter(game => \r\n                                                                  game.status === 'Ù…ØªØ§Ø­' && game.available_quantity > 0\r\n                                                                );\r\n                                                                \r\n                                                                return {\r\n                                                                  success: true,\r\n                                                                  data: availableGames,\r\n                                                                  message: `ØªÙ… ØªØ­Ù…ÙŠÙ„ ${availableGames.length} Ù„Ø¹Ø¨Ø© Ù…ØªØ§Ø­Ø©`\r\n                                                                };\r\n                                                              }\r\n                                                              \r\n                                                              return response;\r\n                                                            } catch (error) {\r\n                                                              return {\r\n                                                                success: false,\r\n                                                                message: 'ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„ÙØ±Ø¹',\r\n                                                                data: []\r\n                                                              };\r\n                                                            }\r\n                                                          },\r\n\r\n                                                          // ğŸ¬ **Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙØ±Ø¹ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ**\r\n                                                          getCurrentUserBranch: async () => {\r\n                                                            try {\r\n                                                              const user = authService.getCurrentUser();\r\n                                                              if (!user?.branch_id) {\r\n                                                                return {\r\n                                                                  success: false,\r\n                                                                  message: 'Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…Ø±ØªØ¨Ø· Ø¨ÙØ±Ø¹',\r\n                                                                  data: null\r\n                                                                };\r\n                                                              }\r\n                                                              \r\n                                                              const response = await api.get(`/api/branches/${user.branch_id}`);\r\n                                                              return response;\r\n                                                            } catch (error) {\r\n                                                              return {\r\n                                                                success: false,\r\n                                                                message: 'ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙØ±Ø¹',\r\n                                                                data: null\r\n                                                              };\r\n                                                            }\r\n                                                          },\r\n\r\n                                                          // â±ï¸ **Ø¬Ù„Ø¨ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø© Ù„Ù„ÙØ±Ø¹ Ø§Ù„Ø­Ø§Ù„ÙŠ**\r\n                                                          getActiveRentalsForCurrentBranch: async () => {\r\n                                                            try {\r\n                                                              const user = authService.getCurrentUser();\r\n                                                              if (!user?.branch_id) {\r\n                                                                return {\r\n                                                                  success: false,\r\n                                                                  message: 'Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…Ø±ØªØ¨Ø· Ø¨ÙØ±Ø¹',\r\n                                                                  data: []\r\n                                                                };\r\n                                                              }\r\n                                                              \r\n                                                              const response = await api.get('/rentals/active', {\r\n                                                                params: { branch_id: user.branch_id }\r\n                                                              });\r\n                                                              \r\n                                                              return response;\r\n                                                            } catch (error) {\r\n                                                              return {\r\n                                                                success: false,\r\n                                                                message: 'ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©',\r\n                                                                data: []\r\n                                                              };\r\n                                                            }\r\n                                                          },\r\n\r\n                                                          // ğŸ“Š **Ø¬Ù„Ø¨ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ÙØ±Ø¹ Ø§Ù„Ø­Ø§Ù„ÙŠ**\r\n                                                          getCurrentBranchStats: async () => {\r\n                                                            try {\r\n                                                              const user = authService.getCurrentUser();\r\n                                                              if (!user?.branch_id) {\r\n                                                                return {\r\n                                                                  success: false,\r\n                                                                  message: 'Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…Ø±ØªØ¨Ø· Ø¨ÙØ±Ø¹',\r\n                                                                  data: null\r\n                                                                };\r\n                                                              }\r\n                                                              \r\n                                                              const response = await api.get('/dashboard/stats', {\r\n                                                                params: { branch_id: user.branch_id }\r\n                                                              });\r\n                                                              \r\n                                                              return response;\r\n                                                            } catch (error) {\r\n                                                              return {\r\n                                                                success: false,\r\n                                                                message: 'ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ÙØ±Ø¹',\r\n                                                                data: null\r\n                                                              };\r\n                                                            }\r\n                                                          },\r\n\r\n                                                          // ğŸš€ **Ø¨Ø¯Ø¡ ØªØ£Ø¬ÙŠØ± Ø¬Ø¯ÙŠØ¯ ÙÙŠ Ø§Ù„ÙØ±Ø¹ Ø§Ù„Ø­Ø§Ù„ÙŠ**\r\n                                                          startRentalInCurrentBranch: async (rentalData) => {\r\n                                                            try {\r\n                                                              const user = authService.getCurrentUser();\r\n                                                              if (!user?.branch_id) {\r\n                                                                return {\r\n                                                                  success: false,\r\n                                                                  message: 'Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…Ø±ØªØ¨Ø· Ø¨ÙØ±Ø¹'\r\n                                                                };\r\n                                                              }\r\n                                                              \r\n                                                              const fullRentalData = {\r\n                                                                ...rentalData,\r\n                                                                branch_id: user.branch_id,\r\n                                                                employee_id: user.id,\r\n                                                                employee_name: user.name\r\n                                                              };\r\n                                                              \r\n                                                              console.log('ğŸ“¤ Ø¥Ø±Ø³Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ£Ø¬ÙŠØ±:', fullRentalData);\r\n                                                              const response = await api.post('/api/rentals/new', fullRentalData);\r\n                                                              return response;\r\n                                                            } catch (error) {\r\n                                                              console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¨Ø¯Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ±:', error);\r\n                                                              return {\r\n                                                                success: false,\r\n                                                                message: error.response?.data?.message || 'ØªØ¹Ø°Ø± Ø¨Ø¯Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ±'\r\n                                                              };\r\n                                                            }\r\n                                                          },\r\n\r\n                                                          // âœ… **Ø¥Ù†Ù‡Ø§Ø¡ ØªØ£Ø¬ÙŠØ±**\r\n                                                          endRental: async (rentalId, finalAmount = null) => {\r\n                                                            try {\r\n                                                              const payload = {};\r\n                                                              if (finalAmount !== null) {\r\n                                                                payload.final_amount = finalAmount;\r\n                                                              }\r\n                                                              \r\n                                                              const response = await api.put(`/api/rentals/${rentalId}/complete/new`, payload);\r\n                                                              return response;\r\n                                                            } catch (error) {\r\n                                                              return {\r\n                                                                success: false,\r\n                                                                message: error.response?.data?.message || 'ØªØ¹Ø°Ø± Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ±'\r\n                                                              };\r\n                                                            }\r\n                                                          },\r\n\r\n                                                          // ğŸ” **Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø£Ù„Ø¹Ø§Ø¨ ÙÙŠ Ø§Ù„ÙØ±Ø¹ Ø§Ù„Ø­Ø§Ù„ÙŠ**\r\n                                                          searchGamesInCurrentBranch: async (searchTerm) => {\r\n                                                            try {\r\n                                                              const user = authService.getCurrentUser();\r\n                                                              if (!user?.branch_id) {\r\n                                                                return {\r\n                                                                  success: false,\r\n                                                                  message: 'Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…Ø±ØªØ¨Ø· Ø¨ÙØ±Ø¹',\r\n                                                                  data: []\r\n                                                                };\r\n                                                              }\r\n                                                              \r\n                                                              const response = await api.get(`/api/branches/${user.branch_id}/games/search`, {\r\n                                                                params: { q: searchTerm }\r\n                                                              });\r\n                                                              \r\n                                                              return response;\r\n                                                            } catch (error) {\r\n                                                              // fallback: ØªØµÙÙŠØ© Ù…Ø­Ù„ÙŠØ©\r\n                                                              const allGames = await authService.getAvailableGamesForCurrentBranch();\r\n                                                              if (allGames.success) {\r\n                                                                const filtered = allGames.data.filter(game =>\r\n                                                                  game.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n                                                                  game.category.toLowerCase().includes(searchTerm.toLowerCase())\r\n                                                                );\r\n                                                                \r\n                                                                return {\r\n                                                                  success: true,\r\n                                                                  data: filtered,\r\n                                                                  message: `ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ ${filtered.length} Ù†ØªÙŠØ¬Ø©`\r\n                                                                };\r\n                                                              }\r\n                                                              \r\n                                                              return {\r\n                                                                success: false,\r\n                                                                message: 'ØªØ¹Ø°Ø± Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨',\r\n                                                                data: []\r\n                                                              };\r\n                                                            }\r\n                                                          },\r\n\r\n                                                          // ğŸ• **ØªØ­Ø¯ÙŠØ« Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ÙˆÙ‚Øª Ù„Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª**\r\n                                                          updateRentalTimers: async () => {\r\n                                                            try {\r\n                                                              const user = authService.getCurrentUser();\r\n                                                              if (!user?.branch_id) return;\r\n                                                              \r\n                                                              const response = await api.get(`/api/rentals/${user.branch_id}/check-expired`);\r\n                                                              return response;\r\n                                                            } catch (error) {\r\n                                                              console.warn('âš ï¸ ØªØ¹Ø°Ø± ØªØ­Ø¯ÙŠØ« Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ÙˆÙ‚Øª:', error.message);\r\n                                                            }\r\n                                                          },\r\n\r\n                                                          // ğŸ“± **Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø±Ù‚Ù… Ù‡Ø§ØªÙ Ø¹Ù…ÙŠÙ„**\r\n                                                          validateCustomerPhone: (phone) => {\r\n                                                            const phoneRegex = /^01[0-9]{9}$/;\r\n                                                            return phoneRegex.test(phone);\r\n                                                          },\r\n\r\n                                                          // ğŸ’° **ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø¹Ù…Ù„Ø©**\r\n                                                          formatCurrency: (amount) => {\r\n                                                            const num = parseFloat(amount) || 0;\r\n                                                            return new Intl.NumberFormat('ar-EG', {\r\n                                                              style: 'currency',\r\n                                                              currency: 'EGP',\r\n                                                              minimumFractionDigits: 0\r\n                                                            }).format(num);\r\n                                                          },\r\n\r\n                                                          // â³ **ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ù…Ø¯Ø©**\r\n                                                          formatDuration: (minutes) => {\r\n                                                            if (!minutes || minutes === 0) return 'ÙˆÙ‚Øª Ù…ÙØªÙˆØ­';\r\n                                                            if (minutes < 60) return `${minutes} Ø¯Ù‚ÙŠÙ‚Ø©`;\r\n                                                            \r\n                                                            const hours = Math.floor(minutes / 60);\r\n                                                            const remainingMinutes = minutes % 60;\r\n                                                            return `${hours} Ø³Ø§Ø¹Ø©${remainingMinutes > 0 ? ` ${remainingMinutes} Ø¯Ù‚ÙŠÙ‚Ø©` : ''}`;\r\n                                                          },\r\n\r\n                                                          // â° **ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„ÙˆÙ‚Øª**\r\n                                                          formatTime: (dateString) => {\r\n                                                            try {\r\n                                                              return new Date(dateString).toLocaleTimeString('ar-EG', {\r\n                                                                hour: '2-digit',\r\n                                                                minute: '2-digit'\r\n                                                              });\r\n                                                            } catch {\r\n                                                              return '--:--';\r\n                                                            }\r\n                                                          },\r\n\r\n                                                          // ğŸ“… **ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„ØªØ§Ø±ÙŠØ®**\r\n                                                          formatDate: (dateString) => {\r\n                                                            try {\r\n                                                              return new Date(dateString).toLocaleDateString('ar-EG', {\r\n                                                                weekday: 'short',\r\n                                                                year: 'numeric',\r\n                                                                month: 'long',\r\n                                                                day: 'numeric'\r\n                                                              });\r\n                                                            } catch {\r\n                                                              return '--/--/----';\r\n                                                            }\r\n                                                          },\r\n\r\n                                                          // ğŸ”” **Ø¹Ø±Ø¶ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª**\r\n                                                          showNotification: (type, message) => {\r\n                                                            const messages = {\r\n                                                              error: `âŒ ${message}`,\r\n                                                              success: `âœ… ${message}`,\r\n                                                              warning: `âš ï¸ ${message}`,\r\n                                                              info: `â„¹ï¸ ${message}`\r\n                                                            };\r\n                                                            \r\n                                                            alert(messages[type] || message);\r\n                                                          },\r\n\r\n                                                          // ğŸ¯ **Ø­Ø³Ø§Ø¨ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ Ù„Ù„ØªØ£Ø¬ÙŠØ±**\r\n                                                          calculateTimeRemaining: (endTime) => {\r\n                                                            if (!endTime) return null;\r\n                                                            \r\n                                                            try {\r\n                                                              const end = new Date(endTime);\r\n                                                              const now = new Date();\r\n                                                              const timeLeftMs = end - now;\r\n                                                              \r\n                                                              if (timeLeftMs <= 0) return { expired: true, minutes: 0, formatted: 'Ø§Ù†ØªÙ‡Ù‰' };\r\n                                                              \r\n                                                              const minutesLeft = Math.floor(timeLeftMs / 60000);\r\n                                                              const hours = Math.floor(minutesLeft / 60);\r\n                                                              const minutes = minutesLeft % 60;\r\n                                                              \r\n                                                              return {\r\n                                                                expired: false,\r\n                                                                minutes: minutesLeft,\r\n                                                                formatted: hours > 0 ? `${hours} Ø³Ø§Ø¹Ø© ${minutes} Ø¯Ù‚ÙŠÙ‚Ø©` : `${minutes} Ø¯Ù‚ÙŠÙ‚Ø©`\r\n                                                              };\r\n                                                            } catch (error) {\r\n                                                              return null;\r\n                                                            }\r\n                                                          },\r\n\r\n                                                          // ğŸ”„ **Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙØ±Ø¹ Ø§Ù„Ø­Ø§Ù„ÙŠ**\r\n                                                          refreshCurrentBranchData: async () => {\r\n                                                            try {\r\n                                                              const user = authService.getCurrentUser();\r\n                                                              if (!user?.branch_id) return null;\r\n                                                              \r\n                                                              const [gamesResponse, rentalsResponse, statsResponse] = await Promise.all([\r\n                                                                authService.getAvailableGamesForCurrentBranch(),\r\n                                                                authService.getActiveRentalsForCurrentBranch(),\r\n                                                                authService.getCurrentBranchStats()\r\n                                                              ]);\r\n                                                              \r\n                                                              return {\r\n                                                                success: true,\r\n                                                                games: gamesResponse.success ? gamesResponse.data : [],\r\n                                                                activeRentals: rentalsResponse.success ? rentalsResponse.data : [],\r\n                                                                stats: statsResponse.success ? statsResponse.data : null,\r\n                                                                message: 'ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª'\r\n                                                              };\r\n                                                            } catch (error) {\r\n                                                              return {\r\n                                                                success: false,\r\n                                                                message: 'ØªØ¹Ø°Ø± ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª',\r\n                                                                games: [],\r\n                                                                activeRentals: [],\r\n                                                                stats: null\r\n                                                              };\r\n                                                            }\r\n                                                          },\r\n\r\n                                                          // ğŸ“‹ **Ø¬Ù…Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ£Ø¬ÙŠØ± Ù„Ù†Ù…ÙˆØ°Ø¬ Ø¬Ø¯ÙŠØ¯**\r\n                                                          prepareRentalFormData: () => {\r\n                                                            return {\r\n                                                              customer_name: '',\r\n                                                              customer_phone: '',\r\n                                                              customer_notes: '',\r\n                                                              duration_type: 'fixed',\r\n                                                              duration_minutes: 60,\r\n                                                              selected_games: [],\r\n                                                              quantities: {},\r\n                                                              discount: 0,\r\n                                                              payment_method: 'cash'\r\n                                                            };\r\n                                                          },\r\n\r\n                                                          // âœ… **Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„ØªØ£Ø¬ÙŠØ±**\r\n                                                          validateRentalForm: (formData) => {\r\n                                                            const errors = [];\r\n                                                            \r\n                                                            if (!formData.customer_name?.trim()) {\r\n                                                              errors.push('Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù…Ø·Ù„ÙˆØ¨');\r\n                                                            }\r\n                                                            \r\n                                                            if (!formData.customer_phone?.trim()) {\r\n                                                              errors.push('Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ù…Ø·Ù„ÙˆØ¨');\r\n                                                            } else if (!authService.validateCustomerPhone(formData.customer_phone)) {\r\n                                                              errors.push('Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ ØºÙŠØ± ØµØ­ÙŠØ­. ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ¨Ø¯Ø£ Ø¨Ù€ 01 ÙˆÙŠØªÙƒÙˆÙ† Ù…Ù† 11 Ø±Ù‚Ù…');\r\n                                                            }\r\n                                                            \r\n                                                            if (formData.selected_games.length === 0) {\r\n                                                              errors.push('ÙŠØ¬Ø¨ Ø§Ø®ØªÙŠØ§Ø± Ù„Ø¹Ø¨Ø© ÙˆØ§Ø­Ø¯Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„');\r\n                                                            }\r\n                                                            \r\n                                                            if (formData.duration_type === 'fixed' && !formData.duration_minutes) {\r\n                                                              errors.push('ÙŠØ¬Ø¨ ØªØ­Ø¯ÙŠØ¯ Ù…Ø¯Ø© Ø§Ù„ØªØ£Ø¬ÙŠØ±');\r\n                                                            }\r\n                                                            \r\n                                                            return {\r\n                                                              isValid: errors.length === 0,\r\n                                                              errors: errors\r\n                                                            };\r\n                                                          },\r\n\r\n                                                          // ğŸ’µ **Ø­Ø³Ø§Ø¨ Ø³Ø¹Ø± Ø§Ù„ØªØ£Ø¬ÙŠØ±**\r\n                                                          calculateRentalPrice: (game, durationMinutes, quantity = 1) => {\r\n                                                            if (!game) return 0;\r\n                                                            \r\n                                                            let price = 0;\r\n                                                            \r\n                                                            if (durationMinutes >= 60) {\r\n                                                              price = (game.price_per_hour || 0) * (durationMinutes / 60);\r\n                                                            } else {\r\n                                                              const quarters = Math.ceil(durationMinutes / 15);\r\n                                                              price = (game.price_per_15min || 0) * quarters;\r\n                                                            }\r\n                                                            \r\n                                                            return price * quantity;\r\n                                                          }\r\n                                                        };\r\n\r\n                                                        export default authService;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}