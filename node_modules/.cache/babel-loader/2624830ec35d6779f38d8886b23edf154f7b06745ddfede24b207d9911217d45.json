{"ast":null,"code":"import axios from 'axios';\n\n// ==================== Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø© ====================\nconst detectEnvironment = () => {\n  const env = process.env.REACT_APP_ENVIRONMENT || 'development';\n  const apiUrl = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\n  console.log(`ğŸŒ Ø§Ù„Ø¨ÙŠØ¦Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©: ${env}`);\n  console.log(`ğŸŒ Ø¹Ù†ÙˆØ§Ù† API: ${apiUrl}`);\n  return {\n    env,\n    apiUrl\n  };\n};\nconst {\n  env,\n  apiUrl\n} = detectEnvironment();\nconsole.log('ğŸŒ API Base URL:', apiUrl);\n\n// ==================== Ø¥Ù†Ø´Ø§Ø¡ axios instance ====================\nconst api = axios.create({\n  baseURL: apiUrl,\n  timeout: 30000,\n  headers: {\n    'Content-Type': 'application/json',\n    'Accept': 'application/json',\n    'Accept-Language': 'ar'\n  }\n});\n\n// ==================== Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø© ====================\nconst generateRentalNumber = (prefix = 'RNT') => `${prefix}-${Date.now().toString().slice(-8)}-${Math.floor(Math.random() * 1000)}`;\nconst generateShiftNumber = () => `SHIFT-${Date.now().toString().slice(-8)}`;\n\n// ==================== Interceptors ====================\napi.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  let authToken = token;\n  if (token && token.startsWith('Bearer ')) {\n    authToken = token.substring(7);\n  }\n  if (authToken) {\n    config.headers.Authorization = `Bearer ${authToken}`;\n  }\n  if (process.env.NODE_ENV === 'development') {\n    var _config$method;\n    console.log('ğŸŒ API Request:', {\n      method: (_config$method = config.method) === null || _config$method === void 0 ? void 0 : _config$method.toUpperCase(),\n      url: config.url,\n      fullUrl: `${config.baseURL}${config.url}`,\n      tokenExists: !!authToken\n    });\n  }\n  return config;\n}, error => {\n  console.error('âŒ Request Interceptor Error:', error);\n  return Promise.reject(error);\n});\napi.interceptors.response.use(response => {\n  if (process.env.NODE_ENV === 'development') {\n    console.log('âœ… API Response:', {\n      url: response.config.url,\n      status: response.status\n    });\n  }\n  if (response.data && typeof response.data === 'object') {\n    return response.data;\n  }\n  return {\n    success: true,\n    status: response.status,\n    data: response.data,\n    message: 'ØªÙ… ØªÙ†ÙÙŠØ° Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­'\n  };\n}, error => {\n  var _error$config, _error$response, _error$response2, _error$response3, _error$response4, _error$response4$data, _error$response5;\n  console.error('âŒ Ø®Ø·Ø£ ÙÙŠ API:', {\n    url: (_error$config = error.config) === null || _error$config === void 0 ? void 0 : _error$config.url,\n    status: (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status,\n    message: error.message\n  });\n  if (env === 'ngrok' && error.message.includes('Network Error')) {\n    return {\n      success: false,\n      status: 0,\n      message: 'Ø®Ø·Ø£ ÙÙŠ Ø§ØªØµØ§Ù„ ngrok. ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ø§Ù„Ø®Ø§Ø¯Ù… ÙŠØ¹Ù…Ù„',\n      ngrokError: true\n    };\n  }\n  if (((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.status) === 500) {\n    return {\n      success: false,\n      status: 500,\n      message: 'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø®Ø§Ø¯Ù…'\n    };\n  }\n  return {\n    success: false,\n    status: ((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.status) || 0,\n    message: ((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : (_error$response4$data = _error$response4.data) === null || _error$response4$data === void 0 ? void 0 : _error$response4$data.message) || error.message || 'Ø­Ø¯Ø« Ø®Ø·Ø£',\n    data: (_error$response5 = error.response) === null || _error$response5 === void 0 ? void 0 : _error$response5.data\n  };\n});\n\n// ==================== Ø¯ÙˆØ§Ù„ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªÙˆÙƒÙ† ====================\napi.setToken = token => {\n  if (token) {\n    let cleanToken = token;\n    if (token.startsWith('Bearer ')) {\n      cleanToken = token.substring(7);\n    }\n    api.defaults.headers.common['Authorization'] = `Bearer ${cleanToken}`;\n    localStorage.setItem('token', cleanToken);\n  } else {\n    delete api.defaults.headers.common['Authorization'];\n    localStorage.removeItem('token');\n  }\n};\napi.checkAuthStatus = () => {\n  const token = localStorage.getItem('token');\n  const user = localStorage.getItem('user');\n  return {\n    isAuthenticated: !!token,\n    token: token,\n    user: user ? JSON.parse(user) : null\n  };\n};\napi.getCurrentUser = () => {\n  try {\n    const userStr = localStorage.getItem('user');\n    return userStr ? JSON.parse(userStr) : null;\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ:', error);\n    return null;\n  }\n};\napi.getEnvironmentInfo = () => ({\n  environment: env,\n  apiUrl: apiUrl,\n  isNgrok: env === 'ngrok' || apiUrl.includes('ngrok'),\n  nodeEnv: process.env.NODE_ENV\n});\napi.validateToken = async () => {\n  try {\n    const token = localStorage.getItem('token');\n    if (!token) {\n      return {\n        valid: false,\n        message: 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØªÙˆÙƒÙ†'\n      };\n    }\n    const parts = token.split('_');\n    if (parts.length < 2) {\n      return {\n        valid: false,\n        message: 'ØªÙˆÙƒÙ† ØºÙŠØ± ØµØ§Ù„Ø­'\n      };\n    }\n    const response = await api.get('/auth/profile');\n    if (response.success) {\n      return {\n        valid: true,\n        user: response.data,\n        userId: parseInt(parts[1])\n      };\n    }\n    return {\n      valid: false,\n      message: response.message\n    };\n  } catch (error) {\n    console.error('âŒ Token validation error:', error);\n    return {\n      valid: false,\n      message: error.message\n    };\n  }\n};\n\n// ==================== AUTH ENDPOINTS ====================\napi.login = async (email, password) => {\n  try {\n    console.log('ğŸ” Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„:', email);\n    const response = await api.post('/auth/login', {\n      email,\n      password\n    });\n    if (response.success && response.token) {\n      api.setToken(response.token);\n      if (response.user) {\n        localStorage.setItem('user', JSON.stringify(response.user));\n        localStorage.setItem('lastLogin', new Date().toISOString());\n      }\n      return {\n        success: true,\n        data: response\n      };\n    }\n    return {\n      success: false,\n      message: response.message || 'ÙØ´Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„'\n    };\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„:', error);\n    if (error.code === 'ECONNABORTED') {\n      return {\n        success: false,\n        message: 'Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù…Ù‡Ù„Ø©. ØªØ£ÙƒØ¯ Ù…Ù† ØªØ´ØºÙŠÙ„ Ø§Ù„Ø®Ø§Ø¯Ù…'\n      };\n    }\n    if (error.status === 401) {\n      return {\n        success: false,\n        message: 'Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©'\n      };\n    }\n    return {\n      success: false,\n      message: 'ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…'\n    };\n  }\n};\napi.logout = async (redirect = true) => {\n  try {\n    await api.post('/auth/logout');\n  } catch (error) {\n    console.log('âš ï¸ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù… Ù„Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬');\n  } finally {\n    api.setToken(null);\n    localStorage.removeItem('user');\n    localStorage.removeItem('lastLogin');\n    if (redirect) {\n      window.location.href = '/login';\n    }\n  }\n};\napi.getProfile = async () => {\n  try {\n    return await api.get('/auth/profile');\n  } catch (error) {\n    return {\n      success: false,\n      message: 'ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ'\n    };\n  }\n};\n\n// ==================== BRANCHES ENDPOINTS ====================\napi.getBranches = async (params = {}) => {\n  try {\n    const response = await api.get('/branches', {\n      params\n    });\n    return {\n      success: true,\n      data: response.data || [],\n      count: response.count || 0\n    };\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„ÙØ±ÙˆØ¹:', error);\n    return {\n      success: false,\n      data: []\n    };\n  }\n};\napi.getBranch = async branchId => {\n  try {\n    const response = await api.get(`/branches/${branchId}`);\n    if (response.success) {\n      return {\n        success: true,\n        data: response.data\n      };\n    }\n    return {\n      success: true,\n      data: {\n        id: branchId,\n        name: `ÙØ±Ø¹ ${branchId}`,\n        location: 'Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©',\n        city: 'Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©',\n        contact_phone: '01000000000',\n        opening_time: '09:00:00',\n        closing_time: '22:00:00',\n        is_active: true\n      },\n      fromCache: true\n    };\n  } catch (error) {\n    console.error(`âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ ÙØ±Ø¹ ${branchId}:`, error.message);\n    return {\n      success: true,\n      data: {\n        id: branchId,\n        name: `ÙØ±Ø¹ ${branchId}`,\n        location: 'Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©',\n        city: 'Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©',\n        contact_phone: '01000000000',\n        opening_time: '09:00:00',\n        closing_time: '22:00:00',\n        is_active: true\n      },\n      fromCache: true\n    };\n  }\n};\napi.createBranch = async branchData => {\n  try {\n    return await api.post('/branches', branchData);\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ±Ø¹:', error);\n    return {\n      success: false,\n      message: error.message || 'ØªØ¹Ø°Ø± Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ±Ø¹'\n    };\n  }\n};\napi.updateBranch = async (id, branchData) => {\n  try {\n    return await api.put(`/branches/${id}`, branchData);\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙØ±Ø¹:', error);\n    return {\n      success: false,\n      message: error.message || 'ØªØ¹Ø°Ø± ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙØ±Ø¹'\n    };\n  }\n};\napi.deleteBranch = async (id, permanent = false) => {\n  try {\n    return await api.delete(`/branches/${id}?permanent=${permanent}`);\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„ÙØ±Ø¹:', error);\n    return {\n      success: false,\n      message: error.message || 'ØªØ¹Ø°Ø± Ø­Ø°Ù Ø§Ù„ÙØ±Ø¹'\n    };\n  }\n};\napi.getBranchGames = async branchId => {\n  try {\n    const response = await api.get(`/branches/${branchId}/games`);\n    return {\n      success: true,\n      data: response.data || [],\n      stats: response.stats || {}\n    };\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„ÙØ±Ø¹:', error);\n    return {\n      success: false,\n      data: []\n    };\n  }\n};\n\n// ==================== GAMES ENDPOINTS ====================\napi.getGames = async (params = {}) => {\n  try {\n    const requestParams = {\n      ...params\n    };\n    delete requestParams.status;\n    const response = await api.get('/games', {\n      params: requestParams,\n      timeout: 15000\n    });\n    if (response.success) {\n      return {\n        success: true,\n        data: response.data || [],\n        stats: response.stats || {},\n        message: response.message || 'ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø¨Ù†Ø¬Ø§Ø­'\n      };\n    }\n    return {\n      success: false,\n      data: []\n    };\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ getGames:', error);\n    return {\n      success: false,\n      data: []\n    };\n  }\n};\napi.getAvailableGames = async (params = {}) => {\n  try {\n    const response = await api.get('/games/available', {\n      params\n    });\n    return {\n      success: true,\n      data: response.data || [],\n      count: response.count || 0\n    };\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ù…ØªØ§Ø­Ø©:', error);\n    return {\n      success: false,\n      data: []\n    };\n  }\n};\napi.getGameById = async id => {\n  try {\n    return await api.get(`/games/${id}`);\n  } catch (error) {\n    console.error(`âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ù„Ø¹Ø¨Ø© ${id}:`, error);\n    return {\n      success: false,\n      message: 'ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù„Ø¹Ø¨Ø©'\n    };\n  }\n};\napi.createGame = async gameData => {\n  try {\n    return await api.post('/games', gameData);\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©:', error);\n    return {\n      success: false,\n      message: error.message || 'ØªØ¹Ø°Ø± Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©'\n    };\n  }\n};\napi.updateGame = async (id, gameData) => {\n  try {\n    return await api.put(`/games/${id}`, gameData);\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù„Ø¹Ø¨Ø©:', error);\n    return {\n      success: false,\n      message: error.message || 'ØªØ¹Ø°Ø± ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù„Ø¹Ø¨Ø©'\n    };\n  }\n};\napi.deleteGame = async (id, permanent = false) => {\n  try {\n    return await api.delete(`/games/${id}?permanent=${permanent}`);\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù„Ø¹Ø¨Ø©:', error);\n    return {\n      success: false,\n      message: error.message || 'ØªØ¹Ø°Ø± Ø­Ø°Ù Ø§Ù„Ù„Ø¹Ø¨Ø©'\n    };\n  }\n};\n\n// Ø¯Ø§Ù„Ø© Ø°ÙƒÙŠØ© Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ù…Ø¹ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ\napi.loadGamesSmart = async branchId => {\n  try {\n    console.log(`ğŸ® ØªØ­Ù…ÙŠÙ„ Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„ÙØ±Ø¹ ${branchId} Ø¨Ø°ÙƒØ§Ø¡...`);\n\n    // Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰: Ø¬Ù„Ø¨ Ù…Ù† Ø§Ù„Ø®Ø§Ø¯Ù…\n    try {\n      const response = await api.get('/games', {\n        params: {\n          branch_id: branchId\n        }\n      });\n      if (response.success && response.data && response.data.length > 0) {\n        // ØªØ®Ø²ÙŠÙ† Ù…Ø­Ù„ÙŠ Ù„Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ\n        localStorage.setItem(`branch_${branchId}_games`, JSON.stringify(response.data));\n        return {\n          success: true,\n          data: response.data,\n          message: 'ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø¨Ù†Ø¬Ø§Ø­',\n          count: response.data.length\n        };\n      }\n    } catch (error) {\n      console.warn('âš ï¸ ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ù…Ù† Ø§Ù„Ø®Ø§Ø¯Ù…:', error.message);\n    }\n\n    // Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©: Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ\n    const localGames = localStorage.getItem(`branch_${branchId}_games`);\n    if (localGames) {\n      const games = JSON.parse(localGames);\n      return {\n        success: true,\n        data: games,\n        message: 'Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­Ù„ÙŠØ©',\n        fromCache: true,\n        count: games.length\n      };\n    }\n\n    // Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø«Ø§Ù„Ø«Ø©: Ø¨ÙŠØ§Ù†Ø§Øª Ø§ÙØªØ±Ø§Ø¶ÙŠØ©\n    const defaultGames = [{\n      id: 1,\n      name: 'Ø³ÙŠØ§Ø±Ø© ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ©',\n      category: 'Ø³ÙŠØ§Ø±Ø§Øª',\n      price_per_15min: 50,\n      branch_id: branchId || 1,\n      status: 'available',\n      is_active: true\n    }, {\n      id: 2,\n      name: 'Ø³ÙƒÙˆØªØ± ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠ',\n      category: 'Ø³ÙƒÙˆØªØ±',\n      price_per_15min: 30,\n      branch_id: branchId || 1,\n      status: 'available',\n      is_active: true\n    }, {\n      id: 3,\n      name: 'Ø¯Ø±Ø§Ø¬Ø© Ù†Ø§Ø±ÙŠØ©',\n      category: 'Ø¯Ø±Ø§Ø¬Ø§Øª',\n      price_per_15min: 40,\n      branch_id: branchId || 1,\n      status: 'available',\n      is_active: true\n    }];\n    return {\n      success: true,\n      data: defaultGames,\n      message: 'Ø¨ÙŠØ§Ù†Ø§Øª Ø£Ù„Ø¹Ø§Ø¨ Ø§ÙØªØ±Ø§Ø¶ÙŠØ©',\n      fromCache: true,\n      count: defaultGames.length\n    };\n  } catch (error) {\n    console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ loadGamesSmart:', error);\n    return {\n      success: true,\n      data: [],\n      count: 0\n    };\n  }\n};\n\n// ==================== SHIFTS ENDPOINTS ====================\napi.getCurrentShift = async () => {\n  try {\n    const response = await api.get('/shifts/current');\n    if (response.success && response.data) {\n      return {\n        success: true,\n        data: response.data,\n        exists: true,\n        message: 'ØªÙ… Ø¬Ù„Ø¨ Ø§Ù„Ø´ÙŠÙØª Ø§Ù„Ù†Ø´Ø·'\n      };\n    }\n    return {\n      success: true,\n      data: null,\n      exists: false,\n      message: 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø´ÙŠÙØª Ù†Ø´Ø·'\n    };\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø´ÙŠÙØª Ø§Ù„Ø­Ø§Ù„ÙŠ:', error.message);\n    return {\n      success: true,\n      data: null,\n      exists: false\n    };\n  }\n};\napi.startShift = async (openingCash = 0) => {\n  try {\n    console.log('ğŸ”„ Ø¨Ø¯Ø¡ Ø´ÙŠÙØª Ø¬Ø¯ÙŠØ¯...');\n\n    // Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ù…ØªØ¹Ø¯Ø¯Ø©\n    const endpoints = [{\n      method: 'post',\n      url: '/shifts/start',\n      data: {\n        opening_cash: openingCash\n      }\n    }, {\n      method: 'post',\n      url: '/shifts/start-simple',\n      data: {}\n    }, {\n      method: 'post',\n      url: '/shifts/start-clean',\n      data: {}\n    }];\n    for (const endpoint of endpoints) {\n      try {\n        const response = await api[endpoint.method](endpoint.url, endpoint.data);\n        if (response && response.success) {\n          console.log(`âœ… Ù†Ø¬Ø­ Ø¨Ø¯Ø¡ Ø§Ù„Ø´ÙŠÙØª Ø¹Ø¨Ø± ${endpoint.url}`);\n\n          // ØªØ®Ø²ÙŠÙ† Ø§Ù„Ø´ÙŠÙØª Ù…Ø­Ù„ÙŠØ§Ù‹\n          if (response.data) {\n            localStorage.setItem('current_shift', JSON.stringify(response.data));\n          }\n          return response;\n        }\n      } catch (error) {\n        console.warn(`âš ï¸ ÙØ´Ù„ ${endpoint.url}:`, error.message);\n      }\n    }\n    return {\n      success: false,\n      message: 'ÙØ´Ù„ ÙÙŠ Ø¨Ø¯Ø¡ Ø§Ù„Ø´ÙŠÙØª. ØªØ£ÙƒØ¯ Ù…Ù† ØªØ´ØºÙŠÙ„ Ø§Ù„Ø®Ø§Ø¯Ù…'\n    };\n  } catch (error) {\n    console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ startShift:', error);\n    return {\n      success: false,\n      message: 'Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹'\n    };\n  }\n};\napi.endShift = async (shiftId, closingData = {}) => {\n  try {\n    console.log(`ğŸ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø´ÙŠÙØª ${shiftId}...`);\n    const response = await api.put(`/shifts/${shiftId}/end`, {\n      closing_cash: closingData.closing_cash,\n      notes: closingData.notes || 'ØªÙ… Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø´ÙŠÙØª'\n    });\n    if (response.success) {\n      localStorage.removeItem('current_shift');\n    }\n    return response;\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø´ÙŠÙØª:', error);\n\n    // Ù…Ø­Ø§ÙˆÙ„Ø© Ø¨Ø¯ÙŠÙ„Ø©\n    try {\n      const altResponse = await api.post(`/shifts/${shiftId}/end-quick`, {\n        notes: closingData.notes || 'Ø¥Ù†Ù‡Ø§Ø¡ Ø³Ø±ÙŠØ¹'\n      });\n      if (altResponse.success) {\n        localStorage.removeItem('current_shift');\n      }\n      return altResponse;\n    } catch (altError) {\n      return {\n        success: false,\n        message: error.message || 'ØªØ¹Ø°Ø± Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø´ÙŠÙØª'\n      };\n    }\n  }\n};\napi.getShiftDetails = async shiftId => {\n  try {\n    const response = await api.get(`/shifts/${shiftId}/details`);\n    return {\n      success: true,\n      data: response.data || {},\n      stats: response.stats || {}\n    };\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø´ÙŠÙØª:', error);\n    return {\n      success: false,\n      data: null\n    };\n  }\n};\napi.getAllActiveShifts = async () => {\n  try {\n    const response = await api.get('/shifts/active-all');\n    return {\n      success: true,\n      data: response.data || [],\n      count: response.count || 0\n    };\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø´ÙŠÙØªØ§Øª Ø§Ù„Ù†Ø´Ø·Ø©:', error);\n    return {\n      success: false,\n      data: []\n    };\n  }\n};\n\n// ==================== RENTALS ENDPOINTS ====================\n\n// Ø¥Ù†Ø´Ø§Ø¡ ØªØ£Ø¬ÙŠØ± Ø¬Ø¯ÙŠØ¯ Ù…Ø¹ Ø¹Ù†Ø§ØµØ± Ù…ØªØ¹Ø¯Ø¯Ø© (Ù†Ø¸Ø§Ù… Cart)\napi.createRental = async rentalData => {\n  try {\n    console.log('ğŸ›’ Ø¥Ù†Ø´Ø§Ø¡ ØªØ£Ø¬ÙŠØ± Ø¬Ø¯ÙŠØ¯ Ù…Ø¹ Ø¹Ù†Ø§ØµØ±:', rentalData);\n    const response = await api.post('/rentals', {\n      items: rentalData.items || [],\n      customer_name: rentalData.customer_name,\n      customer_phone: rentalData.customer_phone || '',\n      notes: rentalData.notes || ''\n    });\n    return response;\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ±:', error);\n    return {\n      success: false,\n      message: error.message || 'ÙØ´Ù„ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ±'\n    };\n  }\n};\n\n// Ø¨Ø¯Ø¡ ÙˆÙ‚Øª Ù…ÙØªÙˆØ­\napi.startOpenTime = async rentalData => {\n  try {\n    console.log('ğŸ•’ Ø¨Ø¯Ø¡ ÙˆÙ‚Øª Ù…ÙØªÙˆØ­:', rentalData);\n    const response = await api.post('/rentals/open-time', {\n      game_id: rentalData.game_id,\n      customer_name: rentalData.customer_name,\n      customer_phone: rentalData.customer_phone || '',\n      child_name: rentalData.child_name || ''\n    });\n    return response;\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¨Ø¯Ø¡ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ÙØªÙˆØ­:', error);\n    return {\n      success: false,\n      message: error.message || 'ÙØ´Ù„ Ø¨Ø¯Ø¡ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ÙØªÙˆØ­'\n    };\n  }\n};\n\n// Ø¥Ù†Ø´Ø§Ø¡ ÙˆÙ‚Øª Ø«Ø§Ø¨Øª\napi.createFixedRental = async rentalData => {\n  try {\n    console.log('â° Ø¥Ù†Ø´Ø§Ø¡ ÙˆÙ‚Øª Ø«Ø§Ø¨Øª:', rentalData);\n    const response = await api.post('/rentals/ultra-simple', {\n      game_id: rentalData.game_id,\n      customer_name: rentalData.customer_name,\n      customer_phone: rentalData.customer_phone || '00000000000'\n    });\n    return response;\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø«Ø§Ø¨Øª:', error);\n    return {\n      success: false,\n      message: error.message || 'ÙØ´Ù„ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø«Ø§Ø¨Øª'\n    };\n  }\n};\n\n// Ø¥Ù†Ø´Ø§Ø¡ ÙˆÙ‚Øª Ù…ÙØªÙˆØ­ (Ø¨Ø¯ÙŠÙ„ Ø¨Ø³ÙŠØ·)\napi.createOpenTimeRental = async rentalData => {\n  try {\n    return await api.startOpenTime(rentalData);\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ createOpenTimeRental:', error);\n    return {\n      success: false,\n      message: error.message\n    };\n  }\n};\n\n// Ø¥Ù†Ø´Ø§Ø¡ ØªØ£Ø¬ÙŠØ± Ø°ÙƒÙŠ (ÙŠØ¯Ø¹Ù… Ø§Ù„Ø«Ø§Ø¨Øª ÙˆØ§Ù„Ù…ÙØªÙˆØ­)\napi.createSmartRental = async rentalData => {\n  try {\n    console.log('ğŸ¤– Ø¥Ù†Ø´Ø§Ø¡ ØªØ£Ø¬ÙŠØ± Ø°ÙƒÙŠ:', rentalData);\n    if (rentalData.rental_type === 'open') {\n      return await api.startOpenTime(rentalData);\n    } else {\n      return await api.createFixedRental(rentalData);\n    }\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ± Ø§Ù„Ø°ÙƒÙŠ:', error);\n    return {\n      success: false,\n      message: error.message\n    };\n  }\n};\n\n// Ø¥Ù†Ø´Ø§Ø¡ ØªØ£Ø¬ÙŠØ± Ø¨Ø³ÙŠØ· (Ù„Ù„ØªÙˆØ§ÙÙ‚ Ù…Ø¹ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù‚Ø¯ÙŠÙ…)\napi.createSimpleRental = async rentalData => {\n  return api.createFixedRental(rentalData);\n};\n\n// Ø¥Ù†Ù‡Ø§Ø¡ ÙˆÙ‚Øª Ù…ÙØªÙˆØ­\napi.completeOpenRental = async (rentalId, paymentData = {}) => {\n  try {\n    console.log(`âœ… Ø¥Ù†Ù‡Ø§Ø¡ ÙˆÙ‚Øª Ù…ÙØªÙˆØ­ ${rentalId}`);\n    const response = await api.post(`/rentals/${rentalId}/complete-open`, {\n      payment_method: paymentData.payment_method || 'ÙƒØ§Ø´'\n    });\n    return response;\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ÙØªÙˆØ­:', error);\n\n    // Ù…Ø¹Ø§Ù„Ø¬Ø© Ù…Ø­Ù„ÙŠØ© Ø¥Ø°Ø§ ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„\n    return {\n      success: true,\n      data: {\n        id: rentalId,\n        final_amount: paymentData.final_amount || 0,\n        actual_minutes: paymentData.actual_minutes || 15,\n        processed_locally: true\n      },\n      message: 'ØªÙ…Øª Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© Ù…Ø­Ù„ÙŠØ§Ù‹'\n    };\n  }\n};\n\n// Ø¥Ù†Ù‡Ø§Ø¡ ÙˆÙ‚Øª Ø«Ø§Ø¨Øª\napi.completeFixedRental = async rentalId => {\n  try {\n    console.log(`âœ… Ø¥Ù†Ù‡Ø§Ø¡ ÙˆÙ‚Øª Ø«Ø§Ø¨Øª ${rentalId}`);\n    const response = await api.post(`/rentals/${rentalId}/complete-fixed`);\n    return response;\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø«Ø§Ø¨Øª:', error);\n    return {\n      success: true,\n      data: {\n        id: rentalId,\n        processed_locally: true\n      },\n      message: 'ØªÙ…Øª Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© Ù…Ø­Ù„ÙŠØ§Ù‹'\n    };\n  }\n};\n\n// Ø¥Ù†Ù‡Ø§Ø¡ ØªØ£Ø¬ÙŠØ± (Ø§Ù„Ø¯Ø§Ù„Ø© Ø§Ù„Ø¹Ø§Ù…Ø©)\napi.completeRental = async (rentalId, data = {}) => {\n  try {\n    if (data.rental_type === 'open') {\n      return await api.completeOpenRental(rentalId, data);\n    } else {\n      return await api.completeFixedRental(rentalId);\n    }\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„ØªØ£Ø¬ÙŠØ±:', error);\n    return {\n      success: false,\n      message: error.message\n    };\n  }\n};\n\n// Ø¥Ù„ØºØ§Ø¡ ØªØ£Ø¬ÙŠØ± Ù…Ø¨ÙƒØ±\napi.cancelEarlyRental = async (rentalId, data = {}) => {\n  try {\n    console.log(`âŒ Ø¥Ù„ØºØ§Ø¡ Ù…Ø¨ÙƒØ± Ù„Ù„ØªØ£Ø¬ÙŠØ± ${rentalId}`);\n    const response = await api.post(`/rentals/${rentalId}/cancel-early`, {\n      reason: data.reason || 'Ø¥Ù„ØºØ§Ø¡ Ù…Ø¨ÙƒØ±',\n      refund_amount: data.refund_amount || 0\n    });\n    return response;\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ù…Ø¨ÙƒØ±:', error);\n    return {\n      success: false,\n      message: error.message\n    };\n  }\n};\n\n// Ø¬Ù„Ø¨ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©\napi.getActiveRentals = async (params = {}) => {\n  try {\n    const response = await api.get('/rentals/active', {\n      params\n    });\n    return {\n      success: true,\n      data: response.data || [],\n      count: response.count || 0\n    };\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©:', error);\n    return {\n      success: false,\n      data: []\n    };\n  }\n};\n\n// Ø¬Ù„Ø¨ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©\napi.getCompletedRentals = async (params = {}) => {\n  try {\n    const response = await api.get('/rentals/completed', {\n      params\n    });\n    return {\n      success: true,\n      data: response.data || [],\n      count: response.count || 0\n    };\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©:', error);\n    return {\n      success: false,\n      data: []\n    };\n  }\n};\n\n// Ø¬Ù„Ø¨ ØªØ£Ø¬ÙŠØ± Ù…Ø­Ø¯Ø¯ Ù…Ø¹ Ø¹Ù†Ø§ØµØ±Ù‡\napi.getRentalById = async rentalId => {\n  try {\n    return await api.get(`/rentals/${rentalId}`);\n  } catch (error) {\n    console.error(`âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ ØªØ£Ø¬ÙŠØ± ${rentalId}:`, error);\n    return {\n      success: false,\n      message: 'ÙØ´Ù„ Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ£Ø¬ÙŠØ±'\n    };\n  }\n};\n\n// Ø¬Ù„Ø¨ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø© Ù„Ù„Ø´ÙŠÙØª Ø§Ù„Ø­Ø§Ù„ÙŠ (Ù…Ø­Ø³Ù†Ø©)\napi.getActiveRentalsForCurrentShift = async (shiftId, branchId) => {\n  try {\n    console.log(`ğŸ“‹ Ø¬Ù„Ø¨ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø© Ù„Ù„Ø´ÙŠÙØª ${shiftId}`);\n    if (!shiftId || !branchId) {\n      return {\n        success: true,\n        data: [],\n        count: 0\n      };\n    }\n\n    // Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª Ù„Ù„Ù…Ø­Ø§ÙˆÙ„Ø©\n    const endpoints = [{\n      url: '/rentals/active-for-shift',\n      params: {\n        shift_id: shiftId,\n        branch_id: branchId\n      }\n    }, {\n      url: '/rentals/active',\n      params: {\n        shift_id: shiftId,\n        branch_id: branchId\n      }\n    }, {\n      url: '/rentals',\n      params: {\n        shift_id: shiftId,\n        branch_id: branchId,\n        status: 'active'\n      }\n    }];\n    for (const endpoint of endpoints) {\n      try {\n        const response = await api.get(endpoint.url, {\n          params: endpoint.params\n        });\n        if (response.success) {\n          let rentals = [];\n          if (Array.isArray(response.data)) {\n            rentals = response.data;\n          } else if (response.data && Array.isArray(response.data.data)) {\n            rentals = response.data.data;\n          }\n\n          // ØªØµÙÙŠØ© Ø­Ø³Ø¨ shift_id Ù„Ù„ØªØ£ÙƒØ¯\n          const shiftRentals = rentals.filter(r => r.shift_id == shiftId && r.status === 'active');\n          if (shiftRentals.length > 0) {\n            return {\n              success: true,\n              data: shiftRentals,\n              count: shiftRentals.length\n            };\n          }\n        }\n      } catch (error) {\n        console.warn(`âš ï¸ ÙØ´Ù„ ${endpoint.url}:`, error.message);\n      }\n    }\n    return {\n      success: true,\n      data: [],\n      count: 0\n    };\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ getActiveRentalsForCurrentShift:', error.message);\n    return {\n      success: true,\n      data: [],\n      count: 0\n    };\n  }\n};\n\n// Ø¬Ù„Ø¨ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø© Ù„Ù„Ø´ÙŠÙØª\napi.getCompletedRentalsForShift = async (shiftId, branchId, date) => {\n  try {\n    console.log(`ğŸ“Š Ø¬Ù„Ø¨ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø© Ù„Ù„Ø´ÙŠÙØª ${shiftId}`);\n    const endpoints = [{\n      url: '/rentals/completed-only',\n      params: {\n        shift_id: shiftId,\n        branch_id: branchId\n      }\n    }, {\n      url: '/rentals/completed',\n      params: {\n        shift_id: shiftId,\n        branch_id: branchId\n      }\n    }, {\n      url: '/rentals',\n      params: {\n        shift_id: shiftId,\n        branch_id: branchId,\n        status: 'completed',\n        limit: 100\n      }\n    }];\n    for (const endpoint of endpoints) {\n      try {\n        const response = await api.get(endpoint.url, {\n          params: endpoint.params\n        });\n        if (response.success) {\n          var _response$data;\n          let rentals = Array.isArray(response.data) ? response.data : ((_response$data = response.data) === null || _response$data === void 0 ? void 0 : _response$data.data) || [];\n\n          // ØªØµÙÙŠØ© Ø­Ø³Ø¨ shift_id ÙˆØ§Ù„ØªØ§Ø±ÙŠØ® Ø¥Ø°Ø§ Ù„Ø²Ù…\n          const filteredRentals = rentals.filter(r => r.shift_id == shiftId && (r.status === 'completed' || r.status === 'Ù…ÙƒØªÙ…Ù„'));\n          if (filteredRentals.length > 0 || endpoint === endpoints[endpoints.length - 1]) {\n            return {\n              success: true,\n              data: filteredRentals,\n              count: filteredRentals.length\n            };\n          }\n        }\n      } catch (error) {\n        console.warn(`âš ï¸ ÙØ´Ù„ ${endpoint.url}:`, error.message);\n      }\n    }\n    return {\n      success: true,\n      data: [],\n      count: 0\n    };\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ getCompletedRentalsForShift:', error);\n    return {\n      success: false,\n      data: []\n    };\n  }\n};\n\n// Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…Ù†ØªÙ‡ÙŠØ© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹\napi.autoCompleteExpiredRentals = async (branchId, shiftId = null) => {\n  try {\n    console.log('ğŸ”„ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…Ù†ØªÙ‡ÙŠØ© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹...');\n    const response = await api.post('/rentals/auto-complete-fixed', {\n      branch_id: branchId,\n      shift_id: shiftId\n    });\n    return response;\n  } catch (error) {\n    console.warn('âš ï¸ ÙØ´Ù„ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…Ù†ØªÙ‡ÙŠØ©:', error.message);\n    return {\n      success: true,\n      processed: 0,\n      message: 'Ù„Ø§ ØªÙˆØ¬Ø¯ ØªØ£Ø¬ÙŠØ±Ø§Øª ØªØ­ØªØ§Ø¬ Ù…Ø¹Ø§Ù„Ø¬Ø©'\n    };\n  }\n};\n\n// ==================== ADMIN DASHBOARD ENDPOINTS ====================\napi.getAllActiveRentals = async () => {\n  try {\n    console.log('ğŸ“‹ Ø¬Ù„Ø¨ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©');\n    const response = await api.get('/admin/rentals/active-all-branches');\n    if (response.success) {\n      const data = response.data || [];\n      const activeRentals = data.filter(r => r.status === 'active' || r.status === 'Ù†Ø´Ø·');\n      return {\n        success: true,\n        data: activeRentals,\n        count: activeRentals.length,\n        message: `ØªÙ… ØªØ­Ù…ÙŠÙ„ ${activeRentals.length} ØªØ£Ø¬ÙŠØ± Ù†Ø´Ø·`\n      };\n    }\n    return {\n      success: false,\n      data: [],\n      count: 0\n    };\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ getAllActiveRentals:', error.message);\n\n    // Ù…Ø­Ø§ÙˆÙ„Ø© Ø¨Ø¯ÙŠÙ„Ø©\n    try {\n      const altResponse = await api.get('/rentals/active', {\n        params: {\n          limit: 100\n        }\n      });\n      if (altResponse.success) {\n        const activeOnly = (altResponse.data || []).filter(r => r.status === 'active' || r.status === 'Ù†Ø´Ø·');\n        return {\n          success: true,\n          data: activeOnly,\n          count: activeOnly.length,\n          fromCache: true\n        };\n      }\n    } catch (altError) {\n      console.warn('âš ï¸ ÙØ´Ù„Øª Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø¨Ø¯ÙŠÙ„Ø©:', altError.message);\n    }\n    return {\n      success: true,\n      data: [],\n      count: 0\n    };\n  }\n};\napi.getTodayCompletedRentalsAllBranches = async () => {\n  try {\n    const response = await api.get('/admin/rentals/completed-today-all-branches');\n    if (response.success) {\n      return {\n        success: true,\n        data: response.data || [],\n        count: response.count || 0,\n        date: response.date\n      };\n    }\n    return {\n      success: false,\n      data: [],\n      count: 0\n    };\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ getTodayCompletedRentalsAllBranches:', error.message);\n\n    // Ù…Ø­Ø§ÙˆÙ„Ø© Ø¨Ø¯ÙŠÙ„Ø©\n    try {\n      const today = new Date().toISOString().split('T')[0];\n      const altResponse = await api.get('/rentals/completed', {\n        params: {\n          start_date: today,\n          end_date: today,\n          limit: 100\n        }\n      });\n      if (altResponse.success) {\n        var _altResponse$data;\n        return {\n          success: true,\n          data: altResponse.data || [],\n          count: ((_altResponse$data = altResponse.data) === null || _altResponse$data === void 0 ? void 0 : _altResponse$data.length) || 0,\n          date: today,\n          fromCache: true\n        };\n      }\n    } catch (altError) {\n      console.warn('âš ï¸ ÙØ´Ù„Øª Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø¨Ø¯ÙŠÙ„Ø©:', altError.message);\n    }\n    return {\n      success: true,\n      data: [],\n      count: 0\n    };\n  }\n};\napi.getRecentRentalsAllBranches = async (limit = 50) => {\n  try {\n    const response = await api.get('/admin/rentals/recent-all-branches', {\n      params: {\n        limit\n      }\n    });\n    if (response.success) {\n      return {\n        success: true,\n        data: response.data || [],\n        count: response.count || 0\n      };\n    }\n    return {\n      success: false,\n      data: [],\n      count: 0\n    };\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ getRecentRentalsAllBranches:', error.message);\n\n    // Ù…Ø­Ø§ÙˆÙ„Ø© Ø¨Ø¯ÙŠÙ„Ø©\n    try {\n      const altResponse = await api.get('/rentals', {\n        params: {\n          limit,\n          order_by: 'start_time',\n          order_direction: 'DESC'\n        }\n      });\n      if (altResponse.success) {\n        var _altResponse$data2;\n        return {\n          success: true,\n          data: altResponse.data || [],\n          count: ((_altResponse$data2 = altResponse.data) === null || _altResponse$data2 === void 0 ? void 0 : _altResponse$data2.length) || 0,\n          fromCache: true\n        };\n      }\n    } catch (altError) {\n      console.warn('âš ï¸ ÙØ´Ù„Øª Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø¨Ø¯ÙŠÙ„Ø©:', altError.message);\n    }\n    return {\n      success: true,\n      data: [],\n      count: 0\n    };\n  }\n};\napi.getAdminDashboardStats = async () => {\n  try {\n    const [branchesRes, activeRes, todayRes] = await Promise.allSettled([api.getBranches(), api.getAllActiveRentals(), api.getTodayCompletedRentalsAllBranches()]);\n    const stats = {\n      totalBranches: 0,\n      totalActiveRentals: 0,\n      todayCompletedRentals: 0,\n      todayRevenue: 0\n    };\n    if (branchesRes.status === 'fulfilled' && branchesRes.value.success) {\n      var _branchesRes$value$da;\n      stats.totalBranches = ((_branchesRes$value$da = branchesRes.value.data) === null || _branchesRes$value$da === void 0 ? void 0 : _branchesRes$value$da.length) || 0;\n    }\n    if (activeRes.status === 'fulfilled' && activeRes.value.success) {\n      stats.totalActiveRentals = activeRes.value.count || 0;\n    }\n    if (todayRes.status === 'fulfilled' && todayRes.value.success) {\n      stats.todayCompletedRentals = todayRes.value.count || 0;\n      if (todayRes.value.data) {\n        stats.todayRevenue = todayRes.value.data.reduce((sum, r) => sum + (parseFloat(r.final_amount) || parseFloat(r.total_amount) || 0), 0);\n      }\n    }\n    return {\n      success: true,\n      data: stats\n    };\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ getAdminDashboardStats:', error);\n    return {\n      success: false,\n      data: {\n        totalBranches: 0,\n        totalActiveRentals: 0,\n        todayCompletedRentals: 0,\n        todayRevenue: 0\n      }\n    };\n  }\n};\n\n// ==================== USERS MANAGEMENT ====================\napi.getUsers = async (params = {}) => {\n  try {\n    const response = await api.get('/users', {\n      params\n    });\n    return {\n      success: true,\n      data: response.data || [],\n      count: response.count || 0\n    };\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†:', error);\n    return {\n      success: false,\n      data: []\n    };\n  }\n};\napi.getUser = async id => {\n  try {\n    return await api.get(`/users/${id}`);\n  } catch (error) {\n    console.error(`âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ${id}:`, error);\n    return {\n      success: false,\n      message: 'ØªØ¹Ø°Ø± Ø¬Ù„Ø¨ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…'\n    };\n  }\n};\napi.createUser = async userData => {\n  try {\n    return await api.post('/users', userData);\n  } catch (error) {\n    var _error$response6, _error$response6$data;\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:', error);\n    return {\n      success: false,\n      message: ((_error$response6 = error.response) === null || _error$response6 === void 0 ? void 0 : (_error$response6$data = _error$response6.data) === null || _error$response6$data === void 0 ? void 0 : _error$response6$data.message) || 'ØªØ¹Ø°Ø± Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…'\n    };\n  }\n};\napi.updateUser = async (id, userData) => {\n  try {\n    return await api.put(`/users/${id}`, userData);\n  } catch (error) {\n    var _error$response7, _error$response7$data;\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:', error);\n    return {\n      success: false,\n      message: ((_error$response7 = error.response) === null || _error$response7 === void 0 ? void 0 : (_error$response7$data = _error$response7.data) === null || _error$response7$data === void 0 ? void 0 : _error$response7$data.message) || 'ØªØ¹Ø°Ø± ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…'\n    };\n  }\n};\napi.deleteUser = async (id, permanent = false) => {\n  try {\n    return await api.delete(`/users/${id}?permanent=${permanent}`);\n  } catch (error) {\n    var _error$response8, _error$response8$data;\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:', error);\n    return {\n      success: false,\n      message: ((_error$response8 = error.response) === null || _error$response8 === void 0 ? void 0 : (_error$response8$data = _error$response8.data) === null || _error$response8$data === void 0 ? void 0 : _error$response8$data.message) || 'ØªØ¹Ø°Ø± Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…'\n    };\n  }\n};\napi.deactivateUser = async id => {\n  try {\n    const response = await api.post(`/users/${id}/deactivate`);\n    return response;\n  } catch (error) {\n    var _error$response9, _error$response0, _error$response0$data;\n    console.error(`âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ${id}:`, error.message);\n    if (((_error$response9 = error.response) === null || _error$response9 === void 0 ? void 0 : _error$response9.status) === 404) {\n      return api.updateUser(id, {\n        is_active: false\n      });\n    }\n    return {\n      success: false,\n      message: ((_error$response0 = error.response) === null || _error$response0 === void 0 ? void 0 : (_error$response0$data = _error$response0.data) === null || _error$response0$data === void 0 ? void 0 : _error$response0$data.message) || 'ØªØ¹Ø°Ø± ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…'\n    };\n  }\n};\napi.activateUser = async id => {\n  try {\n    const response = await api.post(`/users/${id}/activate`);\n    return response;\n  } catch (error) {\n    var _error$response1, _error$response10, _error$response10$dat;\n    console.error(`âŒ Ø®Ø·Ø£ ÙÙŠ ØªÙ†Ø´ÙŠØ· Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ${id}:`, error.message);\n    if (((_error$response1 = error.response) === null || _error$response1 === void 0 ? void 0 : _error$response1.status) === 404) {\n      return api.updateUser(id, {\n        is_active: true\n      });\n    }\n    return {\n      success: false,\n      message: ((_error$response10 = error.response) === null || _error$response10 === void 0 ? void 0 : (_error$response10$dat = _error$response10.data) === null || _error$response10$dat === void 0 ? void 0 : _error$response10$dat.message) || 'ØªØ¹Ø°Ø± ØªÙ†Ø´ÙŠØ· Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…'\n    };\n  }\n};\napi.toggleUserStatus = async id => {\n  try {\n    const response = await api.post(`/users/${id}/toggle`);\n    return response;\n  } catch (error) {\n    var _error$response11, _error$response11$dat;\n    console.error(`âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ¨Ø¯ÙŠÙ„ Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ${id}:`, error.message);\n    try {\n      const userResponse = await api.getUser(id);\n      if (userResponse.success && userResponse.data) {\n        const currentStatus = userResponse.data.is_active;\n        return api.updateUser(id, {\n          is_active: !currentStatus\n        });\n      }\n    } catch (userError) {\n      console.warn('âš ï¸ ÙØ´Ù„ Ø¬Ù„Ø¨ Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:', userError.message);\n    }\n    return {\n      success: false,\n      message: ((_error$response11 = error.response) === null || _error$response11 === void 0 ? void 0 : (_error$response11$dat = _error$response11.data) === null || _error$response11$dat === void 0 ? void 0 : _error$response11$dat.message) || 'ØªØ¹Ø°Ø± ØªØ¨Ø¯ÙŠÙ„ Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…'\n    };\n  }\n};\n\n// ==================== DASHBOARD & STATS ====================\napi.getSimpleStats = async () => {\n  try {\n    const response = await api.get('/dashboard/stats/simple');\n    return response;\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…Ø¨Ø³Ø·Ø©:', error);\n    return {\n      success: false,\n      data: {\n        availableGames: 0,\n        totalGames: 0,\n        todayRevenue: 0,\n        todayRentals: 0,\n        activeRentals: 0\n      }\n    };\n  }\n};\napi.getTodayStats = async branchId => {\n  try {\n    const today = new Date().toISOString().split('T')[0];\n    const response = await api.get('/rentals', {\n      params: {\n        branch_id: branchId,\n        status: 'completed',\n        start_date: today,\n        end_date: today\n      }\n    });\n    if (response.success && response.data) {\n      const revenue = response.data.reduce((sum, r) => sum + (parseFloat(r.final_amount) || parseFloat(r.total_amount) || 0), 0);\n      return {\n        success: true,\n        data: {\n          rentals: response.data,\n          count: response.data.length,\n          revenue: revenue,\n          date: today\n        }\n      };\n    }\n    return {\n      success: true,\n      data: {\n        rentals: [],\n        count: 0,\n        revenue: 0,\n        date: today\n      }\n    };\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ÙŠÙˆÙ…:', error);\n    return {\n      success: false,\n      data: {\n        rentals: [],\n        count: 0,\n        revenue: 0,\n        date: new Date().toISOString().split('T')[0]\n      }\n    };\n  }\n};\n\n// ==================== REPORTS ====================\napi.getRentalsReport = async (params = {}) => {\n  try {\n    return await api.get('/reports/rentals', {\n      params\n    });\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ ØªÙ‚Ø±ÙŠØ± Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª:', error);\n    return {\n      success: false,\n      data: []\n    };\n  }\n};\napi.getRevenueReport = async (params = {}) => {\n  try {\n    return await api.get('/reports/revenue', {\n      params\n    });\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª:', error);\n    return {\n      success: false,\n      data: []\n    };\n  }\n};\n\n// ==================== HEALTH & TEST ====================\napi.healthCheck = async () => {\n  try {\n    return await api.get('/health');\n  } catch (error) {\n    return {\n      success: false,\n      message: 'ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…'\n    };\n  }\n};\napi.testConnection = async () => {\n  try {\n    const response = await api.get('/health');\n    return {\n      success: true,\n      message: 'âœ… Ø§ØªØµØ§Ù„ API ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­',\n      data: response\n    };\n  } catch (error) {\n    return {\n      success: false,\n      message: 'âŒ ÙØ´Ù„ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„: ' + (error.message || 'ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…')\n    };\n  }\n};\napi.checkSystemHealth = async () => {\n  try {\n    const checks = [];\n\n    // 1. Ø§ØªØµØ§Ù„ Ø§Ù„Ø®Ø§Ø¯Ù…\n    try {\n      const health = await api.healthCheck();\n      checks.push({\n        name: 'Ø§ØªØµØ§Ù„ Ø§Ù„Ø®Ø§Ø¯Ù…',\n        status: health.success ? 'success' : 'error',\n        message: health.success ? 'âœ… Ù…ØªØµÙ„' : 'âŒ ØºÙŠØ± Ù…ØªØµÙ„'\n      });\n    } catch {\n      checks.push({\n        name: 'Ø§ØªØµØ§Ù„ Ø§Ù„Ø®Ø§Ø¯Ù…',\n        status: 'error',\n        message: 'âŒ ØºÙŠØ± Ù…ØªØµÙ„'\n      });\n    }\n\n    // 2. Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©\n    const authStatus = api.checkAuthStatus();\n    checks.push({\n      name: 'Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©',\n      status: authStatus.isAuthenticated ? 'success' : 'warning',\n      message: authStatus.isAuthenticated ? `âœ… Ù…ØµØ§Ø¯Ù‚` : 'âš ï¸ ØºÙŠØ± Ù…ØµØ§Ø¯Ù‚'\n    });\n    const hasErrors = checks.some(c => c.status === 'error');\n    return {\n      success: !hasErrors,\n      checks,\n      summary: {\n        total: checks.length,\n        success: checks.filter(c => c.status === 'success').length,\n        warning: checks.filter(c => c.status === 'warning').length,\n        error: checks.filter(c => c.status === 'error').length\n      },\n      message: hasErrors ? 'âŒ Ù‡Ù†Ø§Ùƒ Ù…Ø´Ø§ÙƒÙ„ ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…' : 'âœ… Ø§Ù„Ù†Ø¸Ø§Ù… ÙŠØ¹Ù…Ù„'\n    };\n  } catch (error) {\n    return {\n      success: false,\n      message: 'ØªØ¹Ø°Ø± Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ù†Ø¸Ø§Ù…'\n    };\n  }\n};\n\n// ==================== Ø§Ù„ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø£ÙˆÙ„ÙŠØ© ====================\nconst savedToken = localStorage.getItem('token');\nif (savedToken) {\n  api.setToken(savedToken);\n}\nexport default api;","map":{"version":3,"names":["axios","detectEnvironment","env","process","REACT_APP_ENVIRONMENT","apiUrl","REACT_APP_API_URL","console","log","api","create","baseURL","timeout","headers","generateRentalNumber","prefix","Date","now","toString","slice","Math","floor","random","generateShiftNumber","interceptors","request","use","config","token","localStorage","getItem","authToken","startsWith","substring","Authorization","NODE_ENV","_config$method","method","toUpperCase","url","fullUrl","tokenExists","error","Promise","reject","response","status","data","success","message","_error$config","_error$response","_error$response2","_error$response3","_error$response4","_error$response4$data","_error$response5","includes","ngrokError","setToken","cleanToken","defaults","common","setItem","removeItem","checkAuthStatus","user","isAuthenticated","JSON","parse","getCurrentUser","userStr","getEnvironmentInfo","environment","isNgrok","nodeEnv","validateToken","valid","parts","split","length","get","userId","parseInt","login","email","password","post","stringify","toISOString","code","logout","redirect","window","location","href","getProfile","getBranches","params","count","getBranch","branchId","id","name","city","contact_phone","opening_time","closing_time","is_active","fromCache","createBranch","branchData","updateBranch","put","deleteBranch","permanent","delete","getBranchGames","stats","getGames","requestParams","getAvailableGames","getGameById","createGame","gameData","updateGame","deleteGame","loadGamesSmart","branch_id","warn","localGames","games","defaultGames","category","price_per_15min","getCurrentShift","exists","startShift","openingCash","endpoints","opening_cash","endpoint","endShift","shiftId","closingData","closing_cash","notes","altResponse","altError","getShiftDetails","getAllActiveShifts","createRental","rentalData","items","customer_name","customer_phone","startOpenTime","game_id","child_name","createFixedRental","createOpenTimeRental","createSmartRental","rental_type","createSimpleRental","completeOpenRental","rentalId","paymentData","payment_method","final_amount","actual_minutes","processed_locally","completeFixedRental","completeRental","cancelEarlyRental","reason","refund_amount","getActiveRentals","getCompletedRentals","getRentalById","getActiveRentalsForCurrentShift","shift_id","rentals","Array","isArray","shiftRentals","filter","r","getCompletedRentalsForShift","date","limit","_response$data","filteredRentals","autoCompleteExpiredRentals","processed","getAllActiveRentals","activeRentals","activeOnly","getTodayCompletedRentalsAllBranches","today","start_date","end_date","_altResponse$data","getRecentRentalsAllBranches","order_by","order_direction","_altResponse$data2","getAdminDashboardStats","branchesRes","activeRes","todayRes","allSettled","totalBranches","totalActiveRentals","todayCompletedRentals","todayRevenue","value","_branchesRes$value$da","reduce","sum","parseFloat","total_amount","getUsers","getUser","createUser","userData","_error$response6","_error$response6$data","updateUser","_error$response7","_error$response7$data","deleteUser","_error$response8","_error$response8$data","deactivateUser","_error$response9","_error$response0","_error$response0$data","activateUser","_error$response1","_error$response10","_error$response10$dat","toggleUserStatus","_error$response11","_error$response11$dat","userResponse","currentStatus","userError","getSimpleStats","availableGames","totalGames","todayRentals","getTodayStats","revenue","getRentalsReport","getRevenueReport","healthCheck","testConnection","checkSystemHealth","checks","health","push","authStatus","hasErrors","some","c","summary","total","warning","savedToken"],"sources":["C:/Users/HP/OneDrive/project/l3bty-rental-system/frontend/src/services/api.js"],"sourcesContent":["import axios from 'axios';\r\n\r\n// ==================== Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø© ====================\r\nconst detectEnvironment = () => {\r\n  const env = process.env.REACT_APP_ENVIRONMENT || 'development';\r\n  const apiUrl = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\r\n  \r\n  console.log(`ğŸŒ Ø§Ù„Ø¨ÙŠØ¦Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©: ${env}`);\r\n  console.log(`ğŸŒ Ø¹Ù†ÙˆØ§Ù† API: ${apiUrl}`);\r\n  \r\n  return { env, apiUrl };\r\n};\r\n\r\nconst { env, apiUrl } = detectEnvironment();\r\nconsole.log('ğŸŒ API Base URL:', apiUrl);\r\n\r\n// ==================== Ø¥Ù†Ø´Ø§Ø¡ axios instance ====================\r\nconst api = axios.create({\r\n  baseURL: apiUrl,\r\n  timeout: 30000,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n    'Accept': 'application/json',\r\n    'Accept-Language': 'ar'\r\n  }\r\n});\r\n\r\n// ==================== Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø© ====================\r\nconst generateRentalNumber = (prefix = 'RNT') => \r\n  `${prefix}-${Date.now().toString().slice(-8)}-${Math.floor(Math.random() * 1000)}`;\r\n\r\nconst generateShiftNumber = () => `SHIFT-${Date.now().toString().slice(-8)}`;\r\n\r\n// ==================== Interceptors ====================\r\napi.interceptors.request.use(\r\n  (config) => {\r\n    const token = localStorage.getItem('token');\r\n    \r\n    let authToken = token;\r\n    if (token && token.startsWith('Bearer ')) {\r\n      authToken = token.substring(7);\r\n    }\r\n    \r\n    if (authToken) {\r\n      config.headers.Authorization = `Bearer ${authToken}`;\r\n    }\r\n    \r\n    if (process.env.NODE_ENV === 'development') {\r\n      console.log('ğŸŒ API Request:', {\r\n        method: config.method?.toUpperCase(),\r\n        url: config.url,\r\n        fullUrl: `${config.baseURL}${config.url}`,\r\n        tokenExists: !!authToken\r\n      });\r\n    }\r\n    \r\n    return config;\r\n  },\r\n  (error) => {\r\n    console.error('âŒ Request Interceptor Error:', error);\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\napi.interceptors.response.use(\r\n  (response) => {\r\n    if (process.env.NODE_ENV === 'development') {\r\n      console.log('âœ… API Response:', {\r\n        url: response.config.url,\r\n        status: response.status\r\n      });\r\n    }\r\n    \r\n    if (response.data && typeof response.data === 'object') {\r\n      return response.data;\r\n    }\r\n    \r\n    return {\r\n      success: true,\r\n      status: response.status,\r\n      data: response.data,\r\n      message: 'ØªÙ… ØªÙ†ÙÙŠØ° Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­'\r\n    };\r\n  },\r\n  (error) => {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ API:', {\r\n      url: error.config?.url,\r\n      status: error.response?.status,\r\n      message: error.message\r\n    });\r\n    \r\n    if (env === 'ngrok' && error.message.includes('Network Error')) {\r\n      return {\r\n        success: false,\r\n        status: 0,\r\n        message: 'Ø®Ø·Ø£ ÙÙŠ Ø§ØªØµØ§Ù„ ngrok. ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ø§Ù„Ø®Ø§Ø¯Ù… ÙŠØ¹Ù…Ù„',\r\n        ngrokError: true\r\n      };\r\n    }\r\n    \r\n    if (error.response?.status === 500) {\r\n      return {\r\n        success: false,\r\n        status: 500,\r\n        message: 'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø®Ø§Ø¯Ù…'\r\n      };\r\n    }\r\n    \r\n    return {\r\n      success: false,\r\n      status: error.response?.status || 0,\r\n      message: error.response?.data?.message || error.message || 'Ø­Ø¯Ø« Ø®Ø·Ø£',\r\n      data: error.response?.data\r\n    };\r\n  }\r\n);\r\n\r\n// ==================== Ø¯ÙˆØ§Ù„ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªÙˆÙƒÙ† ====================\r\napi.setToken = (token) => {\r\n  if (token) {\r\n    let cleanToken = token;\r\n    if (token.startsWith('Bearer ')) {\r\n      cleanToken = token.substring(7);\r\n    }\r\n    \r\n    api.defaults.headers.common['Authorization'] = `Bearer ${cleanToken}`;\r\n    localStorage.setItem('token', cleanToken);\r\n  } else {\r\n    delete api.defaults.headers.common['Authorization'];\r\n    localStorage.removeItem('token');\r\n  }\r\n};\r\n\r\napi.checkAuthStatus = () => {\r\n  const token = localStorage.getItem('token');\r\n  const user = localStorage.getItem('user');\r\n  \r\n  return {\r\n    isAuthenticated: !!token,\r\n    token: token,\r\n    user: user ? JSON.parse(user) : null\r\n  };\r\n};\r\n\r\napi.getCurrentUser = () => {\r\n  try {\r\n    const userStr = localStorage.getItem('user');\r\n    return userStr ? JSON.parse(userStr) : null;\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ:', error);\r\n    return null;\r\n  }\r\n};\r\n\r\napi.getEnvironmentInfo = () => ({\r\n  environment: env,\r\n  apiUrl: apiUrl,\r\n  isNgrok: env === 'ngrok' || apiUrl.includes('ngrok'),\r\n  nodeEnv: process.env.NODE_ENV\r\n});\r\n\r\napi.validateToken = async () => {\r\n  try {\r\n    const token = localStorage.getItem('token');\r\n    \r\n    if (!token) {\r\n      return { valid: false, message: 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØªÙˆÙƒÙ†' };\r\n    }\r\n    \r\n    const parts = token.split('_');\r\n    if (parts.length < 2) {\r\n      return { valid: false, message: 'ØªÙˆÙƒÙ† ØºÙŠØ± ØµØ§Ù„Ø­' };\r\n    }\r\n    \r\n    const response = await api.get('/auth/profile');\r\n    \r\n    if (response.success) {\r\n      return { \r\n        valid: true, \r\n        user: response.data,\r\n        userId: parseInt(parts[1])\r\n      };\r\n    }\r\n    \r\n    return { valid: false, message: response.message };\r\n  } catch (error) {\r\n    console.error('âŒ Token validation error:', error);\r\n    return { valid: false, message: error.message };\r\n  }\r\n};\r\n\r\n// ==================== AUTH ENDPOINTS ====================\r\napi.login = async (email, password) => {\r\n  try {\r\n    console.log('ğŸ” Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„:', email);\r\n    \r\n    const response = await api.post('/auth/login', { email, password });\r\n    \r\n    if (response.success && response.token) {\r\n      api.setToken(response.token);\r\n      \r\n      if (response.user) {\r\n        localStorage.setItem('user', JSON.stringify(response.user));\r\n        localStorage.setItem('lastLogin', new Date().toISOString());\r\n      }\r\n      \r\n      return {\r\n        success: true,\r\n        data: response\r\n      };\r\n    }\r\n    \r\n    return {\r\n      success: false,\r\n      message: response.message || 'ÙØ´Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„'\r\n    };\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„:', error);\r\n    \r\n    if (error.code === 'ECONNABORTED') {\r\n      return { success: false, message: 'Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù…Ù‡Ù„Ø©. ØªØ£ÙƒØ¯ Ù…Ù† ØªØ´ØºÙŠÙ„ Ø§Ù„Ø®Ø§Ø¯Ù…' };\r\n    }\r\n    \r\n    if (error.status === 401) {\r\n      return { success: false, message: 'Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©' };\r\n    }\r\n    \r\n    return { success: false, message: 'ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…' };\r\n  }\r\n};\r\n\r\napi.logout = async (redirect = true) => {\r\n  try {\r\n    await api.post('/auth/logout');\r\n  } catch (error) {\r\n    console.log('âš ï¸ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù… Ù„Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬');\r\n  } finally {\r\n    api.setToken(null);\r\n    localStorage.removeItem('user');\r\n    localStorage.removeItem('lastLogin');\r\n    \r\n    if (redirect) {\r\n      window.location.href = '/login';\r\n    }\r\n  }\r\n};\r\n\r\napi.getProfile = async () => {\r\n  try {\r\n    return await api.get('/auth/profile');\r\n  } catch (error) {\r\n    return { success: false, message: 'ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ' };\r\n  }\r\n};\r\n\r\n// ==================== BRANCHES ENDPOINTS ====================\r\napi.getBranches = async (params = {}) => {\r\n  try {\r\n    const response = await api.get('/branches', { params });\r\n    return {\r\n      success: true,\r\n      data: response.data || [],\r\n      count: response.count || 0\r\n    };\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„ÙØ±ÙˆØ¹:', error);\r\n    return { success: false, data: [] };\r\n  }\r\n};\r\n\r\napi.getBranch = async (branchId) => {\r\n  try {\r\n    const response = await api.get(`/branches/${branchId}`);\r\n    \r\n    if (response.success) {\r\n      return { success: true, data: response.data };\r\n    }\r\n    \r\n    return {\r\n      success: true,\r\n      data: {\r\n        id: branchId,\r\n        name: `ÙØ±Ø¹ ${branchId}`,\r\n        location: 'Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©',\r\n        city: 'Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©',\r\n        contact_phone: '01000000000',\r\n        opening_time: '09:00:00',\r\n        closing_time: '22:00:00',\r\n        is_active: true\r\n      },\r\n      fromCache: true\r\n    };\r\n  } catch (error) {\r\n    console.error(`âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ ÙØ±Ø¹ ${branchId}:`, error.message);\r\n    return {\r\n      success: true,\r\n      data: {\r\n        id: branchId,\r\n        name: `ÙØ±Ø¹ ${branchId}`,\r\n        location: 'Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©',\r\n        city: 'Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©',\r\n        contact_phone: '01000000000',\r\n        opening_time: '09:00:00',\r\n        closing_time: '22:00:00',\r\n        is_active: true\r\n      },\r\n      fromCache: true\r\n    };\r\n  }\r\n};\r\n\r\napi.createBranch = async (branchData) => {\r\n  try {\r\n    return await api.post('/branches', branchData);\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ±Ø¹:', error);\r\n    return { success: false, message: error.message || 'ØªØ¹Ø°Ø± Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ±Ø¹' };\r\n  }\r\n};\r\n\r\napi.updateBranch = async (id, branchData) => {\r\n  try {\r\n    return await api.put(`/branches/${id}`, branchData);\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙØ±Ø¹:', error);\r\n    return { success: false, message: error.message || 'ØªØ¹Ø°Ø± ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙØ±Ø¹' };\r\n  }\r\n};\r\n\r\napi.deleteBranch = async (id, permanent = false) => {\r\n  try {\r\n    return await api.delete(`/branches/${id}?permanent=${permanent}`);\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„ÙØ±Ø¹:', error);\r\n    return { success: false, message: error.message || 'ØªØ¹Ø°Ø± Ø­Ø°Ù Ø§Ù„ÙØ±Ø¹' };\r\n  }\r\n};\r\n\r\napi.getBranchGames = async (branchId) => {\r\n  try {\r\n    const response = await api.get(`/branches/${branchId}/games`);\r\n    return {\r\n      success: true,\r\n      data: response.data || [],\r\n      stats: response.stats || {}\r\n    };\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„ÙØ±Ø¹:', error);\r\n    return { success: false, data: [] };\r\n  }\r\n};\r\n\r\n// ==================== GAMES ENDPOINTS ====================\r\napi.getGames = async (params = {}) => {\r\n  try {\r\n    const requestParams = { ...params };\r\n    delete requestParams.status;\r\n    \r\n    const response = await api.get('/games', { params: requestParams, timeout: 15000 });\r\n    \r\n    if (response.success) {\r\n      return {\r\n        success: true,\r\n        data: response.data || [],\r\n        stats: response.stats || {},\r\n        message: response.message || 'ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø¨Ù†Ø¬Ø§Ø­'\r\n      };\r\n    }\r\n    \r\n    return { success: false, data: [] };\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ getGames:', error);\r\n    return { success: false, data: [] };\r\n  }\r\n};\r\n\r\napi.getAvailableGames = async (params = {}) => {\r\n  try {\r\n    const response = await api.get('/games/available', { params });\r\n    return {\r\n      success: true,\r\n      data: response.data || [],\r\n      count: response.count || 0\r\n    };\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ù…ØªØ§Ø­Ø©:', error);\r\n    return { success: false, data: [] };\r\n  }\r\n};\r\n\r\napi.getGameById = async (id) => {\r\n  try {\r\n    return await api.get(`/games/${id}`);\r\n  } catch (error) {\r\n    console.error(`âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ù„Ø¹Ø¨Ø© ${id}:`, error);\r\n    return { success: false, message: 'ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù„Ø¹Ø¨Ø©' };\r\n  }\r\n};\r\n\r\napi.createGame = async (gameData) => {\r\n  try {\r\n    return await api.post('/games', gameData);\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©:', error);\r\n    return { success: false, message: error.message || 'ØªØ¹Ø°Ø± Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©' };\r\n  }\r\n};\r\n\r\napi.updateGame = async (id, gameData) => {\r\n  try {\r\n    return await api.put(`/games/${id}`, gameData);\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù„Ø¹Ø¨Ø©:', error);\r\n    return { success: false, message: error.message || 'ØªØ¹Ø°Ø± ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù„Ø¹Ø¨Ø©' };\r\n  }\r\n};\r\n\r\napi.deleteGame = async (id, permanent = false) => {\r\n  try {\r\n    return await api.delete(`/games/${id}?permanent=${permanent}`);\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù„Ø¹Ø¨Ø©:', error);\r\n    return { success: false, message: error.message || 'ØªØ¹Ø°Ø± Ø­Ø°Ù Ø§Ù„Ù„Ø¹Ø¨Ø©' };\r\n  }\r\n};\r\n\r\n// Ø¯Ø§Ù„Ø© Ø°ÙƒÙŠØ© Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ù…Ø¹ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ\r\napi.loadGamesSmart = async (branchId) => {\r\n  try {\r\n    console.log(`ğŸ® ØªØ­Ù…ÙŠÙ„ Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„ÙØ±Ø¹ ${branchId} Ø¨Ø°ÙƒØ§Ø¡...`);\r\n    \r\n    // Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰: Ø¬Ù„Ø¨ Ù…Ù† Ø§Ù„Ø®Ø§Ø¯Ù…\r\n    try {\r\n      const response = await api.get('/games', { params: { branch_id: branchId } });\r\n      \r\n      if (response.success && response.data && response.data.length > 0) {\r\n        // ØªØ®Ø²ÙŠÙ† Ù…Ø­Ù„ÙŠ Ù„Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ\r\n        localStorage.setItem(`branch_${branchId}_games`, JSON.stringify(response.data));\r\n        \r\n        return {\r\n          success: true,\r\n          data: response.data,\r\n          message: 'ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø¨Ù†Ø¬Ø§Ø­',\r\n          count: response.data.length\r\n        };\r\n      }\r\n    } catch (error) {\r\n      console.warn('âš ï¸ ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ù…Ù† Ø§Ù„Ø®Ø§Ø¯Ù…:', error.message);\r\n    }\r\n    \r\n    // Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©: Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ\r\n    const localGames = localStorage.getItem(`branch_${branchId}_games`);\r\n    if (localGames) {\r\n      const games = JSON.parse(localGames);\r\n      return {\r\n        success: true,\r\n        data: games,\r\n        message: 'Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­Ù„ÙŠØ©',\r\n        fromCache: true,\r\n        count: games.length\r\n      };\r\n    }\r\n    \r\n    // Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø«Ø§Ù„Ø«Ø©: Ø¨ÙŠØ§Ù†Ø§Øª Ø§ÙØªØ±Ø§Ø¶ÙŠØ©\r\n    const defaultGames = [\r\n      { id: 1, name: 'Ø³ÙŠØ§Ø±Ø© ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ©', category: 'Ø³ÙŠØ§Ø±Ø§Øª', price_per_15min: 50, branch_id: branchId || 1, status: 'available', is_active: true },\r\n      { id: 2, name: 'Ø³ÙƒÙˆØªØ± ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠ', category: 'Ø³ÙƒÙˆØªØ±', price_per_15min: 30, branch_id: branchId || 1, status: 'available', is_active: true },\r\n      { id: 3, name: 'Ø¯Ø±Ø§Ø¬Ø© Ù†Ø§Ø±ÙŠØ©', category: 'Ø¯Ø±Ø§Ø¬Ø§Øª', price_per_15min: 40, branch_id: branchId || 1, status: 'available', is_active: true }\r\n    ];\r\n    \r\n    return {\r\n      success: true,\r\n      data: defaultGames,\r\n      message: 'Ø¨ÙŠØ§Ù†Ø§Øª Ø£Ù„Ø¹Ø§Ø¨ Ø§ÙØªØ±Ø§Ø¶ÙŠØ©',\r\n      fromCache: true,\r\n      count: defaultGames.length\r\n    };\r\n  } catch (error) {\r\n    console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ loadGamesSmart:', error);\r\n    return { success: true, data: [], count: 0 };\r\n  }\r\n};\r\n\r\n// ==================== SHIFTS ENDPOINTS ====================\r\napi.getCurrentShift = async () => {\r\n  try {\r\n    const response = await api.get('/shifts/current');\r\n    \r\n    if (response.success && response.data) {\r\n      return {\r\n        success: true,\r\n        data: response.data,\r\n        exists: true,\r\n        message: 'ØªÙ… Ø¬Ù„Ø¨ Ø§Ù„Ø´ÙŠÙØª Ø§Ù„Ù†Ø´Ø·'\r\n      };\r\n    }\r\n    \r\n    return {\r\n      success: true,\r\n      data: null,\r\n      exists: false,\r\n      message: 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø´ÙŠÙØª Ù†Ø´Ø·'\r\n    };\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø´ÙŠÙØª Ø§Ù„Ø­Ø§Ù„ÙŠ:', error.message);\r\n    return { success: true, data: null, exists: false };\r\n  }\r\n};\r\n\r\napi.startShift = async (openingCash = 0) => {\r\n  try {\r\n    console.log('ğŸ”„ Ø¨Ø¯Ø¡ Ø´ÙŠÙØª Ø¬Ø¯ÙŠØ¯...');\r\n    \r\n    // Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ù…ØªØ¹Ø¯Ø¯Ø©\r\n    const endpoints = [\r\n      { method: 'post', url: '/shifts/start', data: { opening_cash: openingCash } },\r\n      { method: 'post', url: '/shifts/start-simple', data: {} },\r\n      { method: 'post', url: '/shifts/start-clean', data: {} }\r\n    ];\r\n    \r\n    for (const endpoint of endpoints) {\r\n      try {\r\n        const response = await api[endpoint.method](endpoint.url, endpoint.data);\r\n        if (response && response.success) {\r\n          console.log(`âœ… Ù†Ø¬Ø­ Ø¨Ø¯Ø¡ Ø§Ù„Ø´ÙŠÙØª Ø¹Ø¨Ø± ${endpoint.url}`);\r\n          \r\n          // ØªØ®Ø²ÙŠÙ† Ø§Ù„Ø´ÙŠÙØª Ù…Ø­Ù„ÙŠØ§Ù‹\r\n          if (response.data) {\r\n            localStorage.setItem('current_shift', JSON.stringify(response.data));\r\n          }\r\n          \r\n          return response;\r\n        }\r\n      } catch (error) {\r\n        console.warn(`âš ï¸ ÙØ´Ù„ ${endpoint.url}:`, error.message);\r\n      }\r\n    }\r\n    \r\n    return {\r\n      success: false,\r\n      message: 'ÙØ´Ù„ ÙÙŠ Ø¨Ø¯Ø¡ Ø§Ù„Ø´ÙŠÙØª. ØªØ£ÙƒØ¯ Ù…Ù† ØªØ´ØºÙŠÙ„ Ø§Ù„Ø®Ø§Ø¯Ù…'\r\n    };\r\n  } catch (error) {\r\n    console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ startShift:', error);\r\n    return { success: false, message: 'Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹' };\r\n  }\r\n};\r\n\r\napi.endShift = async (shiftId, closingData = {}) => {\r\n  try {\r\n    console.log(`ğŸ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø´ÙŠÙØª ${shiftId}...`);\r\n    \r\n    const response = await api.put(`/shifts/${shiftId}/end`, {\r\n      closing_cash: closingData.closing_cash,\r\n      notes: closingData.notes || 'ØªÙ… Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø´ÙŠÙØª'\r\n    });\r\n    \r\n    if (response.success) {\r\n      localStorage.removeItem('current_shift');\r\n    }\r\n    \r\n    return response;\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø´ÙŠÙØª:', error);\r\n    \r\n    // Ù…Ø­Ø§ÙˆÙ„Ø© Ø¨Ø¯ÙŠÙ„Ø©\r\n    try {\r\n      const altResponse = await api.post(`/shifts/${shiftId}/end-quick`, {\r\n        notes: closingData.notes || 'Ø¥Ù†Ù‡Ø§Ø¡ Ø³Ø±ÙŠØ¹'\r\n      });\r\n      \r\n      if (altResponse.success) {\r\n        localStorage.removeItem('current_shift');\r\n      }\r\n      \r\n      return altResponse;\r\n    } catch (altError) {\r\n      return { success: false, message: error.message || 'ØªØ¹Ø°Ø± Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø´ÙŠÙØª' };\r\n    }\r\n  }\r\n};\r\n\r\napi.getShiftDetails = async (shiftId) => {\r\n  try {\r\n    const response = await api.get(`/shifts/${shiftId}/details`);\r\n    return {\r\n      success: true,\r\n      data: response.data || {},\r\n      stats: response.stats || {}\r\n    };\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø´ÙŠÙØª:', error);\r\n    return { success: false, data: null };\r\n  }\r\n};\r\n\r\napi.getAllActiveShifts = async () => {\r\n  try {\r\n    const response = await api.get('/shifts/active-all');\r\n    return {\r\n      success: true,\r\n      data: response.data || [],\r\n      count: response.count || 0\r\n    };\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø´ÙŠÙØªØ§Øª Ø§Ù„Ù†Ø´Ø·Ø©:', error);\r\n    return { success: false, data: [] };\r\n  }\r\n};\r\n\r\n// ==================== RENTALS ENDPOINTS ====================\r\n\r\n// Ø¥Ù†Ø´Ø§Ø¡ ØªØ£Ø¬ÙŠØ± Ø¬Ø¯ÙŠØ¯ Ù…Ø¹ Ø¹Ù†Ø§ØµØ± Ù…ØªØ¹Ø¯Ø¯Ø© (Ù†Ø¸Ø§Ù… Cart)\r\napi.createRental = async (rentalData) => {\r\n  try {\r\n    console.log('ğŸ›’ Ø¥Ù†Ø´Ø§Ø¡ ØªØ£Ø¬ÙŠØ± Ø¬Ø¯ÙŠØ¯ Ù…Ø¹ Ø¹Ù†Ø§ØµØ±:', rentalData);\r\n    \r\n    const response = await api.post('/rentals', {\r\n      items: rentalData.items || [],\r\n      customer_name: rentalData.customer_name,\r\n      customer_phone: rentalData.customer_phone || '',\r\n      notes: rentalData.notes || ''\r\n    });\r\n    \r\n    return response;\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ±:', error);\r\n    return { success: false, message: error.message || 'ÙØ´Ù„ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ±' };\r\n  }\r\n};\r\n\r\n// Ø¨Ø¯Ø¡ ÙˆÙ‚Øª Ù…ÙØªÙˆØ­\r\napi.startOpenTime = async (rentalData) => {\r\n  try {\r\n    console.log('ğŸ•’ Ø¨Ø¯Ø¡ ÙˆÙ‚Øª Ù…ÙØªÙˆØ­:', rentalData);\r\n    \r\n    const response = await api.post('/rentals/open-time', {\r\n      game_id: rentalData.game_id,\r\n      customer_name: rentalData.customer_name,\r\n      customer_phone: rentalData.customer_phone || '',\r\n      child_name: rentalData.child_name || ''\r\n    });\r\n    \r\n    return response;\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¨Ø¯Ø¡ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ÙØªÙˆØ­:', error);\r\n    return { success: false, message: error.message || 'ÙØ´Ù„ Ø¨Ø¯Ø¡ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ÙØªÙˆØ­' };\r\n  }\r\n};\r\n\r\n// Ø¥Ù†Ø´Ø§Ø¡ ÙˆÙ‚Øª Ø«Ø§Ø¨Øª\r\napi.createFixedRental = async (rentalData) => {\r\n  try {\r\n    console.log('â° Ø¥Ù†Ø´Ø§Ø¡ ÙˆÙ‚Øª Ø«Ø§Ø¨Øª:', rentalData);\r\n    \r\n    const response = await api.post('/rentals/ultra-simple', {\r\n      game_id: rentalData.game_id,\r\n      customer_name: rentalData.customer_name,\r\n      customer_phone: rentalData.customer_phone || '00000000000'\r\n    });\r\n    \r\n    return response;\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø«Ø§Ø¨Øª:', error);\r\n    return { success: false, message: error.message || 'ÙØ´Ù„ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø«Ø§Ø¨Øª' };\r\n  }\r\n};\r\n\r\n// Ø¥Ù†Ø´Ø§Ø¡ ÙˆÙ‚Øª Ù…ÙØªÙˆØ­ (Ø¨Ø¯ÙŠÙ„ Ø¨Ø³ÙŠØ·)\r\napi.createOpenTimeRental = async (rentalData) => {\r\n  try {\r\n    return await api.startOpenTime(rentalData);\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ createOpenTimeRental:', error);\r\n    return { success: false, message: error.message };\r\n  }\r\n};\r\n\r\n// Ø¥Ù†Ø´Ø§Ø¡ ØªØ£Ø¬ÙŠØ± Ø°ÙƒÙŠ (ÙŠØ¯Ø¹Ù… Ø§Ù„Ø«Ø§Ø¨Øª ÙˆØ§Ù„Ù…ÙØªÙˆØ­)\r\napi.createSmartRental = async (rentalData) => {\r\n  try {\r\n    console.log('ğŸ¤– Ø¥Ù†Ø´Ø§Ø¡ ØªØ£Ø¬ÙŠØ± Ø°ÙƒÙŠ:', rentalData);\r\n    \r\n    if (rentalData.rental_type === 'open') {\r\n      return await api.startOpenTime(rentalData);\r\n    } else {\r\n      return await api.createFixedRental(rentalData);\r\n    }\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ± Ø§Ù„Ø°ÙƒÙŠ:', error);\r\n    return { success: false, message: error.message };\r\n  }\r\n};\r\n\r\n// Ø¥Ù†Ø´Ø§Ø¡ ØªØ£Ø¬ÙŠØ± Ø¨Ø³ÙŠØ· (Ù„Ù„ØªÙˆØ§ÙÙ‚ Ù…Ø¹ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù‚Ø¯ÙŠÙ…)\r\napi.createSimpleRental = async (rentalData) => {\r\n  return api.createFixedRental(rentalData);\r\n};\r\n\r\n// Ø¥Ù†Ù‡Ø§Ø¡ ÙˆÙ‚Øª Ù…ÙØªÙˆØ­\r\napi.completeOpenRental = async (rentalId, paymentData = {}) => {\r\n  try {\r\n    console.log(`âœ… Ø¥Ù†Ù‡Ø§Ø¡ ÙˆÙ‚Øª Ù…ÙØªÙˆØ­ ${rentalId}`);\r\n    \r\n    const response = await api.post(`/rentals/${rentalId}/complete-open`, {\r\n      payment_method: paymentData.payment_method || 'ÙƒØ§Ø´'\r\n    });\r\n    \r\n    return response;\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ÙØªÙˆØ­:', error);\r\n    \r\n    // Ù…Ø¹Ø§Ù„Ø¬Ø© Ù…Ø­Ù„ÙŠØ© Ø¥Ø°Ø§ ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„\r\n    return {\r\n      success: true,\r\n      data: {\r\n        id: rentalId,\r\n        final_amount: paymentData.final_amount || 0,\r\n        actual_minutes: paymentData.actual_minutes || 15,\r\n        processed_locally: true\r\n      },\r\n      message: 'ØªÙ…Øª Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© Ù…Ø­Ù„ÙŠØ§Ù‹'\r\n    };\r\n  }\r\n};\r\n\r\n// Ø¥Ù†Ù‡Ø§Ø¡ ÙˆÙ‚Øª Ø«Ø§Ø¨Øª\r\napi.completeFixedRental = async (rentalId) => {\r\n  try {\r\n    console.log(`âœ… Ø¥Ù†Ù‡Ø§Ø¡ ÙˆÙ‚Øª Ø«Ø§Ø¨Øª ${rentalId}`);\r\n    \r\n    const response = await api.post(`/rentals/${rentalId}/complete-fixed`);\r\n    \r\n    return response;\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø«Ø§Ø¨Øª:', error);\r\n    \r\n    return {\r\n      success: true,\r\n      data: { id: rentalId, processed_locally: true },\r\n      message: 'ØªÙ…Øª Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© Ù…Ø­Ù„ÙŠØ§Ù‹'\r\n    };\r\n  }\r\n};\r\n\r\n// Ø¥Ù†Ù‡Ø§Ø¡ ØªØ£Ø¬ÙŠØ± (Ø§Ù„Ø¯Ø§Ù„Ø© Ø§Ù„Ø¹Ø§Ù…Ø©)\r\napi.completeRental = async (rentalId, data = {}) => {\r\n  try {\r\n    if (data.rental_type === 'open') {\r\n      return await api.completeOpenRental(rentalId, data);\r\n    } else {\r\n      return await api.completeFixedRental(rentalId);\r\n    }\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„ØªØ£Ø¬ÙŠØ±:', error);\r\n    return { success: false, message: error.message };\r\n  }\r\n};\r\n\r\n// Ø¥Ù„ØºØ§Ø¡ ØªØ£Ø¬ÙŠØ± Ù…Ø¨ÙƒØ±\r\napi.cancelEarlyRental = async (rentalId, data = {}) => {\r\n  try {\r\n    console.log(`âŒ Ø¥Ù„ØºØ§Ø¡ Ù…Ø¨ÙƒØ± Ù„Ù„ØªØ£Ø¬ÙŠØ± ${rentalId}`);\r\n    \r\n    const response = await api.post(`/rentals/${rentalId}/cancel-early`, {\r\n      reason: data.reason || 'Ø¥Ù„ØºØ§Ø¡ Ù…Ø¨ÙƒØ±',\r\n      refund_amount: data.refund_amount || 0\r\n    });\r\n    \r\n    return response;\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ù…Ø¨ÙƒØ±:', error);\r\n    return { success: false, message: error.message };\r\n  }\r\n};\r\n\r\n// Ø¬Ù„Ø¨ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©\r\napi.getActiveRentals = async (params = {}) => {\r\n  try {\r\n    const response = await api.get('/rentals/active', { params });\r\n    return {\r\n      success: true,\r\n      data: response.data || [],\r\n      count: response.count || 0\r\n    };\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©:', error);\r\n    return { success: false, data: [] };\r\n  }\r\n};\r\n\r\n// Ø¬Ù„Ø¨ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©\r\napi.getCompletedRentals = async (params = {}) => {\r\n  try {\r\n    const response = await api.get('/rentals/completed', { params });\r\n    return {\r\n      success: true,\r\n      data: response.data || [],\r\n      count: response.count || 0\r\n    };\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©:', error);\r\n    return { success: false, data: [] };\r\n  }\r\n};\r\n\r\n// Ø¬Ù„Ø¨ ØªØ£Ø¬ÙŠØ± Ù…Ø­Ø¯Ø¯ Ù…Ø¹ Ø¹Ù†Ø§ØµØ±Ù‡\r\napi.getRentalById = async (rentalId) => {\r\n  try {\r\n    return await api.get(`/rentals/${rentalId}`);\r\n  } catch (error) {\r\n    console.error(`âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ ØªØ£Ø¬ÙŠØ± ${rentalId}:`, error);\r\n    return { success: false, message: 'ÙØ´Ù„ Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ£Ø¬ÙŠØ±' };\r\n  }\r\n};\r\n\r\n// Ø¬Ù„Ø¨ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø© Ù„Ù„Ø´ÙŠÙØª Ø§Ù„Ø­Ø§Ù„ÙŠ (Ù…Ø­Ø³Ù†Ø©)\r\napi.getActiveRentalsForCurrentShift = async (shiftId, branchId) => {\r\n  try {\r\n    console.log(`ğŸ“‹ Ø¬Ù„Ø¨ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø© Ù„Ù„Ø´ÙŠÙØª ${shiftId}`);\r\n    \r\n    if (!shiftId || !branchId) {\r\n      return { success: true, data: [], count: 0 };\r\n    }\r\n    \r\n    // Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª Ù„Ù„Ù…Ø­Ø§ÙˆÙ„Ø©\r\n    const endpoints = [\r\n      { url: '/rentals/active-for-shift', params: { shift_id: shiftId, branch_id: branchId } },\r\n      { url: '/rentals/active', params: { shift_id: shiftId, branch_id: branchId } },\r\n      { url: '/rentals', params: { shift_id: shiftId, branch_id: branchId, status: 'active' } }\r\n    ];\r\n    \r\n    for (const endpoint of endpoints) {\r\n      try {\r\n        const response = await api.get(endpoint.url, { params: endpoint.params });\r\n        \r\n        if (response.success) {\r\n          let rentals = [];\r\n          \r\n          if (Array.isArray(response.data)) {\r\n            rentals = response.data;\r\n          } else if (response.data && Array.isArray(response.data.data)) {\r\n            rentals = response.data.data;\r\n          }\r\n          \r\n          // ØªØµÙÙŠØ© Ø­Ø³Ø¨ shift_id Ù„Ù„ØªØ£ÙƒØ¯\r\n          const shiftRentals = rentals.filter(r => r.shift_id == shiftId && r.status === 'active');\r\n          \r\n          if (shiftRentals.length > 0) {\r\n            return {\r\n              success: true,\r\n              data: shiftRentals,\r\n              count: shiftRentals.length\r\n            };\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.warn(`âš ï¸ ÙØ´Ù„ ${endpoint.url}:`, error.message);\r\n      }\r\n    }\r\n    \r\n    return { success: true, data: [], count: 0 };\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ getActiveRentalsForCurrentShift:', error.message);\r\n    return { success: true, data: [], count: 0 };\r\n  }\r\n};\r\n\r\n// Ø¬Ù„Ø¨ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø© Ù„Ù„Ø´ÙŠÙØª\r\napi.getCompletedRentalsForShift = async (shiftId, branchId, date) => {\r\n  try {\r\n    console.log(`ğŸ“Š Ø¬Ù„Ø¨ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø© Ù„Ù„Ø´ÙŠÙØª ${shiftId}`);\r\n    \r\n    const endpoints = [\r\n      { url: '/rentals/completed-only', params: { shift_id: shiftId, branch_id: branchId } },\r\n      { url: '/rentals/completed', params: { shift_id: shiftId, branch_id: branchId } },\r\n      { url: '/rentals', params: { shift_id: shiftId, branch_id: branchId, status: 'completed', limit: 100 } }\r\n    ];\r\n    \r\n    for (const endpoint of endpoints) {\r\n      try {\r\n        const response = await api.get(endpoint.url, { params: endpoint.params });\r\n        \r\n        if (response.success) {\r\n          let rentals = Array.isArray(response.data) ? response.data : (response.data?.data || []);\r\n          \r\n          // ØªØµÙÙŠØ© Ø­Ø³Ø¨ shift_id ÙˆØ§Ù„ØªØ§Ø±ÙŠØ® Ø¥Ø°Ø§ Ù„Ø²Ù…\r\n          const filteredRentals = rentals.filter(r => \r\n            r.shift_id == shiftId && \r\n            (r.status === 'completed' || r.status === 'Ù…ÙƒØªÙ…Ù„')\r\n          );\r\n          \r\n          if (filteredRentals.length > 0 || endpoint === endpoints[endpoints.length - 1]) {\r\n            return {\r\n              success: true,\r\n              data: filteredRentals,\r\n              count: filteredRentals.length\r\n            };\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.warn(`âš ï¸ ÙØ´Ù„ ${endpoint.url}:`, error.message);\r\n      }\r\n    }\r\n    \r\n    return { success: true, data: [], count: 0 };\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ getCompletedRentalsForShift:', error);\r\n    return { success: false, data: [] };\r\n  }\r\n};\r\n\r\n// Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…Ù†ØªÙ‡ÙŠØ© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹\r\napi.autoCompleteExpiredRentals = async (branchId, shiftId = null) => {\r\n  try {\r\n    console.log('ğŸ”„ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…Ù†ØªÙ‡ÙŠØ© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹...');\r\n    \r\n    const response = await api.post('/rentals/auto-complete-fixed', {\r\n      branch_id: branchId,\r\n      shift_id: shiftId\r\n    });\r\n    \r\n    return response;\r\n  } catch (error) {\r\n    console.warn('âš ï¸ ÙØ´Ù„ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…Ù†ØªÙ‡ÙŠØ©:', error.message);\r\n    return { success: true, processed: 0, message: 'Ù„Ø§ ØªÙˆØ¬Ø¯ ØªØ£Ø¬ÙŠØ±Ø§Øª ØªØ­ØªØ§Ø¬ Ù…Ø¹Ø§Ù„Ø¬Ø©' };\r\n  }\r\n};\r\n\r\n// ==================== ADMIN DASHBOARD ENDPOINTS ====================\r\napi.getAllActiveRentals = async () => {\r\n  try {\r\n    console.log('ğŸ“‹ Ø¬Ù„Ø¨ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©');\r\n    \r\n    const response = await api.get('/admin/rentals/active-all-branches');\r\n    \r\n    if (response.success) {\r\n      const data = response.data || [];\r\n      const activeRentals = data.filter(r => r.status === 'active' || r.status === 'Ù†Ø´Ø·');\r\n      \r\n      return {\r\n        success: true,\r\n        data: activeRentals,\r\n        count: activeRentals.length,\r\n        message: `ØªÙ… ØªØ­Ù…ÙŠÙ„ ${activeRentals.length} ØªØ£Ø¬ÙŠØ± Ù†Ø´Ø·`\r\n      };\r\n    }\r\n    \r\n    return { success: false, data: [], count: 0 };\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ getAllActiveRentals:', error.message);\r\n    \r\n    // Ù…Ø­Ø§ÙˆÙ„Ø© Ø¨Ø¯ÙŠÙ„Ø©\r\n    try {\r\n      const altResponse = await api.get('/rentals/active', { params: { limit: 100 } });\r\n      if (altResponse.success) {\r\n        const activeOnly = (altResponse.data || []).filter(r => \r\n          r.status === 'active' || r.status === 'Ù†Ø´Ø·'\r\n        );\r\n        return {\r\n          success: true,\r\n          data: activeOnly,\r\n          count: activeOnly.length,\r\n          fromCache: true\r\n        };\r\n      }\r\n    } catch (altError) {\r\n      console.warn('âš ï¸ ÙØ´Ù„Øª Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø¨Ø¯ÙŠÙ„Ø©:', altError.message);\r\n    }\r\n    \r\n    return { success: true, data: [], count: 0 };\r\n  }\r\n};\r\n\r\napi.getTodayCompletedRentalsAllBranches = async () => {\r\n  try {\r\n    const response = await api.get('/admin/rentals/completed-today-all-branches');\r\n    \r\n    if (response.success) {\r\n      return {\r\n        success: true,\r\n        data: response.data || [],\r\n        count: response.count || 0,\r\n        date: response.date\r\n      };\r\n    }\r\n    \r\n    return { success: false, data: [], count: 0 };\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ getTodayCompletedRentalsAllBranches:', error.message);\r\n    \r\n    // Ù…Ø­Ø§ÙˆÙ„Ø© Ø¨Ø¯ÙŠÙ„Ø©\r\n    try {\r\n      const today = new Date().toISOString().split('T')[0];\r\n      const altResponse = await api.get('/rentals/completed', {\r\n        params: { start_date: today, end_date: today, limit: 100 }\r\n      });\r\n      \r\n      if (altResponse.success) {\r\n        return {\r\n          success: true,\r\n          data: altResponse.data || [],\r\n          count: altResponse.data?.length || 0,\r\n          date: today,\r\n          fromCache: true\r\n        };\r\n      }\r\n    } catch (altError) {\r\n      console.warn('âš ï¸ ÙØ´Ù„Øª Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø¨Ø¯ÙŠÙ„Ø©:', altError.message);\r\n    }\r\n    \r\n    return { success: true, data: [], count: 0 };\r\n  }\r\n};\r\n\r\napi.getRecentRentalsAllBranches = async (limit = 50) => {\r\n  try {\r\n    const response = await api.get('/admin/rentals/recent-all-branches', { params: { limit } });\r\n    \r\n    if (response.success) {\r\n      return {\r\n        success: true,\r\n        data: response.data || [],\r\n        count: response.count || 0\r\n      };\r\n    }\r\n    \r\n    return { success: false, data: [], count: 0 };\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ getRecentRentalsAllBranches:', error.message);\r\n    \r\n    // Ù…Ø­Ø§ÙˆÙ„Ø© Ø¨Ø¯ÙŠÙ„Ø©\r\n    try {\r\n      const altResponse = await api.get('/rentals', {\r\n        params: { limit, order_by: 'start_time', order_direction: 'DESC' }\r\n      });\r\n      \r\n      if (altResponse.success) {\r\n        return {\r\n          success: true,\r\n          data: altResponse.data || [],\r\n          count: altResponse.data?.length || 0,\r\n          fromCache: true\r\n        };\r\n      }\r\n    } catch (altError) {\r\n      console.warn('âš ï¸ ÙØ´Ù„Øª Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø¨Ø¯ÙŠÙ„Ø©:', altError.message);\r\n    }\r\n    \r\n    return { success: true, data: [], count: 0 };\r\n  }\r\n};\r\n\r\napi.getAdminDashboardStats = async () => {\r\n  try {\r\n    const [branchesRes, activeRes, todayRes] = await Promise.allSettled([\r\n      api.getBranches(),\r\n      api.getAllActiveRentals(),\r\n      api.getTodayCompletedRentalsAllBranches()\r\n    ]);\r\n    \r\n    const stats = {\r\n      totalBranches: 0,\r\n      totalActiveRentals: 0,\r\n      todayCompletedRentals: 0,\r\n      todayRevenue: 0\r\n    };\r\n    \r\n    if (branchesRes.status === 'fulfilled' && branchesRes.value.success) {\r\n      stats.totalBranches = branchesRes.value.data?.length || 0;\r\n    }\r\n    \r\n    if (activeRes.status === 'fulfilled' && activeRes.value.success) {\r\n      stats.totalActiveRentals = activeRes.value.count || 0;\r\n    }\r\n    \r\n    if (todayRes.status === 'fulfilled' && todayRes.value.success) {\r\n      stats.todayCompletedRentals = todayRes.value.count || 0;\r\n      \r\n      if (todayRes.value.data) {\r\n        stats.todayRevenue = todayRes.value.data.reduce((sum, r) => \r\n          sum + (parseFloat(r.final_amount) || parseFloat(r.total_amount) || 0), 0\r\n        );\r\n      }\r\n    }\r\n    \r\n    return { success: true, data: stats };\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ getAdminDashboardStats:', error);\r\n    return { success: false, data: { totalBranches: 0, totalActiveRentals: 0, todayCompletedRentals: 0, todayRevenue: 0 } };\r\n  }\r\n};\r\n\r\n// ==================== USERS MANAGEMENT ====================\r\napi.getUsers = async (params = {}) => {\r\n  try {\r\n    const response = await api.get('/users', { params });\r\n    return {\r\n      success: true,\r\n      data: response.data || [],\r\n      count: response.count || 0\r\n    };\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†:', error);\r\n    return { success: false, data: [] };\r\n  }\r\n};\r\n\r\napi.getUser = async (id) => {\r\n  try {\r\n    return await api.get(`/users/${id}`);\r\n  } catch (error) {\r\n    console.error(`âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ${id}:`, error);\r\n    return { success: false, message: 'ØªØ¹Ø°Ø± Ø¬Ù„Ø¨ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…' };\r\n  }\r\n};\r\n\r\napi.createUser = async (userData) => {\r\n  try {\r\n    return await api.post('/users', userData);\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:', error);\r\n    return { success: false, message: error.response?.data?.message || 'ØªØ¹Ø°Ø± Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…' };\r\n  }\r\n};\r\n\r\napi.updateUser = async (id, userData) => {\r\n  try {\r\n    return await api.put(`/users/${id}`, userData);\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:', error);\r\n    return { success: false, message: error.response?.data?.message || 'ØªØ¹Ø°Ø± ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…' };\r\n  }\r\n};\r\n\r\napi.deleteUser = async (id, permanent = false) => {\r\n  try {\r\n    return await api.delete(`/users/${id}?permanent=${permanent}`);\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:', error);\r\n    return { success: false, message: error.response?.data?.message || 'ØªØ¹Ø°Ø± Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…' };\r\n  }\r\n};\r\n\r\napi.deactivateUser = async (id) => {\r\n  try {\r\n    const response = await api.post(`/users/${id}/deactivate`);\r\n    return response;\r\n  } catch (error) {\r\n    console.error(`âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ${id}:`, error.message);\r\n    \r\n    if (error.response?.status === 404) {\r\n      return api.updateUser(id, { is_active: false });\r\n    }\r\n    \r\n    return { success: false, message: error.response?.data?.message || 'ØªØ¹Ø°Ø± ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…' };\r\n  }\r\n};\r\n\r\napi.activateUser = async (id) => {\r\n  try {\r\n    const response = await api.post(`/users/${id}/activate`);\r\n    return response;\r\n  } catch (error) {\r\n    console.error(`âŒ Ø®Ø·Ø£ ÙÙŠ ØªÙ†Ø´ÙŠØ· Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ${id}:`, error.message);\r\n    \r\n    if (error.response?.status === 404) {\r\n      return api.updateUser(id, { is_active: true });\r\n    }\r\n    \r\n    return { success: false, message: error.response?.data?.message || 'ØªØ¹Ø°Ø± ØªÙ†Ø´ÙŠØ· Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…' };\r\n  }\r\n};\r\n\r\napi.toggleUserStatus = async (id) => {\r\n  try {\r\n    const response = await api.post(`/users/${id}/toggle`);\r\n    return response;\r\n  } catch (error) {\r\n    console.error(`âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ¨Ø¯ÙŠÙ„ Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ${id}:`, error.message);\r\n    \r\n    try {\r\n      const userResponse = await api.getUser(id);\r\n      if (userResponse.success && userResponse.data) {\r\n        const currentStatus = userResponse.data.is_active;\r\n        return api.updateUser(id, { is_active: !currentStatus });\r\n      }\r\n    } catch (userError) {\r\n      console.warn('âš ï¸ ÙØ´Ù„ Ø¬Ù„Ø¨ Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:', userError.message);\r\n    }\r\n    \r\n    return { success: false, message: error.response?.data?.message || 'ØªØ¹Ø°Ø± ØªØ¨Ø¯ÙŠÙ„ Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…' };\r\n  }\r\n};\r\n\r\n// ==================== DASHBOARD & STATS ====================\r\napi.getSimpleStats = async () => {\r\n  try {\r\n    const response = await api.get('/dashboard/stats/simple');\r\n    return response;\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…Ø¨Ø³Ø·Ø©:', error);\r\n    return {\r\n      success: false,\r\n      data: {\r\n        availableGames: 0,\r\n        totalGames: 0,\r\n        todayRevenue: 0,\r\n        todayRentals: 0,\r\n        activeRentals: 0\r\n      }\r\n    };\r\n  }\r\n};\r\n\r\napi.getTodayStats = async (branchId) => {\r\n  try {\r\n    const today = new Date().toISOString().split('T')[0];\r\n    \r\n    const response = await api.get('/rentals', {\r\n      params: {\r\n        branch_id: branchId,\r\n        status: 'completed',\r\n        start_date: today,\r\n        end_date: today\r\n      }\r\n    });\r\n    \r\n    if (response.success && response.data) {\r\n      const revenue = response.data.reduce((sum, r) => \r\n        sum + (parseFloat(r.final_amount) || parseFloat(r.total_amount) || 0), 0\r\n      );\r\n      \r\n      return {\r\n        success: true,\r\n        data: {\r\n          rentals: response.data,\r\n          count: response.data.length,\r\n          revenue: revenue,\r\n          date: today\r\n        }\r\n      };\r\n    }\r\n    \r\n    return { success: true, data: { rentals: [], count: 0, revenue: 0, date: today } };\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ÙŠÙˆÙ…:', error);\r\n    return { success: false, data: { rentals: [], count: 0, revenue: 0, date: new Date().toISOString().split('T')[0] } };\r\n  }\r\n};\r\n\r\n// ==================== REPORTS ====================\r\napi.getRentalsReport = async (params = {}) => {\r\n  try {\r\n    return await api.get('/reports/rentals', { params });\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ ØªÙ‚Ø±ÙŠØ± Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª:', error);\r\n    return { success: false, data: [] };\r\n  }\r\n};\r\n\r\napi.getRevenueReport = async (params = {}) => {\r\n  try {\r\n    return await api.get('/reports/revenue', { params });\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª:', error);\r\n    return { success: false, data: [] };\r\n  }\r\n};\r\n\r\n// ==================== HEALTH & TEST ====================\r\napi.healthCheck = async () => {\r\n  try {\r\n    return await api.get('/health');\r\n  } catch (error) {\r\n    return { success: false, message: 'ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…' };\r\n  }\r\n};\r\n\r\napi.testConnection = async () => {\r\n  try {\r\n    const response = await api.get('/health');\r\n    return {\r\n      success: true,\r\n      message: 'âœ… Ø§ØªØµØ§Ù„ API ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­',\r\n      data: response\r\n    };\r\n  } catch (error) {\r\n    return {\r\n      success: false,\r\n      message: 'âŒ ÙØ´Ù„ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„: ' + (error.message || 'ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…')\r\n    };\r\n  }\r\n};\r\n\r\napi.checkSystemHealth = async () => {\r\n  try {\r\n    const checks = [];\r\n    \r\n    // 1. Ø§ØªØµØ§Ù„ Ø§Ù„Ø®Ø§Ø¯Ù…\r\n    try {\r\n      const health = await api.healthCheck();\r\n      checks.push({\r\n        name: 'Ø§ØªØµØ§Ù„ Ø§Ù„Ø®Ø§Ø¯Ù…',\r\n        status: health.success ? 'success' : 'error',\r\n        message: health.success ? 'âœ… Ù…ØªØµÙ„' : 'âŒ ØºÙŠØ± Ù…ØªØµÙ„'\r\n      });\r\n    } catch {\r\n      checks.push({ name: 'Ø§ØªØµØ§Ù„ Ø§Ù„Ø®Ø§Ø¯Ù…', status: 'error', message: 'âŒ ØºÙŠØ± Ù…ØªØµÙ„' });\r\n    }\r\n    \r\n    // 2. Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©\r\n    const authStatus = api.checkAuthStatus();\r\n    checks.push({\r\n      name: 'Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©',\r\n      status: authStatus.isAuthenticated ? 'success' : 'warning',\r\n      message: authStatus.isAuthenticated ? `âœ… Ù…ØµØ§Ø¯Ù‚` : 'âš ï¸ ØºÙŠØ± Ù…ØµØ§Ø¯Ù‚'\r\n    });\r\n    \r\n    const hasErrors = checks.some(c => c.status === 'error');\r\n    \r\n    return {\r\n      success: !hasErrors,\r\n      checks,\r\n      summary: {\r\n        total: checks.length,\r\n        success: checks.filter(c => c.status === 'success').length,\r\n        warning: checks.filter(c => c.status === 'warning').length,\r\n        error: checks.filter(c => c.status === 'error').length\r\n      },\r\n      message: hasErrors ? 'âŒ Ù‡Ù†Ø§Ùƒ Ù…Ø´Ø§ÙƒÙ„ ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…' : 'âœ… Ø§Ù„Ù†Ø¸Ø§Ù… ÙŠØ¹Ù…Ù„'\r\n    };\r\n  } catch (error) {\r\n    return { success: false, message: 'ØªØ¹Ø°Ø± Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ù†Ø¸Ø§Ù…' };\r\n  }\r\n};\r\n\r\n// ==================== Ø§Ù„ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø£ÙˆÙ„ÙŠØ© ====================\r\nconst savedToken = localStorage.getItem('token');\r\nif (savedToken) {\r\n  api.setToken(savedToken);\r\n}\r\n\r\nexport default api;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}