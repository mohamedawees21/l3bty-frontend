{"ast":null,"code":"// src/services/authService.js\n\nimport api from './api';\n\n// ==================== Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª ====================\nconst MAX_RETRIES = 3;\nconst RETRY_DELAY = 1000; // 1 Ø«Ø§Ù†ÙŠØ©\n\n// ØªØ£Ø®ÙŠØ± ØªÙ†ÙÙŠØ°\nconst delay = ms => new Promise(resolve => setTimeout(resolve, ms));\n\n// ==================== Ø¯ÙˆØ§Ù„ Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª ====================\n\n/**\r\n * Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙŠØ±ÙØ±\r\n */\nconst checkAvailableEndpoints = async () => {\n  const endpoints = [{\n    method: 'GET',\n    url: '/api/games',\n    name: 'games_list'\n  }, {\n    method: 'POST',\n    url: '/api/games',\n    name: 'games_create'\n  }, {\n    method: 'POST',\n    url: '/api/games/create',\n    name: 'games_create_alt'\n  }, {\n    method: 'POST',\n    url: '/api/branches/1/add-game',\n    name: 'branches_add_game'\n  }, {\n    method: 'GET',\n    url: '/api/health',\n    name: 'health'\n  }, {\n    method: 'GET',\n    url: '/api/test',\n    name: 'test'\n  }];\n  const results = {};\n  for (const endpoint of endpoints) {\n    try {\n      const response = await api({\n        method: endpoint.method,\n        url: endpoint.url,\n        timeout: 3000,\n        validateStatus: () => true // Ù„Ø§ ØªØ¹ØªØ¨Ø± Ø£ÙŠ Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø®Ø·Ø£\n      });\n      results[endpoint.name] = {\n        available: response.status !== 404,\n        status: response.status,\n        url: endpoint.url,\n        method: endpoint.method\n      };\n    } catch (error) {\n      results[endpoint.name] = {\n        available: false,\n        error: error.message,\n        url: endpoint.url,\n        method: endpoint.method\n      };\n    }\n  }\n  console.log('ğŸ” Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©:', results);\n  return results;\n};\nconst authService = {\n  // ==================== Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© ====================\n\n  // ÙÙŠ Ù…Ù„Ù src/services/authService.js\n\n  login: async (email, password) => {\n    try {\n      console.log('ğŸ” Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„:', email);\n      const response = await api.post('/auth/login', {\n        email,\n        password\n      });\n      if (response && response.success) {\n        // ØªØ®Ø²ÙŠÙ† Ø§Ù„ØªÙˆÙƒÙ† ÙˆØ§Ù„Ù…Ø³ØªØ®Ø¯Ù…\n        if (response.token) {\n          localStorage.setItem('token', response.token);\n          api.setToken(response.token);\n        }\n        if (response.user) {\n          localStorage.setItem('user', JSON.stringify(response.user));\n\n          // ØªØ®Ø²ÙŠÙ† Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª\n          if (response.permissions) {\n            localStorage.setItem('permissions', JSON.stringify(response.permissions));\n          }\n        }\n        localStorage.setItem('lastLogin', new Date().toISOString());\n        console.log('âœ… ØªÙ… ØªØ®Ø²ÙŠÙ† Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ø¬Ø§Ø­:', response.user);\n        return {\n          success: true,\n          data: {\n            token: response.token,\n            user: response.user,\n            permissions: response.permissions\n          },\n          message: response.message || 'ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­'\n        };\n      }\n      return {\n        success: false,\n        message: (response === null || response === void 0 ? void 0 : response.message) || 'ÙØ´Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„'\n      };\n    } catch (error) {\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„:', error);\n\n      // ØªØ­Ø³ÙŠÙ† Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø®Ø·Ø£\n      let errorMessage = 'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…';\n      if (error.status === 401) {\n        errorMessage = 'Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©';\n      } else if (error.status === 500) {\n        errorMessage = 'Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø®Ø§Ø¯Ù…. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰';\n      } else if (error.code === 'ECONNABORTED') {\n        errorMessage = 'Ø§Ù†ØªÙ‡Øª Ù…Ù‡Ù„Ø© Ø§Ù„Ø§ØªØµØ§Ù„. ØªØ£ÙƒØ¯ Ù…Ù† ØªØ´ØºÙŠÙ„ Ø§Ù„Ø®Ø§Ø¯Ù…';\n      } else if (error.message) {\n        errorMessage = error.message;\n      }\n      return {\n        success: false,\n        message: errorMessage,\n        error: error\n      };\n    }\n  },\n  logout: () => {\n    console.log('ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬...');\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n    localStorage.removeItem('lastLogin');\n  },\n  getToken: () => {\n    const token = localStorage.getItem('token');\n    return token;\n  },\n  getCurrentUser: () => {\n    try {\n      const userStr = localStorage.getItem('user');\n      return userStr ? JSON.parse(userStr) : null;\n    } catch (error) {\n      return null;\n    }\n  },\n  isAuthenticated: () => {\n    const token = authService.getToken();\n    const user = authService.getCurrentUser();\n    return !!(token && user);\n  },\n  // Ø¯Ø§Ù„Ø© Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ø³ØªØ¬Ø§Ø¨Ø© 401\n  handleAuthError: error => {\n    if (error.response && error.response.status === 401) {\n      console.log('ğŸ”’ ØªÙˆÙƒÙ† Ù…Ù†ØªÙ‡ÙŠ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ© - ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬ ØªÙ„Ù‚Ø§Ø¦ÙŠ');\n      authService.logout();\n      return true;\n    }\n    return false;\n  },\n  // ==================== Ø¯ÙˆØ§Ù„ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ù…Ù‚Ø§ÙˆÙ…Ø© Ù„Ù„ÙƒØ³Ø± ====================\n\n  /**\r\n   * Ø¥Ù†Ø´Ø§Ø¡ Ù„Ø¹Ø¨Ø© Ø¨Ø£ÙŠ Ø·Ø±ÙŠÙ‚Ø© Ù…Ù…ÙƒÙ†Ø© (UNBREAKABLE)\r\n   */\n  createGameUnbreakable: async gameData => {\n    try {\n      console.log('ğŸ›¡ï¸ [UNBREAKABLE] Ù…Ø­Ø§ÙˆÙ„Ø© Ø¥Ù†Ø´Ø§Ø¡ Ù„Ø¹Ø¨Ø© Ø¨Ø£ÙŠ Ø·Ø±ÙŠÙ‚Ø©:', gameData);\n      const token = authService.getToken();\n      const user = authService.getCurrentUser();\n      if (!token || !user) {\n        return {\n          success: false,\n          message: 'ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹'\n        };\n      }\n      const branchId = gameData.branch_id || user.branch_id || 1;\n\n      // ØªØ¬Ù‡ÙŠØ² Ø§Ù„Ø­Ù…ÙˆÙ„Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©\n      const gamePayload = {\n        name: gameData.name,\n        description: gameData.description || `${gameData.name}`,\n        category: gameData.category || 'Ø³ÙŠØ§Ø±Ø§Øª',\n        price_per_15min: parseFloat(gameData.price_per_15min) || 50,\n        price_per_hour: Math.ceil((parseFloat(gameData.price_per_15min) || 50) * 4),\n        branch_id: branchId,\n        status: gameData.status || 'available',\n        min_rental_time: gameData.min_rental_time || 15,\n        max_rental_time: gameData.max_rental_time || 120,\n        minimum_age: gameData.minimum_age || 16,\n        image_url: gameData.image_url || 'default-game.jpg',\n        external_image_url: gameData.external_image_url || '',\n        is_active: true\n      };\n      console.log('ğŸ“¤ Ø§Ù„Ø­Ù…ÙˆÙ„Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©:', gamePayload);\n\n      // Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ§Øª Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© - Ù…Ø±ØªØ¨Ø© Ø­Ø³Ø¨ Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©\n      const strategies = [{\n        name: 'Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ POST /api/games',\n        executor: async () => {\n          return await api.post('/api/games', gamePayload);\n        }\n      }, {\n        name: 'Ù…Ø³Ø§Ø± Ø¨Ø¯ÙŠÙ„ POST /api/games/create',\n        executor: async () => {\n          return await api.post('/api/games/create', gamePayload);\n        }\n      }, {\n        name: 'Ø¥Ø¶Ø§ÙØ© Ù„Ø¹Ø¨Ø© Ù„ÙØ±Ø¹ POST /api/branches/{branchId}/add-game',\n        executor: async () => {\n          return await api.post(`/api/branches/${branchId}/add-game`, {\n            name: gamePayload.name,\n            price_per_15min: gamePayload.price_per_15min,\n            category: gamePayload.category,\n            description: gamePayload.description,\n            branch_id: branchId\n          });\n        }\n      }, {\n        name: 'Ø¥Ø¶Ø§ÙØ© Ù„Ø¹Ø¨Ø© Ù„ÙØ±Ø¹ (ØµÙŠØºØ© Ù…Ø®ØªÙ„ÙØ©) POST /api/branches/add-game',\n        executor: async () => {\n          return await api.post('/api/branches/add-game', {\n            ...gamePayload,\n            branch_id: branchId\n          });\n        }\n      }, {\n        name: 'Ø¥Ù†Ø´Ø§Ø¡ Ù„Ø¹Ø¨Ø© Ø¹Ø¨Ø± Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙØ±ÙˆØ¹ POST /api/admin/games',\n        executor: async () => {\n          return await api.post('/api/admin/games', gamePayload);\n        }\n      }, {\n        name: 'Ù…Ø³Ø§Ø± Ù…Ø¨Ø³Ø· POST /api/games/simple',\n        executor: async () => {\n          const simplePayload = {\n            name: gamePayload.name,\n            price_per_15min: gamePayload.price_per_15min,\n            branch_id: branchId\n          };\n          return await api.post('/api/games/simple', simplePayload);\n        }\n      }, {\n        name: 'Ø¥Ù†Ø´Ø§Ø¡ Ù„Ø¹Ø¨Ø© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… fetch (Ø·Ø±ÙŠÙ‚Ø© Ù…Ø¨Ø§Ø´Ø±Ø©)',\n        executor: async () => {\n          const response = await fetch(`http://localhost:5000/api/games`, {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json',\n              'Authorization': `Bearer ${token}`\n            },\n            body: JSON.stringify(gamePayload)\n          });\n          if (!response.ok) {\n            throw new Error(`HTTP ${response.status}`);\n          }\n          return await response.json();\n        }\n      }];\n\n      // ØªÙ†ÙÙŠØ° Ø§Ù„Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ§Øª Ø¨Ø§Ù„ØªØ±ØªÙŠØ¨\n      for (let i = 0; i < strategies.length; i++) {\n        try {\n          console.log(`ğŸ”„ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© ${i + 1}: ${strategies[i].name}`);\n          const response = await strategies[i].executor();\n          console.log(`ğŸ“Š Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© ${i + 1}:`, response.status || response);\n\n          // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù†Ø¬Ø§Ø­ Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©\n          if (response && (response.status === 201 || response.status === 200 || response.success)) {\n            console.log(`âœ… Ù†Ø¬Ø­Øª Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© ${i + 1}:`, response.data || response);\n            return {\n              success: true,\n              data: response.data || response,\n              attempt: i + 1,\n              method: strategies[i].name\n            };\n          }\n\n          // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø© ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ success: true\n          if (response && response.success === true) {\n            return response;\n          }\n        } catch (error) {\n          var _error$response, _error$response2;\n          console.log(`âŒ ÙØ´Ù„Øª Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© ${i + 1}:`, error.message);\n\n          // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø®Ø·Ø£ 404 (Ø§Ù„Ù…Ø³Ø§Ø± ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯)ØŒ Ù†ÙƒÙ…Ù„ Ù„Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©\n          if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 404) {\n            continue;\n          }\n\n          // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø®Ø·Ø£ 500 (Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø³ÙŠØ±ÙØ±) ÙˆÙ†Ø­Ù† ÙÙŠ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø£Ø®ÙŠØ±Ø©\n          if (((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.status) >= 500 && i === strategies.length - 1) {\n            // Ù†Ù†ØªØ¸Ø± Ø«Ù… Ù†Ø¹ÙŠØ¯ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ù† Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© (Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø·)\n            await delay(RETRY_DELAY);\n            return authService.createGameUnbreakable(gameData);\n          }\n        }\n      }\n\n      // Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª ÙØ´Ù„Øª - Ø§Ù„Ø­Ù„ Ø§Ù„Ø£Ø®ÙŠØ±: ØªØ®Ø²ÙŠÙ† Ù…Ø­Ù„ÙŠ\n      console.warn('âš ï¸ Ø¬Ù…ÙŠØ¹ Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø© ÙØ´Ù„ØªØŒ Ø³ÙŠØªÙ… Ø§Ù„ØªØ®Ø²ÙŠÙ† Ù…Ø­Ù„ÙŠØ§Ù‹');\n      const localGame = {\n        id: 'local-' + Date.now(),\n        name: gamePayload.name,\n        price_per_15min: gamePayload.price_per_15min,\n        branch_id: branchId,\n        category: gamePayload.category,\n        status: 'Ù…ØªØ§Ø­ (Ù…Ø­Ù„ÙŠ)',\n        local: true,\n        is_active: true,\n        created_at: new Date().toISOString()\n      };\n\n      // Ø­ÙØ¸ ÙÙŠ localStorage\n      try {\n        const localGames = JSON.parse(localStorage.getItem('local_games') || '[]');\n        localGames.push(localGame);\n        localStorage.setItem('local_games', JSON.stringify(localGames));\n        console.log('ğŸ’¾ ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù„Ø¹Ø¨Ø© Ù…Ø­Ù„ÙŠØ§Ù‹:', localGame.id);\n      } catch (e) {\n        console.warn('âš ï¸ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø­ÙØ¸ Ø§Ù„Ù„Ø¹Ø¨Ø© Ù…Ø­Ù„ÙŠØ§Ù‹:', e.message);\n      }\n      return {\n        success: true,\n        data: localGame,\n        message: 'ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù„Ø¹Ø¨Ø© Ù…Ø­Ù„ÙŠØ§Ù‹ (Ø³ÙŠØªÙ… Ù…Ø²Ø§Ù…Ù†ØªÙ‡Ø§ Ù„Ø§Ø­Ù‚Ø§Ù‹)',\n        local: true,\n        emergency: true\n      };\n    } catch (error) {\n      console.error('ğŸ”¥ Ø®Ø·Ø£ Ø´Ø§Ù…Ù„ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©:', error);\n      return {\n        success: false,\n        message: 'Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹: ' + error.message\n      };\n    }\n  },\n  /**\r\n   * Ø¬Ù„Ø¨ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ù…Ø¹ Ø¯Ø¹Ù… ØªØ¹Ø¯Ø¯ Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª\r\n   */\n  fetchGamesUnbreakable: async (params = {}) => {\n    try {\n      console.log('ğŸ”„ Ù…Ø­Ø§ÙˆÙ„Ø© Ø¬Ù„Ø¨ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨:', params);\n      const strategies = [{\n        name: 'GET /api/games',\n        executor: async () => {\n          return await api.get('/api/games', {\n            params\n          });\n        }\n      }, {\n        name: 'GET /api/games/list',\n        executor: async () => {\n          return await api.get('/api/games/list', {\n            params\n          });\n        }\n      }, {\n        name: `GET /api/branches/${params.branch_id}/games`,\n        executor: async () => {\n          if (!params.branch_id) throw new Error('branch_id Ù…Ø·Ù„ÙˆØ¨');\n          return await api.get(`/api/branches/${params.branch_id}/games`);\n        }\n      }, {\n        name: 'GET /api/admin/games',\n        executor: async () => {\n          return await api.get('/api/admin/games', {\n            params\n          });\n        }\n      }, {\n        name: 'GET /api/games/all',\n        executor: async () => {\n          return await api.get('/api/games/all', {\n            params\n          });\n        }\n      }];\n      for (const strategy of strategies) {\n        try {\n          // ØªØ®Ø·ÙŠ Ø§Ù„Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ§Øª Ø§Ù„ØªÙŠ ØªØªØ·Ù„Ø¨ branch_id Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù…ÙˆØ¬ÙˆØ¯Ø§Ù‹\n          if (strategy.name.includes('branches/') && !params.branch_id) {\n            continue;\n          }\n          const response = await strategy.executor();\n          if (response && (response.status === 200 || response.success)) {\n            var _response$data;\n            const gamesData = ((_response$data = response.data) === null || _response$data === void 0 ? void 0 : _response$data.data) || response.data || [];\n            console.log(`âœ… Ù†Ø¬Ø­Øª ${strategy.name}:`, gamesData.length, 'Ù„Ø¹Ø¨Ø©');\n\n            // Ø¯Ù…Ø¬ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ù…Ø­Ù„ÙŠØ© Ø¥Ø°Ø§ ÙˆØ¬Ø¯Øª\n            const localGames = JSON.parse(localStorage.getItem('local_games') || '[]');\n            const filteredLocalGames = localGames.filter(g => !params.branch_id || g.branch_id === params.branch_id);\n            if (filteredLocalGames.length > 0) {\n              console.log('ğŸ“¦ Ø¯Ù…Ø¬ Ø£Ù„Ø¹Ø§Ø¨ Ù…Ø­Ù„ÙŠØ©:', filteredLocalGames.length);\n              return {\n                success: true,\n                data: [...gamesData, ...filteredLocalGames],\n                local_count: filteredLocalGames.length,\n                method: strategy.name\n              };\n            }\n            return {\n              success: true,\n              data: gamesData,\n              method: strategy.name\n            };\n          }\n        } catch (error) {\n          var _error$response3;\n          if (((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.status) !== 404) {\n            console.log(`âš ï¸ Ø®Ø·Ø£ ÙÙŠ ${strategy.name}:`, error.message);\n          }\n        }\n      }\n\n      // Ø¥Ø°Ø§ ÙØ´Ù„Øª Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§ØªØŒ Ù†Ø±Ø¬Ø¹ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ù…Ø­Ù„ÙŠØ© ÙÙ‚Ø·\n      const localGames = JSON.parse(localStorage.getItem('local_games') || '[]');\n      const filteredLocalGames = localGames.filter(g => !params.branch_id || g.branch_id === params.branch_id);\n      return {\n        success: true,\n        data: filteredLocalGames,\n        local_only: true,\n        message: 'ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ù…Ø­Ù„ÙŠØ© ÙÙ‚Ø·'\n      };\n    } catch (error) {\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨:', error);\n      return {\n        success: false,\n        data: [],\n        message: 'ÙØ´Ù„ Ø¬Ù„Ø¨ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨'\n      };\n    }\n  },\n  // ==================== BRANCHES MANAGEMENT =================\n\n  getBranches: async () => {\n    try {\n      return await api.getBranches();\n    } catch (error) {\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ getBranches:', error);\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± Ø¬Ù„Ø¨ Ø§Ù„ÙØ±ÙˆØ¹',\n        data: []\n      };\n    }\n  },\n  createBranch: async branchData => {\n    try {\n      console.log('ğŸ”‘ Ø§Ù„ØªÙˆÙƒÙ† Ø§Ù„Ø­Ø§Ù„ÙŠ:', authService.getToken());\n      console.log('ğŸ‘¤ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ:', authService.getCurrentUser());\n      const response = await api.createBranch(branchData);\n      console.log('ğŸ“¥ Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ±Ø¹:', response);\n      return response;\n    } catch (error) {\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ createBranch:', error);\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ±Ø¹: ' + error.message\n      };\n    }\n  },\n  updateBranch: async (id, branchData) => {\n    try {\n      return await api.updateBranch(id, branchData);\n    } catch (error) {\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ updateBranch:', error);\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙØ±Ø¹: ' + error.message\n      };\n    }\n  },\n  deleteBranch: async id => {\n    try {\n      return await api.deleteBranch(id, false);\n    } catch (error) {\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ deleteBranch:', error);\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± Ø­Ø°Ù Ø§Ù„ÙØ±Ø¹: ' + error.message\n      };\n    }\n  },\n  deleteBranchPermanent: async id => {\n    try {\n      console.log('ğŸ—‘ï¸ [AUTH SERVICE] Ø­Ø°Ù ÙØ±Ø¹ Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹:', id);\n      const response = await api.deleteBranch(id, true);\n      console.log('ğŸ“¥ Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø­Ø°Ù Ø§Ù„ÙØ±Ø¹:', response);\n      return response;\n    } catch (error) {\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„ÙØ±Ø¹:', error);\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± Ø­Ø°Ù Ø§Ù„ÙØ±Ø¹: ' + error.message\n      };\n    }\n  },\n  getBranchGames: async branchId => {\n    try {\n      return await authService.fetchGamesUnbreakable({\n        branch_id: branchId\n      });\n    } catch (error) {\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ getBranchGames:', error);\n      return {\n        success: false,\n        data: [],\n        message: 'ØªØ¹Ø°Ø± Ø¬Ù„Ø¨ Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„ÙØ±Ø¹'\n      };\n    }\n  },\n  // ==================== GAMES MANAGEMENT =================\n\n  getGames: async (params = {}) => {\n    try {\n      return await authService.fetchGamesUnbreakable(params);\n    } catch (error) {\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ getGames:', error);\n      return {\n        success: false,\n        data: [],\n        message: 'ØªØ¹Ø°Ø± Ø¬Ù„Ø¨ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨'\n      };\n    }\n  },\n  createGame: async gameData => {\n    try {\n      return await authService.createGameUnbreakable(gameData);\n    } catch (error) {\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ createGame:', error);\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©: ' + error.message\n      };\n    }\n  },\n  updateGame: async (gameId, gameData) => {\n    try {\n      console.log(`ğŸ® ØªØ­Ø¯ÙŠØ« Ù„Ø¹Ø¨Ø© ${gameId}:`, gameData);\n\n      // Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ§Øª Ø§Ù„ØªØ­Ø¯ÙŠØ«\n      const strategies = [async () => await api.put(`/games/${gameId}`, gameData), async () => await api.put(`/games/update/${gameId}`, gameData), async () => await api.post(`/games/${gameId}/update`, gameData)];\n      for (let i = 0; i < strategies.length; i++) {\n        try {\n          const response = await strategies[i]();\n          if (response && response.success) {\n            return response;\n          }\n        } catch (e) {\n          console.warn(`âš ï¸ ÙØ´Ù„Øª Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Ø§Ù„ØªØ­Ø¯ÙŠØ« ${i + 1}:`, e.message);\n        }\n      }\n      return {\n        success: false,\n        message: 'ÙØ´Ù„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù„Ø¹Ø¨Ø© Ø¨Ø¹Ø¯ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª'\n      };\n    } catch (error) {\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù„Ø¹Ø¨Ø©:', error);\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù„Ø¹Ø¨Ø©: ' + error.message\n      };\n    }\n  },\n  deleteGame: async id => {\n    try {\n      return await api.deleteGame(id);\n    } catch (error) {\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ deleteGame:', error);\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± Ø­Ø°Ù Ø§Ù„Ù„Ø¹Ø¨Ø©: ' + error.message\n      };\n    }\n  },\n  // ==================== SHIFTS MANAGEMENT =================\n\n  getActiveShift: async () => {\n    try {\n      return await api.getActiveShift();\n    } catch (error) {\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ getActiveShift:', error);\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± Ø¬Ù„Ø¨ Ø§Ù„Ø´ÙŠÙØª Ø§Ù„Ù†Ø´Ø·'\n      };\n    }\n  },\n  startShift: async () => {\n    try {\n      return await api.startShift();\n    } catch (error) {\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ startShift:', error);\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± Ø¨Ø¯Ø¡ Ø§Ù„Ø´ÙŠÙØª'\n      };\n    }\n  },\n  endShift: async shiftId => {\n    try {\n      return await api.endShift(shiftId);\n    } catch (error) {\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ endShift:', error);\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø´ÙŠÙØª'\n      };\n    }\n  },\n  getBranchShifts: async branchId => {\n    try {\n      console.log(`ğŸ“‹ Ø¬Ù„Ø¨ Ø´ÙŠÙØªØ§Øª Ø§Ù„ÙØ±Ø¹ ${branchId}`);\n      const response = await api.getShifts({\n        branch_id: branchId\n      });\n      return response;\n    } catch (error) {\n      console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø´ÙŠÙØªØ§Øª Ø§Ù„ÙØ±Ø¹:', error);\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± Ø¬Ù„Ø¨ Ø´ÙŠÙØªØ§Øª Ø§Ù„ÙØ±Ø¹',\n        data: []\n      };\n    }\n  },\n  // ==================== RENTALS MANAGEMENT =================\n\n  getRentals: async (params = {}) => {\n    try {\n      return await api.getRentals(params);\n    } catch (error) {\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ getRentals:', error);\n      return {\n        success: false,\n        data: [],\n        message: 'ØªØ¹Ø°Ø± Ø¬Ù„Ø¨ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª'\n      };\n    }\n  },\n  createRental: async rentalData => {\n    try {\n      return await api.createRental(rentalData);\n    } catch (error) {\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ createRental:', error);\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ±: ' + error.message\n      };\n    }\n  },\n  completeRental: async (rentalId, paymentData = {}) => {\n    try {\n      return await api.completeRental(rentalId, paymentData);\n    } catch (error) {\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ completeRental:', error);\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ±'\n      };\n    }\n  },\n  cancelRental: async rentalId => {\n    try {\n      return await api.cancelRental(rentalId);\n    } catch (error) {\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ cancelRental:', error);\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ±'\n      };\n    }\n  },\n  getActiveRentals: async (branchId = null) => {\n    try {\n      return await api.getActiveRentals(branchId);\n    } catch (error) {\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ getActiveRentals:', error);\n      return {\n        success: false,\n        data: [],\n        message: 'ØªØ¹Ø°Ø± Ø¬Ù„Ø¨ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©'\n      };\n    }\n  },\n  getCompletedRentals: async (params = {}) => {\n    try {\n      return await api.getCompletedRentals(params);\n    } catch (error) {\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ getCompletedRentals:', error);\n      return {\n        success: false,\n        data: [],\n        message: 'ØªØ¹Ø°Ø± Ø¬Ù„Ø¨ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©'\n      };\n    }\n  },\n  // ==================== CUSTOMERS MANAGEMENT =================\n\n  getCustomers: async (search = '') => {\n    try {\n      return await api.getCustomers(search);\n    } catch (error) {\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ getCustomers:', error);\n      return {\n        success: false,\n        data: [],\n        message: 'ØªØ¹Ø°Ø± Ø¬Ù„Ø¨ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡'\n      };\n    }\n  },\n  createCustomer: async customerData => {\n    try {\n      return await api.createCustomer(customerData);\n    } catch (error) {\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ createCustomer:', error);\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¹Ù…ÙŠÙ„'\n      };\n    }\n  },\n  // ==================== USERS MANAGEMENT =================\n\n  getUsers: async (params = {}) => {\n    try {\n      return await api.getUsers(params);\n    } catch (error) {\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ getUsers:', error);\n      return {\n        success: false,\n        data: [],\n        message: 'ØªØ¹Ø°Ø± Ø¬Ù„Ø¨ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†'\n      };\n    }\n  },\n  createUser: async userData => {\n    try {\n      return await api.createUser(userData);\n    } catch (error) {\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ createUser:', error);\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…'\n      };\n    }\n  },\n  updateUser: async (id, userData) => {\n    try {\n      return await api.updateUser(id, userData);\n    } catch (error) {\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ updateUser:', error);\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…'\n      };\n    }\n  },\n  deleteUser: async id => {\n    try {\n      return await api.deleteUser(id);\n    } catch (error) {\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ deleteUser:', error);\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…'\n      };\n    }\n  },\n  // ==================== STATISTICS =================\n\n  getSimpleStats: async () => {\n    try {\n      return await api.getSimpleStats();\n    } catch (error) {\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ getSimpleStats:', error);\n      return {\n        success: false,\n        data: {\n          totalGames: 0,\n          availableGames: 0,\n          activeRentals: 0,\n          todayRentals: 0,\n          todayRevenue: 0\n        }\n      };\n    }\n  },\n  getDashboardStats: async () => {\n    try {\n      const response = await api.get('/dashboard/stats');\n      return response;\n    } catch (error) {\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ getDashboardStats:', error);\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª',\n        data: {\n          summary: {},\n          today_revenue: 0,\n          today_rentals: 0,\n          active_rentals: 0,\n          total_games: 0,\n          available_games: 0\n        }\n      };\n    }\n  },\n  getDashboardAllStats: async () => {\n    try {\n      return await api.getDashboardAllStats();\n    } catch (error) {\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ getDashboardAllStats:', error);\n      return {\n        success: false,\n        data: {}\n      };\n    }\n  },\n  // ==================== HEALTH CHECK =================\n\n  healthCheck: async () => {\n    try {\n      return await api.healthCheck();\n    } catch (error) {\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ healthCheck:', error);\n      return {\n        success: false,\n        message: 'Ø§Ù„Ø®Ø§Ø¯Ù… ØºÙŠØ± Ù…ØªØµÙ„'\n      };\n    }\n  },\n  testApiConnection: async () => {\n    try {\n      return await api.testConnection();\n    } catch (error) {\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ testApiConnection:', error);\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…'\n      };\n    }\n  },\n  // ==================== CURRENT BRANCH OPERATIONS =================\n\n  getAvailableGamesForCurrentBranch: async () => {\n    try {\n      const user = authService.getCurrentUser();\n      if (!(user !== null && user !== void 0 && user.branch_id)) {\n        return {\n          success: false,\n          message: 'Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…Ø±ØªØ¨Ø· Ø¨ÙØ±Ø¹',\n          data: []\n        };\n      }\n      const response = await authService.fetchGamesUnbreakable({\n        branch_id: user.branch_id\n      });\n      if (response.success) {\n        const availableGames = response.data.filter(game => game.status === 'available' || game.status === 'Ù…ØªØ§Ø­');\n        return {\n          success: true,\n          data: availableGames,\n          message: `ØªÙ… ØªØ­Ù…ÙŠÙ„ ${availableGames.length} Ù„Ø¹Ø¨Ø© Ù…ØªØ§Ø­Ø©`\n        };\n      }\n      return response;\n    } catch (error) {\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ getAvailableGamesForCurrentBranch:', error);\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„ÙØ±Ø¹',\n        data: []\n      };\n    }\n  },\n  getCurrentUserBranch: async () => {\n    try {\n      const user = authService.getCurrentUser();\n      if (!(user !== null && user !== void 0 && user.branch_id)) {\n        return {\n          success: false,\n          message: 'Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…Ø±ØªØ¨Ø· Ø¨ÙØ±Ø¹',\n          data: null\n        };\n      }\n      return await api.getBranchById(user.branch_id);\n    } catch (error) {\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ getCurrentUserBranch:', error);\n      return {\n        success: false,\n        message: 'ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙØ±Ø¹',\n        data: null\n      };\n    }\n  },\n  // ==================== UTILITY FUNCTIONS =================\n\n  formatError: error => {\n    if (error.response) {\n      var _error$response$data;\n      return ((_error$response$data = error.response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || `Ø®Ø·Ø£ ${error.response.status}: ${error.response.statusText}`;\n    } else if (error.request) {\n      return 'ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…. ØªØ£ÙƒØ¯ Ù…Ù† ØªØ´ØºÙŠÙ„ Ø§Ù„Ø®Ø§Ø¯Ù…';\n    } else {\n      return error.message || 'Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';\n    }\n  },\n  hasRole: role => {\n    const user = authService.getCurrentUser();\n    return (user === null || user === void 0 ? void 0 : user.role) === role;\n  },\n  hasAnyRole: roles => {\n    const user = authService.getCurrentUser();\n    return roles.includes(user === null || user === void 0 ? void 0 : user.role);\n  },\n  validateCustomerPhone: phone => {\n    const phoneRegex = /^01[0-9]{9}$/;\n    return phoneRegex.test(phone);\n  },\n  formatCurrency: amount => {\n    const num = parseFloat(amount) || 0;\n    return new Intl.NumberFormat('ar-EG', {\n      style: 'currency',\n      currency: 'EGP',\n      minimumFractionDigits: 0\n    }).format(num);\n  },\n  formatDuration: minutes => {\n    if (!minutes || minutes === 0) return 'ÙˆÙ‚Øª Ù…ÙØªÙˆØ­';\n    if (minutes < 60) return `${minutes} Ø¯Ù‚ÙŠÙ‚Ø©`;\n    const hours = Math.floor(minutes / 60);\n    const remainingMinutes = minutes % 60;\n    return `${hours} Ø³Ø§Ø¹Ø©${remainingMinutes > 0 ? ` ${remainingMinutes} Ø¯Ù‚ÙŠÙ‚Ø©` : ''}`;\n  },\n  formatTime: dateString => {\n    try {\n      return new Date(dateString).toLocaleTimeString('ar-EG', {\n        hour: '2-digit',\n        minute: '2-digit'\n      });\n    } catch {\n      return '--:--';\n    }\n  },\n  formatDate: dateString => {\n    try {\n      return new Date(dateString).toLocaleDateString('ar-EG', {\n        weekday: 'short',\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric'\n      });\n    } catch {\n      return '--/--/----';\n    }\n  },\n  showNotification: (type, message) => {\n    const messages = {\n      error: `âŒ ${message}`,\n      success: `âœ… ${message}`,\n      warning: `âš ï¸ ${message}`,\n      info: `â„¹ï¸ ${message}`\n    };\n    alert(messages[type] || message);\n  },\n  // Ø¯Ø§Ù„Ø© Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©\n  checkEndpoints: async () => {\n    return await checkAvailableEndpoints();\n  }\n};\nexport default authService;","map":{"version":3,"names":["api","MAX_RETRIES","RETRY_DELAY","delay","ms","Promise","resolve","setTimeout","checkAvailableEndpoints","endpoints","method","url","name","results","endpoint","response","timeout","validateStatus","available","status","error","message","console","log","authService","login","email","password","post","success","token","localStorage","setItem","setToken","user","JSON","stringify","permissions","Date","toISOString","data","errorMessage","code","logout","removeItem","getToken","getItem","getCurrentUser","userStr","parse","isAuthenticated","handleAuthError","createGameUnbreakable","gameData","branchId","branch_id","gamePayload","description","category","price_per_15min","parseFloat","price_per_hour","Math","ceil","min_rental_time","max_rental_time","minimum_age","image_url","external_image_url","is_active","strategies","executor","simplePayload","fetch","headers","body","ok","Error","json","i","length","attempt","_error$response","_error$response2","warn","localGame","id","now","local","created_at","localGames","push","e","emergency","fetchGamesUnbreakable","params","get","strategy","includes","_response$data","gamesData","filteredLocalGames","filter","g","local_count","_error$response3","local_only","getBranches","createBranch","branchData","updateBranch","deleteBranch","deleteBranchPermanent","getBranchGames","getGames","createGame","updateGame","gameId","put","deleteGame","getActiveShift","startShift","endShift","shiftId","getBranchShifts","getShifts","getRentals","createRental","rentalData","completeRental","rentalId","paymentData","cancelRental","getActiveRentals","getCompletedRentals","getCustomers","search","createCustomer","customerData","getUsers","createUser","userData","updateUser","deleteUser","getSimpleStats","totalGames","availableGames","activeRentals","todayRentals","todayRevenue","getDashboardStats","summary","today_revenue","today_rentals","active_rentals","total_games","available_games","getDashboardAllStats","healthCheck","testApiConnection","testConnection","getAvailableGamesForCurrentBranch","game","getCurrentUserBranch","getBranchById","formatError","_error$response$data","statusText","request","hasRole","role","hasAnyRole","roles","validateCustomerPhone","phone","phoneRegex","test","formatCurrency","amount","num","Intl","NumberFormat","style","currency","minimumFractionDigits","format","formatDuration","minutes","hours","floor","remainingMinutes","formatTime","dateString","toLocaleTimeString","hour","minute","formatDate","toLocaleDateString","weekday","year","month","day","showNotification","type","messages","warning","info","alert","checkEndpoints"],"sources":["C:/Users/HP/OneDrive/project/l3bty-rental-system/frontend/src/services/authService.js"],"sourcesContent":["// src/services/authService.js\r\n\r\nimport api from './api';\r\n\r\n// ==================== Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª ====================\r\nconst MAX_RETRIES = 3;\r\nconst RETRY_DELAY = 1000; // 1 Ø«Ø§Ù†ÙŠØ©\r\n\r\n// ØªØ£Ø®ÙŠØ± ØªÙ†ÙÙŠØ°\r\nconst delay = (ms) => new Promise(resolve => setTimeout(resolve, ms));\r\n\r\n// ==================== Ø¯ÙˆØ§Ù„ Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª ====================\r\n\r\n/**\r\n * Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙŠØ±ÙØ±\r\n */\r\nconst checkAvailableEndpoints = async () => {\r\n  const endpoints = [\r\n    { method: 'GET', url: '/api/games', name: 'games_list' },\r\n    { method: 'POST', url: '/api/games', name: 'games_create' },\r\n    { method: 'POST', url: '/api/games/create', name: 'games_create_alt' },\r\n    { method: 'POST', url: '/api/branches/1/add-game', name: 'branches_add_game' },\r\n    { method: 'GET', url: '/api/health', name: 'health' },\r\n    { method: 'GET', url: '/api/test', name: 'test' }\r\n  ];\r\n  \r\n  const results = {};\r\n  \r\n  for (const endpoint of endpoints) {\r\n    try {\r\n      const response = await api({\r\n        method: endpoint.method,\r\n        url: endpoint.url,\r\n        timeout: 3000,\r\n        validateStatus: () => true // Ù„Ø§ ØªØ¹ØªØ¨Ø± Ø£ÙŠ Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø®Ø·Ø£\r\n      });\r\n      \r\n      results[endpoint.name] = {\r\n        available: response.status !== 404,\r\n        status: response.status,\r\n        url: endpoint.url,\r\n        method: endpoint.method\r\n      };\r\n    } catch (error) {\r\n      results[endpoint.name] = {\r\n        available: false,\r\n        error: error.message,\r\n        url: endpoint.url,\r\n        method: endpoint.method\r\n      };\r\n    }\r\n  }\r\n  \r\n  console.log('ğŸ” Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©:', results);\r\n  return results;\r\n};\r\n\r\nconst authService = {\r\n  // ==================== Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© ====================\r\n  \r\n// ÙÙŠ Ù…Ù„Ù src/services/authService.js\r\n\r\nlogin: async (email, password) => {\r\n    try {\r\n        console.log('ğŸ” Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„:', email);\r\n        \r\n        const response = await api.post('/auth/login', { email, password });\r\n        \r\n        if (response && response.success) {\r\n            // ØªØ®Ø²ÙŠÙ† Ø§Ù„ØªÙˆÙƒÙ† ÙˆØ§Ù„Ù…Ø³ØªØ®Ø¯Ù…\r\n            if (response.token) {\r\n                localStorage.setItem('token', response.token);\r\n                api.setToken(response.token);\r\n            }\r\n            \r\n            if (response.user) {\r\n                localStorage.setItem('user', JSON.stringify(response.user));\r\n                \r\n                // ØªØ®Ø²ÙŠÙ† Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª\r\n                if (response.permissions) {\r\n                    localStorage.setItem('permissions', JSON.stringify(response.permissions));\r\n                }\r\n            }\r\n            \r\n            localStorage.setItem('lastLogin', new Date().toISOString());\r\n            \r\n            console.log('âœ… ØªÙ… ØªØ®Ø²ÙŠÙ† Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ø¬Ø§Ø­:', response.user);\r\n            \r\n            return {\r\n                success: true,\r\n                data: {\r\n                    token: response.token,\r\n                    user: response.user,\r\n                    permissions: response.permissions\r\n                },\r\n                message: response.message || 'ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­'\r\n            };\r\n        }\r\n        \r\n        return {\r\n            success: false,\r\n            message: response?.message || 'ÙØ´Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„'\r\n        };\r\n        \r\n    } catch (error) {\r\n        console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„:', error);\r\n        \r\n        // ØªØ­Ø³ÙŠÙ† Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø®Ø·Ø£\r\n        let errorMessage = 'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…';\r\n        \r\n        if (error.status === 401) {\r\n            errorMessage = 'Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©';\r\n        } else if (error.status === 500) {\r\n            errorMessage = 'Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø®Ø§Ø¯Ù…. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰';\r\n        } else if (error.code === 'ECONNABORTED') {\r\n            errorMessage = 'Ø§Ù†ØªÙ‡Øª Ù…Ù‡Ù„Ø© Ø§Ù„Ø§ØªØµØ§Ù„. ØªØ£ÙƒØ¯ Ù…Ù† ØªØ´ØºÙŠÙ„ Ø§Ù„Ø®Ø§Ø¯Ù…';\r\n        } else if (error.message) {\r\n            errorMessage = error.message;\r\n        }\r\n        \r\n        return {\r\n            success: false,\r\n            message: errorMessage,\r\n            error: error\r\n        };\r\n    }\r\n},\r\n\r\n  logout: () => {\r\n    console.log('ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬...');\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('user');\r\n    localStorage.removeItem('lastLogin');\r\n  },\r\n\r\n  getToken: () => {\r\n    const token = localStorage.getItem('token');\r\n    return token;\r\n  },\r\n\r\n  getCurrentUser: () => {\r\n    try {\r\n      const userStr = localStorage.getItem('user');\r\n      return userStr ? JSON.parse(userStr) : null;\r\n    } catch (error) {\r\n      return null;\r\n    }\r\n  },\r\n\r\n  isAuthenticated: () => {\r\n    const token = authService.getToken();\r\n    const user = authService.getCurrentUser();\r\n    return !!(token && user);\r\n  },\r\n\r\n  // Ø¯Ø§Ù„Ø© Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ø³ØªØ¬Ø§Ø¨Ø© 401\r\n  handleAuthError: (error) => {\r\n    if (error.response && error.response.status === 401) {\r\n      console.log('ğŸ”’ ØªÙˆÙƒÙ† Ù…Ù†ØªÙ‡ÙŠ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ© - ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬ ØªÙ„Ù‚Ø§Ø¦ÙŠ');\r\n      authService.logout();\r\n      return true;\r\n    }\r\n    return false;\r\n  },\r\n\r\n  // ==================== Ø¯ÙˆØ§Ù„ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ù…Ù‚Ø§ÙˆÙ…Ø© Ù„Ù„ÙƒØ³Ø± ====================\r\n\r\n  /**\r\n   * Ø¥Ù†Ø´Ø§Ø¡ Ù„Ø¹Ø¨Ø© Ø¨Ø£ÙŠ Ø·Ø±ÙŠÙ‚Ø© Ù…Ù…ÙƒÙ†Ø© (UNBREAKABLE)\r\n   */\r\n  createGameUnbreakable: async (gameData) => {\r\n    try {\r\n      console.log('ğŸ›¡ï¸ [UNBREAKABLE] Ù…Ø­Ø§ÙˆÙ„Ø© Ø¥Ù†Ø´Ø§Ø¡ Ù„Ø¹Ø¨Ø© Ø¨Ø£ÙŠ Ø·Ø±ÙŠÙ‚Ø©:', gameData);\r\n      \r\n      const token = authService.getToken();\r\n      const user = authService.getCurrentUser();\r\n      \r\n      if (!token || !user) {\r\n        return {\r\n          success: false,\r\n          message: 'ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹'\r\n        };\r\n      }\r\n      \r\n      const branchId = gameData.branch_id || user.branch_id || 1;\r\n      \r\n      // ØªØ¬Ù‡ÙŠØ² Ø§Ù„Ø­Ù…ÙˆÙ„Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©\r\n      const gamePayload = {\r\n        name: gameData.name,\r\n        description: gameData.description || `${gameData.name}`,\r\n        category: gameData.category || 'Ø³ÙŠØ§Ø±Ø§Øª',\r\n        price_per_15min: parseFloat(gameData.price_per_15min) || 50,\r\n        price_per_hour: Math.ceil((parseFloat(gameData.price_per_15min) || 50) * 4),\r\n        branch_id: branchId,\r\n        status: gameData.status || 'available',\r\n        min_rental_time: gameData.min_rental_time || 15,\r\n        max_rental_time: gameData.max_rental_time || 120,\r\n        minimum_age: gameData.minimum_age || 16,\r\n        image_url: gameData.image_url || 'default-game.jpg',\r\n        external_image_url: gameData.external_image_url || '',\r\n        is_active: true\r\n      };\r\n      \r\n      console.log('ğŸ“¤ Ø§Ù„Ø­Ù…ÙˆÙ„Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©:', gamePayload);\r\n      \r\n      // Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ§Øª Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© - Ù…Ø±ØªØ¨Ø© Ø­Ø³Ø¨ Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©\r\n      const strategies = [\r\n        {\r\n          name: 'Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ POST /api/games',\r\n          executor: async () => {\r\n            return await api.post('/api/games', gamePayload);\r\n          }\r\n        },\r\n        {\r\n          name: 'Ù…Ø³Ø§Ø± Ø¨Ø¯ÙŠÙ„ POST /api/games/create',\r\n          executor: async () => {\r\n            return await api.post('/api/games/create', gamePayload);\r\n          }\r\n        },\r\n        {\r\n          name: 'Ø¥Ø¶Ø§ÙØ© Ù„Ø¹Ø¨Ø© Ù„ÙØ±Ø¹ POST /api/branches/{branchId}/add-game',\r\n          executor: async () => {\r\n            return await api.post(`/api/branches/${branchId}/add-game`, {\r\n              name: gamePayload.name,\r\n              price_per_15min: gamePayload.price_per_15min,\r\n              category: gamePayload.category,\r\n              description: gamePayload.description,\r\n              branch_id: branchId\r\n            });\r\n          }\r\n        },\r\n        {\r\n          name: 'Ø¥Ø¶Ø§ÙØ© Ù„Ø¹Ø¨Ø© Ù„ÙØ±Ø¹ (ØµÙŠØºØ© Ù…Ø®ØªÙ„ÙØ©) POST /api/branches/add-game',\r\n          executor: async () => {\r\n            return await api.post('/api/branches/add-game', {\r\n              ...gamePayload,\r\n              branch_id: branchId\r\n            });\r\n          }\r\n        },\r\n        {\r\n          name: 'Ø¥Ù†Ø´Ø§Ø¡ Ù„Ø¹Ø¨Ø© Ø¹Ø¨Ø± Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙØ±ÙˆØ¹ POST /api/admin/games',\r\n          executor: async () => {\r\n            return await api.post('/api/admin/games', gamePayload);\r\n          }\r\n        },\r\n        {\r\n          name: 'Ù…Ø³Ø§Ø± Ù…Ø¨Ø³Ø· POST /api/games/simple',\r\n          executor: async () => {\r\n            const simplePayload = {\r\n              name: gamePayload.name,\r\n              price_per_15min: gamePayload.price_per_15min,\r\n              branch_id: branchId\r\n            };\r\n            return await api.post('/api/games/simple', simplePayload);\r\n          }\r\n        },\r\n        {\r\n          name: 'Ø¥Ù†Ø´Ø§Ø¡ Ù„Ø¹Ø¨Ø© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… fetch (Ø·Ø±ÙŠÙ‚Ø© Ù…Ø¨Ø§Ø´Ø±Ø©)',\r\n          executor: async () => {\r\n            const response = await fetch(`http://localhost:5000/api/games`, {\r\n              method: 'POST',\r\n              headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${token}`\r\n              },\r\n              body: JSON.stringify(gamePayload)\r\n            });\r\n            \r\n            if (!response.ok) {\r\n              throw new Error(`HTTP ${response.status}`);\r\n            }\r\n            \r\n            return await response.json();\r\n          }\r\n        }\r\n      ];\r\n      \r\n      // ØªÙ†ÙÙŠØ° Ø§Ù„Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ§Øª Ø¨Ø§Ù„ØªØ±ØªÙŠØ¨\r\n      for (let i = 0; i < strategies.length; i++) {\r\n        try {\r\n          console.log(`ğŸ”„ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© ${i + 1}: ${strategies[i].name}`);\r\n          const response = await strategies[i].executor();\r\n          \r\n          console.log(`ğŸ“Š Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© ${i + 1}:`, response.status || response);\r\n          \r\n          // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù†Ø¬Ø§Ø­ Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©\r\n          if (response && (response.status === 201 || response.status === 200 || response.success)) {\r\n            console.log(`âœ… Ù†Ø¬Ø­Øª Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© ${i + 1}:`, response.data || response);\r\n            return {\r\n              success: true,\r\n              data: response.data || response,\r\n              attempt: i + 1,\r\n              method: strategies[i].name\r\n            };\r\n          }\r\n          \r\n          // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø© ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ success: true\r\n          if (response && response.success === true) {\r\n            return response;\r\n          }\r\n          \r\n        } catch (error) {\r\n          console.log(`âŒ ÙØ´Ù„Øª Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© ${i + 1}:`, error.message);\r\n          \r\n          // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø®Ø·Ø£ 404 (Ø§Ù„Ù…Ø³Ø§Ø± ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯)ØŒ Ù†ÙƒÙ…Ù„ Ù„Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©\r\n          if (error.response?.status === 404) {\r\n            continue;\r\n          }\r\n          \r\n          // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø®Ø·Ø£ 500 (Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø³ÙŠØ±ÙØ±) ÙˆÙ†Ø­Ù† ÙÙŠ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø£Ø®ÙŠØ±Ø©\r\n          if (error.response?.status >= 500 && i === strategies.length - 1) {\r\n            // Ù†Ù†ØªØ¸Ø± Ø«Ù… Ù†Ø¹ÙŠØ¯ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ù† Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© (Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø·)\r\n            await delay(RETRY_DELAY);\r\n            return authService.createGameUnbreakable(gameData);\r\n          }\r\n        }\r\n      }\r\n      \r\n      // Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª ÙØ´Ù„Øª - Ø§Ù„Ø­Ù„ Ø§Ù„Ø£Ø®ÙŠØ±: ØªØ®Ø²ÙŠÙ† Ù…Ø­Ù„ÙŠ\r\n      console.warn('âš ï¸ Ø¬Ù…ÙŠØ¹ Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø© ÙØ´Ù„ØªØŒ Ø³ÙŠØªÙ… Ø§Ù„ØªØ®Ø²ÙŠÙ† Ù…Ø­Ù„ÙŠØ§Ù‹');\r\n      \r\n      const localGame = {\r\n        id: 'local-' + Date.now(),\r\n        name: gamePayload.name,\r\n        price_per_15min: gamePayload.price_per_15min,\r\n        branch_id: branchId,\r\n        category: gamePayload.category,\r\n        status: 'Ù…ØªØ§Ø­ (Ù…Ø­Ù„ÙŠ)',\r\n        local: true,\r\n        is_active: true,\r\n        created_at: new Date().toISOString()\r\n      };\r\n      \r\n      // Ø­ÙØ¸ ÙÙŠ localStorage\r\n      try {\r\n        const localGames = JSON.parse(localStorage.getItem('local_games') || '[]');\r\n        localGames.push(localGame);\r\n        localStorage.setItem('local_games', JSON.stringify(localGames));\r\n        console.log('ğŸ’¾ ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù„Ø¹Ø¨Ø© Ù…Ø­Ù„ÙŠØ§Ù‹:', localGame.id);\r\n      } catch (e) {\r\n        console.warn('âš ï¸ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø­ÙØ¸ Ø§Ù„Ù„Ø¹Ø¨Ø© Ù…Ø­Ù„ÙŠØ§Ù‹:', e.message);\r\n      }\r\n      \r\n      return {\r\n        success: true,\r\n        data: localGame,\r\n        message: 'ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù„Ø¹Ø¨Ø© Ù…Ø­Ù„ÙŠØ§Ù‹ (Ø³ÙŠØªÙ… Ù…Ø²Ø§Ù…Ù†ØªÙ‡Ø§ Ù„Ø§Ø­Ù‚Ø§Ù‹)',\r\n        local: true,\r\n        emergency: true\r\n      };\r\n      \r\n    } catch (error) {\r\n      console.error('ğŸ”¥ Ø®Ø·Ø£ Ø´Ø§Ù…Ù„ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©:', error);\r\n      return {\r\n        success: false,\r\n        message: 'Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹: ' + error.message\r\n      };\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Ø¬Ù„Ø¨ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ù…Ø¹ Ø¯Ø¹Ù… ØªØ¹Ø¯Ø¯ Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª\r\n   */\r\n  fetchGamesUnbreakable: async (params = {}) => {\r\n    try {\r\n      console.log('ğŸ”„ Ù…Ø­Ø§ÙˆÙ„Ø© Ø¬Ù„Ø¨ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨:', params);\r\n      \r\n      const strategies = [\r\n        {\r\n          name: 'GET /api/games',\r\n          executor: async () => {\r\n            return await api.get('/api/games', { params });\r\n          }\r\n        },\r\n        {\r\n          name: 'GET /api/games/list',\r\n          executor: async () => {\r\n            return await api.get('/api/games/list', { params });\r\n          }\r\n        },\r\n        {\r\n          name: `GET /api/branches/${params.branch_id}/games`,\r\n          executor: async () => {\r\n            if (!params.branch_id) throw new Error('branch_id Ù…Ø·Ù„ÙˆØ¨');\r\n            return await api.get(`/api/branches/${params.branch_id}/games`);\r\n          }\r\n        },\r\n        {\r\n          name: 'GET /api/admin/games',\r\n          executor: async () => {\r\n            return await api.get('/api/admin/games', { params });\r\n          }\r\n        },\r\n        {\r\n          name: 'GET /api/games/all',\r\n          executor: async () => {\r\n            return await api.get('/api/games/all', { params });\r\n          }\r\n        }\r\n      ];\r\n      \r\n      for (const strategy of strategies) {\r\n        try {\r\n          // ØªØ®Ø·ÙŠ Ø§Ù„Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ§Øª Ø§Ù„ØªÙŠ ØªØªØ·Ù„Ø¨ branch_id Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù…ÙˆØ¬ÙˆØ¯Ø§Ù‹\r\n          if (strategy.name.includes('branches/') && !params.branch_id) {\r\n            continue;\r\n          }\r\n          \r\n          const response = await strategy.executor();\r\n          \r\n          if (response && (response.status === 200 || response.success)) {\r\n            const gamesData = response.data?.data || response.data || [];\r\n            console.log(`âœ… Ù†Ø¬Ø­Øª ${strategy.name}:`, gamesData.length, 'Ù„Ø¹Ø¨Ø©');\r\n            \r\n            // Ø¯Ù…Ø¬ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ù…Ø­Ù„ÙŠØ© Ø¥Ø°Ø§ ÙˆØ¬Ø¯Øª\r\n            const localGames = JSON.parse(localStorage.getItem('local_games') || '[]');\r\n            const filteredLocalGames = localGames.filter(g => \r\n              !params.branch_id || g.branch_id === params.branch_id\r\n            );\r\n            \r\n            if (filteredLocalGames.length > 0) {\r\n              console.log('ğŸ“¦ Ø¯Ù…Ø¬ Ø£Ù„Ø¹Ø§Ø¨ Ù…Ø­Ù„ÙŠØ©:', filteredLocalGames.length);\r\n              return {\r\n                success: true,\r\n                data: [...gamesData, ...filteredLocalGames],\r\n                local_count: filteredLocalGames.length,\r\n                method: strategy.name\r\n              };\r\n            }\r\n            \r\n            return {\r\n              success: true,\r\n              data: gamesData,\r\n              method: strategy.name\r\n            };\r\n          }\r\n        } catch (error) {\r\n          if (error.response?.status !== 404) {\r\n            console.log(`âš ï¸ Ø®Ø·Ø£ ÙÙŠ ${strategy.name}:`, error.message);\r\n          }\r\n        }\r\n      }\r\n      \r\n      // Ø¥Ø°Ø§ ÙØ´Ù„Øª Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§ØªØŒ Ù†Ø±Ø¬Ø¹ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ù…Ø­Ù„ÙŠØ© ÙÙ‚Ø·\r\n      const localGames = JSON.parse(localStorage.getItem('local_games') || '[]');\r\n      const filteredLocalGames = localGames.filter(g => \r\n        !params.branch_id || g.branch_id === params.branch_id\r\n      );\r\n      \r\n      return {\r\n        success: true,\r\n        data: filteredLocalGames,\r\n        local_only: true,\r\n        message: 'ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ù…Ø­Ù„ÙŠØ© ÙÙ‚Ø·'\r\n      };\r\n      \r\n    } catch (error) {\r\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨:', error);\r\n      return {\r\n        success: false,\r\n        data: [],\r\n        message: 'ÙØ´Ù„ Ø¬Ù„Ø¨ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨'\r\n      };\r\n    }\r\n  },\r\n\r\n  // ==================== BRANCHES MANAGEMENT =================\r\n  \r\n  getBranches: async () => {\r\n    try {\r\n      return await api.getBranches();\r\n    } catch (error) {\r\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ getBranches:', error);\r\n      return {\r\n        success: false,\r\n        message: 'ØªØ¹Ø°Ø± Ø¬Ù„Ø¨ Ø§Ù„ÙØ±ÙˆØ¹',\r\n        data: []\r\n      };\r\n    }\r\n  },\r\n\r\n  createBranch: async (branchData) => {\r\n    try {\r\n      console.log('ğŸ”‘ Ø§Ù„ØªÙˆÙƒÙ† Ø§Ù„Ø­Ø§Ù„ÙŠ:', authService.getToken());\r\n      console.log('ğŸ‘¤ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ:', authService.getCurrentUser());\r\n      \r\n      const response = await api.createBranch(branchData);\r\n      console.log('ğŸ“¥ Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ±Ø¹:', response);\r\n      return response;\r\n    } catch (error) {\r\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ createBranch:', error);\r\n      return {\r\n        success: false,\r\n        message: 'ØªØ¹Ø°Ø± Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ±Ø¹: ' + error.message\r\n      };\r\n    }\r\n  },\r\n\r\n  updateBranch: async (id, branchData) => {\r\n    try {\r\n      return await api.updateBranch(id, branchData);\r\n    } catch (error) {\r\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ updateBranch:', error);\r\n      return {\r\n        success: false,\r\n        message: 'ØªØ¹Ø°Ø± ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙØ±Ø¹: ' + error.message\r\n      };\r\n    }\r\n  },\r\n\r\n  deleteBranch: async (id) => {\r\n    try {\r\n      return await api.deleteBranch(id, false);\r\n    } catch (error) {\r\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ deleteBranch:', error);\r\n      return {\r\n        success: false,\r\n        message: 'ØªØ¹Ø°Ø± Ø­Ø°Ù Ø§Ù„ÙØ±Ø¹: ' + error.message\r\n      };\r\n    }\r\n  },\r\n\r\n  deleteBranchPermanent: async (id) => {\r\n    try {\r\n      console.log('ğŸ—‘ï¸ [AUTH SERVICE] Ø­Ø°Ù ÙØ±Ø¹ Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹:', id);\r\n      const response = await api.deleteBranch(id, true);\r\n      console.log('ğŸ“¥ Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø­Ø°Ù Ø§Ù„ÙØ±Ø¹:', response);\r\n      return response;\r\n    } catch (error) {\r\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„ÙØ±Ø¹:', error);\r\n      return {\r\n        success: false,\r\n        message: 'ØªØ¹Ø°Ø± Ø­Ø°Ù Ø§Ù„ÙØ±Ø¹: ' + error.message\r\n      };\r\n    }\r\n  },\r\n\r\n  getBranchGames: async (branchId) => {\r\n    try {\r\n      return await authService.fetchGamesUnbreakable({ branch_id: branchId });\r\n    } catch (error) {\r\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ getBranchGames:', error);\r\n      return {\r\n        success: false,\r\n        data: [],\r\n        message: 'ØªØ¹Ø°Ø± Ø¬Ù„Ø¨ Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„ÙØ±Ø¹'\r\n      };\r\n    }\r\n  },\r\n\r\n  // ==================== GAMES MANAGEMENT =================\r\n  \r\n  getGames: async (params = {}) => {\r\n    try {\r\n      return await authService.fetchGamesUnbreakable(params);\r\n    } catch (error) {\r\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ getGames:', error);\r\n      return {\r\n        success: false,\r\n        data: [],\r\n        message: 'ØªØ¹Ø°Ø± Ø¬Ù„Ø¨ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨'\r\n      };\r\n    }\r\n  },\r\n\r\n  createGame: async (gameData) => {\r\n    try {\r\n      return await authService.createGameUnbreakable(gameData);\r\n    } catch (error) {\r\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ createGame:', error);\r\n      return {\r\n        success: false,\r\n        message: 'ØªØ¹Ø°Ø± Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©: ' + error.message\r\n      };\r\n    }\r\n  },\r\n\r\n  updateGame: async (gameId, gameData) => {\r\n    try {\r\n      console.log(`ğŸ® ØªØ­Ø¯ÙŠØ« Ù„Ø¹Ø¨Ø© ${gameId}:`, gameData);\r\n      \r\n      // Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ§Øª Ø§Ù„ØªØ­Ø¯ÙŠØ«\r\n      const strategies = [\r\n        async () => await api.put(`/games/${gameId}`, gameData),\r\n        async () => await api.put(`/games/update/${gameId}`, gameData),\r\n        async () => await api.post(`/games/${gameId}/update`, gameData)\r\n      ];\r\n      \r\n      for (let i = 0; i < strategies.length; i++) {\r\n        try {\r\n          const response = await strategies[i]();\r\n          if (response && response.success) {\r\n            return response;\r\n          }\r\n        } catch (e) {\r\n          console.warn(`âš ï¸ ÙØ´Ù„Øª Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Ø§Ù„ØªØ­Ø¯ÙŠØ« ${i + 1}:`, e.message);\r\n        }\r\n      }\r\n      \r\n      return {\r\n        success: false,\r\n        message: 'ÙØ´Ù„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù„Ø¹Ø¨Ø© Ø¨Ø¹Ø¯ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª'\r\n      };\r\n      \r\n    } catch (error) {\r\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù„Ø¹Ø¨Ø©:', error);\r\n      return {\r\n        success: false,\r\n        message: 'ØªØ¹Ø°Ø± ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù„Ø¹Ø¨Ø©: ' + error.message\r\n      };\r\n    }\r\n  },\r\n\r\n  deleteGame: async (id) => {\r\n    try {\r\n      return await api.deleteGame(id);\r\n    } catch (error) {\r\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ deleteGame:', error);\r\n      return {\r\n        success: false,\r\n        message: 'ØªØ¹Ø°Ø± Ø­Ø°Ù Ø§Ù„Ù„Ø¹Ø¨Ø©: ' + error.message\r\n      };\r\n    }\r\n  },\r\n\r\n  // ==================== SHIFTS MANAGEMENT =================\r\n  \r\n  getActiveShift: async () => {\r\n    try {\r\n      return await api.getActiveShift();\r\n    } catch (error) {\r\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ getActiveShift:', error);\r\n      return {\r\n        success: false,\r\n        message: 'ØªØ¹Ø°Ø± Ø¬Ù„Ø¨ Ø§Ù„Ø´ÙŠÙØª Ø§Ù„Ù†Ø´Ø·'\r\n      };\r\n    }\r\n  },\r\n\r\n  startShift: async () => {\r\n    try {\r\n      return await api.startShift();\r\n    } catch (error) {\r\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ startShift:', error);\r\n      return {\r\n        success: false,\r\n        message: 'ØªØ¹Ø°Ø± Ø¨Ø¯Ø¡ Ø§Ù„Ø´ÙŠÙØª'\r\n      };\r\n    }\r\n  },\r\n\r\n  endShift: async (shiftId) => {\r\n    try {\r\n      return await api.endShift(shiftId);\r\n    } catch (error) {\r\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ endShift:', error);\r\n      return {\r\n        success: false,\r\n        message: 'ØªØ¹Ø°Ø± Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø´ÙŠÙØª'\r\n      };\r\n    }\r\n  },\r\n\r\n  getBranchShifts: async (branchId) => {\r\n    try {\r\n      console.log(`ğŸ“‹ Ø¬Ù„Ø¨ Ø´ÙŠÙØªØ§Øª Ø§Ù„ÙØ±Ø¹ ${branchId}`);\r\n      const response = await api.getShifts({ branch_id: branchId });\r\n      return response;\r\n    } catch (error) {\r\n      console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø´ÙŠÙØªØ§Øª Ø§Ù„ÙØ±Ø¹:', error);\r\n      return {\r\n        success: false,\r\n        message: 'ØªØ¹Ø°Ø± Ø¬Ù„Ø¨ Ø´ÙŠÙØªØ§Øª Ø§Ù„ÙØ±Ø¹',\r\n        data: []\r\n      };\r\n    }\r\n  },\r\n\r\n  // ==================== RENTALS MANAGEMENT =================\r\n  \r\n  getRentals: async (params = {}) => {\r\n    try {\r\n      return await api.getRentals(params);\r\n    } catch (error) {\r\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ getRentals:', error);\r\n      return {\r\n        success: false,\r\n        data: [],\r\n        message: 'ØªØ¹Ø°Ø± Ø¬Ù„Ø¨ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª'\r\n      };\r\n    }\r\n  },\r\n\r\n  createRental: async (rentalData) => {\r\n    try {\r\n      return await api.createRental(rentalData);\r\n    } catch (error) {\r\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ createRental:', error);\r\n      return {\r\n        success: false,\r\n        message: 'ØªØ¹Ø°Ø± Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ±: ' + error.message\r\n      };\r\n    }\r\n  },\r\n\r\n  completeRental: async (rentalId, paymentData = {}) => {\r\n    try {\r\n      return await api.completeRental(rentalId, paymentData);\r\n    } catch (error) {\r\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ completeRental:', error);\r\n      return {\r\n        success: false,\r\n        message: 'ØªØ¹Ø°Ø± Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ±'\r\n      };\r\n    }\r\n  },\r\n\r\n  cancelRental: async (rentalId) => {\r\n    try {\r\n      return await api.cancelRental(rentalId);\r\n    } catch (error) {\r\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ cancelRental:', error);\r\n      return {\r\n        success: false,\r\n        message: 'ØªØ¹Ø°Ø± Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ±'\r\n      };\r\n    }\r\n  },\r\n\r\n  getActiveRentals: async (branchId = null) => {\r\n    try {\r\n      return await api.getActiveRentals(branchId);\r\n    } catch (error) {\r\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ getActiveRentals:', error);\r\n      return {\r\n        success: false,\r\n        data: [],\r\n        message: 'ØªØ¹Ø°Ø± Ø¬Ù„Ø¨ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©'\r\n      };\r\n    }\r\n  },\r\n\r\n  getCompletedRentals: async (params = {}) => {\r\n    try {\r\n      return await api.getCompletedRentals(params);\r\n    } catch (error) {\r\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ getCompletedRentals:', error);\r\n      return {\r\n        success: false,\r\n        data: [],\r\n        message: 'ØªØ¹Ø°Ø± Ø¬Ù„Ø¨ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©'\r\n      };\r\n    }\r\n  },\r\n\r\n  // ==================== CUSTOMERS MANAGEMENT =================\r\n  \r\n  getCustomers: async (search = '') => {\r\n    try {\r\n      return await api.getCustomers(search);\r\n    } catch (error) {\r\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ getCustomers:', error);\r\n      return {\r\n        success: false,\r\n        data: [],\r\n        message: 'ØªØ¹Ø°Ø± Ø¬Ù„Ø¨ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡'\r\n      };\r\n    }\r\n  },\r\n\r\n  createCustomer: async (customerData) => {\r\n    try {\r\n      return await api.createCustomer(customerData);\r\n    } catch (error) {\r\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ createCustomer:', error);\r\n      return {\r\n        success: false,\r\n        message: 'ØªØ¹Ø°Ø± Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¹Ù…ÙŠÙ„'\r\n      };\r\n    }\r\n  },\r\n\r\n  // ==================== USERS MANAGEMENT =================\r\n  \r\n  getUsers: async (params = {}) => {\r\n    try {\r\n      return await api.getUsers(params);\r\n    } catch (error) {\r\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ getUsers:', error);\r\n      return {\r\n        success: false,\r\n        data: [],\r\n        message: 'ØªØ¹Ø°Ø± Ø¬Ù„Ø¨ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†'\r\n      };\r\n    }\r\n  },\r\n\r\n  createUser: async (userData) => {\r\n    try {\r\n      return await api.createUser(userData);\r\n    } catch (error) {\r\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ createUser:', error);\r\n      return {\r\n        success: false,\r\n        message: 'ØªØ¹Ø°Ø± Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…'\r\n      };\r\n    }\r\n  },\r\n\r\n  updateUser: async (id, userData) => {\r\n    try {\r\n      return await api.updateUser(id, userData);\r\n    } catch (error) {\r\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ updateUser:', error);\r\n      return {\r\n        success: false,\r\n        message: 'ØªØ¹Ø°Ø± ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…'\r\n      };\r\n    }\r\n  },\r\n\r\n  deleteUser: async (id) => {\r\n    try {\r\n      return await api.deleteUser(id);\r\n    } catch (error) {\r\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ deleteUser:', error);\r\n      return {\r\n        success: false,\r\n        message: 'ØªØ¹Ø°Ø± Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…'\r\n      };\r\n    }\r\n  },\r\n\r\n  // ==================== STATISTICS =================\r\n  \r\n  getSimpleStats: async () => {\r\n    try {\r\n      return await api.getSimpleStats();\r\n    } catch (error) {\r\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ getSimpleStats:', error);\r\n      return {\r\n        success: false,\r\n        data: {\r\n          totalGames: 0,\r\n          availableGames: 0,\r\n          activeRentals: 0,\r\n          todayRentals: 0,\r\n          todayRevenue: 0\r\n        }\r\n      };\r\n    }\r\n  },\r\n\r\n  getDashboardStats: async () => {\r\n    try {\r\n      const response = await api.get('/dashboard/stats');\r\n      return response;\r\n    } catch (error) {\r\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ getDashboardStats:', error);\r\n      return {\r\n        success: false,\r\n        message: 'ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª',\r\n        data: { \r\n          summary: {},\r\n          today_revenue: 0,\r\n          today_rentals: 0,\r\n          active_rentals: 0,\r\n          total_games: 0,\r\n          available_games: 0\r\n        }\r\n      };\r\n    }\r\n  },\r\n\r\n  getDashboardAllStats: async () => {\r\n    try {\r\n      return await api.getDashboardAllStats();\r\n    } catch (error) {\r\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ getDashboardAllStats:', error);\r\n      return {\r\n        success: false,\r\n        data: {}\r\n      };\r\n    }\r\n  },\r\n\r\n  // ==================== HEALTH CHECK =================\r\n  \r\n  healthCheck: async () => {\r\n    try {\r\n      return await api.healthCheck();\r\n    } catch (error) {\r\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ healthCheck:', error);\r\n      return {\r\n        success: false,\r\n        message: 'Ø§Ù„Ø®Ø§Ø¯Ù… ØºÙŠØ± Ù…ØªØµÙ„'\r\n      };\r\n    }\r\n  },\r\n\r\n  testApiConnection: async () => {\r\n    try {\r\n      return await api.testConnection();\r\n    } catch (error) {\r\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ testApiConnection:', error);\r\n      return {\r\n        success: false,\r\n        message: 'ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…'\r\n      };\r\n    }\r\n  },\r\n\r\n  // ==================== CURRENT BRANCH OPERATIONS =================\r\n  \r\n  getAvailableGamesForCurrentBranch: async () => {\r\n    try {\r\n      const user = authService.getCurrentUser();\r\n      if (!user?.branch_id) {\r\n        return {\r\n          success: false,\r\n          message: 'Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…Ø±ØªØ¨Ø· Ø¨ÙØ±Ø¹',\r\n          data: []\r\n        };\r\n      }\r\n      \r\n      const response = await authService.fetchGamesUnbreakable({ branch_id: user.branch_id });\r\n      \r\n      if (response.success) {\r\n        const availableGames = response.data.filter(game => \r\n          game.status === 'available' || game.status === 'Ù…ØªØ§Ø­'\r\n        );\r\n        \r\n        return {\r\n          success: true,\r\n          data: availableGames,\r\n          message: `ØªÙ… ØªØ­Ù…ÙŠÙ„ ${availableGames.length} Ù„Ø¹Ø¨Ø© Ù…ØªØ§Ø­Ø©`\r\n        };\r\n      }\r\n      \r\n      return response;\r\n    } catch (error) {\r\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ getAvailableGamesForCurrentBranch:', error);\r\n      return {\r\n        success: false,\r\n        message: 'ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„ÙØ±Ø¹',\r\n        data: []\r\n      };\r\n    }\r\n  },\r\n\r\n  getCurrentUserBranch: async () => {\r\n    try {\r\n      const user = authService.getCurrentUser();\r\n      if (!user?.branch_id) {\r\n        return {\r\n          success: false,\r\n          message: 'Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…Ø±ØªØ¨Ø· Ø¨ÙØ±Ø¹',\r\n          data: null\r\n        };\r\n      }\r\n      \r\n      return await api.getBranchById(user.branch_id);\r\n    } catch (error) {\r\n      console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ getCurrentUserBranch:', error);\r\n      return {\r\n        success: false,\r\n        message: 'ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙØ±Ø¹',\r\n        data: null\r\n      };\r\n    }\r\n  },\r\n\r\n  // ==================== UTILITY FUNCTIONS =================\r\n  \r\n  formatError: (error) => {\r\n    if (error.response) {\r\n      return error.response.data?.message || `Ø®Ø·Ø£ ${error.response.status}: ${error.response.statusText}`;\r\n    } else if (error.request) {\r\n      return 'ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…. ØªØ£ÙƒØ¯ Ù…Ù† ØªØ´ØºÙŠÙ„ Ø§Ù„Ø®Ø§Ø¯Ù…';\r\n    } else {\r\n      return error.message || 'Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';\r\n    }\r\n  },\r\n\r\n  hasRole: (role) => {\r\n    const user = authService.getCurrentUser();\r\n    return user?.role === role;\r\n  },\r\n\r\n  hasAnyRole: (roles) => {\r\n    const user = authService.getCurrentUser();\r\n    return roles.includes(user?.role);\r\n  },\r\n\r\n  validateCustomerPhone: (phone) => {\r\n    const phoneRegex = /^01[0-9]{9}$/;\r\n    return phoneRegex.test(phone);\r\n  },\r\n\r\n  formatCurrency: (amount) => {\r\n    const num = parseFloat(amount) || 0;\r\n    return new Intl.NumberFormat('ar-EG', {\r\n      style: 'currency',\r\n      currency: 'EGP',\r\n      minimumFractionDigits: 0\r\n    }).format(num);\r\n  },\r\n\r\n  formatDuration: (minutes) => {\r\n    if (!minutes || minutes === 0) return 'ÙˆÙ‚Øª Ù…ÙØªÙˆØ­';\r\n    if (minutes < 60) return `${minutes} Ø¯Ù‚ÙŠÙ‚Ø©`;\r\n    \r\n    const hours = Math.floor(minutes / 60);\r\n    const remainingMinutes = minutes % 60;\r\n    return `${hours} Ø³Ø§Ø¹Ø©${remainingMinutes > 0 ? ` ${remainingMinutes} Ø¯Ù‚ÙŠÙ‚Ø©` : ''}`;\r\n  },\r\n\r\n  formatTime: (dateString) => {\r\n    try {\r\n      return new Date(dateString).toLocaleTimeString('ar-EG', {\r\n        hour: '2-digit',\r\n        minute: '2-digit'\r\n      });\r\n    } catch {\r\n      return '--:--';\r\n    }\r\n  },\r\n\r\n  formatDate: (dateString) => {\r\n    try {\r\n      return new Date(dateString).toLocaleDateString('ar-EG', {\r\n        weekday: 'short',\r\n        year: 'numeric',\r\n        month: 'long',\r\n        day: 'numeric'\r\n      });\r\n    } catch {\r\n      return '--/--/----';\r\n    }\r\n  },\r\n\r\n  showNotification: (type, message) => {\r\n    const messages = {\r\n      error: `âŒ ${message}`,\r\n      success: `âœ… ${message}`,\r\n      warning: `âš ï¸ ${message}`,\r\n      info: `â„¹ï¸ ${message}`\r\n    };\r\n    alert(messages[type] || message);\r\n  },\r\n\r\n  // Ø¯Ø§Ù„Ø© Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©\r\n  checkEndpoints: async () => {\r\n    return await checkAvailableEndpoints();\r\n  }\r\n};\r\n\r\nexport default authService;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}