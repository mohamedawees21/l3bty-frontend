{"ast":null,"code":"// frontend/src/services/authService-fixed.js\nimport api from './api';\nclass AuthService {\n  constructor() {\n    this.token = null;\n    this.user = null;\n    this.loadFromStorage();\n  }\n  loadFromStorage() {\n    try {\n      this.token = localStorage.getItem('token');\n      const userStr = localStorage.getItem('user');\n      this.user = userStr ? JSON.parse(userStr) : null;\n      console.log('üì¶ Loaded from storage:', {\n        tokenExists: !!this.token,\n        userExists: !!this.user\n      });\n    } catch (error) {\n      console.error('‚ùå Error loading from storage:', error);\n      this.clear();\n    }\n  }\n  async login(email, password) {\n    try {\n      console.log('üîê Attempting login for:', email);\n\n      // ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ fetch ŸÖÿ®ÿßÿ¥ÿ±ÿ© ŸÑŸÑÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿßŸÑÿπŸÖŸÑ\n      const response = await fetch('http://localhost:5000/api/auth/login', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          email,\n          password\n        })\n      });\n      const data = await response.json();\n      console.log('üì• Login response:', data);\n      if (data.success) {\n        this.setAuthData(data.token, data.user);\n        return {\n          success: true,\n          data: data\n        };\n      } else {\n        return {\n          success: false,\n          message: data.message\n        };\n      }\n    } catch (error) {\n      console.error('üî• Login error:', error);\n      return {\n        success: false,\n        message: 'ÿ™ÿπÿ∞ÿ± ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ÿßŸÑÿÆÿßÿØŸÖ. ÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ™ÿ¥ÿ∫ŸäŸÑ Backend ÿπŸÑŸâ http://localhost:5000'\n      };\n    }\n  }\n  setAuthData(token, user) {\n    this.token = token;\n    this.user = user;\n    localStorage.setItem('token', token);\n    localStorage.setItem('user', JSON.stringify(user));\n    console.log('üíæ Saved auth data:', {\n      token: (token === null || token === void 0 ? void 0 : token.substring(0, 20)) + '...',\n      user: user === null || user === void 0 ? void 0 : user.name\n    });\n  }\n  clear() {\n    this.token = null;\n    this.user = null;\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n    console.log('üßπ Cleared auth data');\n  }\n  getCurrentUser() {\n    return this.user;\n  }\n  getToken() {\n    return this.token;\n  }\n  isAuthenticated() {\n    return !!this.token && !!this.user;\n  }\n  logout() {\n    this.clear();\n    window.location.href = '/login';\n  }\n}\n\n// Export singleton instance\nconst authService = new AuthService();\nexport default authService;","map":{"version":3,"names":["api","AuthService","constructor","token","user","loadFromStorage","localStorage","getItem","userStr","JSON","parse","console","log","tokenExists","userExists","error","clear","login","email","password","response","fetch","method","headers","body","stringify","data","json","success","setAuthData","message","setItem","substring","name","removeItem","getCurrentUser","getToken","isAuthenticated","logout","window","location","href","authService"],"sources":["C:/Users/HP/OneDrive/project/l3bty-rental-system/frontend/src/services/authService-fixed.js"],"sourcesContent":["// frontend/src/services/authService-fixed.js\r\nimport api from './api';\r\n\r\nclass AuthService {\r\n  constructor() {\r\n    this.token = null;\r\n    this.user = null;\r\n    this.loadFromStorage();\r\n  }\r\n\r\n  loadFromStorage() {\r\n    try {\r\n      this.token = localStorage.getItem('token');\r\n      const userStr = localStorage.getItem('user');\r\n      this.user = userStr ? JSON.parse(userStr) : null;\r\n      console.log('üì¶ Loaded from storage:', {\r\n        tokenExists: !!this.token,\r\n        userExists: !!this.user\r\n      });\r\n    } catch (error) {\r\n      console.error('‚ùå Error loading from storage:', error);\r\n      this.clear();\r\n    }\r\n  }\r\n\r\n  async login(email, password) {\r\n    try {\r\n      console.log('üîê Attempting login for:', email);\r\n      \r\n      // ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ fetch ŸÖÿ®ÿßÿ¥ÿ±ÿ© ŸÑŸÑÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿßŸÑÿπŸÖŸÑ\r\n      const response = await fetch('http://localhost:5000/api/auth/login', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ email, password })\r\n      });\r\n\r\n      const data = await response.json();\r\n      console.log('üì• Login response:', data);\r\n\r\n      if (data.success) {\r\n        this.setAuthData(data.token, data.user);\r\n        return {\r\n          success: true,\r\n          data: data\r\n        };\r\n      } else {\r\n        return {\r\n          success: false,\r\n          message: data.message\r\n        };\r\n      }\r\n    } catch (error) {\r\n      console.error('üî• Login error:', error);\r\n      return {\r\n        success: false,\r\n        message: 'ÿ™ÿπÿ∞ÿ± ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ÿßŸÑÿÆÿßÿØŸÖ. ÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ™ÿ¥ÿ∫ŸäŸÑ Backend ÿπŸÑŸâ http://localhost:5000'\r\n      };\r\n    }\r\n  }\r\n\r\n  setAuthData(token, user) {\r\n    this.token = token;\r\n    this.user = user;\r\n    localStorage.setItem('token', token);\r\n    localStorage.setItem('user', JSON.stringify(user));\r\n    console.log('üíæ Saved auth data:', { token: token?.substring(0, 20) + '...', user: user?.name });\r\n  }\r\n\r\n  clear() {\r\n    this.token = null;\r\n    this.user = null;\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('user');\r\n    console.log('üßπ Cleared auth data');\r\n  }\r\n\r\n  getCurrentUser() {\r\n    return this.user;\r\n  }\r\n\r\n  getToken() {\r\n    return this.token;\r\n  }\r\n\r\n  isAuthenticated() {\r\n    return !!this.token && !!this.user;\r\n  }\r\n\r\n  logout() {\r\n    this.clear();\r\n    window.location.href = '/login';\r\n  }\r\n}\r\n\r\n// Export singleton instance\r\nconst authService = new AuthService();\r\nexport default authService;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}