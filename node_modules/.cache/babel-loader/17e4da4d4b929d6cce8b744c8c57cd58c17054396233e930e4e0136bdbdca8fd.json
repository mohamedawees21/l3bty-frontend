{"ast":null,"code":"// src/services/authService.js - النسخة البسيطة\nimport api from './api';\nconst authService = {\n  // ==================== دوال المصادقة ====================\n  login: async (email, password) => {\n    try {\n      var _response$data;\n      const response = await api.login(email, password);\n      if (response.success && (_response$data = response.data) !== null && _response$data !== void 0 && _response$data.token) {\n        const {\n          token,\n          user\n        } = response.data;\n        api.setToken(token);\n        api.setUser(user);\n        localStorage.setItem('lastLogin', new Date().toISOString());\n      }\n      return response;\n    } catch (error) {\n      return {\n        success: false,\n        message: 'تعذر الاتصال بالخادم'\n      };\n    }\n  },\n  logout: api.logout,\n  // ==================== دوال المستخدم ====================\n  getCurrentUser: api.getUser,\n  getToken: api.getToken,\n  isAuthenticated: () => {\n    const token = api.getToken();\n    const user = api.getUser();\n    return !!(token && user);\n  },\n  hasRole: role => {\n    const user = api.getUser();\n    return (user === null || user === void 0 ? void 0 : user.role) === role;\n  },\n  hasPermission: api.hasPermission,\n  // ==================== دوال البروفايل ====================\n  getProfile: api.getProfile,\n  updateProfile: async profileData => {\n    const response = await api.updateProfile(profileData);\n    if (response.success && response.data) {\n      api.setUser(response.data);\n    }\n    return response;\n  },\n  changePassword: api.changePassword,\n  // ==================== دوال الشيفتات ====================\n  getActiveShift: api.getActiveShift,\n  startShift: api.startShift,\n  endShift: api.endShift,\n  getShifts: api.getShifts,\n  // ==================== دوال الفروع ====================\n  getBranches: api.getBranches,\n  getBranch: api.getBranch,\n  createBranch: api.createBranch,\n  updateBranch: api.updateBranch,\n  deleteBranch: api.deleteBranch,\n  getBranchGames: api.getBranchGames,\n  // ==================== دوال الألعاب ====================\n  getGames: api.getGames,\n  getGame: api.getGame,\n  createGame: api.createGame,\n  updateGame: api.updateGame,\n  deleteGame: api.deleteGame,\n  // ==================== دوال التأجيرات ====================\n  getRentals: api.getRentals,\n  getRental: api.getRental,\n  getActiveRentals: api.getActiveRentals,\n  createRental: api.createRental,\n  completeRental: api.completeRental,\n  cancelRental: api.cancelRental,\n  // ==================== دوال المستخدمين ====================\n  getUsers: api.getUsers,\n  getUser: api.getUserById,\n  createUser: api.createUser,\n  updateUser: api.updateUser,\n  deleteUser: api.deleteUser,\n  // ==================== دوال العملاء ====================\n  getCustomers: api.getCustomers,\n  createCustomer: api.createCustomer,\n  // ==================== دوال أخرى ====================\n  getDashboardStats: api.getDashboardStats,\n  healthCheck: api.healthCheck,\n  getActivities: api.getActivities,\n  // ==================== دوال المساعدة ====================\n  formatCurrency: amount => {\n    const num = parseFloat(amount) || 0;\n    return new Intl.NumberFormat('ar-EG', {\n      style: 'currency',\n      currency: 'EGP',\n      minimumFractionDigits: 0\n    }).format(num);\n  },\n  formatDuration: minutes => {\n    if (!minutes || minutes === 0) return 'وقت مفتوح';\n    if (minutes < 60) return `${minutes} دقيقة`;\n    const hours = Math.floor(minutes / 60);\n    const remainingMinutes = minutes % 60;\n    return `${hours} ساعة${remainingMinutes > 0 ? ` ${remainingMinutes} دقيقة` : ''}`;\n  },\n  formatTime: dateString => {\n    try {\n      return new Date(dateString).toLocaleTimeString('ar-EG', {\n        hour: '2-digit',\n        minute: '2-digit'\n      });\n    } catch {\n      return '--:--';\n    }\n  },\n  formatDate: dateString => {\n    try {\n      return new Date(dateString).toLocaleDateString('ar-EG', {\n        weekday: 'short',\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric'\n      });\n    } catch {\n      return '--/--/----';\n    }\n  },\n  validateCustomerPhone: phone => {\n    const phoneRegex = /^01[0-9]{9}$/;\n    return phoneRegex.test(phone);\n  },\n  showNotification: (type, message) => {\n    const messages = {\n      error: `❌ ${message}`,\n      success: `✅ ${message}`,\n      warning: `⚠️ ${message}`,\n      info: `ℹ️ ${message}`\n    };\n    alert(messages[type] || message);\n  }\n};\nexport default authService;","map":{"version":3,"names":["api","authService","login","email","password","_response$data","response","success","data","token","user","setToken","setUser","localStorage","setItem","Date","toISOString","error","message","logout","getCurrentUser","getUser","getToken","isAuthenticated","hasRole","role","hasPermission","getProfile","updateProfile","profileData","changePassword","getActiveShift","startShift","endShift","getShifts","getBranches","getBranch","createBranch","updateBranch","deleteBranch","getBranchGames","getGames","getGame","createGame","updateGame","deleteGame","getRentals","getRental","getActiveRentals","createRental","completeRental","cancelRental","getUsers","getUserById","createUser","updateUser","deleteUser","getCustomers","createCustomer","getDashboardStats","healthCheck","getActivities","formatCurrency","amount","num","parseFloat","Intl","NumberFormat","style","currency","minimumFractionDigits","format","formatDuration","minutes","hours","Math","floor","remainingMinutes","formatTime","dateString","toLocaleTimeString","hour","minute","formatDate","toLocaleDateString","weekday","year","month","day","validateCustomerPhone","phone","phoneRegex","test","showNotification","type","messages","warning","info","alert"],"sources":["C:/Users/HP/OneDrive/project/l3bty-rental-system/frontend/src/services/authService.js"],"sourcesContent":["// src/services/authService.js - النسخة البسيطة\r\nimport api from './api';\r\n\r\nconst authService = {\r\n  // ==================== دوال المصادقة ====================\r\n  login: async (email, password) => {\r\n    try {\r\n      const response = await api.login(email, password);\r\n      \r\n      if (response.success && response.data?.token) {\r\n        const { token, user } = response.data;\r\n        \r\n        api.setToken(token);\r\n        api.setUser(user);\r\n        localStorage.setItem('lastLogin', new Date().toISOString());\r\n      }\r\n      \r\n      return response;\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: 'تعذر الاتصال بالخادم'\r\n      };\r\n    }\r\n  },\r\n\r\n  logout: api.logout,\r\n\r\n  // ==================== دوال المستخدم ====================\r\n  getCurrentUser: api.getUser,\r\n  \r\n  getToken: api.getToken,\r\n  \r\n  isAuthenticated: () => {\r\n    const token = api.getToken();\r\n    const user = api.getUser();\r\n    return !!(token && user);\r\n  },\r\n\r\n  hasRole: (role) => {\r\n    const user = api.getUser();\r\n    return user?.role === role;\r\n  },\r\n\r\n  hasPermission: api.hasPermission,\r\n\r\n  // ==================== دوال البروفايل ====================\r\n  getProfile: api.getProfile,\r\n  \r\n  updateProfile: async (profileData) => {\r\n    const response = await api.updateProfile(profileData);\r\n    if (response.success && response.data) {\r\n      api.setUser(response.data);\r\n    }\r\n    return response;\r\n  },\r\n\r\n  changePassword: api.changePassword,\r\n\r\n  // ==================== دوال الشيفتات ====================\r\n  getActiveShift: api.getActiveShift,\r\n  startShift: api.startShift,\r\n  endShift: api.endShift,\r\n  getShifts: api.getShifts,\r\n\r\n  // ==================== دوال الفروع ====================\r\n  getBranches: api.getBranches,\r\n  getBranch: api.getBranch,\r\n  createBranch: api.createBranch,\r\n  updateBranch: api.updateBranch,\r\n  deleteBranch: api.deleteBranch,\r\n  getBranchGames: api.getBranchGames,\r\n\r\n  // ==================== دوال الألعاب ====================\r\n  getGames: api.getGames,\r\n  getGame: api.getGame,\r\n  createGame: api.createGame,\r\n  updateGame: api.updateGame,\r\n  deleteGame: api.deleteGame,\r\n\r\n  // ==================== دوال التأجيرات ====================\r\n  getRentals: api.getRentals,\r\n  getRental: api.getRental,\r\n  getActiveRentals: api.getActiveRentals,\r\n  createRental: api.createRental,\r\n  completeRental: api.completeRental,\r\n  cancelRental: api.cancelRental,\r\n\r\n  // ==================== دوال المستخدمين ====================\r\n  getUsers: api.getUsers,\r\n  getUser: api.getUserById,\r\n  createUser: api.createUser,\r\n  updateUser: api.updateUser,\r\n  deleteUser: api.deleteUser,\r\n\r\n  // ==================== دوال العملاء ====================\r\n  getCustomers: api.getCustomers,\r\n  createCustomer: api.createCustomer,\r\n\r\n  // ==================== دوال أخرى ====================\r\n  getDashboardStats: api.getDashboardStats,\r\n  healthCheck: api.healthCheck,\r\n  getActivities: api.getActivities,\r\n\r\n  // ==================== دوال المساعدة ====================\r\n  formatCurrency: (amount) => {\r\n    const num = parseFloat(amount) || 0;\r\n    return new Intl.NumberFormat('ar-EG', {\r\n      style: 'currency',\r\n      currency: 'EGP',\r\n      minimumFractionDigits: 0\r\n    }).format(num);\r\n  },\r\n\r\n  formatDuration: (minutes) => {\r\n    if (!minutes || minutes === 0) return 'وقت مفتوح';\r\n    if (minutes < 60) return `${minutes} دقيقة`;\r\n    \r\n    const hours = Math.floor(minutes / 60);\r\n    const remainingMinutes = minutes % 60;\r\n    return `${hours} ساعة${remainingMinutes > 0 ? ` ${remainingMinutes} دقيقة` : ''}`;\r\n  },\r\n\r\n  formatTime: (dateString) => {\r\n    try {\r\n      return new Date(dateString).toLocaleTimeString('ar-EG', {\r\n        hour: '2-digit',\r\n        minute: '2-digit'\r\n      });\r\n    } catch {\r\n      return '--:--';\r\n    }\r\n  },\r\n\r\n  formatDate: (dateString) => {\r\n    try {\r\n      return new Date(dateString).toLocaleDateString('ar-EG', {\r\n        weekday: 'short',\r\n        year: 'numeric',\r\n        month: 'long',\r\n        day: 'numeric'\r\n      });\r\n    } catch {\r\n      return '--/--/----';\r\n    }\r\n  },\r\n\r\n  validateCustomerPhone: (phone) => {\r\n    const phoneRegex = /^01[0-9]{9}$/;\r\n    return phoneRegex.test(phone);\r\n  },\r\n\r\n  showNotification: (type, message) => {\r\n    const messages = {\r\n      error: `❌ ${message}`,\r\n      success: `✅ ${message}`,\r\n      warning: `⚠️ ${message}`,\r\n      info: `ℹ️ ${message}`\r\n    };\r\n    \r\n    alert(messages[type] || message);\r\n  }\r\n};\r\n\r\nexport default authService;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}