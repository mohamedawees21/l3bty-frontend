{"ast":null,"code":"// src/services/authService.js - ÿßŸÑŸÜÿ≥ÿÆÿ© ÿßŸÑŸÖÿ≠ÿØÿ´ÿ© ŸàÿßŸÑŸÉÿßŸÖŸÑÿ©\nimport api from './api';\nconst authService = {\n  // ================= AUTHENTICATION =================\n\n  login: async (email, password) => {\n    try {\n      const response = await api.login(email, password);\n      console.log('üì• ÿßÿ≥ÿ™ÿ¨ÿßÿ®ÿ© ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ:', response);\n      if (response.success && response.data) {\n        // ‚ö° **ÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿ£ŸÜ ÿßŸÑÿ™ŸàŸÉŸÜ ŸÖŸàÿ¨ŸàÿØ**\n        const token = response.data.token;\n        const user = response.data.user;\n        console.log('üîê ÿ™ŸÖ ÿßÿ≥ÿ™ŸÑÿßŸÖ ÿßŸÑÿ™ŸàŸÉŸÜ:', token);\n        console.log('üë§ ÿ™ŸÖ ÿßÿ≥ÿ™ŸÑÿßŸÖ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ:', user);\n        if (!token) {\n          console.error('‚ùå ŸÑŸÖ Ÿäÿ™ŸÖ ÿßÿ≥ÿ™ŸÑÿßŸÖ ÿßŸÑÿ™ŸàŸÉŸÜ ŸÖŸÜ ÿßŸÑÿÆÿßÿØŸÖ!');\n          return {\n            success: false,\n            message: 'ŸÑŸÖ Ÿäÿ™ŸÖ ÿßÿ≥ÿ™ŸÑÿßŸÖ ÿßŸÑÿ™ŸàŸÉŸÜ ŸÖŸÜ ÿßŸÑÿÆÿßÿØŸÖ'\n          };\n        }\n\n        // ‚ö° **ÿ™ÿÆÿ≤ŸäŸÜ ÿßŸÑÿ™ŸàŸÉŸÜ ŸàÿßŸÑÿ®ŸäÿßŸÜÿßÿ™**\n        api.setToken(token);\n        localStorage.setItem('user', JSON.stringify(user));\n        localStorage.setItem('lastLogin', new Date().toISOString());\n        console.log('‚úÖ ÿ™ŸÖ ÿ™ÿÆÿ≤ŸäŸÜ ÿßŸÑÿ™ŸàŸÉŸÜ ŸàÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿ®ŸÜÿ¨ÿßÿ≠');\n        return {\n          success: true,\n          data: response.data,\n          message: 'ÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ ÿ®ŸÜÿ¨ÿßÿ≠'\n        };\n      } else {\n        return {\n          success: false,\n          message: response.message || 'ŸÅÿ¥ŸÑ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ'\n        };\n      }\n    } catch (error) {\n      console.error('üî• ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ:', error);\n      return {\n        success: false,\n        message: 'ÿ™ÿπÿ∞ÿ± ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ÿßŸÑÿÆÿßÿØŸÖ. ÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑÿÆÿßÿØŸÖ ÿπŸÑŸâ ÿßŸÑŸÖŸÜŸÅÿ∞ 5000'\n      };\n    }\n  },\n  logout: () => {\n    api.logout();\n  },\n  getCurrentUser: () => {\n    try {\n      const userStr = localStorage.getItem('user');\n      return userStr ? JSON.parse(userStr) : null;\n    } catch (error) {\n      return null;\n    }\n  },\n  getToken: () => {\n    const token = localStorage.getItem('token');\n    return token ? token.trim() : null;\n  },\n  isAuthenticated: () => {\n    const token = authService.getToken();\n    const user = authService.getCurrentUser();\n    return !!(token && user);\n  },\n  // ================= PROFILE MANAGEMENT =================\n\n  updateProfile: async profileData => {\n    try {\n      const response = await api.updateProfile(profileData);\n      if (response.success && response.user) {\n        localStorage.setItem('user', JSON.stringify(response.user));\n      }\n      return response;\n    } catch (error) {\n      return {\n        success: false,\n        message: error.message || 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÖŸÑŸÅ ÿßŸÑÿ¥ÿÆÿµŸä'\n      };\n    }\n  },\n  changePassword: async passwordData => {\n    try {\n      return await api.changePassword(passwordData);\n    } catch (error) {\n      return {\n        success: false,\n        message: error.message || 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ∫ŸäŸäÿ± ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±'\n      };\n    }\n  },\n  // ================= DASHBOARD STATISTICS =================\n\n  // üÜï ÿØÿßŸÑÿ© ÿ¨ÿØŸäÿØÿ©: ÿ¨ŸÑÿ® ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ©\n  getSimpleStats: async () => {\n    try {\n      console.log('üìä ÿ¨ŸÑÿ® ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿßŸÑŸÖÿ®ÿ≥ÿ∑ÿ©...');\n      const response = (await api.getSimpleStats) ? await api.getSimpleStats() : await api.get('/dashboard/stats/simple');\n      return response;\n    } catch (error) {\n      console.error('‚ùå ÿÆÿ∑ÿ£ ŸÅŸä ÿ¨ŸÑÿ® ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿßŸÑŸÖÿ®ÿ≥ÿ∑ÿ©:', error);\n      return {\n        success: false,\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™',\n        data: {\n          available_games: 0,\n          total_games: 0,\n          today_revenue: 0,\n          today_rentals: 0,\n          active_rentals: 0\n        }\n      };\n    }\n  },\n  // üÜï ÿØÿßŸÑÿ© ÿ¨ÿØŸäÿØÿ©: ÿ¨ŸÑÿ® ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿßŸÑŸÖÿØŸäÿ±\n  getManagerStats: async () => {\n    try {\n      console.log('üëë ÿ¨ŸÑÿ® ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿßŸÑŸÖÿØŸäÿ±...');\n      const response = (await api.getManagerStats) ? await api.getManagerStats() : await api.get('/dashboard/stats/manager');\n      return response;\n    } catch (error) {\n      console.error('‚ùå ÿÆÿ∑ÿ£ ŸÅŸä ÿ¨ŸÑÿ® ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿßŸÑŸÖÿØŸäÿ±:', error);\n      return {\n        success: false,\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿßŸÑŸÖÿØŸäÿ±'\n      };\n    }\n  },\n  // ÿØÿßŸÑÿ© ŸÖŸàÿ¨ŸàÿØÿ© ÿ®ÿßŸÑŸÅÿπŸÑ - ŸÜÿ≥ÿÆÿ© ŸÖÿ≠ÿ≥ŸÜÿ©\n  getDashboardStats: async () => {\n    try {\n      console.log('üìà ÿ¨ŸÑÿ® ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ...');\n      const response = await api.get('/dashboard/stats');\n      return response;\n    } catch (error) {\n      console.error('‚ùå ÿÆÿ∑ÿ£ ŸÅŸä ÿ¨ŸÑÿ® ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ:', error);\n      return {\n        success: false,\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™',\n        data: {\n          summary: {},\n          today_revenue: 0,\n          today_rentals: 0,\n          active_rentals: 0,\n          total_games: 0,\n          available_games: 0,\n          total_users: 0,\n          total_branches: 0\n        }\n      };\n    }\n  },\n  // üÜï ÿØÿßŸÑÿ© ÿ¨ÿØŸäÿØÿ©: ÿ¨ŸÑÿ® ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ŸÉÿßŸÖŸÑÿ© ŸÑŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ\n  getDashboardAllStats: async () => {\n    try {\n      console.log('üìä ÿ¨ŸÑÿ® ÿ¨ŸÖŸäÿπ ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ...');\n      const response = (await api.getDashboardAllStats) ? await api.getDashboardAllStats() : await api.get('/dashboard/stats/all');\n      return response;\n    } catch (error) {\n      console.error('‚ùå ÿÆÿ∑ÿ£ ŸÅŸä ÿ¨ŸÑÿ® ÿ¨ŸÖŸäÿπ ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™:', error);\n\n      // Fallback: ÿ¨ŸÑÿ® ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ© ŸÅŸÇÿ∑\n      try {\n        var _basicStats$data, _basicStats$data2;\n        const basicStats = await authService.getDashboardStats();\n        return {\n          success: basicStats.success,\n          data: {\n            basic: basicStats.data || {},\n            branchRevenues: [],\n            completedRentalsByBranch: [],\n            todayRevenue: ((_basicStats$data = basicStats.data) === null || _basicStats$data === void 0 ? void 0 : _basicStats$data.today_revenue) || 0,\n            todayRentals: ((_basicStats$data2 = basicStats.data) === null || _basicStats$data2 === void 0 ? void 0 : _basicStats$data2.today_rentals) || 0\n          }\n        };\n      } catch {\n        return {\n          success: false,\n          message: 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™',\n          data: {\n            basic: {},\n            branchRevenues: [],\n            completedRentalsByBranch: [],\n            todayRevenue: 0,\n            todayRentals: 0\n          }\n        };\n      }\n    }\n  },\n  // ================= BRANCHES MANAGEMENT =================\n\n  getBranches: async () => {\n    try {\n      return await api.get('/branches');\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÅÿ±Ÿàÿπ',\n        data: []\n      };\n    }\n  },\n  createBranch: async branchData => {\n    try {\n      console.log('üîë ÿßŸÑÿ™ŸàŸÉŸÜ ÿßŸÑÿ≠ÿßŸÑŸä:', authService.getToken());\n      console.log('üë§ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ÿßŸÑÿ≠ÿßŸÑŸä:', authService.getCurrentUser());\n      const response = await api.post('/branches', branchData);\n      console.log('üì• ÿßÿ≥ÿ™ÿ¨ÿßÿ®ÿ© ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÅÿ±ÿπ:', response);\n      return response;\n    } catch (error) {\n      var _error$response, _error$response2;\n      console.error('üî• ÿÆÿ∑ÿ£ ŸÅŸä createBranch:', {\n        message: error.message,\n        response: (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data,\n        status: (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.status\n      });\n      return {\n        success: false,\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÅÿ±ÿπ: ' + (error.message || 'ÿÆÿ∑ÿ£ ÿ∫Ÿäÿ± ŸÖÿπÿ±ŸàŸÅ')\n      };\n    }\n  },\n  updateBranch: async (id, branchData) => {\n    try {\n      return await api.put(`/branches/${id}`, branchData);\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÅÿ±ÿπ'\n      };\n    }\n  },\n  deleteBranch: async id => {\n    try {\n      return await api.delete(`/branches/${id}`);\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ≠ÿ∞ŸÅ ÿßŸÑŸÅÿ±ÿπ'\n      };\n    }\n  },\n  // ÿ≠ÿ∞ŸÅ ŸÅÿ±ÿπ ŸÜŸáÿßÿ¶ŸäÿßŸã\n  deleteBranchPermanent: async id => {\n    try {\n      console.log('üóëÔ∏è [AUTH SERVICE] ÿ≠ÿ∞ŸÅ ŸÅÿ±ÿπ ŸÜŸáÿßÿ¶ŸäÿßŸã:', id);\n      const token = authService.getToken();\n      if (!token) {\n        return {\n          success: false,\n          message: 'ÿßŸÑÿ™ŸàŸÉŸÜ ÿ∫Ÿäÿ± ŸÖŸàÿ¨ŸàÿØ. Ÿäÿ±ÿ¨Ÿâ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ'\n        };\n      }\n      const response = await fetch(`http://localhost:5000/api/branches/${id}?permanent=true`, {\n        method: 'DELETE',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      });\n      const data = await response.json();\n      console.log('üì• ÿßÿ≥ÿ™ÿ¨ÿßÿ®ÿ© ÿ≠ÿ∞ŸÅ ÿßŸÑŸÅÿ±ÿπ:', data);\n      return {\n        success: data.success || false,\n        message: data.message || 'ÿ™ŸÖ ÿßŸÑÿ≠ÿ∞ŸÅ',\n        data: data\n      };\n    } catch (error) {\n      console.error('üî• ÿÆÿ∑ÿ£ ŸÅŸä ÿ≠ÿ∞ŸÅ ÿßŸÑŸÅÿ±ÿπ:', error);\n      return {\n        success: false,\n        message: 'ÿ™ÿπÿ∞ÿ± ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ÿßŸÑÿÆÿßÿØŸÖ: ' + error.message\n      };\n    }\n  },\n  // ================= GAMES MANAGEMENT =================\n\n  // ÿ™ÿπÿØŸäŸÑ ÿßŸÑÿØÿßŸÑÿ© ÿßŸÑÿ≠ÿßŸÑŸäÿ©\n  getGames: async (params = {}) => {\n    try {\n      console.log('üéÆ ÿ¨ŸÑÿ® ÿßŸÑÿ£ŸÑÿπÿßÿ®:', params);\n\n      // ÿ•ÿ∞ÿß ÿ∑ŸÑÿ®ŸÜÿß ÿ¨ŸÖŸäÿπ ÿßŸÑŸÅÿ±Ÿàÿπÿå ÿßÿ≥ÿ™ÿÆÿØŸÖ ÿßŸÑÿØÿßŸÑÿ© ÿßŸÑÿ¨ÿØŸäÿØÿ©\n      if (params.all_branches === true) {\n        return await authService.getAllGamesFromAllBranches();\n      }\n\n      // ÿ•ÿ∞ÿß ŸÉÿßŸÜ ŸáŸÜÿßŸÉ ŸÅŸÑÿ™ÿ± ŸÖÿ™ŸÇÿØŸÖÿå ÿßÿ≥ÿ™ÿÆÿØŸÖ ÿßŸÑÿØÿßŸÑÿ© ÿßŸÑÿ¨ÿØŸäÿØÿ©\n      if (params.branch_id || params.status || params.category) {\n        return await authService.getGamesWithFilter(params);\n      }\n\n      // Ÿàÿ•ŸÑÿß ÿßÿ≥ÿ™ÿÆÿØŸÖ ÿßŸÑÿ∑ÿ±ŸäŸÇÿ© ÿßŸÑÿπÿßÿØŸäÿ©\n      const response = await api.get('/games', {\n        params\n      });\n      if (!response.data) {\n        return {\n          success: false,\n          message: 'ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ®ŸäÿßŸÜÿßÿ™',\n          data: [],\n          stats: {\n            total: 0,\n            available: 0,\n            rented: 0,\n            maintenance: 0\n          }\n        };\n      }\n\n      // ÿ≠ÿ≥ÿßÿ® ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™\n      const stats = {\n        total: response.data.length,\n        available: response.data.filter(g => g.status === 'ŸÖÿ™ÿßÿ≠').length,\n        rented: response.data.filter(g => g.status === 'ŸÖÿ§ÿ¨ÿ±ÿ©').length,\n        maintenance: response.data.filter(g => g.status === 'ÿµŸäÿßŸÜÿ©').length\n      };\n      return {\n        success: true,\n        data: response.data,\n        stats: stats,\n        message: `ÿ™ŸÖ ÿ¨ŸÑÿ® ${response.data.length} ŸÑÿπÿ®ÿ©`\n      };\n    } catch (error) {\n      console.error('‚ùå ÿÆÿ∑ÿ£ ŸÅŸä getGames:', error);\n      return {\n        success: false,\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ£ŸÑÿπÿßÿ®',\n        data: [],\n        stats: {\n          total: 0,\n          available: 0,\n          rented: 0,\n          maintenance: 0\n        }\n      };\n    }\n  },\n  createGame: async gameData => {\n    try {\n      console.log('üéÆ ŸÖÿ≠ÿßŸàŸÑÿ© ÿ•ŸÜÿ¥ÿßÿ° ŸÑÿπÿ®ÿ© ÿ¨ÿØŸäÿØÿ©');\n      console.log('üì¶ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÑÿπÿ®ÿ© ÿßŸÑŸÖÿ±ÿ≥ŸÑÿ©:', gameData);\n\n      // ÿ™ŸÜÿ∏ŸäŸÅ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ©\n      const cleanGameData = {\n        name: String(gameData.name || '').trim(),\n        description: gameData.description || `${gameData.name} - ${gameData.category || 'ÿ≥Ÿäÿßÿ±ÿßÿ™'}`,\n        category: gameData.category || 'ÿ≥Ÿäÿßÿ±ÿßÿ™',\n        price_per_15min: parseFloat(gameData.price_per_15min) || 50,\n        price_per_hour: Math.ceil(parseFloat(gameData.price_per_15min) * 4) || 200,\n        branch_id: parseInt(gameData.branch_id) || 1,\n        status: gameData.status || 'ŸÖÿ™ÿßÿ≠',\n        min_rental_time: parseInt(gameData.min_rental_time) || 15,\n        max_rental_time: parseInt(gameData.max_rental_time) || 120,\n        minimum_age: parseInt(gameData.minimum_age) || 16,\n        image_url: gameData.image_url || 'default-game.jpg',\n        is_active: 1\n      };\n      if (!cleanGameData.name) {\n        return {\n          success: false,\n          message: 'ÿßÿ≥ŸÖ ÿßŸÑŸÑÿπÿ®ÿ© ŸÖÿ∑ŸÑŸàÿ®'\n        };\n      }\n      console.log('üßπ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÜÿ∏ŸäŸÅÿ© ÿßŸÑŸÖÿ±ÿ≥ŸÑÿ© ŸÑŸÑÿÆÿßÿØŸÖ:', cleanGameData);\n\n      // ‚ö° ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ© ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ©: ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑŸÖÿ≥ÿßÿ± ÿßŸÑŸÇŸäÿßÿ≥Ÿä\n      try {\n        console.log('üéØ ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ© ŸÖÿπ POST /games');\n        const response = await api.post('/games', cleanGameData);\n        console.log('üì• ÿßÿ≥ÿ™ÿ¨ÿßÿ®ÿ© ŸÖŸÜ /games:', response);\n        if (response.success) {\n          return response;\n        } else {\n          throw new Error(response.message || 'ŸÅÿ¥ŸÑ ŸÅŸä ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÑÿπÿ®ÿ©');\n        }\n      } catch (apiError) {\n        console.log('‚ö†Ô∏è ŸÅÿ¥ŸÑ ŸÖÿπ /games:', apiError.message);\n\n        // ‚ö° ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ© ÿßŸÑÿ´ÿßŸÜŸäÿ©: ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ fetch ŸÖÿ®ÿßÿ¥ÿ±ÿ© ŸÖÿπ ŸÖÿπÿßŸÑÿ¨ÿ© ÿ£ÿÆÿ∑ÿßÿ° ŸÖŸÅÿµŸÑÿ©\n        try {\n          console.log('üîÑ ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ© ÿßŸÑÿ´ÿßŸÜŸäÿ© ŸÖÿπ fetch ŸÖÿ®ÿßÿ¥ÿ±');\n          const token = authService.getToken();\n          const response = await fetch('http://localhost:5000/api/games', {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json',\n              'Authorization': token ? `Bearer ${token}` : ''\n            },\n            body: JSON.stringify(cleanGameData)\n          });\n          console.log('üìä ÿ≠ÿßŸÑÿ© ÿßŸÑÿßÿ≥ÿ™ÿ¨ÿßÿ®ÿ©:', response.status, response.statusText);\n          if (!response.ok) {\n            // ÿ≠ÿßŸàŸÑ ŸÇÿ±ÿßÿ°ÿ© body ÿßŸÑÿÆÿ∑ÿ£\n            let errorText = '';\n            try {\n              errorText = await response.text();\n              console.log('üìù ŸÜÿµ ÿßŸÑÿÆÿ∑ÿ£:', errorText.substring(0, 500));\n            } catch (e) {\n              errorText = response.statusText;\n            }\n            throw new Error(`HTTP ${response.status}: ${errorText}`);\n          }\n          const data = await response.json();\n          console.log('üì• ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿßÿ≥ÿ™ÿ¨ÿßÿ®ÿ©:', data);\n          if (data.success) {\n            return data;\n          } else {\n            throw new Error(data.message || 'ŸÅÿ¥ŸÑ ÿ∫Ÿäÿ± ŸÖÿπÿ±ŸàŸÅ');\n          }\n        } catch (fetchError) {\n          console.log('‚ö†Ô∏è ŸÅÿ¥ŸÑÿ™ ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ© ÿßŸÑÿ´ÿßŸÜŸäÿ©:', fetchError.message);\n\n          // ‚ö° ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ© ÿßŸÑÿ´ÿßŸÑÿ´ÿ©: SQL ŸÖÿ®ÿßÿ¥ÿ± ÿ•ÿ∞ÿß ŸÉÿßŸÜ ÿßŸÑÿÆÿßÿØŸÖ Ÿäÿ≥ŸÖÿ≠\n          try {\n            console.log('üîß ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ© ÿßŸÑÿ´ÿßŸÑÿ´ÿ©: ÿ•ÿØÿÆÿßŸÑ SQL ŸÖÿ®ÿßÿ¥ÿ±');\n\n            // ÿ∑ÿ±ŸäŸÇÿ© ÿ®ÿ≥Ÿäÿ∑ÿ©: ÿßÿÆÿ™ÿ®ÿßÿ± ÿ•ÿ∞ÿß ŸÉÿßŸÜ ÿßŸÑÿ¨ÿØŸàŸÑ ŸÖŸàÿ¨ŸàÿØÿßŸã\n            const testResponse = await fetch('http://localhost:5000/api/health');\n            if (!testResponse.ok) {\n              throw new Error('ÿßŸÑÿÆÿßÿØŸÖ ÿ∫Ÿäÿ± ŸÖÿ™ÿßÿ≠');\n            }\n\n            // ÿ™ŸÇÿØŸäŸÖ ÿ≠ŸÑ ŸÑŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ\n            return {\n              success: false,\n              message: 'ŸÅÿ¥ŸÑ ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÑÿπÿ®ÿ©. ÿßŸÑÿ≠ŸÑŸàŸÑ ÿßŸÑŸÖŸÖŸÉŸÜÿ©:',\n              solutions: ['1. ÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßÿ™ÿµÿßŸÑ ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™', '2. ÿ™ÿ£ŸÉÿØ ŸÖŸÜ Ÿàÿ¨ŸàÿØ ÿ¨ÿØŸàŸÑ games ŸÅŸä ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™', '3. ÿßŸÅÿ™ÿ≠ console ÿßŸÑÿÆÿßÿØŸÖ ŸÑÿ±ÿ§Ÿäÿ© ÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑÿÆÿ∑ÿ£', '4. ÿ¨ÿ±ÿ® ÿ™ŸÜŸÅŸäÿ∞ SQL ÿßŸÑÿ™ÿßŸÑŸä ŸÅŸä ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™:'],\n              sqlFix: `\n              CREATE TABLE IF NOT EXISTS games (\n                id INT AUTO_INCREMENT PRIMARY KEY,\n                name VARCHAR(255) NOT NULL,\n                branch_id INT NOT NULL,\n                price_per_15min DECIMAL(10,2) NOT NULL,\n                status VARCHAR(50) DEFAULT 'ŸÖÿ™ÿßÿ≠',\n                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n              );\n              \n              INSERT INTO games (name, branch_id, price_per_15min, status) \n              VALUES ('${cleanGameData.name}', ${cleanGameData.branch_id}, ${cleanGameData.price_per_15min}, 'ŸÖÿ™ÿßÿ≠');\n            `\n            };\n          } catch (finalError) {\n            console.log('üíÄ ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿßÿ™ ŸÅÿ¥ŸÑÿ™:', finalError.message);\n          }\n        }\n      }\n\n      // ÿ•ÿ∞ÿß ŸàÿµŸÑŸÜÿß ŸáŸÜÿßÿå ŸÉŸÑ ÿ¥Ÿäÿ° ŸÅÿ¥ŸÑ\n      return {\n        success: false,\n        message: 'ŸÅÿ¥ŸÑ ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÑÿπÿ®ÿ©. Ÿäÿ±ÿ¨Ÿâ:',\n        urgentSteps: ['üîç ÿßŸÅÿ™ÿ≠ terminal ÿßŸÑÿÆÿßÿØŸÖ Ÿàÿ¥ÿßŸáÿØ logs', 'üóÑÔ∏è ÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿ¨ÿØŸàŸÑ games ŸÅŸä ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™', 'üîå ÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿßÿ™ÿµÿßŸÑ MySQL', 'üîÑ ÿ£ÿπÿØ ÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑÿÆÿßÿØŸÖ']\n      };\n    } catch (error) {\n      console.error('üî• ÿÆÿ∑ÿ£ ÿ¥ÿßŸÖŸÑ ŸÅŸä createGame:', error);\n      return {\n        success: false,\n        message: 'ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÇÿπ',\n        error: error.message,\n        stack: error.stack\n      };\n    }\n  },\n  updateGame: async (gameId, gameData) => {\n    try {\n      // ÿ•ÿ∞ÿß ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ price_per_15min ŸÅŸÇÿ∑ÿå ÿßÿ≠ÿ≥ÿ® price_per_hour\n      if (gameData.price_per_15min && !gameData.price_per_hour) {\n        gameData.price_per_hour = Math.ceil(gameData.price_per_15min * 4);\n      }\n      console.log('üîÑ ÿ™ÿ≠ÿØŸäÿ´ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÑÿπÿ®ÿ©:', gameId, gameData);\n      const response = await api.put(`/games/${gameId}`, gameData);\n      if (response.data.success) {\n        console.log('‚úÖ ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÑÿπÿ®ÿ© ÿ®ŸÜÿ¨ÿßÿ≠');\n        return response.data;\n      } else {\n        console.error('‚ùå ŸÅÿ¥ŸÑ ŸÅŸä ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÑÿπÿ®ÿ©:', response.data);\n        return response.data;\n      }\n    } catch (error) {\n      var _error$response3, _error$response4, _error$response4$data;\n      console.error('üî• ÿÆÿ∑ÿ£ ŸÅŸä updateGame:', error);\n      return {\n        success: false,\n        status: ((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.status) || 500,\n        message: ((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : (_error$response4$data = _error$response4.data) === null || _error$response4$data === void 0 ? void 0 : _error$response4$data.message) || 'ÿ™ÿπÿ∞ÿ± ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ÿßŸÑÿÆÿßÿØŸÖ',\n        error\n      };\n    }\n  },\n  deleteGame: async id => {\n    try {\n      return await api.delete(`/games/${id}`);\n    } catch (error) {\n      return {\n        success: false,\n        message: error.message || 'ÿ™ÿπÿ∞ÿ± ÿ≠ÿ∞ŸÅ ÿßŸÑŸÑÿπÿ®ÿ©'\n      };\n    }\n  },\n  deleteGamePermanent: async id => {\n    try {\n      return await api.deleteGamePermanent(id);\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ≠ÿ∞ŸÅ ÿßŸÑŸÑÿπÿ®ÿ© ŸÜŸáÿßÿ¶ŸäÿßŸã'\n      };\n    }\n  },\n  // ================= GAMES MANAGEMENT - ENHANCED =================\n\n  // üÜï ÿØÿßŸÑÿ© ÿ¨ÿØŸäÿØÿ©: ÿ¨ŸÑÿ® ÿ¨ŸÖŸäÿπ ÿßŸÑÿ£ŸÑÿπÿßÿ® ŸÖŸÜ ÿ¨ŸÖŸäÿπ ÿßŸÑŸÅÿ±Ÿàÿπ\n  getAllGamesFromAllBranches: async () => {\n    try {\n      console.log('üéÆ ÿ¨ŸÑÿ® ÿ¨ŸÖŸäÿπ ÿßŸÑÿ£ŸÑÿπÿßÿ® ŸÖŸÜ ÿ¨ŸÖŸäÿπ ÿßŸÑŸÅÿ±Ÿàÿπ...');\n      const response = await api.get('/games/all-branches');\n      return response;\n    } catch (error) {\n      console.error('‚ùå ÿÆÿ∑ÿ£ ŸÅŸä ÿ¨ŸÑÿ® ÿ¨ŸÖŸäÿπ ÿßŸÑÿ£ŸÑÿπÿßÿ®:', error);\n      return {\n        success: false,\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ£ŸÑÿπÿßÿ® ŸÖŸÜ ÿ¨ŸÖŸäÿπ ÿßŸÑŸÅÿ±Ÿàÿπ',\n        data: []\n      };\n    }\n  },\n  // üÜï ÿØÿßŸÑÿ© ÿ¨ÿØŸäÿØÿ©: ÿ¨ŸÑÿ® ÿßŸÑÿ£ŸÑÿπÿßÿ® ŸÖÿπ ŸÅŸÑÿ™ÿ±ÿ© ŸÖÿ™ŸÇÿØŸÖÿ©\n  getGamesWithFilter: async (filters = {}) => {\n    try {\n      console.log('üéÆ ÿ¨ŸÑÿ® ÿßŸÑÿ£ŸÑÿπÿßÿ® ŸÖÿπ ÿßŸÑŸÅŸÑÿ™ÿ±ÿ©:', filters);\n      const params = {};\n      if (filters.branch_id && filters.branch_id !== 'all') {\n        params.branch_id = filters.branch_id;\n      }\n      if (filters.status && filters.status !== 'all') {\n        params.status = filters.status;\n      }\n      if (filters.category && filters.category !== 'all') {\n        params.category = filters.category;\n      }\n      const response = await api.get('/games/with-filter', {\n        params\n      });\n      return response;\n    } catch (error) {\n      console.error('‚ùå ÿÆÿ∑ÿ£ ŸÅŸä ÿ¨ŸÑÿ® ÿßŸÑÿ£ŸÑÿπÿßÿ® ŸÖÿπ ÿßŸÑŸÅŸÑÿ™ÿ±ÿ©:', error);\n      return {\n        success: false,\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ£ŸÑÿπÿßÿ® ŸÖÿπ ÿßŸÑŸÅŸÑÿ™ÿ±ÿ©',\n        data: []\n      };\n    }\n  },\n  // üÜï ÿØÿßŸÑÿ© ÿ¨ÿØŸäÿØÿ©: ÿ¨ŸÑÿ® ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿßŸÑÿ£ŸÑÿπÿßÿ® ŸÑŸÉŸÑ ŸÅÿ±ÿπ\n  getGamesStatsByBranch: async () => {\n    try {\n      console.log('üìä ÿ¨ŸÑÿ® ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿßŸÑÿ£ŸÑÿπÿßÿ® ÿ≠ÿ≥ÿ® ÿßŸÑŸÅÿ±Ÿàÿπ...');\n      const response = await api.get('/games/stats/by-branch');\n      return response;\n    } catch (error) {\n      console.error('‚ùå ÿÆÿ∑ÿ£ ŸÅŸä ÿ¨ŸÑÿ® ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿßŸÑŸÅÿ±Ÿàÿπ:', error);\n      return {\n        success: false,\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿßŸÑŸÅÿ±Ÿàÿπ',\n        data: [],\n        totals: {\n          total_branches: 0,\n          total_games: 0,\n          available_games: 0,\n          rented_games: 0,\n          maintenance_games: 0\n        }\n      };\n    }\n  },\n  // üÜï ÿØÿßŸÑÿ© ÿ¨ÿØŸäÿØÿ©: ÿ¨ŸÑÿ® ÿßŸÑÿ£ŸÑÿπÿßÿ® ŸÖÿπ ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑŸÅÿ±ÿπ\n  getGamesWithBranchInfo: async (branchId = null) => {\n    try {\n      console.log('üéÆ ÿ¨ŸÑÿ® ÿßŸÑÿ£ŸÑÿπÿßÿ® ŸÖÿπ ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑŸÅÿ±ÿπ:', branchId);\n      const params = {\n        include_branch_info: 'true'\n      };\n      if (branchId && branchId !== 'all') {\n        params.branch_id = branchId;\n      }\n      const response = await api.get('/games', {\n        params\n      });\n      return response;\n    } catch (error) {\n      console.error('‚ùå ÿÆÿ∑ÿ£ ŸÅŸä ÿ¨ŸÑÿ® ÿßŸÑÿ£ŸÑÿπÿßÿ® ŸÖÿπ ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑŸÅÿ±ÿπ:', error);\n      return {\n        success: false,\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ£ŸÑÿπÿßÿ®',\n        data: []\n      };\n    }\n  },\n  // ================= USERS MANAGEMENT =================\n\n  getUsers: async () => {\n    try {\n      return await api.get('/users');\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ',\n        data: []\n      };\n    }\n  },\n  createUser: async userData => {\n    try {\n      return await api.post('/users', userData);\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ'\n      };\n    }\n  },\n  updateUser: async (id, userData) => {\n    try {\n      return await api.put(`/users/${id}`, userData);\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ'\n      };\n    }\n  },\n  deleteUser: async id => {\n    try {\n      return await api.delete(`/users/${id}`);\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ≠ÿ∞ŸÅ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ'\n      };\n    }\n  },\n  deleteUserPermanent: async id => {\n    try {\n      return await api.deleteUserPermanent(id);\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ≠ÿ∞ŸÅ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ŸÜŸáÿßÿ¶ŸäÿßŸã'\n      };\n    }\n  },\n  // ================= CUSTOMERS =================\n\n  getCustomers: async (search = '') => {\n    try {\n      const params = search ? {\n        search\n      } : {};\n      return await api.get('/customers', {\n        params\n      });\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿπŸÖŸÑÿßÿ°',\n        data: []\n      };\n    }\n  },\n  createCustomer: async customerData => {\n    try {\n      return await api.post('/customers', customerData);\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿπŸÖŸäŸÑ'\n      };\n    }\n  },\n  // ================= RENTALS =================\n\n  getRentals: async (params = {}) => {\n    try {\n      return await api.get('/rentals', {\n        params\n      });\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ™ÿ£ÿ¨Ÿäÿ±ÿßÿ™',\n        data: []\n      };\n    }\n  },\n  createRental: async rentalData => {\n    try {\n      return await api.post('/rentals', rentalData);\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿ™ÿ£ÿ¨Ÿäÿ±'\n      };\n    }\n  },\n  completeRental: async (id, paymentData = {}) => {\n    try {\n      return await api.put(`/rentals/${id}/complete`, paymentData);\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ•ŸÉŸÖÿßŸÑ ÿßŸÑÿ™ÿ£ÿ¨Ÿäÿ±'\n      };\n    }\n  },\n  // ================= SHIFTS MANAGEMENT =================\n\n  getActiveShift: async () => {\n    try {\n      console.log('üîÑ ÿ¨ŸÑÿ® ÿßŸÑÿ¥ŸäŸÅÿ™ ÿßŸÑŸÜÿ¥ÿ∑...');\n      const response = await api.get('/shifts/simple');\n      return response;\n    } catch (error) {\n      console.error('‚ùå ÿÆÿ∑ÿ£ ŸÅŸä ÿ¨ŸÑÿ® ÿßŸÑÿ¥ŸäŸÅÿ™ ÿßŸÑŸÜÿ¥ÿ∑:', error);\n      return {\n        success: false,\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ¨ŸÑÿ® ÿßŸÑÿ¥ŸäŸÅÿ™ ÿßŸÑŸÜÿ¥ÿ∑',\n        data: null\n      };\n    }\n  },\n  getBranchShifts: async branchId => {\n    try {\n      console.log(`üìã ÿ¨ŸÑÿ® ÿ¥ŸäŸÅÿ™ÿßÿ™ ÿßŸÑŸÅÿ±ÿπ ${branchId}`);\n      const params = {\n        branch_id: branchId\n      };\n      const response = await api.get('/shifts', {\n        params\n      });\n      return response;\n    } catch (error) {\n      console.error('‚ùå ÿÆÿ∑ÿ£ ŸÅŸä ÿ¨ŸÑÿ® ÿ¥ŸäŸÅÿ™ÿßÿ™ ÿßŸÑŸÅÿ±ÿπ:', error);\n      return {\n        success: false,\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ¨ŸÑÿ® ÿ¥ŸäŸÅÿ™ÿßÿ™ ÿßŸÑŸÅÿ±ÿπ',\n        data: []\n      };\n    }\n  },\n  startShift: async () => {\n    try {\n      console.log('üîÑ ÿ®ÿØÿ° ÿ¥ŸäŸÅÿ™ ÿ¨ÿØŸäÿØ');\n      const response = await api.post('/shifts/start');\n      return response;\n    } catch (error) {\n      console.error('‚ùå ÿÆÿ∑ÿ£ ŸÅŸä ÿ®ÿØÿ° ÿßŸÑÿ¥ŸäŸÅÿ™:', error);\n      return {\n        success: false,\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ®ÿØÿ° ÿßŸÑÿ¥ŸäŸÅÿ™'\n      };\n    }\n  },\n  endShift: async shiftId => {\n    try {\n      console.log(`üèÅ ÿ•ŸÜŸáÿßÿ° ÿ¥ŸäŸÅÿ™ ${shiftId}`);\n      const response = await api.post(`/shifts/${shiftId}/end`);\n      return response;\n    } catch (error) {\n      console.error('‚ùå ÿÆÿ∑ÿ£ ŸÅŸä ÿ•ŸÜŸáÿßÿ° ÿßŸÑÿ¥ŸäŸÅÿ™:', error);\n      return {\n        success: false,\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ•ŸÜŸáÿßÿ° ÿßŸÑÿ¥ŸäŸÅÿ™'\n      };\n    }\n  },\n  // ================= ACTIVITIES =================\n\n  getActivities: async (filters = {}) => {\n    try {\n      return await api.get('/activities', {\n        params: filters\n      });\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿ≥ÿ¨ŸÑ ÿßŸÑÿ£ŸÜÿ¥ÿ∑ÿ©',\n        data: []\n      };\n    }\n  },\n  // ================= BRANCH GAMES =================\n\n  getBranchGames: async branchId => {\n    try {\n      return await api.get(`/branches/${branchId}/games`);\n    } catch (error) {\n      return {\n        success: false,\n        message: error.message || 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿ£ŸÑÿπÿßÿ® ÿßŸÑŸÅÿ±ÿπ',\n        data: []\n      };\n    }\n  },\n  addGameToBranch: async (branchId, gameData) => {\n    try {\n      return await api.post(`/branches/${branchId}/games`, gameData);\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ•ÿ∂ÿßŸÅÿ© ŸÑÿπÿ®ÿ© ŸÑŸÑŸÅÿ±ÿπ'\n      };\n    }\n  },\n  updateBranchGame: async (branchId, gameId, updateData) => {\n    try {\n      return await api.updateBranchGame(branchId, gameId, updateData);\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ÿØŸäÿ´ ŸÑÿπÿ®ÿ© ÿßŸÑŸÅÿ±ÿπ'\n      };\n    }\n  },\n  deleteBranchGame: async (branchId, gameId) => {\n    try {\n      return await api.deleteBranchGame(branchId, gameId);\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ•ÿ≤ÿßŸÑÿ© ŸÑÿπÿ®ÿ© ŸÖŸÜ ÿßŸÑŸÅÿ±ÿπ'\n      };\n    }\n  },\n  // ================= AVAILABLE & RENTED GAMES =================\n\n  getAvailableGames: async (params = {}) => {\n    try {\n      return await api.getAvailableGames(params);\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ£ŸÑÿπÿßÿ® ÿßŸÑŸÖÿ™ÿßÿ≠ÿ©',\n        data: []\n      };\n    }\n  },\n  getRentedGames: async (params = {}) => {\n    try {\n      return await api.getRentedGames(params);\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ£ŸÑÿπÿßÿ® ÿßŸÑŸÖÿ§ÿ¨ÿ±ÿ©',\n        data: []\n      };\n    }\n  },\n  getAvailableGamesForBranch: async branchId => {\n    try {\n      const [allGames, branchGames] = await Promise.all([authService.getGames(), authService.getBranchGames(branchId)]);\n      if (allGames.success && branchGames.success) {\n        const addedGameIds = branchGames.data.map(g => g.game_id || g.id);\n        const availableGames = allGames.data.filter(game => !addedGameIds.includes(game.id));\n        return {\n          success: true,\n          data: availableGames\n        };\n      }\n      return {\n        success: false,\n        message: 'ŸÅÿ¥ŸÑ ŸÅŸä ÿ¨ŸÑÿ® ÿßŸÑÿ£ŸÑÿπÿßÿ® ÿßŸÑŸÖÿ™ÿßÿ≠ÿ©'\n      };\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ŸÅÿ¥ŸÑ ŸÅŸä ÿ¨ŸÑÿ® ÿßŸÑÿ£ŸÑÿπÿßÿ® ÿßŸÑŸÖÿ™ÿßÿ≠ÿ©'\n      };\n    }\n  },\n  // ================= ADVANCED ANALYTICS =================\n\n  getMonthlyStats: async (month, year) => {\n    try {\n      return await api.getMonthlyStats(month, year);\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿßŸÑÿ¥Ÿáÿ±Ÿäÿ©',\n        data: {}\n      };\n    }\n  },\n  getTopGames: async (params = {}) => {\n    try {\n      return await api.getTopGames(params);\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿ£ŸÅÿ∂ŸÑ ÿßŸÑÿ£ŸÑÿπÿßÿ®',\n        data: []\n      };\n    }\n  },\n  getBranchPerformance: async (params = {}) => {\n    try {\n      return await api.getBranchPerformance(params);\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿ£ÿØÿßÿ° ÿßŸÑŸÅÿ±Ÿàÿπ',\n        data: []\n      };\n    }\n  },\n  getRevenueTrend: async (params = {}) => {\n    try {\n      return await api.getRevenueTrend(params);\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿßÿ™ÿ¨ÿßŸá ÿßŸÑÿ•Ÿäÿ±ÿßÿØÿßÿ™',\n        data: []\n      };\n    }\n  },\n  getAdvancedReport: async (reportType, params = {}) => {\n    try {\n      return await api.getAdvancedReport(reportType, params);\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ™ŸÇÿ±Ÿäÿ±',\n        data: []\n      };\n    }\n  },\n  getSalesReport: async (params = {}) => {\n    try {\n      return await api.getSalesReport(params);\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿ™ŸÇÿ±Ÿäÿ± ÿßŸÑŸÖÿ®Ÿäÿπÿßÿ™',\n        data: []\n      };\n    }\n  },\n  // ================= HEALTH CHECK =================\n\n  healthCheck: async () => {\n    try {\n      return await api.get('/health');\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ÿ™ÿπÿ∞ÿ± ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ÿßŸÑÿÆÿßÿØŸÖ'\n      };\n    }\n  },\n  // ================= TESTING =================\n\n  testApiConnection: async () => {\n    try {\n      const response = await api.get('/health');\n      return {\n        success: response.success,\n        message: '‚úÖ ÿßÿ™ÿµÿßŸÑ API ŸäÿπŸÖŸÑ ÿ®ÿ¥ŸÉŸÑ ÿµÿ≠Ÿäÿ≠',\n        data: response.data\n      };\n    } catch (error) {\n      return {\n        success: false,\n        message: '‚ùå ŸÅÿ¥ŸÑ ÿßÿÆÿ™ÿ®ÿßÿ± ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ÿßŸÑÿÆÿßÿØŸÖ'\n      };\n    }\n  },\n  testToken: async () => {\n    try {\n      return await api.testToken();\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ÿ™ÿπÿ∞ÿ± ÿßÿÆÿ™ÿ®ÿßÿ± ÿßŸÑÿ™ŸàŸÉŸÜ',\n        error: error.message\n      };\n    }\n  },\n  // ================= CURRENT BRANCH OPERATIONS =================\n\n  getAvailableGamesForCurrentBranch: async () => {\n    try {\n      const user = authService.getCurrentUser();\n      if (!(user !== null && user !== void 0 && user.branch_id)) {\n        return {\n          success: false,\n          message: 'ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ÿ∫Ÿäÿ± ŸÖÿ±ÿ™ÿ®ÿ∑ ÿ®ŸÅÿ±ÿπ',\n          data: []\n        };\n      }\n      const response = await api.get(`/branches/${user.branch_id}/games`);\n      if (response.success) {\n        // ÿ™ÿµŸÅŸäÿ© ÿßŸÑÿ£ŸÑÿπÿßÿ® ÿßŸÑŸÖÿ™ÿßÿ≠ÿ© ŸÅŸÇÿ∑\n        const availableGames = response.data.filter(game => game.status === 'ŸÖÿ™ÿßÿ≠' && game.available_quantity > 0);\n        return {\n          success: true,\n          data: availableGames,\n          message: `ÿ™ŸÖ ÿ™ÿ≠ŸÖŸäŸÑ ${availableGames.length} ŸÑÿπÿ®ÿ© ŸÖÿ™ÿßÿ≠ÿ©`\n        };\n      }\n      return response;\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿ£ŸÑÿπÿßÿ® ÿßŸÑŸÅÿ±ÿπ',\n        data: []\n      };\n    }\n  },\n  getCurrentUserBranch: async () => {\n    try {\n      const user = authService.getCurrentUser();\n      if (!(user !== null && user !== void 0 && user.branch_id)) {\n        return {\n          success: false,\n          message: 'ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ÿ∫Ÿäÿ± ŸÖÿ±ÿ™ÿ®ÿ∑ ÿ®ŸÅÿ±ÿπ',\n          data: null\n        };\n      }\n      const response = await api.get(`/branches/${user.branch_id}`);\n      return response;\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÅÿ±ÿπ',\n        data: null\n      };\n    }\n  },\n  getActiveRentalsForCurrentBranch: async () => {\n    try {\n      const user = authService.getCurrentUser();\n      if (!(user !== null && user !== void 0 && user.branch_id)) {\n        return {\n          success: false,\n          message: 'ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ÿ∫Ÿäÿ± ŸÖÿ±ÿ™ÿ®ÿ∑ ÿ®ŸÅÿ±ÿπ',\n          data: []\n        };\n      }\n      const response = await api.get('/rentals/active', {\n        params: {\n          branch_id: user.branch_id\n        }\n      });\n      return response;\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ™ÿ£ÿ¨Ÿäÿ±ÿßÿ™ ÿßŸÑŸÜÿ¥ÿ∑ÿ©',\n        data: []\n      };\n    }\n  },\n  getCurrentBranchStats: async () => {\n    try {\n      const user = authService.getCurrentUser();\n      if (!(user !== null && user !== void 0 && user.branch_id)) {\n        return {\n          success: false,\n          message: 'ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ÿ∫Ÿäÿ± ŸÖÿ±ÿ™ÿ®ÿ∑ ÿ®ŸÅÿ±ÿπ',\n          data: null\n        };\n      }\n      const response = await api.get('/dashboard/stats', {\n        params: {\n          branch_id: user.branch_id\n        }\n      });\n      return response;\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿßŸÑŸÅÿ±ÿπ',\n        data: null\n      };\n    }\n  },\n  startRentalInCurrentBranch: async rentalData => {\n    try {\n      const user = authService.getCurrentUser();\n      if (!(user !== null && user !== void 0 && user.branch_id)) {\n        return {\n          success: false,\n          message: 'ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ÿ∫Ÿäÿ± ŸÖÿ±ÿ™ÿ®ÿ∑ ÿ®ŸÅÿ±ÿπ'\n        };\n      }\n      const fullRentalData = {\n        ...rentalData,\n        branch_id: user.branch_id,\n        employee_id: user.id,\n        employee_name: user.name\n      };\n      console.log('üì§ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ™ÿ£ÿ¨Ÿäÿ±:', fullRentalData);\n      const response = await api.post('/rentals', fullRentalData);\n      return response;\n    } catch (error) {\n      var _error$response5, _error$response5$data;\n      console.error('‚ùå ÿÆÿ∑ÿ£ ŸÅŸä ÿ®ÿØÿ° ÿßŸÑÿ™ÿ£ÿ¨Ÿäÿ±:', error);\n      return {\n        success: false,\n        message: ((_error$response5 = error.response) === null || _error$response5 === void 0 ? void 0 : (_error$response5$data = _error$response5.data) === null || _error$response5$data === void 0 ? void 0 : _error$response5$data.message) || 'ÿ™ÿπÿ∞ÿ± ÿ®ÿØÿ° ÿßŸÑÿ™ÿ£ÿ¨Ÿäÿ±'\n      };\n    }\n  },\n  endRental: async (rentalId, finalAmount = null) => {\n    try {\n      const payload = {};\n      if (finalAmount !== null) {\n        payload.final_amount = finalAmount;\n      }\n      const response = await api.put(`/rentals/${rentalId}/complete`, payload);\n      return response;\n    } catch (error) {\n      var _error$response6, _error$response6$data;\n      return {\n        success: false,\n        message: ((_error$response6 = error.response) === null || _error$response6 === void 0 ? void 0 : (_error$response6$data = _error$response6.data) === null || _error$response6$data === void 0 ? void 0 : _error$response6$data.message) || 'ÿ™ÿπÿ∞ÿ± ÿ•ŸÜŸáÿßÿ° ÿßŸÑÿ™ÿ£ÿ¨Ÿäÿ±'\n      };\n    }\n  },\n  searchGamesInCurrentBranch: async searchTerm => {\n    try {\n      const user = authService.getCurrentUser();\n      if (!(user !== null && user !== void 0 && user.branch_id)) {\n        return {\n          success: false,\n          message: 'ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ÿ∫Ÿäÿ± ŸÖÿ±ÿ™ÿ®ÿ∑ ÿ®ŸÅÿ±ÿπ',\n          data: []\n        };\n      }\n\n      // ŸÖÿ≠ÿßŸàŸÑÿ© ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ŸÜŸÇÿ∑ÿ© ÿßŸÑÿ®ÿ≠ÿ´ ÿ•ÿ∞ÿß ŸÉÿßŸÜÿ™ ŸÖŸàÿ¨ŸàÿØÿ©\n      try {\n        const response = await api.get(`/branches/${user.branch_id}/games/search`, {\n          params: {\n            q: searchTerm\n          }\n        });\n        if (response.success) return response;\n      } catch (searchError) {\n        console.log('‚ö†Ô∏è ŸÜŸÇÿ∑ÿ© ÿßŸÑÿ®ÿ≠ÿ´ ÿ∫Ÿäÿ± ŸÖÿ™ÿßÿ≠ÿ©ÿå ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑÿ™ÿµŸÅŸäÿ© ÿßŸÑŸÖÿ≠ŸÑŸäÿ©');\n      }\n\n      // fallback: ÿ™ÿµŸÅŸäÿ© ŸÖÿ≠ŸÑŸäÿ©\n      const allGames = await authService.getAvailableGamesForCurrentBranch();\n      if (allGames.success) {\n        const filtered = allGames.data.filter(game => {\n          var _game$name, _game$category;\n          return ((_game$name = game.name) === null || _game$name === void 0 ? void 0 : _game$name.toLowerCase().includes(searchTerm.toLowerCase())) || ((_game$category = game.category) === null || _game$category === void 0 ? void 0 : _game$category.toLowerCase().includes(searchTerm.toLowerCase()));\n        });\n        return {\n          success: true,\n          data: filtered,\n          message: `ÿ™ŸÖ ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ ${filtered.length} ŸÜÿ™Ÿäÿ¨ÿ©`\n        };\n      }\n      return {\n        success: false,\n        message: 'ÿ™ÿπÿ∞ÿ± ÿßŸÑÿ®ÿ≠ÿ´ ŸÅŸä ÿßŸÑÿ£ŸÑÿπÿßÿ®',\n        data: []\n      };\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ÿ™ÿπÿ∞ÿ± ÿßŸÑÿ®ÿ≠ÿ´ ŸÅŸä ÿßŸÑÿ£ŸÑÿπÿßÿ®',\n        data: []\n      };\n    }\n  },\n  updateRentalTimers: async () => {\n    try {\n      const user = authService.getCurrentUser();\n      if (!(user !== null && user !== void 0 && user.branch_id)) return;\n      const response = await api.get(`/rentals/${user.branch_id}/check-expired`);\n      return response;\n    } catch (error) {\n      console.warn('‚ö†Ô∏è ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ÿØŸäÿ´ ÿπÿØÿßÿØÿßÿ™ ÿßŸÑŸàŸÇÿ™:', error.message);\n    }\n  },\n  refreshCurrentBranchData: async () => {\n    try {\n      const user = authService.getCurrentUser();\n      if (!(user !== null && user !== void 0 && user.branch_id)) return null;\n      const [gamesResponse, rentalsResponse, statsResponse] = await Promise.all([authService.getAvailableGamesForCurrentBranch(), authService.getActiveRentalsForCurrentBranch(), authService.getCurrentBranchStats()]);\n      return {\n        success: true,\n        games: gamesResponse.success ? gamesResponse.data : [],\n        activeRentals: rentalsResponse.success ? rentalsResponse.data : [],\n        stats: statsResponse.success ? statsResponse.data : null,\n        message: 'ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™'\n      };\n    } catch (error) {\n      return {\n        success: false,\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™',\n        games: [],\n        activeRentals: [],\n        stats: null\n      };\n    }\n  },\n  // ================= UTILITY FUNCTIONS =================\n\n  formatError: error => {\n    if (error.response) {\n      var _error$response$data;\n      return ((_error$response$data = error.response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || `ÿÆÿ∑ÿ£ ${error.response.status}: ${error.response.statusText}`;\n    } else if (error.request) {\n      return 'ÿ™ÿπÿ∞ÿ± ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ÿßŸÑÿÆÿßÿØŸÖ. ÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑÿÆÿßÿØŸÖ';\n    } else {\n      return error.message || 'ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ÿ∫Ÿäÿ± ŸÖÿπÿ±ŸàŸÅ';\n    }\n  },\n  hasRole: role => {\n    const user = authService.getCurrentUser();\n    return (user === null || user === void 0 ? void 0 : user.role) === role;\n  },\n  hasAnyRole: roles => {\n    const user = authService.getCurrentUser();\n    return roles.includes(user === null || user === void 0 ? void 0 : user.role);\n  },\n  validateCustomerPhone: phone => {\n    const phoneRegex = /^01[0-9]{9}$/;\n    return phoneRegex.test(phone);\n  },\n  formatCurrency: amount => {\n    const num = parseFloat(amount) || 0;\n    return new Intl.NumberFormat('ar-EG', {\n      style: 'currency',\n      currency: 'EGP',\n      minimumFractionDigits: 0\n    }).format(num);\n  },\n  formatDuration: minutes => {\n    if (!minutes || minutes === 0) return 'ŸàŸÇÿ™ ŸÖŸÅÿ™Ÿàÿ≠';\n    if (minutes < 60) return `${minutes} ÿØŸÇŸäŸÇÿ©`;\n    const hours = Math.floor(minutes / 60);\n    const remainingMinutes = minutes % 60;\n    return `${hours} ÿ≥ÿßÿπÿ©${remainingMinutes > 0 ? ` ${remainingMinutes} ÿØŸÇŸäŸÇÿ©` : ''}`;\n  },\n  formatTime: dateString => {\n    try {\n      return new Date(dateString).toLocaleTimeString('ar-EG', {\n        hour: '2-digit',\n        minute: '2-digit'\n      });\n    } catch {\n      return '--:--';\n    }\n  },\n  formatDate: dateString => {\n    try {\n      return new Date(dateString).toLocaleDateString('ar-EG', {\n        weekday: 'short',\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric'\n      });\n    } catch {\n      return '--/--/----';\n    }\n  },\n  showNotification: (type, message) => {\n    const messages = {\n      error: `‚ùå ${message}`,\n      success: `‚úÖ ${message}`,\n      warning: `‚ö†Ô∏è ${message}`,\n      info: `‚ÑπÔ∏è ${message}`\n    };\n\n    // ŸäŸÖŸÉŸÜ ÿßÿ≥ÿ™ÿ®ÿØÿßŸÑ Ÿáÿ∞ÿß ÿ®ŸÖŸÉÿ™ÿ®ÿ© ÿ•ÿ¥ÿπÿßÿ±ÿßÿ™ ŸÖÿ´ŸÑ react-toastify\n    alert(messages[type] || message);\n  },\n  calculateTimeRemaining: endTime => {\n    if (!endTime) return null;\n    try {\n      const end = new Date(endTime);\n      const now = new Date();\n      const timeLeftMs = end - now;\n      if (timeLeftMs <= 0) return {\n        expired: true,\n        minutes: 0,\n        formatted: 'ÿßŸÜÿ™ŸáŸâ'\n      };\n      const minutesLeft = Math.floor(timeLeftMs / 60000);\n      const hours = Math.floor(minutesLeft / 60);\n      const minutes = minutesLeft % 60;\n      return {\n        expired: false,\n        minutes: minutesLeft,\n        formatted: hours > 0 ? `${hours} ÿ≥ÿßÿπÿ© ${minutes} ÿØŸÇŸäŸÇÿ©` : `${minutes} ÿØŸÇŸäŸÇÿ©`\n      };\n    } catch (error) {\n      return null;\n    }\n  },\n  prepareRentalFormData: () => {\n    return {\n      customer_name: '',\n      customer_phone: '',\n      customer_notes: '',\n      duration_type: 'fixed',\n      duration_minutes: 60,\n      selected_games: [],\n      quantities: {},\n      discount: 0,\n      payment_method: 'cash'\n    };\n  },\n  validateRentalForm: formData => {\n    var _formData$customer_na, _formData$customer_ph;\n    const errors = [];\n    if (!((_formData$customer_na = formData.customer_name) !== null && _formData$customer_na !== void 0 && _formData$customer_na.trim())) {\n      errors.push('ÿßÿ≥ŸÖ ÿßŸÑÿπŸÖŸäŸÑ ŸÖÿ∑ŸÑŸàÿ®');\n    }\n    if (!((_formData$customer_ph = formData.customer_phone) !== null && _formData$customer_ph !== void 0 && _formData$customer_ph.trim())) {\n      errors.push('ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ ŸÖÿ∑ŸÑŸàÿ®');\n    } else if (!authService.validateCustomerPhone(formData.customer_phone)) {\n      errors.push('ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ ÿ∫Ÿäÿ± ÿµÿ≠Ÿäÿ≠. Ÿäÿ¨ÿ® ÿ£ŸÜ Ÿäÿ®ÿØÿ£ ÿ®ŸÄ 01 ŸàŸäÿ™ŸÉŸàŸÜ ŸÖŸÜ 11 ÿ±ŸÇŸÖ');\n    }\n    if (formData.selected_games.length === 0) {\n      errors.push('Ÿäÿ¨ÿ® ÿßÿÆÿ™Ÿäÿßÿ± ŸÑÿπÿ®ÿ© Ÿàÿßÿ≠ÿØÿ© ÿπŸÑŸâ ÿßŸÑÿ£ŸÇŸÑ');\n    }\n    if (formData.duration_type === 'fixed' && !formData.duration_minutes) {\n      errors.push('Ÿäÿ¨ÿ® ÿ™ÿ≠ÿØŸäÿØ ŸÖÿØÿ© ÿßŸÑÿ™ÿ£ÿ¨Ÿäÿ±');\n    }\n    return {\n      isValid: errors.length === 0,\n      errors: errors\n    };\n  },\n  calculateRentalPrice: (game, durationMinutes, quantity = 1) => {\n    if (!game) return 0;\n    let price = 0;\n    if (durationMinutes >= 60) {\n      price = (game.price_per_hour || 0) * (durationMinutes / 60);\n    } else {\n      const quarters = Math.ceil(durationMinutes / 15);\n      price = (game.price_per_15min || 0) * quarters;\n    }\n    return price * quantity;\n  }\n};\nexport default authService;","map":{"version":3,"names":["api","authService","login","email","password","response","console","log","success","data","token","user","error","message","setToken","localStorage","setItem","JSON","stringify","Date","toISOString","logout","getCurrentUser","userStr","getItem","parse","getToken","trim","isAuthenticated","updateProfile","profileData","changePassword","passwordData","getSimpleStats","get","available_games","total_games","today_revenue","today_rentals","active_rentals","getManagerStats","getDashboardStats","summary","total_users","total_branches","getDashboardAllStats","_basicStats$data","_basicStats$data2","basicStats","basic","branchRevenues","completedRentalsByBranch","todayRevenue","todayRentals","getBranches","createBranch","branchData","post","_error$response","_error$response2","status","updateBranch","id","put","deleteBranch","delete","deleteBranchPermanent","fetch","method","headers","json","getGames","params","all_branches","getAllGamesFromAllBranches","branch_id","category","getGamesWithFilter","stats","total","available","rented","maintenance","length","filter","g","createGame","gameData","cleanGameData","name","String","description","price_per_15min","parseFloat","price_per_hour","Math","ceil","parseInt","min_rental_time","max_rental_time","minimum_age","image_url","is_active","Error","apiError","body","statusText","ok","errorText","text","substring","e","fetchError","testResponse","solutions","sqlFix","finalError","urgentSteps","stack","updateGame","gameId","_error$response3","_error$response4","_error$response4$data","deleteGame","deleteGamePermanent","filters","getGamesStatsByBranch","totals","rented_games","maintenance_games","getGamesWithBranchInfo","branchId","include_branch_info","getUsers","createUser","userData","updateUser","deleteUser","deleteUserPermanent","getCustomers","search","createCustomer","customerData","getRentals","createRental","rentalData","completeRental","paymentData","getActiveShift","getBranchShifts","startShift","endShift","shiftId","getActivities","getBranchGames","addGameToBranch","updateBranchGame","updateData","deleteBranchGame","getAvailableGames","getRentedGames","getAvailableGamesForBranch","allGames","branchGames","Promise","all","addedGameIds","map","game_id","availableGames","game","includes","getMonthlyStats","month","year","getTopGames","getBranchPerformance","getRevenueTrend","getAdvancedReport","reportType","getSalesReport","healthCheck","testApiConnection","testToken","getAvailableGamesForCurrentBranch","available_quantity","getCurrentUserBranch","getActiveRentalsForCurrentBranch","getCurrentBranchStats","startRentalInCurrentBranch","fullRentalData","employee_id","employee_name","_error$response5","_error$response5$data","endRental","rentalId","finalAmount","payload","final_amount","_error$response6","_error$response6$data","searchGamesInCurrentBranch","searchTerm","q","searchError","filtered","_game$name","_game$category","toLowerCase","updateRentalTimers","warn","refreshCurrentBranchData","gamesResponse","rentalsResponse","statsResponse","games","activeRentals","formatError","_error$response$data","request","hasRole","role","hasAnyRole","roles","validateCustomerPhone","phone","phoneRegex","test","formatCurrency","amount","num","Intl","NumberFormat","style","currency","minimumFractionDigits","format","formatDuration","minutes","hours","floor","remainingMinutes","formatTime","dateString","toLocaleTimeString","hour","minute","formatDate","toLocaleDateString","weekday","day","showNotification","type","messages","warning","info","alert","calculateTimeRemaining","endTime","end","now","timeLeftMs","expired","formatted","minutesLeft","prepareRentalFormData","customer_name","customer_phone","customer_notes","duration_type","duration_minutes","selected_games","quantities","discount","payment_method","validateRentalForm","formData","_formData$customer_na","_formData$customer_ph","errors","push","isValid","calculateRentalPrice","durationMinutes","quantity","price","quarters"],"sources":["C:/Users/HP/OneDrive/project/l3bty-rental-system/frontend/src/services/authService.js"],"sourcesContent":["// src/services/authService.js - ÿßŸÑŸÜÿ≥ÿÆÿ© ÿßŸÑŸÖÿ≠ÿØÿ´ÿ© ŸàÿßŸÑŸÉÿßŸÖŸÑÿ©\r\nimport api from './api';\r\n\r\nconst authService = {\r\n  // ================= AUTHENTICATION =================\r\n  \r\n  login: async (email, password) => {\r\n    try {\r\n      const response = await api.login(email, password);\r\n      \r\n      console.log('üì• ÿßÿ≥ÿ™ÿ¨ÿßÿ®ÿ© ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ:', response);\r\n      \r\n      if (response.success && response.data) {\r\n        // ‚ö° **ÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿ£ŸÜ ÿßŸÑÿ™ŸàŸÉŸÜ ŸÖŸàÿ¨ŸàÿØ**\r\n        const token = response.data.token;\r\n        const user = response.data.user;\r\n        \r\n        console.log('üîê ÿ™ŸÖ ÿßÿ≥ÿ™ŸÑÿßŸÖ ÿßŸÑÿ™ŸàŸÉŸÜ:', token);\r\n        console.log('üë§ ÿ™ŸÖ ÿßÿ≥ÿ™ŸÑÿßŸÖ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ:', user);\r\n        \r\n        if (!token) {\r\n          console.error('‚ùå ŸÑŸÖ Ÿäÿ™ŸÖ ÿßÿ≥ÿ™ŸÑÿßŸÖ ÿßŸÑÿ™ŸàŸÉŸÜ ŸÖŸÜ ÿßŸÑÿÆÿßÿØŸÖ!');\r\n          return {\r\n            success: false,\r\n            message: 'ŸÑŸÖ Ÿäÿ™ŸÖ ÿßÿ≥ÿ™ŸÑÿßŸÖ ÿßŸÑÿ™ŸàŸÉŸÜ ŸÖŸÜ ÿßŸÑÿÆÿßÿØŸÖ'\r\n          };\r\n        }\r\n        \r\n        // ‚ö° **ÿ™ÿÆÿ≤ŸäŸÜ ÿßŸÑÿ™ŸàŸÉŸÜ ŸàÿßŸÑÿ®ŸäÿßŸÜÿßÿ™**\r\n        api.setToken(token);\r\n        localStorage.setItem('user', JSON.stringify(user));\r\n        localStorage.setItem('lastLogin', new Date().toISOString());\r\n        \r\n        console.log('‚úÖ ÿ™ŸÖ ÿ™ÿÆÿ≤ŸäŸÜ ÿßŸÑÿ™ŸàŸÉŸÜ ŸàÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿ®ŸÜÿ¨ÿßÿ≠');\r\n        \r\n        return {\r\n          success: true,\r\n          data: response.data,\r\n          message: 'ÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ ÿ®ŸÜÿ¨ÿßÿ≠'\r\n        };\r\n      } else {\r\n        return {\r\n          success: false,\r\n          message: response.message || 'ŸÅÿ¥ŸÑ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ'\r\n        };\r\n      }\r\n    } catch (error) {\r\n      console.error('üî• ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ:', error);\r\n      return {\r\n        success: false,\r\n        message: 'ÿ™ÿπÿ∞ÿ± ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ÿßŸÑÿÆÿßÿØŸÖ. ÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑÿÆÿßÿØŸÖ ÿπŸÑŸâ ÿßŸÑŸÖŸÜŸÅÿ∞ 5000'\r\n      };\r\n    }\r\n  },\r\n\r\n  logout: () => {\r\n    api.logout();\r\n  },\r\n\r\n  getCurrentUser: () => {\r\n    try {\r\n      const userStr = localStorage.getItem('user');\r\n      return userStr ? JSON.parse(userStr) : null;\r\n    } catch (error) {\r\n      return null;\r\n    }\r\n  },\r\n\r\n  getToken: () => {\r\n    const token = localStorage.getItem('token');\r\n    return token ? token.trim() : null;\r\n  },\r\n\r\n  isAuthenticated: () => {\r\n    const token = authService.getToken();\r\n    const user = authService.getCurrentUser();\r\n    return !!(token && user);\r\n  },\r\n\r\n  // ================= PROFILE MANAGEMENT =================\r\n  \r\n  updateProfile: async (profileData) => {\r\n    try {\r\n      const response = await api.updateProfile(profileData);\r\n      \r\n      if (response.success && response.user) {\r\n        localStorage.setItem('user', JSON.stringify(response.user));\r\n      }\r\n      \r\n      return response;\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: error.message || 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÖŸÑŸÅ ÿßŸÑÿ¥ÿÆÿµŸä'\r\n      };\r\n    }\r\n  },\r\n\r\n  changePassword: async (passwordData) => {\r\n    try {\r\n      return await api.changePassword(passwordData);\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: error.message || 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ∫ŸäŸäÿ± ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±'\r\n      };\r\n    }\r\n  },\r\n\r\n  // ================= DASHBOARD STATISTICS =================\r\n  \r\n  // üÜï ÿØÿßŸÑÿ© ÿ¨ÿØŸäÿØÿ©: ÿ¨ŸÑÿ® ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ©\r\n  getSimpleStats: async () => {\r\n    try {\r\n      console.log('üìä ÿ¨ŸÑÿ® ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿßŸÑŸÖÿ®ÿ≥ÿ∑ÿ©...');\r\n      const response = await api.getSimpleStats ? \r\n        await api.getSimpleStats() : \r\n        await api.get('/dashboard/stats/simple');\r\n      \r\n      return response;\r\n    } catch (error) {\r\n      console.error('‚ùå ÿÆÿ∑ÿ£ ŸÅŸä ÿ¨ŸÑÿ® ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿßŸÑŸÖÿ®ÿ≥ÿ∑ÿ©:', error);\r\n      return {\r\n        success: false,\r\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™',\r\n        data: {\r\n          available_games: 0,\r\n          total_games: 0,\r\n          today_revenue: 0,\r\n          today_rentals: 0,\r\n          active_rentals: 0\r\n        }\r\n      };\r\n    }\r\n  },\r\n\r\n  // üÜï ÿØÿßŸÑÿ© ÿ¨ÿØŸäÿØÿ©: ÿ¨ŸÑÿ® ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿßŸÑŸÖÿØŸäÿ±\r\n  getManagerStats: async () => {\r\n    try {\r\n      console.log('üëë ÿ¨ŸÑÿ® ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿßŸÑŸÖÿØŸäÿ±...');\r\n      const response = await api.getManagerStats ? \r\n        await api.getManagerStats() : \r\n        await api.get('/dashboard/stats/manager');\r\n      \r\n      return response;\r\n    } catch (error) {\r\n      console.error('‚ùå ÿÆÿ∑ÿ£ ŸÅŸä ÿ¨ŸÑÿ® ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿßŸÑŸÖÿØŸäÿ±:', error);\r\n      return {\r\n        success: false,\r\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿßŸÑŸÖÿØŸäÿ±'\r\n      };\r\n    }\r\n  },\r\n\r\n  // ÿØÿßŸÑÿ© ŸÖŸàÿ¨ŸàÿØÿ© ÿ®ÿßŸÑŸÅÿπŸÑ - ŸÜÿ≥ÿÆÿ© ŸÖÿ≠ÿ≥ŸÜÿ©\r\n  getDashboardStats: async () => {\r\n    try {\r\n      console.log('üìà ÿ¨ŸÑÿ® ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ...');\r\n      const response = await api.get('/dashboard/stats');\r\n      return response;\r\n    } catch (error) {\r\n      console.error('‚ùå ÿÆÿ∑ÿ£ ŸÅŸä ÿ¨ŸÑÿ® ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ:', error);\r\n      return {\r\n        success: false,\r\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™',\r\n        data: { \r\n          summary: {},\r\n          today_revenue: 0,\r\n          today_rentals: 0,\r\n          active_rentals: 0,\r\n          total_games: 0,\r\n          available_games: 0,\r\n          total_users: 0,\r\n          total_branches: 0\r\n        }\r\n      };\r\n    }\r\n  },\r\n\r\n  // üÜï ÿØÿßŸÑÿ© ÿ¨ÿØŸäÿØÿ©: ÿ¨ŸÑÿ® ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ŸÉÿßŸÖŸÑÿ© ŸÑŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ\r\n  getDashboardAllStats: async () => {\r\n    try {\r\n      console.log('üìä ÿ¨ŸÑÿ® ÿ¨ŸÖŸäÿπ ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ...');\r\n      const response = await api.getDashboardAllStats ? \r\n        await api.getDashboardAllStats() : \r\n        await api.get('/dashboard/stats/all');\r\n      \r\n      return response;\r\n    } catch (error) {\r\n      console.error('‚ùå ÿÆÿ∑ÿ£ ŸÅŸä ÿ¨ŸÑÿ® ÿ¨ŸÖŸäÿπ ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™:', error);\r\n      \r\n      // Fallback: ÿ¨ŸÑÿ® ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ© ŸÅŸÇÿ∑\r\n      try {\r\n        const basicStats = await authService.getDashboardStats();\r\n        return {\r\n          success: basicStats.success,\r\n          data: {\r\n            basic: basicStats.data || {},\r\n            branchRevenues: [],\r\n            completedRentalsByBranch: [],\r\n            todayRevenue: basicStats.data?.today_revenue || 0,\r\n            todayRentals: basicStats.data?.today_rentals || 0\r\n          }\r\n        };\r\n      } catch {\r\n        return {\r\n          success: false,\r\n          message: 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™',\r\n          data: {\r\n            basic: {},\r\n            branchRevenues: [],\r\n            completedRentalsByBranch: [],\r\n            todayRevenue: 0,\r\n            todayRentals: 0\r\n          }\r\n        };\r\n      }\r\n    }\r\n  },\r\n\r\n  // ================= BRANCHES MANAGEMENT =================\r\n  \r\n  getBranches: async () => {\r\n    try {\r\n      return await api.get('/branches');\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÅÿ±Ÿàÿπ',\r\n        data: []\r\n      };\r\n    }\r\n  },\r\n\r\n  createBranch: async (branchData) => {\r\n    try {\r\n      console.log('üîë ÿßŸÑÿ™ŸàŸÉŸÜ ÿßŸÑÿ≠ÿßŸÑŸä:', authService.getToken());\r\n      console.log('üë§ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ÿßŸÑÿ≠ÿßŸÑŸä:', authService.getCurrentUser());\r\n      \r\n      const response = await api.post('/branches', branchData);\r\n      console.log('üì• ÿßÿ≥ÿ™ÿ¨ÿßÿ®ÿ© ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÅÿ±ÿπ:', response);\r\n      return response;\r\n    } catch (error) {\r\n      console.error('üî• ÿÆÿ∑ÿ£ ŸÅŸä createBranch:', {\r\n        message: error.message,\r\n        response: error.response?.data,\r\n        status: error.response?.status\r\n      });\r\n      return {\r\n        success: false,\r\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÅÿ±ÿπ: ' + (error.message || 'ÿÆÿ∑ÿ£ ÿ∫Ÿäÿ± ŸÖÿπÿ±ŸàŸÅ')\r\n      };\r\n    }\r\n  },\r\n\r\n  updateBranch: async (id, branchData) => {\r\n    try {\r\n      return await api.put(`/branches/${id}`, branchData);\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÅÿ±ÿπ'\r\n      };\r\n    }\r\n  },\r\n\r\n  deleteBranch: async (id) => {\r\n    try {\r\n      return await api.delete(`/branches/${id}`);\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ≠ÿ∞ŸÅ ÿßŸÑŸÅÿ±ÿπ'\r\n      };\r\n    }\r\n  },\r\n\r\n  // ÿ≠ÿ∞ŸÅ ŸÅÿ±ÿπ ŸÜŸáÿßÿ¶ŸäÿßŸã\r\n  deleteBranchPermanent: async (id) => {\r\n    try {\r\n      console.log('üóëÔ∏è [AUTH SERVICE] ÿ≠ÿ∞ŸÅ ŸÅÿ±ÿπ ŸÜŸáÿßÿ¶ŸäÿßŸã:', id);\r\n      \r\n      const token = authService.getToken();\r\n      if (!token) {\r\n        return {\r\n          success: false,\r\n          message: 'ÿßŸÑÿ™ŸàŸÉŸÜ ÿ∫Ÿäÿ± ŸÖŸàÿ¨ŸàÿØ. Ÿäÿ±ÿ¨Ÿâ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ'\r\n        };\r\n      }\r\n      \r\n      const response = await fetch(`http://localhost:5000/api/branches/${id}?permanent=true`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        }\r\n      });\r\n      \r\n      const data = await response.json();\r\n      \r\n      console.log('üì• ÿßÿ≥ÿ™ÿ¨ÿßÿ®ÿ© ÿ≠ÿ∞ŸÅ ÿßŸÑŸÅÿ±ÿπ:', data);\r\n      \r\n      return {\r\n        success: data.success || false,\r\n        message: data.message || 'ÿ™ŸÖ ÿßŸÑÿ≠ÿ∞ŸÅ',\r\n        data: data\r\n      };\r\n      \r\n    } catch (error) {\r\n      console.error('üî• ÿÆÿ∑ÿ£ ŸÅŸä ÿ≠ÿ∞ŸÅ ÿßŸÑŸÅÿ±ÿπ:', error);\r\n      return {\r\n        success: false,\r\n        message: 'ÿ™ÿπÿ∞ÿ± ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ÿßŸÑÿÆÿßÿØŸÖ: ' + error.message\r\n      };\r\n    }\r\n  },\r\n\r\n  // ================= GAMES MANAGEMENT =================\r\n  \r\n // ÿ™ÿπÿØŸäŸÑ ÿßŸÑÿØÿßŸÑÿ© ÿßŸÑÿ≠ÿßŸÑŸäÿ©\r\ngetGames: async (params = {}) => {\r\n  try {\r\n    console.log('üéÆ ÿ¨ŸÑÿ® ÿßŸÑÿ£ŸÑÿπÿßÿ®:', params);\r\n    \r\n    // ÿ•ÿ∞ÿß ÿ∑ŸÑÿ®ŸÜÿß ÿ¨ŸÖŸäÿπ ÿßŸÑŸÅÿ±Ÿàÿπÿå ÿßÿ≥ÿ™ÿÆÿØŸÖ ÿßŸÑÿØÿßŸÑÿ© ÿßŸÑÿ¨ÿØŸäÿØÿ©\r\n    if (params.all_branches === true) {\r\n      return await authService.getAllGamesFromAllBranches();\r\n    }\r\n    \r\n    // ÿ•ÿ∞ÿß ŸÉÿßŸÜ ŸáŸÜÿßŸÉ ŸÅŸÑÿ™ÿ± ŸÖÿ™ŸÇÿØŸÖÿå ÿßÿ≥ÿ™ÿÆÿØŸÖ ÿßŸÑÿØÿßŸÑÿ© ÿßŸÑÿ¨ÿØŸäÿØÿ©\r\n    if (params.branch_id || params.status || params.category) {\r\n      return await authService.getGamesWithFilter(params);\r\n    }\r\n    \r\n    // Ÿàÿ•ŸÑÿß ÿßÿ≥ÿ™ÿÆÿØŸÖ ÿßŸÑÿ∑ÿ±ŸäŸÇÿ© ÿßŸÑÿπÿßÿØŸäÿ©\r\n    const response = await api.get('/games', { params });\r\n    \r\n    if (!response.data) {\r\n      return {\r\n        success: false,\r\n        message: 'ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ®ŸäÿßŸÜÿßÿ™',\r\n        data: [],\r\n        stats: { total: 0, available: 0, rented: 0, maintenance: 0 }\r\n      };\r\n    }\r\n    \r\n    // ÿ≠ÿ≥ÿßÿ® ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™\r\n    const stats = {\r\n      total: response.data.length,\r\n      available: response.data.filter(g => g.status === 'ŸÖÿ™ÿßÿ≠').length,\r\n      rented: response.data.filter(g => g.status === 'ŸÖÿ§ÿ¨ÿ±ÿ©').length,\r\n      maintenance: response.data.filter(g => g.status === 'ÿµŸäÿßŸÜÿ©').length\r\n    };\r\n    \r\n    return {\r\n      success: true,\r\n      data: response.data,\r\n      stats: stats,\r\n      message: `ÿ™ŸÖ ÿ¨ŸÑÿ® ${response.data.length} ŸÑÿπÿ®ÿ©`\r\n    };\r\n  } catch (error) {\r\n    console.error('‚ùå ÿÆÿ∑ÿ£ ŸÅŸä getGames:', error);\r\n    return {\r\n      success: false,\r\n      message: 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ£ŸÑÿπÿßÿ®',\r\n      data: [],\r\n      stats: { total: 0, available: 0, rented: 0, maintenance: 0 }\r\n    };\r\n  }\r\n},\r\n\r\ncreateGame: async (gameData) => {\r\n  try {\r\n    console.log('üéÆ ŸÖÿ≠ÿßŸàŸÑÿ© ÿ•ŸÜÿ¥ÿßÿ° ŸÑÿπÿ®ÿ© ÿ¨ÿØŸäÿØÿ©');\r\n    console.log('üì¶ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÑÿπÿ®ÿ© ÿßŸÑŸÖÿ±ÿ≥ŸÑÿ©:', gameData);\r\n\r\n    // ÿ™ŸÜÿ∏ŸäŸÅ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ©\r\n    const cleanGameData = {\r\n      name: String(gameData.name || '').trim(),\r\n      description: gameData.description || `${gameData.name} - ${gameData.category || 'ÿ≥Ÿäÿßÿ±ÿßÿ™'}`,\r\n      category: gameData.category || 'ÿ≥Ÿäÿßÿ±ÿßÿ™',\r\n      price_per_15min: parseFloat(gameData.price_per_15min) || 50,\r\n      price_per_hour: Math.ceil(parseFloat(gameData.price_per_15min) * 4) || 200,\r\n      branch_id: parseInt(gameData.branch_id) || 1,\r\n      status: gameData.status || 'ŸÖÿ™ÿßÿ≠',\r\n      min_rental_time: parseInt(gameData.min_rental_time) || 15,\r\n      max_rental_time: parseInt(gameData.max_rental_time) || 120,\r\n      minimum_age: parseInt(gameData.minimum_age) || 16,\r\n      image_url: gameData.image_url || 'default-game.jpg',\r\n      is_active: 1\r\n    };\r\n    \r\n    if (!cleanGameData.name) {\r\n      return {\r\n        success: false,\r\n        message: 'ÿßÿ≥ŸÖ ÿßŸÑŸÑÿπÿ®ÿ© ŸÖÿ∑ŸÑŸàÿ®'\r\n      };\r\n    }\r\n    \r\n    console.log('üßπ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÜÿ∏ŸäŸÅÿ© ÿßŸÑŸÖÿ±ÿ≥ŸÑÿ© ŸÑŸÑÿÆÿßÿØŸÖ:', cleanGameData);\r\n    \r\n    // ‚ö° ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ© ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ©: ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑŸÖÿ≥ÿßÿ± ÿßŸÑŸÇŸäÿßÿ≥Ÿä\r\n    try {\r\n      console.log('üéØ ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ© ŸÖÿπ POST /games');\r\n      \r\n      const response = await api.post('/games', cleanGameData);\r\n      console.log('üì• ÿßÿ≥ÿ™ÿ¨ÿßÿ®ÿ© ŸÖŸÜ /games:', response);\r\n      \r\n      if (response.success) {\r\n        return response;\r\n      } else {\r\n        throw new Error(response.message || 'ŸÅÿ¥ŸÑ ŸÅŸä ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÑÿπÿ®ÿ©');\r\n      }\r\n    } catch (apiError) {\r\n      console.log('‚ö†Ô∏è ŸÅÿ¥ŸÑ ŸÖÿπ /games:', apiError.message);\r\n      \r\n      // ‚ö° ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ© ÿßŸÑÿ´ÿßŸÜŸäÿ©: ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ fetch ŸÖÿ®ÿßÿ¥ÿ±ÿ© ŸÖÿπ ŸÖÿπÿßŸÑÿ¨ÿ© ÿ£ÿÆÿ∑ÿßÿ° ŸÖŸÅÿµŸÑÿ©\r\n      try {\r\n        console.log('üîÑ ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ© ÿßŸÑÿ´ÿßŸÜŸäÿ© ŸÖÿπ fetch ŸÖÿ®ÿßÿ¥ÿ±');\r\n        \r\n        const token = authService.getToken();\r\n        \r\n        const response = await fetch('http://localhost:5000/api/games', {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n            'Authorization': token ? `Bearer ${token}` : ''\r\n          },\r\n          body: JSON.stringify(cleanGameData)\r\n        });\r\n        \r\n        console.log('üìä ÿ≠ÿßŸÑÿ© ÿßŸÑÿßÿ≥ÿ™ÿ¨ÿßÿ®ÿ©:', response.status, response.statusText);\r\n        \r\n        if (!response.ok) {\r\n          // ÿ≠ÿßŸàŸÑ ŸÇÿ±ÿßÿ°ÿ© body ÿßŸÑÿÆÿ∑ÿ£\r\n          let errorText = '';\r\n          try {\r\n            errorText = await response.text();\r\n            console.log('üìù ŸÜÿµ ÿßŸÑÿÆÿ∑ÿ£:', errorText.substring(0, 500));\r\n          } catch (e) {\r\n            errorText = response.statusText;\r\n          }\r\n          \r\n          throw new Error(`HTTP ${response.status}: ${errorText}`);\r\n        }\r\n        \r\n        const data = await response.json();\r\n        console.log('üì• ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿßÿ≥ÿ™ÿ¨ÿßÿ®ÿ©:', data);\r\n        \r\n        if (data.success) {\r\n          return data;\r\n        } else {\r\n          throw new Error(data.message || 'ŸÅÿ¥ŸÑ ÿ∫Ÿäÿ± ŸÖÿπÿ±ŸàŸÅ');\r\n        }\r\n        \r\n      } catch (fetchError) {\r\n        console.log('‚ö†Ô∏è ŸÅÿ¥ŸÑÿ™ ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ© ÿßŸÑÿ´ÿßŸÜŸäÿ©:', fetchError.message);\r\n        \r\n        // ‚ö° ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ© ÿßŸÑÿ´ÿßŸÑÿ´ÿ©: SQL ŸÖÿ®ÿßÿ¥ÿ± ÿ•ÿ∞ÿß ŸÉÿßŸÜ ÿßŸÑÿÆÿßÿØŸÖ Ÿäÿ≥ŸÖÿ≠\r\n        try {\r\n          console.log('üîß ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ© ÿßŸÑÿ´ÿßŸÑÿ´ÿ©: ÿ•ÿØÿÆÿßŸÑ SQL ŸÖÿ®ÿßÿ¥ÿ±');\r\n          \r\n          // ÿ∑ÿ±ŸäŸÇÿ© ÿ®ÿ≥Ÿäÿ∑ÿ©: ÿßÿÆÿ™ÿ®ÿßÿ± ÿ•ÿ∞ÿß ŸÉÿßŸÜ ÿßŸÑÿ¨ÿØŸàŸÑ ŸÖŸàÿ¨ŸàÿØÿßŸã\r\n          const testResponse = await fetch('http://localhost:5000/api/health');\r\n          if (!testResponse.ok) {\r\n            throw new Error('ÿßŸÑÿÆÿßÿØŸÖ ÿ∫Ÿäÿ± ŸÖÿ™ÿßÿ≠');\r\n          }\r\n          \r\n          // ÿ™ŸÇÿØŸäŸÖ ÿ≠ŸÑ ŸÑŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ\r\n          return {\r\n            success: false,\r\n            message: 'ŸÅÿ¥ŸÑ ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÑÿπÿ®ÿ©. ÿßŸÑÿ≠ŸÑŸàŸÑ ÿßŸÑŸÖŸÖŸÉŸÜÿ©:',\r\n            solutions: [\r\n              '1. ÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßÿ™ÿµÿßŸÑ ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™',\r\n              '2. ÿ™ÿ£ŸÉÿØ ŸÖŸÜ Ÿàÿ¨ŸàÿØ ÿ¨ÿØŸàŸÑ games ŸÅŸä ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™',\r\n              '3. ÿßŸÅÿ™ÿ≠ console ÿßŸÑÿÆÿßÿØŸÖ ŸÑÿ±ÿ§Ÿäÿ© ÿ™ŸÅÿßÿµŸäŸÑ ÿßŸÑÿÆÿ∑ÿ£',\r\n              '4. ÿ¨ÿ±ÿ® ÿ™ŸÜŸÅŸäÿ∞ SQL ÿßŸÑÿ™ÿßŸÑŸä ŸÅŸä ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™:'\r\n            ],\r\n            sqlFix: `\r\n              CREATE TABLE IF NOT EXISTS games (\r\n                id INT AUTO_INCREMENT PRIMARY KEY,\r\n                name VARCHAR(255) NOT NULL,\r\n                branch_id INT NOT NULL,\r\n                price_per_15min DECIMAL(10,2) NOT NULL,\r\n                status VARCHAR(50) DEFAULT 'ŸÖÿ™ÿßÿ≠',\r\n                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\r\n              );\r\n              \r\n              INSERT INTO games (name, branch_id, price_per_15min, status) \r\n              VALUES ('${cleanGameData.name}', ${cleanGameData.branch_id}, ${cleanGameData.price_per_15min}, 'ŸÖÿ™ÿßÿ≠');\r\n            `\r\n          };\r\n          \r\n        } catch (finalError) {\r\n          console.log('üíÄ ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿßÿ™ ŸÅÿ¥ŸÑÿ™:', finalError.message);\r\n        }\r\n      }\r\n    }\r\n    \r\n    // ÿ•ÿ∞ÿß ŸàÿµŸÑŸÜÿß ŸáŸÜÿßÿå ŸÉŸÑ ÿ¥Ÿäÿ° ŸÅÿ¥ŸÑ\r\n    return {\r\n      success: false,\r\n      message: 'ŸÅÿ¥ŸÑ ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÑÿπÿ®ÿ©. Ÿäÿ±ÿ¨Ÿâ:',\r\n      urgentSteps: [\r\n        'üîç ÿßŸÅÿ™ÿ≠ terminal ÿßŸÑÿÆÿßÿØŸÖ Ÿàÿ¥ÿßŸáÿØ logs',\r\n        'üóÑÔ∏è ÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿ¨ÿØŸàŸÑ games ŸÅŸä ŸÇÿßÿπÿØÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™',\r\n        'üîå ÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿßÿ™ÿµÿßŸÑ MySQL',\r\n        'üîÑ ÿ£ÿπÿØ ÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑÿÆÿßÿØŸÖ'\r\n      ]\r\n    };\r\n    \r\n  } catch (error) {\r\n    console.error('üî• ÿÆÿ∑ÿ£ ÿ¥ÿßŸÖŸÑ ŸÅŸä createGame:', error);\r\n    \r\n    return {\r\n      success: false,\r\n      message: 'ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÇÿπ',\r\n      error: error.message,\r\n      stack: error.stack\r\n    };\r\n  }\r\n},\r\n\r\n  updateGame: async (gameId, gameData) => {\r\n    try {\r\n      // ÿ•ÿ∞ÿß ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ price_per_15min ŸÅŸÇÿ∑ÿå ÿßÿ≠ÿ≥ÿ® price_per_hour\r\n      if (gameData.price_per_15min && !gameData.price_per_hour) {\r\n        gameData.price_per_hour = Math.ceil(gameData.price_per_15min * 4);\r\n      }\r\n      \r\n      console.log('üîÑ ÿ™ÿ≠ÿØŸäÿ´ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÑÿπÿ®ÿ©:', gameId, gameData);\r\n      \r\n      const response = await api.put(`/games/${gameId}`, gameData);\r\n      \r\n      if (response.data.success) {\r\n        console.log('‚úÖ ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÑÿπÿ®ÿ© ÿ®ŸÜÿ¨ÿßÿ≠');\r\n        return response.data;\r\n      } else {\r\n        console.error('‚ùå ŸÅÿ¥ŸÑ ŸÅŸä ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÑÿπÿ®ÿ©:', response.data);\r\n        return response.data;\r\n      }\r\n    } catch (error) {\r\n      console.error('üî• ÿÆÿ∑ÿ£ ŸÅŸä updateGame:', error);\r\n      \r\n      return {\r\n        success: false,\r\n        status: error.response?.status || 500,\r\n        message: error.response?.data?.message || 'ÿ™ÿπÿ∞ÿ± ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ÿßŸÑÿÆÿßÿØŸÖ',\r\n        error\r\n      };\r\n    }\r\n  },\r\n\r\n  deleteGame: async (id) => {\r\n    try {\r\n      return await api.delete(`/games/${id}`);\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: error.message || 'ÿ™ÿπÿ∞ÿ± ÿ≠ÿ∞ŸÅ ÿßŸÑŸÑÿπÿ®ÿ©'\r\n      };\r\n    }\r\n  },\r\n\r\n  deleteGamePermanent: async (id) => {\r\n    try {\r\n      return await api.deleteGamePermanent(id);\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ≠ÿ∞ŸÅ ÿßŸÑŸÑÿπÿ®ÿ© ŸÜŸáÿßÿ¶ŸäÿßŸã'\r\n      };\r\n    }\r\n  },\r\n\r\n  // ================= GAMES MANAGEMENT - ENHANCED =================\r\n\r\n// üÜï ÿØÿßŸÑÿ© ÿ¨ÿØŸäÿØÿ©: ÿ¨ŸÑÿ® ÿ¨ŸÖŸäÿπ ÿßŸÑÿ£ŸÑÿπÿßÿ® ŸÖŸÜ ÿ¨ŸÖŸäÿπ ÿßŸÑŸÅÿ±Ÿàÿπ\r\ngetAllGamesFromAllBranches: async () => {\r\n  try {\r\n    console.log('üéÆ ÿ¨ŸÑÿ® ÿ¨ŸÖŸäÿπ ÿßŸÑÿ£ŸÑÿπÿßÿ® ŸÖŸÜ ÿ¨ŸÖŸäÿπ ÿßŸÑŸÅÿ±Ÿàÿπ...');\r\n    const response = await api.get('/games/all-branches');\r\n    return response;\r\n  } catch (error) {\r\n    console.error('‚ùå ÿÆÿ∑ÿ£ ŸÅŸä ÿ¨ŸÑÿ® ÿ¨ŸÖŸäÿπ ÿßŸÑÿ£ŸÑÿπÿßÿ®:', error);\r\n    return {\r\n      success: false,\r\n      message: 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ£ŸÑÿπÿßÿ® ŸÖŸÜ ÿ¨ŸÖŸäÿπ ÿßŸÑŸÅÿ±Ÿàÿπ',\r\n      data: []\r\n    };\r\n  }\r\n},\r\n\r\n// üÜï ÿØÿßŸÑÿ© ÿ¨ÿØŸäÿØÿ©: ÿ¨ŸÑÿ® ÿßŸÑÿ£ŸÑÿπÿßÿ® ŸÖÿπ ŸÅŸÑÿ™ÿ±ÿ© ŸÖÿ™ŸÇÿØŸÖÿ©\r\ngetGamesWithFilter: async (filters = {}) => {\r\n  try {\r\n    console.log('üéÆ ÿ¨ŸÑÿ® ÿßŸÑÿ£ŸÑÿπÿßÿ® ŸÖÿπ ÿßŸÑŸÅŸÑÿ™ÿ±ÿ©:', filters);\r\n    \r\n    const params = {};\r\n    \r\n    if (filters.branch_id && filters.branch_id !== 'all') {\r\n      params.branch_id = filters.branch_id;\r\n    }\r\n    \r\n    if (filters.status && filters.status !== 'all') {\r\n      params.status = filters.status;\r\n    }\r\n    \r\n    if (filters.category && filters.category !== 'all') {\r\n      params.category = filters.category;\r\n    }\r\n    \r\n    const response = await api.get('/games/with-filter', { params });\r\n    return response;\r\n  } catch (error) {\r\n    console.error('‚ùå ÿÆÿ∑ÿ£ ŸÅŸä ÿ¨ŸÑÿ® ÿßŸÑÿ£ŸÑÿπÿßÿ® ŸÖÿπ ÿßŸÑŸÅŸÑÿ™ÿ±ÿ©:', error);\r\n    return {\r\n      success: false,\r\n      message: 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ£ŸÑÿπÿßÿ® ŸÖÿπ ÿßŸÑŸÅŸÑÿ™ÿ±ÿ©',\r\n      data: []\r\n    };\r\n  }\r\n},\r\n\r\n// üÜï ÿØÿßŸÑÿ© ÿ¨ÿØŸäÿØÿ©: ÿ¨ŸÑÿ® ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿßŸÑÿ£ŸÑÿπÿßÿ® ŸÑŸÉŸÑ ŸÅÿ±ÿπ\r\ngetGamesStatsByBranch: async () => {\r\n  try {\r\n    console.log('üìä ÿ¨ŸÑÿ® ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿßŸÑÿ£ŸÑÿπÿßÿ® ÿ≠ÿ≥ÿ® ÿßŸÑŸÅÿ±Ÿàÿπ...');\r\n    const response = await api.get('/games/stats/by-branch');\r\n    return response;\r\n  } catch (error) {\r\n    console.error('‚ùå ÿÆÿ∑ÿ£ ŸÅŸä ÿ¨ŸÑÿ® ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿßŸÑŸÅÿ±Ÿàÿπ:', error);\r\n    return {\r\n      success: false,\r\n      message: 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿßŸÑŸÅÿ±Ÿàÿπ',\r\n      data: [],\r\n      totals: {\r\n        total_branches: 0,\r\n        total_games: 0,\r\n        available_games: 0,\r\n        rented_games: 0,\r\n        maintenance_games: 0\r\n      }\r\n    };\r\n  }\r\n},\r\n\r\n// üÜï ÿØÿßŸÑÿ© ÿ¨ÿØŸäÿØÿ©: ÿ¨ŸÑÿ® ÿßŸÑÿ£ŸÑÿπÿßÿ® ŸÖÿπ ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑŸÅÿ±ÿπ\r\ngetGamesWithBranchInfo: async (branchId = null) => {\r\n  try {\r\n    console.log('üéÆ ÿ¨ŸÑÿ® ÿßŸÑÿ£ŸÑÿπÿßÿ® ŸÖÿπ ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑŸÅÿ±ÿπ:', branchId);\r\n    \r\n    const params = { include_branch_info: 'true' };\r\n    if (branchId && branchId !== 'all') {\r\n      params.branch_id = branchId;\r\n    }\r\n    \r\n    const response = await api.get('/games', { params });\r\n    return response;\r\n  } catch (error) {\r\n    console.error('‚ùå ÿÆÿ∑ÿ£ ŸÅŸä ÿ¨ŸÑÿ® ÿßŸÑÿ£ŸÑÿπÿßÿ® ŸÖÿπ ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑŸÅÿ±ÿπ:', error);\r\n    return {\r\n      success: false,\r\n      message: 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ£ŸÑÿπÿßÿ®',\r\n      data: []\r\n    };\r\n  }\r\n},\r\n\r\n  // ================= USERS MANAGEMENT =================\r\n  \r\n  getUsers: async () => {\r\n    try {\r\n      return await api.get('/users');\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ',\r\n        data: []\r\n      };\r\n    }\r\n  },\r\n\r\n  createUser: async (userData) => {\r\n    try {\r\n      return await api.post('/users', userData);\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ'\r\n      };\r\n    }\r\n  },\r\n\r\n  updateUser: async (id, userData) => {\r\n    try {\r\n      return await api.put(`/users/${id}`, userData);\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ'\r\n      };\r\n    }\r\n  },\r\n\r\n  deleteUser: async (id) => {\r\n    try {\r\n      return await api.delete(`/users/${id}`);\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ≠ÿ∞ŸÅ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ'\r\n      };\r\n    }\r\n  },\r\n\r\n  deleteUserPermanent: async (id) => {\r\n    try {\r\n      return await api.deleteUserPermanent(id);\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ≠ÿ∞ŸÅ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ŸÜŸáÿßÿ¶ŸäÿßŸã'\r\n      };\r\n    }\r\n  },\r\n\r\n  // ================= CUSTOMERS =================\r\n  \r\n  getCustomers: async (search = '') => {\r\n    try {\r\n      const params = search ? { search } : {};\r\n      return await api.get('/customers', { params });\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿπŸÖŸÑÿßÿ°',\r\n        data: []\r\n      };\r\n    }\r\n  },\r\n\r\n  createCustomer: async (customerData) => {\r\n    try {\r\n      return await api.post('/customers', customerData);\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿπŸÖŸäŸÑ'\r\n      };\r\n    }\r\n  },\r\n\r\n  // ================= RENTALS =================\r\n  \r\n  getRentals: async (params = {}) => {\r\n    try {\r\n      return await api.get('/rentals', { params });\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ™ÿ£ÿ¨Ÿäÿ±ÿßÿ™',\r\n        data: []\r\n      };\r\n    }\r\n  },\r\n\r\n  createRental: async (rentalData) => {\r\n    try {\r\n      return await api.post('/rentals', rentalData);\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿ™ÿ£ÿ¨Ÿäÿ±'\r\n      };\r\n    }\r\n  },\r\n\r\n  completeRental: async (id, paymentData = {}) => {\r\n    try {\r\n      return await api.put(`/rentals/${id}/complete`, paymentData);\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ•ŸÉŸÖÿßŸÑ ÿßŸÑÿ™ÿ£ÿ¨Ÿäÿ±'\r\n      };\r\n    }\r\n  },\r\n\r\n  // ================= SHIFTS MANAGEMENT =================\r\n\r\n  getActiveShift: async () => {\r\n    try {\r\n      console.log('üîÑ ÿ¨ŸÑÿ® ÿßŸÑÿ¥ŸäŸÅÿ™ ÿßŸÑŸÜÿ¥ÿ∑...');\r\n      const response = await api.get('/shifts/simple');\r\n      return response;\r\n    } catch (error) {\r\n      console.error('‚ùå ÿÆÿ∑ÿ£ ŸÅŸä ÿ¨ŸÑÿ® ÿßŸÑÿ¥ŸäŸÅÿ™ ÿßŸÑŸÜÿ¥ÿ∑:', error);\r\n      return {\r\n        success: false,\r\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ¨ŸÑÿ® ÿßŸÑÿ¥ŸäŸÅÿ™ ÿßŸÑŸÜÿ¥ÿ∑',\r\n        data: null\r\n      };\r\n    }\r\n  },\r\n\r\n  getBranchShifts: async (branchId) => {\r\n    try {\r\n      console.log(`üìã ÿ¨ŸÑÿ® ÿ¥ŸäŸÅÿ™ÿßÿ™ ÿßŸÑŸÅÿ±ÿπ ${branchId}`);\r\n      \r\n      const params = { branch_id: branchId };\r\n      const response = await api.get('/shifts', { params });\r\n      \r\n      return response;\r\n    } catch (error) {\r\n      console.error('‚ùå ÿÆÿ∑ÿ£ ŸÅŸä ÿ¨ŸÑÿ® ÿ¥ŸäŸÅÿ™ÿßÿ™ ÿßŸÑŸÅÿ±ÿπ:', error);\r\n      return {\r\n        success: false,\r\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ¨ŸÑÿ® ÿ¥ŸäŸÅÿ™ÿßÿ™ ÿßŸÑŸÅÿ±ÿπ',\r\n        data: []\r\n      };\r\n    }\r\n  },\r\n\r\n  startShift: async () => {\r\n    try {\r\n      console.log('üîÑ ÿ®ÿØÿ° ÿ¥ŸäŸÅÿ™ ÿ¨ÿØŸäÿØ');\r\n      const response = await api.post('/shifts/start');\r\n      return response;\r\n    } catch (error) {\r\n      console.error('‚ùå ÿÆÿ∑ÿ£ ŸÅŸä ÿ®ÿØÿ° ÿßŸÑÿ¥ŸäŸÅÿ™:', error);\r\n      return {\r\n        success: false,\r\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ®ÿØÿ° ÿßŸÑÿ¥ŸäŸÅÿ™'\r\n      };\r\n    }\r\n  },\r\n\r\n  endShift: async (shiftId) => {\r\n    try {\r\n      console.log(`üèÅ ÿ•ŸÜŸáÿßÿ° ÿ¥ŸäŸÅÿ™ ${shiftId}`);\r\n      const response = await api.post(`/shifts/${shiftId}/end`);\r\n      return response;\r\n    } catch (error) {\r\n      console.error('‚ùå ÿÆÿ∑ÿ£ ŸÅŸä ÿ•ŸÜŸáÿßÿ° ÿßŸÑÿ¥ŸäŸÅÿ™:', error);\r\n      return {\r\n        success: false,\r\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ•ŸÜŸáÿßÿ° ÿßŸÑÿ¥ŸäŸÅÿ™'\r\n      };\r\n    }\r\n  },\r\n\r\n  // ================= ACTIVITIES =================\r\n  \r\n  getActivities: async (filters = {}) => {\r\n    try {\r\n      return await api.get('/activities', { params: filters });\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿ≥ÿ¨ŸÑ ÿßŸÑÿ£ŸÜÿ¥ÿ∑ÿ©',\r\n        data: []\r\n      };\r\n    }\r\n  },\r\n\r\n  // ================= BRANCH GAMES =================\r\n  \r\n  getBranchGames: async (branchId) => {\r\n    try {\r\n      return await api.get(`/branches/${branchId}/games`);\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: error.message || 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿ£ŸÑÿπÿßÿ® ÿßŸÑŸÅÿ±ÿπ',\r\n        data: []\r\n      };\r\n    }\r\n  },\r\n\r\n  addGameToBranch: async (branchId, gameData) => {\r\n    try {\r\n      return await api.post(`/branches/${branchId}/games`, gameData);\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ•ÿ∂ÿßŸÅÿ© ŸÑÿπÿ®ÿ© ŸÑŸÑŸÅÿ±ÿπ'\r\n      };\r\n    }\r\n  },\r\n\r\n  updateBranchGame: async (branchId, gameId, updateData) => {\r\n    try {\r\n      return await api.updateBranchGame(branchId, gameId, updateData);\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ÿØŸäÿ´ ŸÑÿπÿ®ÿ© ÿßŸÑŸÅÿ±ÿπ'\r\n      };\r\n    }\r\n  },\r\n\r\n  deleteBranchGame: async (branchId, gameId) => {\r\n    try {\r\n      return await api.deleteBranchGame(branchId, gameId);\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ•ÿ≤ÿßŸÑÿ© ŸÑÿπÿ®ÿ© ŸÖŸÜ ÿßŸÑŸÅÿ±ÿπ'\r\n      };\r\n    }\r\n  },\r\n\r\n  // ================= AVAILABLE & RENTED GAMES =================\r\n  \r\n  getAvailableGames: async (params = {}) => {\r\n    try {\r\n      return await api.getAvailableGames(params);\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ£ŸÑÿπÿßÿ® ÿßŸÑŸÖÿ™ÿßÿ≠ÿ©',\r\n        data: []\r\n      };\r\n    }\r\n  },\r\n\r\n  getRentedGames: async (params = {}) => {\r\n    try {\r\n      return await api.getRentedGames(params);\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ£ŸÑÿπÿßÿ® ÿßŸÑŸÖÿ§ÿ¨ÿ±ÿ©',\r\n        data: []\r\n      };\r\n    }\r\n  },\r\n\r\n  getAvailableGamesForBranch: async (branchId) => {\r\n    try {\r\n      const [allGames, branchGames] = await Promise.all([\r\n        authService.getGames(),\r\n        authService.getBranchGames(branchId)\r\n      ]);\r\n      \r\n      if (allGames.success && branchGames.success) {\r\n        const addedGameIds = branchGames.data.map(g => g.game_id || g.id);\r\n        const availableGames = allGames.data.filter(game => !addedGameIds.includes(game.id));\r\n        \r\n        return { \r\n          success: true, \r\n          data: availableGames \r\n        };\r\n      }\r\n      return { success: false, message: 'ŸÅÿ¥ŸÑ ŸÅŸä ÿ¨ŸÑÿ® ÿßŸÑÿ£ŸÑÿπÿßÿ® ÿßŸÑŸÖÿ™ÿßÿ≠ÿ©' };\r\n    } catch (error) {\r\n      return { success: false, message: 'ŸÅÿ¥ŸÑ ŸÅŸä ÿ¨ŸÑÿ® ÿßŸÑÿ£ŸÑÿπÿßÿ® ÿßŸÑŸÖÿ™ÿßÿ≠ÿ©' };\r\n    }\r\n  },\r\n\r\n  // ================= ADVANCED ANALYTICS =================\r\n  \r\n  getMonthlyStats: async (month, year) => {\r\n    try {\r\n      return await api.getMonthlyStats(month, year);\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿßŸÑÿ¥Ÿáÿ±Ÿäÿ©',\r\n        data: {}\r\n      };\r\n    }\r\n  },\r\n\r\n  getTopGames: async (params = {}) => {\r\n    try {\r\n      return await api.getTopGames(params);\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿ£ŸÅÿ∂ŸÑ ÿßŸÑÿ£ŸÑÿπÿßÿ®',\r\n        data: []\r\n      };\r\n    }\r\n  },\r\n\r\n  getBranchPerformance: async (params = {}) => {\r\n    try {\r\n      return await api.getBranchPerformance(params);\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿ£ÿØÿßÿ° ÿßŸÑŸÅÿ±Ÿàÿπ',\r\n        data: []\r\n      };\r\n    }\r\n  },\r\n\r\n  getRevenueTrend: async (params = {}) => {\r\n    try {\r\n      return await api.getRevenueTrend(params);\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿßÿ™ÿ¨ÿßŸá ÿßŸÑÿ•Ÿäÿ±ÿßÿØÿßÿ™',\r\n        data: []\r\n      };\r\n    }\r\n  },\r\n\r\n  getAdvancedReport: async (reportType, params = {}) => {\r\n    try {\r\n      return await api.getAdvancedReport(reportType, params);\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ™ŸÇÿ±Ÿäÿ±',\r\n        data: []\r\n      };\r\n    }\r\n  },\r\n\r\n  getSalesReport: async (params = {}) => {\r\n    try {\r\n      return await api.getSalesReport(params);\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿ™ŸÇÿ±Ÿäÿ± ÿßŸÑŸÖÿ®Ÿäÿπÿßÿ™',\r\n        data: []\r\n      };\r\n    }\r\n  },\r\n\r\n  // ================= HEALTH CHECK =================\r\n  \r\n  healthCheck: async () => {\r\n    try {\r\n      return await api.get('/health');\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: 'ÿ™ÿπÿ∞ÿ± ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ÿßŸÑÿÆÿßÿØŸÖ'\r\n      };\r\n    }\r\n  },\r\n\r\n  // ================= TESTING =================\r\n  \r\n  testApiConnection: async () => {\r\n    try {\r\n      const response = await api.get('/health');\r\n      return {\r\n        success: response.success,\r\n        message: '‚úÖ ÿßÿ™ÿµÿßŸÑ API ŸäÿπŸÖŸÑ ÿ®ÿ¥ŸÉŸÑ ÿµÿ≠Ÿäÿ≠',\r\n        data: response.data\r\n      };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: '‚ùå ŸÅÿ¥ŸÑ ÿßÿÆÿ™ÿ®ÿßÿ± ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ÿßŸÑÿÆÿßÿØŸÖ'\r\n      };\r\n    }\r\n  },\r\n\r\n  testToken: async () => {\r\n    try {\r\n      return await api.testToken();\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: 'ÿ™ÿπÿ∞ÿ± ÿßÿÆÿ™ÿ®ÿßÿ± ÿßŸÑÿ™ŸàŸÉŸÜ',\r\n        error: error.message\r\n      };\r\n    }\r\n  },\r\n\r\n  // ================= CURRENT BRANCH OPERATIONS =================\r\n  \r\n  getAvailableGamesForCurrentBranch: async () => {\r\n    try {\r\n      const user = authService.getCurrentUser();\r\n      if (!user?.branch_id) {\r\n        return {\r\n          success: false,\r\n          message: 'ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ÿ∫Ÿäÿ± ŸÖÿ±ÿ™ÿ®ÿ∑ ÿ®ŸÅÿ±ÿπ',\r\n          data: []\r\n        };\r\n      }\r\n      \r\n      const response = await api.get(`/branches/${user.branch_id}/games`);\r\n      \r\n      if (response.success) {\r\n        // ÿ™ÿµŸÅŸäÿ© ÿßŸÑÿ£ŸÑÿπÿßÿ® ÿßŸÑŸÖÿ™ÿßÿ≠ÿ© ŸÅŸÇÿ∑\r\n        const availableGames = response.data.filter(game => \r\n          game.status === 'ŸÖÿ™ÿßÿ≠' && game.available_quantity > 0\r\n        );\r\n        \r\n        return {\r\n          success: true,\r\n          data: availableGames,\r\n          message: `ÿ™ŸÖ ÿ™ÿ≠ŸÖŸäŸÑ ${availableGames.length} ŸÑÿπÿ®ÿ© ŸÖÿ™ÿßÿ≠ÿ©`\r\n        };\r\n      }\r\n      \r\n      return response;\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿ£ŸÑÿπÿßÿ® ÿßŸÑŸÅÿ±ÿπ',\r\n        data: []\r\n      };\r\n    }\r\n  },\r\n\r\n  getCurrentUserBranch: async () => {\r\n    try {\r\n      const user = authService.getCurrentUser();\r\n      if (!user?.branch_id) {\r\n        return {\r\n          success: false,\r\n          message: 'ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ÿ∫Ÿäÿ± ŸÖÿ±ÿ™ÿ®ÿ∑ ÿ®ŸÅÿ±ÿπ',\r\n          data: null\r\n        };\r\n      }\r\n      \r\n      const response = await api.get(`/branches/${user.branch_id}`);\r\n      return response;\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÅÿ±ÿπ',\r\n        data: null\r\n      };\r\n    }\r\n  },\r\n\r\n  getActiveRentalsForCurrentBranch: async () => {\r\n    try {\r\n      const user = authService.getCurrentUser();\r\n      if (!user?.branch_id) {\r\n        return {\r\n          success: false,\r\n          message: 'ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ÿ∫Ÿäÿ± ŸÖÿ±ÿ™ÿ®ÿ∑ ÿ®ŸÅÿ±ÿπ',\r\n          data: []\r\n        };\r\n      }\r\n      \r\n      const response = await api.get('/rentals/active', {\r\n        params: { branch_id: user.branch_id }\r\n      });\r\n      \r\n      return response;\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ™ÿ£ÿ¨Ÿäÿ±ÿßÿ™ ÿßŸÑŸÜÿ¥ÿ∑ÿ©',\r\n        data: []\r\n      };\r\n    }\r\n  },\r\n\r\n  getCurrentBranchStats: async () => {\r\n    try {\r\n      const user = authService.getCurrentUser();\r\n      if (!user?.branch_id) {\r\n        return {\r\n          success: false,\r\n          message: 'ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ÿ∫Ÿäÿ± ŸÖÿ±ÿ™ÿ®ÿ∑ ÿ®ŸÅÿ±ÿπ',\r\n          data: null\r\n        };\r\n      }\r\n      \r\n      const response = await api.get('/dashboard/stats', {\r\n        params: { branch_id: user.branch_id }\r\n      });\r\n      \r\n      return response;\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ŸÖŸäŸÑ ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿßŸÑŸÅÿ±ÿπ',\r\n        data: null\r\n      };\r\n    }\r\n  },\r\n\r\n  startRentalInCurrentBranch: async (rentalData) => {\r\n    try {\r\n      const user = authService.getCurrentUser();\r\n      if (!user?.branch_id) {\r\n        return {\r\n          success: false,\r\n          message: 'ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ÿ∫Ÿäÿ± ŸÖÿ±ÿ™ÿ®ÿ∑ ÿ®ŸÅÿ±ÿπ'\r\n        };\r\n      }\r\n      \r\n      const fullRentalData = {\r\n        ...rentalData,\r\n        branch_id: user.branch_id,\r\n        employee_id: user.id,\r\n        employee_name: user.name\r\n      };\r\n      \r\n      console.log('üì§ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ™ÿ£ÿ¨Ÿäÿ±:', fullRentalData);\r\n      const response = await api.post('/rentals', fullRentalData);\r\n      return response;\r\n    } catch (error) {\r\n      console.error('‚ùå ÿÆÿ∑ÿ£ ŸÅŸä ÿ®ÿØÿ° ÿßŸÑÿ™ÿ£ÿ¨Ÿäÿ±:', error);\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || 'ÿ™ÿπÿ∞ÿ± ÿ®ÿØÿ° ÿßŸÑÿ™ÿ£ÿ¨Ÿäÿ±'\r\n      };\r\n    }\r\n  },\r\n\r\n  endRental: async (rentalId, finalAmount = null) => {\r\n    try {\r\n      const payload = {};\r\n      if (finalAmount !== null) {\r\n        payload.final_amount = finalAmount;\r\n      }\r\n      \r\n      const response = await api.put(`/rentals/${rentalId}/complete`, payload);\r\n      return response;\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || 'ÿ™ÿπÿ∞ÿ± ÿ•ŸÜŸáÿßÿ° ÿßŸÑÿ™ÿ£ÿ¨Ÿäÿ±'\r\n      };\r\n    }\r\n  },\r\n\r\n  searchGamesInCurrentBranch: async (searchTerm) => {\r\n    try {\r\n      const user = authService.getCurrentUser();\r\n      if (!user?.branch_id) {\r\n        return {\r\n          success: false,\r\n          message: 'ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ÿ∫Ÿäÿ± ŸÖÿ±ÿ™ÿ®ÿ∑ ÿ®ŸÅÿ±ÿπ',\r\n          data: []\r\n        };\r\n      }\r\n      \r\n      // ŸÖÿ≠ÿßŸàŸÑÿ© ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ŸÜŸÇÿ∑ÿ© ÿßŸÑÿ®ÿ≠ÿ´ ÿ•ÿ∞ÿß ŸÉÿßŸÜÿ™ ŸÖŸàÿ¨ŸàÿØÿ©\r\n      try {\r\n        const response = await api.get(`/branches/${user.branch_id}/games/search`, {\r\n          params: { q: searchTerm }\r\n        });\r\n        \r\n        if (response.success) return response;\r\n      } catch (searchError) {\r\n        console.log('‚ö†Ô∏è ŸÜŸÇÿ∑ÿ© ÿßŸÑÿ®ÿ≠ÿ´ ÿ∫Ÿäÿ± ŸÖÿ™ÿßÿ≠ÿ©ÿå ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑÿ™ÿµŸÅŸäÿ© ÿßŸÑŸÖÿ≠ŸÑŸäÿ©');\r\n      }\r\n      \r\n      // fallback: ÿ™ÿµŸÅŸäÿ© ŸÖÿ≠ŸÑŸäÿ©\r\n      const allGames = await authService.getAvailableGamesForCurrentBranch();\r\n      if (allGames.success) {\r\n        const filtered = allGames.data.filter(game =>\r\n          game.name?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n          game.category?.toLowerCase().includes(searchTerm.toLowerCase())\r\n        );\r\n        \r\n        return {\r\n          success: true,\r\n          data: filtered,\r\n          message: `ÿ™ŸÖ ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ ${filtered.length} ŸÜÿ™Ÿäÿ¨ÿ©`\r\n        };\r\n      }\r\n      \r\n      return {\r\n        success: false,\r\n        message: 'ÿ™ÿπÿ∞ÿ± ÿßŸÑÿ®ÿ≠ÿ´ ŸÅŸä ÿßŸÑÿ£ŸÑÿπÿßÿ®',\r\n        data: []\r\n      };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: 'ÿ™ÿπÿ∞ÿ± ÿßŸÑÿ®ÿ≠ÿ´ ŸÅŸä ÿßŸÑÿ£ŸÑÿπÿßÿ®',\r\n        data: []\r\n      };\r\n    }\r\n  },\r\n\r\n  updateRentalTimers: async () => {\r\n    try {\r\n      const user = authService.getCurrentUser();\r\n      if (!user?.branch_id) return;\r\n      \r\n      const response = await api.get(`/rentals/${user.branch_id}/check-expired`);\r\n      return response;\r\n    } catch (error) {\r\n      console.warn('‚ö†Ô∏è ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ÿØŸäÿ´ ÿπÿØÿßÿØÿßÿ™ ÿßŸÑŸàŸÇÿ™:', error.message);\r\n    }\r\n  },\r\n\r\n  refreshCurrentBranchData: async () => {\r\n    try {\r\n      const user = authService.getCurrentUser();\r\n      if (!user?.branch_id) return null;\r\n      \r\n      const [gamesResponse, rentalsResponse, statsResponse] = await Promise.all([\r\n        authService.getAvailableGamesForCurrentBranch(),\r\n        authService.getActiveRentalsForCurrentBranch(),\r\n        authService.getCurrentBranchStats()\r\n      ]);\r\n      \r\n      return {\r\n        success: true,\r\n        games: gamesResponse.success ? gamesResponse.data : [],\r\n        activeRentals: rentalsResponse.success ? rentalsResponse.data : [],\r\n        stats: statsResponse.success ? statsResponse.data : null,\r\n        message: 'ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™'\r\n      };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        message: 'ÿ™ÿπÿ∞ÿ± ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™',\r\n        games: [],\r\n        activeRentals: [],\r\n        stats: null\r\n      };\r\n    }\r\n  },\r\n\r\n  // ================= UTILITY FUNCTIONS =================\r\n  \r\n  formatError: (error) => {\r\n    if (error.response) {\r\n      return error.response.data?.message || `ÿÆÿ∑ÿ£ ${error.response.status}: ${error.response.statusText}`;\r\n    } else if (error.request) {\r\n      return 'ÿ™ÿπÿ∞ÿ± ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ÿßŸÑÿÆÿßÿØŸÖ. ÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑÿÆÿßÿØŸÖ';\r\n    } else {\r\n      return error.message || 'ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ÿ∫Ÿäÿ± ŸÖÿπÿ±ŸàŸÅ';\r\n    }\r\n  },\r\n\r\n  hasRole: (role) => {\r\n    const user = authService.getCurrentUser();\r\n    return user?.role === role;\r\n  },\r\n\r\n  hasAnyRole: (roles) => {\r\n    const user = authService.getCurrentUser();\r\n    return roles.includes(user?.role);\r\n  },\r\n\r\n  validateCustomerPhone: (phone) => {\r\n    const phoneRegex = /^01[0-9]{9}$/;\r\n    return phoneRegex.test(phone);\r\n  },\r\n\r\n  formatCurrency: (amount) => {\r\n    const num = parseFloat(amount) || 0;\r\n    return new Intl.NumberFormat('ar-EG', {\r\n      style: 'currency',\r\n      currency: 'EGP',\r\n      minimumFractionDigits: 0\r\n    }).format(num);\r\n  },\r\n\r\n  formatDuration: (minutes) => {\r\n    if (!minutes || minutes === 0) return 'ŸàŸÇÿ™ ŸÖŸÅÿ™Ÿàÿ≠';\r\n    if (minutes < 60) return `${minutes} ÿØŸÇŸäŸÇÿ©`;\r\n    \r\n    const hours = Math.floor(minutes / 60);\r\n    const remainingMinutes = minutes % 60;\r\n    return `${hours} ÿ≥ÿßÿπÿ©${remainingMinutes > 0 ? ` ${remainingMinutes} ÿØŸÇŸäŸÇÿ©` : ''}`;\r\n  },\r\n\r\n  formatTime: (dateString) => {\r\n    try {\r\n      return new Date(dateString).toLocaleTimeString('ar-EG', {\r\n        hour: '2-digit',\r\n        minute: '2-digit'\r\n      });\r\n    } catch {\r\n      return '--:--';\r\n    }\r\n  },\r\n\r\n  formatDate: (dateString) => {\r\n    try {\r\n      return new Date(dateString).toLocaleDateString('ar-EG', {\r\n        weekday: 'short',\r\n        year: 'numeric',\r\n        month: 'long',\r\n        day: 'numeric'\r\n      });\r\n    } catch {\r\n      return '--/--/----';\r\n    }\r\n  },\r\n\r\n  showNotification: (type, message) => {\r\n    const messages = {\r\n      error: `‚ùå ${message}`,\r\n      success: `‚úÖ ${message}`,\r\n      warning: `‚ö†Ô∏è ${message}`,\r\n      info: `‚ÑπÔ∏è ${message}`\r\n    };\r\n    \r\n    // ŸäŸÖŸÉŸÜ ÿßÿ≥ÿ™ÿ®ÿØÿßŸÑ Ÿáÿ∞ÿß ÿ®ŸÖŸÉÿ™ÿ®ÿ© ÿ•ÿ¥ÿπÿßÿ±ÿßÿ™ ŸÖÿ´ŸÑ react-toastify\r\n    alert(messages[type] || message);\r\n  },\r\n\r\n  calculateTimeRemaining: (endTime) => {\r\n    if (!endTime) return null;\r\n    \r\n    try {\r\n      const end = new Date(endTime);\r\n      const now = new Date();\r\n      const timeLeftMs = end - now;\r\n      \r\n      if (timeLeftMs <= 0) return { expired: true, minutes: 0, formatted: 'ÿßŸÜÿ™ŸáŸâ' };\r\n      \r\n      const minutesLeft = Math.floor(timeLeftMs / 60000);\r\n      const hours = Math.floor(minutesLeft / 60);\r\n      const minutes = minutesLeft % 60;\r\n      \r\n      return {\r\n        expired: false,\r\n        minutes: minutesLeft,\r\n        formatted: hours > 0 ? `${hours} ÿ≥ÿßÿπÿ© ${minutes} ÿØŸÇŸäŸÇÿ©` : `${minutes} ÿØŸÇŸäŸÇÿ©`\r\n      };\r\n    } catch (error) {\r\n      return null;\r\n    }\r\n  },\r\n\r\n  prepareRentalFormData: () => {\r\n    return {\r\n      customer_name: '',\r\n      customer_phone: '',\r\n      customer_notes: '',\r\n      duration_type: 'fixed',\r\n      duration_minutes: 60,\r\n      selected_games: [],\r\n      quantities: {},\r\n      discount: 0,\r\n      payment_method: 'cash'\r\n    };\r\n  },\r\n\r\n  validateRentalForm: (formData) => {\r\n    const errors = [];\r\n    \r\n    if (!formData.customer_name?.trim()) {\r\n      errors.push('ÿßÿ≥ŸÖ ÿßŸÑÿπŸÖŸäŸÑ ŸÖÿ∑ŸÑŸàÿ®');\r\n    }\r\n    \r\n    if (!formData.customer_phone?.trim()) {\r\n      errors.push('ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ ŸÖÿ∑ŸÑŸàÿ®');\r\n    } else if (!authService.validateCustomerPhone(formData.customer_phone)) {\r\n      errors.push('ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ ÿ∫Ÿäÿ± ÿµÿ≠Ÿäÿ≠. Ÿäÿ¨ÿ® ÿ£ŸÜ Ÿäÿ®ÿØÿ£ ÿ®ŸÄ 01 ŸàŸäÿ™ŸÉŸàŸÜ ŸÖŸÜ 11 ÿ±ŸÇŸÖ');\r\n    }\r\n    \r\n    if (formData.selected_games.length === 0) {\r\n      errors.push('Ÿäÿ¨ÿ® ÿßÿÆÿ™Ÿäÿßÿ± ŸÑÿπÿ®ÿ© Ÿàÿßÿ≠ÿØÿ© ÿπŸÑŸâ ÿßŸÑÿ£ŸÇŸÑ');\r\n    }\r\n    \r\n    if (formData.duration_type === 'fixed' && !formData.duration_minutes) {\r\n      errors.push('Ÿäÿ¨ÿ® ÿ™ÿ≠ÿØŸäÿØ ŸÖÿØÿ© ÿßŸÑÿ™ÿ£ÿ¨Ÿäÿ±');\r\n    }\r\n    \r\n    return {\r\n      isValid: errors.length === 0,\r\n      errors: errors\r\n    };\r\n  },\r\n\r\n  calculateRentalPrice: (game, durationMinutes, quantity = 1) => {\r\n    if (!game) return 0;\r\n    \r\n    let price = 0;\r\n    \r\n    if (durationMinutes >= 60) {\r\n      price = (game.price_per_hour || 0) * (durationMinutes / 60);\r\n    } else {\r\n      const quarters = Math.ceil(durationMinutes / 15);\r\n      price = (game.price_per_15min || 0) * quarters;\r\n    }\r\n    \r\n    return price * quantity;\r\n  }\r\n};\r\n\r\nexport default authService;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}