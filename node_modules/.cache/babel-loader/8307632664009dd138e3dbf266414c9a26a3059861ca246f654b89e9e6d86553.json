{"ast":null,"code":"// frontend/src/services/authService.js\nimport api from './api';\nclass AuthService {\n  constructor() {\n    this.token = localStorage.getItem('token');\n    this.user = this.getUserFromStorage();\n  }\n  getUserFromStorage() {\n    try {\n      const userStr = localStorage.getItem('user');\n      return userStr ? JSON.parse(userStr) : null;\n    } catch (error) {\n      console.error('Error parsing user:', error);\n      return null;\n    }\n  }\n  setAuthData(token, user) {\n    this.token = token;\n    this.user = user;\n    localStorage.setItem('token', token);\n    localStorage.setItem('user', JSON.stringify(user));\n  }\n  clearAuthData() {\n    this.token = null;\n    this.user = null;\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n  }\n  async login(email, password) {\n    try {\n      const response = await api.post('/auth/login', {\n        email,\n        password\n      });\n      if (response.data.success) {\n        this.setAuthData(response.data.token, response.data.user);\n        return {\n          success: true,\n          data: response.data\n        };\n      } else {\n        return {\n          success: false,\n          message: response.data.message || 'ŸÅÿ¥ŸÑ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ'\n        };\n      }\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error('Login error:', error);\n      return {\n        success: false,\n        message: ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || 'ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ÿßŸÑÿÆÿßÿØŸÖ'\n      };\n    }\n  }\n  logout() {\n    this.clearAuthData();\n    window.location.href = '/login';\n  }\n  getCurrentUser() {\n    return this.user;\n  }\n  getToken() {\n    return this.token;\n  }\n  isAuthenticated() {\n    return !!this.token && !!this.user;\n  }\n  hasRole(role) {\n    var _this$user;\n    return ((_this$user = this.user) === null || _this$user === void 0 ? void 0 : _this$user.role) === role;\n  }\n  hasAnyRole(roles) {\n    var _this$user2;\n    return roles.includes((_this$user2 = this.user) === null || _this$user2 === void 0 ? void 0 : _this$user2.role);\n  }\n\n  // üîÑ ÿ™ÿ≠ÿØŸäÿ´ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ\n  async updateProfile(userData) {\n    try {\n      const response = await api.put('/auth/profile', userData);\n      if (response.data.success) {\n        this.user = {\n          ...this.user,\n          ...response.data.data\n        };\n        localStorage.setItem('user', JSON.stringify(this.user));\n      }\n      return response.data;\n    } catch (error) {\n      var _error$response2, _error$response2$data;\n      console.error('Update profile error:', error);\n      return {\n        success: false,\n        message: ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.message) || 'ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™'\n      };\n    }\n  }\n}\nexport default new AuthService();","map":{"version":3,"names":["api","AuthService","constructor","token","localStorage","getItem","user","getUserFromStorage","userStr","JSON","parse","error","console","setAuthData","setItem","stringify","clearAuthData","removeItem","login","email","password","response","post","data","success","message","_error$response","_error$response$data","logout","window","location","href","getCurrentUser","getToken","isAuthenticated","hasRole","role","_this$user","hasAnyRole","roles","_this$user2","includes","updateProfile","userData","put","_error$response2","_error$response2$data"],"sources":["C:/Users/HP/OneDrive/project/l3bty-rental-system/frontend/src/services/authService.js"],"sourcesContent":["// frontend/src/services/authService.js\r\nimport api from './api';\r\n\r\nclass AuthService {\r\n  constructor() {\r\n    this.token = localStorage.getItem('token');\r\n    this.user = this.getUserFromStorage();\r\n  }\r\n\r\n  getUserFromStorage() {\r\n    try {\r\n      const userStr = localStorage.getItem('user');\r\n      return userStr ? JSON.parse(userStr) : null;\r\n    } catch (error) {\r\n      console.error('Error parsing user:', error);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  setAuthData(token, user) {\r\n    this.token = token;\r\n    this.user = user;\r\n    localStorage.setItem('token', token);\r\n    localStorage.setItem('user', JSON.stringify(user));\r\n  }\r\n\r\n  clearAuthData() {\r\n    this.token = null;\r\n    this.user = null;\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('user');\r\n  }\r\n\r\n  async login(email, password) {\r\n    try {\r\n      const response = await api.post('/auth/login', { email, password });\r\n      \r\n      if (response.data.success) {\r\n        this.setAuthData(response.data.token, response.data.user);\r\n        return {\r\n          success: true,\r\n          data: response.data\r\n        };\r\n      } else {\r\n        return {\r\n          success: false,\r\n          message: response.data.message || 'ŸÅÿ¥ŸÑ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ'\r\n        };\r\n      }\r\n    } catch (error) {\r\n      console.error('Login error:', error);\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || 'ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ÿßŸÑÿÆÿßÿØŸÖ'\r\n      };\r\n    }\r\n  }\r\n\r\n  logout() {\r\n    this.clearAuthData();\r\n    window.location.href = '/login';\r\n  }\r\n\r\n  getCurrentUser() {\r\n    return this.user;\r\n  }\r\n\r\n  getToken() {\r\n    return this.token;\r\n  }\r\n\r\n  isAuthenticated() {\r\n    return !!this.token && !!this.user;\r\n  }\r\n\r\n  hasRole(role) {\r\n    return this.user?.role === role;\r\n  }\r\n\r\n  hasAnyRole(roles) {\r\n    return roles.includes(this.user?.role);\r\n  }\r\n\r\n  // üîÑ ÿ™ÿ≠ÿØŸäÿ´ ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ\r\n  async updateProfile(userData) {\r\n    try {\r\n      const response = await api.put('/auth/profile', userData);\r\n      if (response.data.success) {\r\n        this.user = { ...this.user, ...response.data.data };\r\n        localStorage.setItem('user', JSON.stringify(this.user));\r\n      }\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('Update profile error:', error);\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || 'ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™'\r\n      };\r\n    }\r\n  }\r\n}\r\n\r\nexport default new AuthService();"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}