{"ast":null,"code":"import axios from 'axios';\n\n// ==================== Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø© ====================\nconst detectEnvironment = () => {\n  const env = process.env.REACT_APP_ENVIRONMENT || 'development';\n  let apiUrl;\n  if (env === 'production') {\n    apiUrl = process.env.REACT_APP_API_URL;\n  } else {\n    apiUrl = 'http://localhost:5000/api';\n  }\n  console.log(`ğŸŒ Ø§Ù„Ø¨ÙŠØ¦Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©: ${env}`);\n  console.log(`ğŸŒ Ø¹Ù†ÙˆØ§Ù† API: ${apiUrl}`);\n  return {\n    env,\n    apiUrl\n  };\n};\nconst {\n  env,\n  apiUrl\n} = detectEnvironment(); // âœ… ØªØµØ­ÙŠØ­: ØªØ¹Ø±ÙŠÙ env Ù‡Ù†Ø§\n\nconst api = axios.create({\n  baseURL: apiUrl,\n  timeout: 30000,\n  headers: {\n    'Content-Type': 'application/json',\n    'Accept': 'application/json',\n    'Accept-Language': 'ar'\n  }\n});\n\n// ==================== Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø© ====================\nconst generateRentalNumber = (prefix = 'RNT') => `${prefix}-${Date.now().toString().slice(-8)}-${Math.floor(Math.random() * 1000)}`;\nconst generateShiftNumber = () => `SHIFT-${Date.now().toString().slice(-8)}`;\n\n// ØªØ£Ø®ÙŠØ± ØªÙ†ÙÙŠØ°\nconst delay = ms => new Promise(resolve => setTimeout(resolve, ms));\n\n// ==================== Interceptors ====================\napi.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  let authToken = token;\n  if (token && token.startsWith('Bearer ')) {\n    authToken = token.substring(7);\n  }\n  if (authToken) {\n    config.headers.Authorization = `Bearer ${authToken}`;\n  }\n  if (process.env.NODE_ENV === 'development') {\n    var _config$method;\n    console.log('ğŸŒ API Request:', {\n      method: (_config$method = config.method) === null || _config$method === void 0 ? void 0 : _config$method.toUpperCase(),\n      url: config.url,\n      fullUrl: `${config.baseURL}${config.url}`,\n      tokenExists: !!authToken,\n      data: config.data ? JSON.stringify(config.data).substring(0, 200) : undefined\n    });\n  }\n  return config;\n}, error => {\n  console.error('âŒ Request Interceptor Error:', error);\n  return Promise.reject(error);\n});\napi.interceptors.response.use(response => {\n  if (process.env.NODE_ENV === 'development') {\n    var _response$data;\n    console.log('âœ… API Response:', {\n      url: response.config.url,\n      status: response.status,\n      success: (_response$data = response.data) === null || _response$data === void 0 ? void 0 : _response$data.success\n    });\n  }\n  if (response.data && typeof response.data === 'object') {\n    return response.data;\n  }\n  return {\n    success: true,\n    status: response.status,\n    data: response.data,\n    message: 'ØªÙ… ØªÙ†ÙÙŠØ° Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­'\n  };\n}, error => {\n  var _error$config, _error$response, _error$response2, _error$response3, _error$response4, _error$response5, _error$response6, _error$response6$data, _error$response7;\n  console.error('âŒ Ø®Ø·Ø£ ÙÙŠ API:', {\n    url: (_error$config = error.config) === null || _error$config === void 0 ? void 0 : _error$config.url,\n    status: (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status,\n    message: error.message,\n    data: (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data\n  });\n  if (env === 'ngrok' && error.message.includes('Network Error')) {\n    return {\n      success: false,\n      status: 0,\n      message: 'Ø®Ø·Ø£ ÙÙŠ Ø§ØªØµØ§Ù„ ngrok. ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ø§Ù„Ø®Ø§Ø¯Ù… ÙŠØ¹Ù…Ù„',\n      ngrokError: true\n    };\n  }\n  if (((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.status) === 401) {\n    console.log('ğŸ”’ ØªÙˆÙƒÙ† Ù…Ù†ØªÙ‡ÙŠ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©');\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n    if (typeof window !== 'undefined' && !window.location.pathname.includes('/login')) {\n      window.location.href = '/login';\n    }\n  }\n  if (((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : _error$response4.status) === 500) {\n    console.log('âš ï¸ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø®Ø§Ø¯Ù… (500) - ÙŠÙ…ÙƒÙ† Ù…Ø¹Ø§Ù„Ø¬ØªÙ‡ Ù…Ø­Ù„ÙŠØ§Ù‹');\n  }\n  return Promise.reject({\n    success: false,\n    status: ((_error$response5 = error.response) === null || _error$response5 === void 0 ? void 0 : _error$response5.status) || 0,\n    message: ((_error$response6 = error.response) === null || _error$response6 === void 0 ? void 0 : (_error$response6$data = _error$response6.data) === null || _error$response6$data === void 0 ? void 0 : _error$response6$data.message) || error.message || 'Ø­Ø¯Ø« Ø®Ø·Ø£',\n    data: (_error$response7 = error.response) === null || _error$response7 === void 0 ? void 0 : _error$response7.data\n  });\n});\n\n// ==================== Ø¯ÙˆØ§Ù„ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªÙˆÙƒÙ† ====================\napi.setToken = token => {\n  if (token) {\n    let cleanToken = token;\n    if (token.startsWith('Bearer ')) {\n      cleanToken = token.substring(7);\n    }\n    api.defaults.headers.common['Authorization'] = `Bearer ${cleanToken}`;\n    localStorage.setItem('token', cleanToken);\n  } else {\n    delete api.defaults.headers.common['Authorization'];\n    localStorage.removeItem('token');\n  }\n};\napi.checkAuthStatus = () => {\n  const token = localStorage.getItem('token');\n  const user = localStorage.getItem('user');\n  return {\n    isAuthenticated: !!token,\n    token: token,\n    user: user ? JSON.parse(user) : null\n  };\n};\napi.getCurrentUser = () => {\n  try {\n    const userStr = localStorage.getItem('user');\n    return userStr ? JSON.parse(userStr) : null;\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ:', error);\n    return null;\n  }\n};\n\n// ==================== USERS ENDPOINTS ====================\n\n// Ø¬Ù„Ø¨ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†\napi.getUsers = async (params = {}) => {\n  try {\n    const response = await api.get('/users', {\n      params\n    });\n    return {\n      success: true,\n      data: response.data || [],\n      count: response.count || 0\n    };\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†:', error);\n    return {\n      success: false,\n      data: [],\n      message: error.message\n    };\n  }\n};\n\n// Ø¬Ù„Ø¨ Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø­Ø¯Ø¯\napi.getUserById = async id => {\n  try {\n    const response = await api.get(`/users/${id}`);\n    return {\n      success: true,\n      data: response.data\n    };\n  } catch (error) {\n    console.error(`âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ù…Ø³ØªØ®Ø¯Ù… ${id}:`, error);\n    return {\n      success: false,\n      message: error.message\n    };\n  }\n};\n\n// Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯ (Ø§Ù„ÙØ§Ù†ÙƒØ´Ù† Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©)\napi.createUser = async userData => {\n  try {\n    console.log('ğŸ“ Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯:', userData);\n    const response = await api.post('/users', userData);\n    console.log('âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:', response);\n    return {\n      success: true,\n      data: response.data,\n      message: response.message || 'ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ø¬Ø§Ø­'\n    };\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:', error);\n    return {\n      success: false,\n      message: error.message || 'ÙØ´Ù„ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…',\n      error: error\n    };\n  }\n};\n\n// ØªØ­Ø¯ÙŠØ« Ù…Ø³ØªØ®Ø¯Ù…\napi.updateUser = async (id, userData) => {\n  try {\n    const response = await api.put(`/users/${id}`, userData);\n    return {\n      success: true,\n      data: response.data,\n      message: response.message || 'ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ø¬Ø§Ø­'\n    };\n  } catch (error) {\n    console.error(`âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ù…Ø³ØªØ®Ø¯Ù… ${id}:`, error);\n    return {\n      success: false,\n      message: error.message\n    };\n  }\n};\n\n// Ø­Ø°Ù Ù…Ø³ØªØ®Ø¯Ù…\napi.deleteUser = async (id, permanent = false) => {\n  try {\n    const response = await api.delete(`/users/${id}?permanent=${permanent}`);\n    return {\n      success: true,\n      message: response.message || 'ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ø¬Ø§Ø­'\n    };\n  } catch (error) {\n    console.error(`âŒ Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ù…Ø³ØªØ®Ø¯Ù… ${id}:`, error);\n    return {\n      success: false,\n      message: error.message\n    };\n  }\n};\n\n// ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±\napi.changePassword = async (id, passwordData) => {\n  try {\n    const response = await api.put(`/users/${id}/change-password`, passwordData);\n    return {\n      success: true,\n      message: response.message || 'ØªÙ… ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø¨Ù†Ø¬Ø§Ø­'\n    };\n  } catch (error) {\n    console.error(`âŒ Ø®Ø·Ø£ ÙÙŠ ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±:`, error);\n    return {\n      success: false,\n      message: error.message\n    };\n  }\n};\n\n// ==================== Ø¥Ù†Ø´Ø§Ø¡ ØªØ£Ø¬ÙŠØ± Ø¬Ø¯ÙŠØ¯ (Ù…Ø¨Ø³Ø· ÙˆØ¢Ù…Ù†) ====================\napi.createRental = async rentalData => {\n  try {\n    console.log('ğŸ“¦ Ø¥Ù†Ø´Ø§Ø¡ ØªØ£Ø¬ÙŠØ± Ø¬Ø¯ÙŠØ¯:', rentalData);\n\n    // Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©\n    if (!rentalData.customer_name) {\n      throw new Error('Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù…Ø·Ù„ÙˆØ¨');\n    }\n    if (!rentalData.items || !rentalData.items.length) {\n      throw new Error('ÙŠØ¬Ø¨ Ø¥Ø¶Ø§ÙØ© Ù„Ø¹Ø¨Ø© ÙˆØ§Ø­Ø¯Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„');\n    }\n\n    // ØªØ¬Ù‡ÙŠØ² Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ø¥Ø±Ø³Ø§Ù„\n    const payload = {\n      customer_name: rentalData.customer_name,\n      customer_phone: rentalData.customer_phone || '',\n      items: rentalData.items.map(item => ({\n        game_id: item.game_id,\n        child_name: item.child_name || '',\n        duration_minutes: item.duration_minutes || 15,\n        quantity: item.quantity || 1,\n        rental_type: item.rental_type || 'fixed'\n      })),\n      notes: rentalData.notes || ''\n    };\n    console.log('ğŸ“¤ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', payload);\n\n    // Ø§Ø³ØªØ®Ø¯Ø§Ù… axios Ù…Ø¨Ø§Ø´Ø±Ø© Ø¨Ø¯Ù„ api.post Ù„ØªØ¬Ù†Ø¨ Ø§Ù„Ù€ interceptor\n    const token = localStorage.getItem('token');\n    const response = await axios.post('http://localhost:5000/api/rentals', payload, {\n      headers: {\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json'\n      }\n    });\n    console.log('âœ… Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø§Ù„Ø®Ø§Ø¯Ù…:', response.data);\n    if (response.data && response.data.success) {\n      return response.data;\n    } else {\n      var _response$data2;\n      throw new Error(((_response$data2 = response.data) === null || _response$data2 === void 0 ? void 0 : _response$data2.message) || 'ÙØ´Ù„ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ±');\n    }\n  } catch (error) {\n    var _error$response8, _error$response8$data;\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ±:', error);\n\n    // ØªØ®Ø²ÙŠÙ† Ù…Ø­Ù„ÙŠ ÙƒÙ†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©\n    try {\n      const localRentals = JSON.parse(localStorage.getItem('local_rentals') || '[]');\n      const localRental = {\n        id: `local-${Date.now()}`,\n        rental_number: `RNT-${Date.now().toString().slice(-8)}`,\n        customer_name: rentalData.customer_name,\n        items: rentalData.items,\n        created_at: new Date().toISOString(),\n        local: true,\n        synced: false\n      };\n      localRentals.push(localRental);\n      localStorage.setItem('local_rentals', JSON.stringify(localRentals.slice(-20)));\n      return {\n        success: true,\n        data: localRental,\n        message: 'ØªÙ… Ø­ÙØ¸ Ø§Ù„ØªØ£Ø¬ÙŠØ± Ù…Ø­Ù„ÙŠØ§Ù‹ (Ø³ÙŠØªÙ… Ù…Ø²Ø§Ù…Ù†ØªÙ‡ Ù„Ø§Ø­Ù‚Ø§Ù‹)',\n        local: true\n      };\n    } catch (e) {\n      console.error('âŒ ÙØ´Ù„ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ:', e);\n    }\n    return {\n      success: false,\n      message: ((_error$response8 = error.response) === null || _error$response8 === void 0 ? void 0 : (_error$response8$data = _error$response8.data) === null || _error$response8$data === void 0 ? void 0 : _error$response8$data.message) || error.message || 'ÙØ´Ù„ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ±'\n    };\n  }\n};\n\n/**\r\n * Ø¬Ù„Ø¨ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø© Ù…Ø¹ Ø¯Ø¹Ù… ØªØ¹Ø¯Ø¯ Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª\r\n */\napi.getActiveRentalsUnbreakable = async (params = {}) => {\n  console.log('ğŸ”„ Ù…Ø­Ø§ÙˆÙ„Ø© Ø¬Ù„Ø¨ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©:', params);\n  const strategies = [{\n    name: 'GET /rentals/active',\n    executor: async () => {\n      return await api.get('/rentals/active', {\n        params\n      });\n    }\n  }, {\n    name: 'GET /rentals/active-all',\n    executor: async () => {\n      return await api.get('/rentals/active-all', {\n        params\n      });\n    }\n  }, {\n    name: 'GET /rentals?status=active',\n    executor: async () => {\n      return await api.get('/rentals', {\n        params: {\n          ...params,\n          status: 'active'\n        }\n      });\n    }\n  }, {\n    name: 'GET /rentals/list?active=true',\n    executor: async () => {\n      return await api.get('/rentals/list', {\n        params: {\n          ...params,\n          active: true\n        }\n      });\n    }\n  }];\n  for (const strategy of strategies) {\n    try {\n      const response = await strategy.executor();\n      if (response.success) {\n        const rentals = response.data || [];\n        console.log(`âœ… Ù†Ø¬Ø­Øª ${strategy.name}:`, rentals.length, 'ØªØ£Ø¬ÙŠØ±');\n\n        // Ø¯Ù…Ø¬ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ©\n        const localRentals = JSON.parse(localStorage.getItem('local_rentals') || '[]');\n        const activeLocal = localRentals.filter(r => r.status === 'active');\n        if (activeLocal.length > 0) {\n          console.log('ğŸ“¦ Ø¯Ù…Ø¬ ØªØ£Ø¬ÙŠØ±Ø§Øª Ù…Ø­Ù„ÙŠØ©:', activeLocal.length);\n          return {\n            success: true,\n            data: [...rentals, ...activeLocal],\n            local_count: activeLocal.length,\n            method: strategy.name\n          };\n        }\n        return {\n          success: true,\n          data: rentals,\n          method: strategy.name\n        };\n      }\n    } catch (error) {\n      var _error$response9;\n      if (error.status !== 404 && ((_error$response9 = error.response) === null || _error$response9 === void 0 ? void 0 : _error$response9.status) !== 404) {\n        console.log(`âš ï¸ Ø®Ø·Ø£ ÙÙŠ ${strategy.name}:`, error.message);\n      }\n    }\n  }\n\n  // Ø¥Ø°Ø§ ÙØ´Ù„Øª Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§ØªØŒ Ù†Ø±Ø¬Ø¹ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ©\n  const localRentals = JSON.parse(localStorage.getItem('local_rentals') || '[]');\n  const activeLocal = localRentals.filter(r => r.status === 'active');\n  return {\n    success: true,\n    data: activeLocal,\n    local_only: true,\n    message: 'ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ© ÙÙ‚Ø·'\n  };\n};\n\n/**\r\n * Ø¥Ù†Ù‡Ø§Ø¡ ØªØ£Ø¬ÙŠØ± Ù…ÙØªÙˆØ­ Ù…Ø¹ Ø¯Ø¹Ù… ØªØ¹Ø¯Ø¯ Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª\r\n */\napi.completeOpenRentalUnbreakable = async (rentalId, data = {}) => {\n  console.log(`ğŸ”„ Ù…Ø­Ø§ÙˆÙ„Ø© Ø¥Ù†Ù‡Ø§Ø¡ ØªØ£Ø¬ÙŠØ± Ù…ÙØªÙˆØ­ ${rentalId}:`, data);\n  const strategies = [{\n    name: `POST /rentals/${rentalId}/complete-open`,\n    executor: async () => {\n      return await api.post(`/rentals/${rentalId}/complete-open`, {\n        payment_method: data.payment_method || 'ÙƒØ§Ø´',\n        actual_minutes: data.actual_minutes,\n        final_amount: data.final_amount\n      });\n    }\n  }, {\n    name: `POST /rentals/complete/${rentalId}`,\n    executor: async () => {\n      return await api.post(`/rentals/complete/${rentalId}`, {\n        type: 'open',\n        ...data\n      });\n    }\n  }, {\n    name: `PUT /rentals/${rentalId}/complete`,\n    executor: async () => {\n      return await api.put(`/rentals/${rentalId}/complete`, {\n        rental_type: 'open',\n        ...data\n      });\n    }\n  }, {\n    name: `POST /rentals/${rentalId}/finish`,\n    executor: async () => {\n      return await api.post(`/rentals/${rentalId}/finish`, data);\n    }\n  }];\n  for (const strategy of strategies) {\n    try {\n      const response = await strategy.executor();\n      if (response && response.success) {\n        console.log(`âœ… Ù†Ø¬Ø­Øª ${strategy.name}`);\n\n        // ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ©\n        try {\n          const localRentals = JSON.parse(localStorage.getItem('local_rentals') || '[]');\n          const updatedRentals = localRentals.map(r => r.id === rentalId || r.id === `local-${rentalId}` ? {\n            ...r,\n            status: 'completed',\n            synced: true\n          } : r);\n          localStorage.setItem('local_rentals', JSON.stringify(updatedRentals));\n        } catch (e) {\n          console.warn('âš ï¸ ÙØ´Ù„ ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ©:', e.message);\n        }\n        return response;\n      }\n    } catch (error) {\n      var _error$response0;\n      if (error.status !== 404 && ((_error$response0 = error.response) === null || _error$response0 === void 0 ? void 0 : _error$response0.status) !== 404) {\n        console.log(`âš ï¸ Ø®Ø·Ø£ ÙÙŠ ${strategy.name}:`, error.message);\n      }\n    }\n  }\n\n  // Ø¥Ø°Ø§ ÙØ´Ù„Øª Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§ØªØŒ Ù†Ø¹Ø§Ù„Ø¬ Ù…Ø­Ù„ÙŠØ§Ù‹\n  console.warn('âš ï¸ ÙØ´Ù„Øª Ø¬Ù…ÙŠØ¹ Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ±ØŒ Ø³ÙŠØªÙ… Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© Ù…Ø­Ù„ÙŠØ§Ù‹');\n  try {\n    const localRentals = JSON.parse(localStorage.getItem('local_rentals') || '[]');\n    const updatedRentals = localRentals.map(r => r.id === rentalId || r.id === `local-${rentalId}` ? {\n      ...r,\n      status: 'completed',\n      end_time: new Date().toISOString(),\n      final_amount: data.final_amount || r.total_amount || 0,\n      local_completed: true\n    } : r);\n    localStorage.setItem('local_rentals', JSON.stringify(updatedRentals));\n  } catch (e) {\n    console.warn('âš ï¸ ÙØ´Ù„ Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø­Ù„ÙŠ:', e.message);\n  }\n  return {\n    success: true,\n    data: {\n      id: rentalId,\n      final_amount: data.final_amount || 0,\n      actual_minutes: data.actual_minutes || 15,\n      completed_at: new Date().toISOString()\n    },\n    message: 'ØªÙ… Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ± Ù…Ø­Ù„ÙŠØ§Ù‹',\n    local: true\n  };\n};\n\n/**\r\n * Ø¥Ù„ØºØ§Ø¡ ØªØ£Ø¬ÙŠØ± Ù…Ø¹ Ø¯Ø¹Ù… ØªØ¹Ø¯Ø¯ Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª\r\n */\napi.cancelRentalUnbreakable = async (rentalId, reason = '') => {\n  console.log(`ğŸ”„ Ù…Ø­Ø§ÙˆÙ„Ø© Ø¥Ù„ØºØ§Ø¡ ØªØ£Ø¬ÙŠØ± ${rentalId}`);\n  const strategies = [{\n    name: `POST /rentals/${rentalId}/cancel`,\n    executor: async () => {\n      return await api.post(`/rentals/${rentalId}/cancel`, {\n        reason\n      });\n    }\n  }, {\n    name: `DELETE /rentals/${rentalId}`,\n    executor: async () => {\n      return await api.delete(`/rentals/${rentalId}`);\n    }\n  }, {\n    name: `PUT /rentals/${rentalId}/cancel`,\n    executor: async () => {\n      return await api.put(`/rentals/${rentalId}/cancel`, {\n        reason\n      });\n    }\n  }, {\n    name: `POST /rentals/cancel/${rentalId}`,\n    executor: async () => {\n      return await api.post(`/rentals/cancel/${rentalId}`, {\n        reason\n      });\n    }\n  }];\n  for (const strategy of strategies) {\n    try {\n      const response = await strategy.executor();\n      if (response && response.success) {\n        console.log(`âœ… Ù†Ø¬Ø­Øª ${strategy.name}`);\n\n        // ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ©\n        try {\n          const localRentals = JSON.parse(localStorage.getItem('local_rentals') || '[]');\n          const updatedRentals = localRentals.map(r => r.id === rentalId || r.id === `local-${rentalId}` ? {\n            ...r,\n            status: 'cancelled',\n            synced: true\n          } : r);\n          localStorage.setItem('local_rentals', JSON.stringify(updatedRentals));\n        } catch (e) {\n          console.warn('âš ï¸ ÙØ´Ù„ ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ©:', e.message);\n        }\n        return response;\n      }\n    } catch (error) {\n      var _error$response1;\n      if (error.status !== 404 && ((_error$response1 = error.response) === null || _error$response1 === void 0 ? void 0 : _error$response1.status) !== 404) {\n        console.log(`âš ï¸ Ø®Ø·Ø£ ÙÙŠ ${strategy.name}:`, error.message);\n      }\n    }\n  }\n\n  // Ù…Ø¹Ø§Ù„Ø¬Ø© Ù…Ø­Ù„ÙŠØ©\n  try {\n    const localRentals = JSON.parse(localStorage.getItem('local_rentals') || '[]');\n    const updatedRentals = localRentals.map(r => r.id === rentalId || r.id === `local-${rentalId}` ? {\n      ...r,\n      status: 'cancelled',\n      cancelled_at: new Date().toISOString()\n    } : r);\n    localStorage.setItem('local_rentals', JSON.stringify(updatedRentals));\n  } catch (e) {\n    console.warn('âš ï¸ ÙØ´Ù„ Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø­Ù„ÙŠ:', e.message);\n  }\n  return {\n    success: true,\n    data: {\n      id: rentalId,\n      cancelled: true\n    },\n    message: 'ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ± Ù…Ø­Ù„ÙŠØ§Ù‹',\n    local: true\n  };\n};\n\n// ==================== ÙˆØ§Ø¬Ù‡Ø© Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ù…ÙˆØ­Ø¯Ø© ====================\n\n// ØªØ£Ø¬ÙŠØ±Ø§Øª\napi.createRental = api.createRentalUnbreakable;\napi.getActiveRentals = api.getActiveRentalsUnbreakable;\napi.completeOpenRental = api.completeOpenRentalUnbreakable;\napi.cancelRental = api.cancelRentalUnbreakable;\n\n// ==================== Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø¯ÙˆØ§Ù„ (Ù…Ø­Ø°ÙˆÙØ© Ù„Ù„Ø§Ø®ØªØµØ§Ø± ÙˆÙ„ÙƒÙ† ØªØ¨Ù‚Ù‰ ÙƒÙ…Ø§ Ù‡ÙŠ) ====================\n// ... (Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø¯ÙˆØ§Ù„ Ù…Ù† Ù…Ù„ÙÙƒ Ø§Ù„Ø£ØµÙ„ÙŠ ØªØ¨Ù‚Ù‰ ÙƒÙ…Ø§ Ù‡ÙŠ)\n\n// AUTH ENDPOINTS\napi.login = async (email, password) => {\n  try {\n    console.log('ğŸ” Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„:', email);\n    const response = await api.post('/auth/login', {\n      email,\n      password\n    });\n    if (response.success && response.token) {\n      api.setToken(response.token);\n      if (response.user) {\n        localStorage.setItem('user', JSON.stringify(response.user));\n        localStorage.setItem('lastLogin', new Date().toISOString());\n      }\n      return {\n        success: true,\n        data: response\n      };\n    }\n    return {\n      success: false,\n      message: response.message || 'ÙØ´Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„'\n    };\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„:', error);\n    if (error.code === 'ECONNABORTED') {\n      return {\n        success: false,\n        message: 'Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù…Ù‡Ù„Ø©. ØªØ£ÙƒØ¯ Ù…Ù† ØªØ´ØºÙŠÙ„ Ø§Ù„Ø®Ø§Ø¯Ù…'\n      };\n    }\n    if (error.status === 401) {\n      return {\n        success: false,\n        message: 'Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©'\n      };\n    }\n    return {\n      success: false,\n      message: 'ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…'\n    };\n  }\n};\napi.logout = async (redirect = true) => {\n  try {\n    await api.post('/auth/logout');\n  } catch (error) {\n    console.log('âš ï¸ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù… Ù„Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬');\n  } finally {\n    api.setToken(null);\n    localStorage.removeItem('user');\n    localStorage.removeItem('lastLogin');\n    if (redirect) {\n      window.location.href = '/login';\n    }\n  }\n};\napi.getProfile = async () => {\n  try {\n    return await api.get('/auth/profile');\n  } catch (error) {\n    return {\n      success: false,\n      message: 'ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ'\n    };\n  }\n};\n\n// BRANCHES ENDPOINTS\napi.getBranches = async (params = {}) => {\n  try {\n    const response = await api.get('/branches', {\n      params\n    });\n    return {\n      success: true,\n      data: response.data || [],\n      count: response.count || 0\n    };\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„ÙØ±ÙˆØ¹:', error);\n    return {\n      success: false,\n      data: []\n    };\n  }\n};\napi.getBranch = async branchId => {\n  try {\n    const response = await api.get(`/branches/${branchId}`);\n    if (response.success) {\n      return {\n        success: true,\n        data: response.data\n      };\n    }\n    return {\n      success: true,\n      data: {\n        id: branchId,\n        name: `ÙØ±Ø¹ ${branchId}`,\n        location: 'Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©',\n        city: 'Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©',\n        contact_phone: '01000000000',\n        opening_time: '09:00:00',\n        closing_time: '22:00:00',\n        is_active: true\n      },\n      fromCache: true\n    };\n  } catch (error) {\n    console.error(`âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ ÙØ±Ø¹ ${branchId}:`, error.message);\n    return {\n      success: true,\n      data: {\n        id: branchId,\n        name: `ÙØ±Ø¹ ${branchId}`,\n        location: 'Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©',\n        city: 'Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©',\n        contact_phone: '01000000000',\n        opening_time: '09:00:00',\n        closing_time: '22:00:00',\n        is_active: true\n      },\n      fromCache: true\n    };\n  }\n};\napi.createBranch = async branchData => {\n  try {\n    return await api.post('/branches', branchData);\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ±Ø¹:', error);\n    return {\n      success: false,\n      message: error.message || 'ØªØ¹Ø°Ø± Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ±Ø¹'\n    };\n  }\n};\napi.updateBranch = async (id, branchData) => {\n  try {\n    return await api.put(`/branches/${id}`, branchData);\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙØ±Ø¹:', error);\n    return {\n      success: false,\n      message: error.message || 'ØªØ¹Ø°Ø± ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙØ±Ø¹'\n    };\n  }\n};\napi.deleteBranch = async (id, permanent = false) => {\n  try {\n    return await api.delete(`/branches/${id}?permanent=${permanent}`);\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„ÙØ±Ø¹:', error);\n    return {\n      success: false,\n      message: error.message || 'ØªØ¹Ø°Ø± Ø­Ø°Ù Ø§Ù„ÙØ±Ø¹'\n    };\n  }\n};\napi.getBranchGames = async branchId => {\n  try {\n    const response = await api.get(`/branches/${branchId}/games`);\n    return {\n      success: true,\n      data: response.data || [],\n      stats: response.stats || {}\n    };\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„ÙØ±Ø¹:', error);\n    return {\n      success: false,\n      data: []\n    };\n  }\n};\n\n// GAMES ENDPOINTS\napi.getGames = async (params = {}) => {\n  try {\n    const requestParams = {\n      ...params\n    };\n    delete requestParams.status;\n    const response = await api.get('/games', {\n      params: requestParams,\n      timeout: 15000\n    });\n    if (response.success) {\n      return {\n        success: true,\n        data: response.data || [],\n        stats: response.stats || {},\n        message: response.message || 'ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø¨Ù†Ø¬Ø§Ø­'\n      };\n    }\n    return {\n      success: false,\n      data: []\n    };\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ getGames:', error);\n    return {\n      success: false,\n      data: []\n    };\n  }\n};\napi.getAvailableGames = async (params = {}) => {\n  try {\n    const response = await api.get('/games/available', {\n      params\n    });\n    return {\n      success: true,\n      data: response.data || [],\n      count: response.count || 0\n    };\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ù…ØªØ§Ø­Ø©:', error);\n    return {\n      success: false,\n      data: []\n    };\n  }\n};\napi.getGameById = async id => {\n  try {\n    return await api.get(`/games/${id}`);\n  } catch (error) {\n    console.error(`âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ù„Ø¹Ø¨Ø© ${id}:`, error);\n    return {\n      success: false,\n      message: 'ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù„Ø¹Ø¨Ø©'\n    };\n  }\n};\napi.createGame = async gameData => {\n  try {\n    return await api.post('/games', gameData);\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©:', error);\n    return {\n      success: false,\n      message: error.message || 'ØªØ¹Ø°Ø± Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©'\n    };\n  }\n};\napi.updateGame = async (id, gameData) => {\n  try {\n    return await api.put(`/games/${id}`, gameData);\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù„Ø¹Ø¨Ø©:', error);\n    return {\n      success: false,\n      message: error.message || 'ØªØ¹Ø°Ø± ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù„Ø¹Ø¨Ø©'\n    };\n  }\n};\napi.deleteGame = async (id, permanent = false) => {\n  try {\n    return await api.delete(`/games/${id}?permanent=${permanent}`);\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù„Ø¹Ø¨Ø©:', error);\n    return {\n      success: false,\n      message: error.message || 'ØªØ¹Ø°Ø± Ø­Ø°Ù Ø§Ù„Ù„Ø¹Ø¨Ø©'\n    };\n  }\n};\n\n// SHIFTS ENDPOINTS\napi.getCurrentShift = async () => {\n  try {\n    const response = await api.get('/shifts/current');\n    if (response.success && response.data) {\n      return {\n        success: true,\n        data: response.data,\n        exists: true,\n        message: 'ØªÙ… Ø¬Ù„Ø¨ Ø§Ù„Ø´ÙŠÙØª Ø§Ù„Ù†Ø´Ø·'\n      };\n    }\n    return {\n      success: true,\n      data: null,\n      exists: false,\n      message: 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø´ÙŠÙØª Ù†Ø´Ø·'\n    };\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø´ÙŠÙØª Ø§Ù„Ø­Ø§Ù„ÙŠ:', error.message);\n    return {\n      success: true,\n      data: null,\n      exists: false\n    };\n  }\n};\napi.startShift = async (openingCash = 0) => {\n  try {\n    console.log('ğŸ”„ Ø¨Ø¯Ø¡ Ø´ÙŠÙØª Ø¬Ø¯ÙŠØ¯...');\n\n    // Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ù…ØªØ¹Ø¯Ø¯Ø©\n    const endpoints = [{\n      method: 'post',\n      url: '/shifts/start',\n      data: {\n        opening_cash: openingCash\n      }\n    }, {\n      method: 'post',\n      url: '/shifts/start-simple',\n      data: {}\n    }, {\n      method: 'post',\n      url: '/shifts/start-clean',\n      data: {}\n    }];\n    for (const endpoint of endpoints) {\n      try {\n        const response = await api[endpoint.method](endpoint.url, endpoint.data);\n        if (response && response.success) {\n          console.log(`âœ… Ù†Ø¬Ø­ Ø¨Ø¯Ø¡ Ø§Ù„Ø´ÙŠÙØª Ø¹Ø¨Ø± ${endpoint.url}`);\n          if (response.data) {\n            localStorage.setItem('current_shift', JSON.stringify(response.data));\n          }\n          return response;\n        }\n      } catch (error) {\n        console.warn(`âš ï¸ ÙØ´Ù„ ${endpoint.url}:`, error.message);\n      }\n    }\n    return {\n      success: false,\n      message: 'ÙØ´Ù„ ÙÙŠ Ø¨Ø¯Ø¡ Ø§Ù„Ø´ÙŠÙØª. ØªØ£ÙƒØ¯ Ù…Ù† ØªØ´ØºÙŠÙ„ Ø§Ù„Ø®Ø§Ø¯Ù…'\n    };\n  } catch (error) {\n    console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ startShift:', error);\n    return {\n      success: false,\n      message: 'Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹'\n    };\n  }\n};\napi.endShift = async (shiftId, closingData = {}) => {\n  try {\n    console.log(`ğŸ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø´ÙŠÙØª ${shiftId}...`);\n    const response = await api.put(`/shifts/${shiftId}/end`, {\n      closing_cash: closingData.closing_cash,\n      notes: closingData.notes || 'ØªÙ… Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø´ÙŠÙØª'\n    });\n    if (response.success) {\n      localStorage.removeItem('current_shift');\n    }\n    return response;\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø´ÙŠÙØª:', error);\n    try {\n      const altResponse = await api.post(`/shifts/${shiftId}/end-quick`, {\n        notes: closingData.notes || 'Ø¥Ù†Ù‡Ø§Ø¡ Ø³Ø±ÙŠØ¹'\n      });\n      if (altResponse.success) {\n        localStorage.removeItem('current_shift');\n      }\n      return altResponse;\n    } catch (altError) {\n      return {\n        success: false,\n        message: error.message || 'ØªØ¹Ø°Ø± Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø´ÙŠÙØª'\n      };\n    }\n  }\n};\napi.getShiftDetails = async shiftId => {\n  try {\n    const response = await api.get(`/shifts/${shiftId}/details`);\n    return {\n      success: true,\n      data: response.data || {},\n      stats: response.stats || {}\n    };\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø´ÙŠÙØª:', error);\n    return {\n      success: false,\n      data: null\n    };\n  }\n};\napi.getAllActiveShifts = async () => {\n  try {\n    const response = await api.get('/shifts/active-all');\n    return {\n      success: true,\n      data: response.data || [],\n      count: response.count || 0\n    };\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø´ÙŠÙØªØ§Øª Ø§Ù„Ù†Ø´Ø·Ø©:', error);\n    return {\n      success: false,\n      data: []\n    };\n  }\n};\napi.getShiftStats = async shiftId => {\n  try {\n    const response = await api.get(`/shifts/${shiftId}/stats`);\n    return {\n      success: true,\n      data: response.data || {}\n    };\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø´ÙŠÙØª:', error);\n    return {\n      success: false,\n      data: null\n    };\n  }\n};\napi.getShifts = async (params = {}) => {\n  try {\n    const response = await api.get('/shifts', {\n      params\n    });\n    return {\n      success: true,\n      data: response.data || [],\n      count: response.count || 0\n    };\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø´ÙŠÙØªØ§Øª:', error);\n    return {\n      success: false,\n      data: []\n    };\n  }\n};\n\n// DASHBOARD & STATS\napi.getSimpleStats = async () => {\n  try {\n    const response = await api.get('/dashboard/stats/simple');\n    return response;\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…Ø¨Ø³Ø·Ø©:', error);\n    return {\n      success: false,\n      data: {\n        availableGames: 0,\n        totalGames: 0,\n        todayRevenue: 0,\n        todayRentals: 0,\n        activeRentals: 0\n      }\n    };\n  }\n};\napi.getDashboardStats = async () => {\n  try {\n    const response = await api.get('/dashboard/stats');\n    return response;\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…:', error);\n    return {\n      success: false,\n      data: {}\n    };\n  }\n};\napi.getDashboardAllStats = async () => {\n  try {\n    const response = await api.get('/dashboard/all-stats');\n    return response;\n  } catch (error) {\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª:', error);\n    return {\n      success: false,\n      data: {}\n    };\n  }\n};\n\n// HEALTH & TEST\napi.healthCheck = async () => {\n  try {\n    return await api.get('/health');\n  } catch (error) {\n    return {\n      success: false,\n      message: 'ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…'\n    };\n  }\n};\napi.testConnection = async () => {\n  try {\n    const response = await api.get('/health');\n    return {\n      success: true,\n      message: 'âœ… Ø§ØªØµØ§Ù„ API ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­',\n      data: response\n    };\n  } catch (error) {\n    return {\n      success: false,\n      message: 'âŒ ÙØ´Ù„ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„: ' + (error.message || 'ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…')\n    };\n  }\n};\n\n// ==================== Ø§Ù„ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø£ÙˆÙ„ÙŠØ© ====================\nconst savedToken = localStorage.getItem('token');\nif (savedToken) {\n  api.setToken(savedToken);\n}\nexport default api;","map":{"version":3,"names":["axios","detectEnvironment","env","process","REACT_APP_ENVIRONMENT","apiUrl","REACT_APP_API_URL","console","log","api","create","baseURL","timeout","headers","generateRentalNumber","prefix","Date","now","toString","slice","Math","floor","random","generateShiftNumber","delay","ms","Promise","resolve","setTimeout","interceptors","request","use","config","token","localStorage","getItem","authToken","startsWith","substring","Authorization","NODE_ENV","_config$method","method","toUpperCase","url","fullUrl","tokenExists","data","JSON","stringify","undefined","error","reject","response","_response$data","status","success","message","_error$config","_error$response","_error$response2","_error$response3","_error$response4","_error$response5","_error$response6","_error$response6$data","_error$response7","includes","ngrokError","removeItem","window","location","pathname","href","setToken","cleanToken","defaults","common","setItem","checkAuthStatus","user","isAuthenticated","parse","getCurrentUser","userStr","getUsers","params","get","count","getUserById","id","createUser","userData","post","updateUser","put","deleteUser","permanent","delete","changePassword","passwordData","createRental","rentalData","customer_name","Error","items","length","payload","customer_phone","map","item","game_id","child_name","duration_minutes","quantity","rental_type","notes","_response$data2","_error$response8","_error$response8$data","localRentals","localRental","rental_number","created_at","toISOString","local","synced","push","e","getActiveRentalsUnbreakable","strategies","name","executor","active","strategy","rentals","activeLocal","filter","r","local_count","_error$response9","local_only","completeOpenRentalUnbreakable","rentalId","payment_method","actual_minutes","final_amount","type","updatedRentals","warn","_error$response0","end_time","total_amount","local_completed","completed_at","cancelRentalUnbreakable","reason","_error$response1","cancelled_at","cancelled","createRentalUnbreakable","getActiveRentals","completeOpenRental","cancelRental","login","email","password","code","logout","redirect","getProfile","getBranches","getBranch","branchId","city","contact_phone","opening_time","closing_time","is_active","fromCache","createBranch","branchData","updateBranch","deleteBranch","getBranchGames","stats","getGames","requestParams","getAvailableGames","getGameById","createGame","gameData","updateGame","deleteGame","getCurrentShift","exists","startShift","openingCash","endpoints","opening_cash","endpoint","endShift","shiftId","closingData","closing_cash","altResponse","altError","getShiftDetails","getAllActiveShifts","getShiftStats","getShifts","getSimpleStats","availableGames","totalGames","todayRevenue","todayRentals","activeRentals","getDashboardStats","getDashboardAllStats","healthCheck","testConnection","savedToken"],"sources":["C:/Users/HP/OneDrive/project/l3bty-rental-system/frontend/src/services/api.js"],"sourcesContent":["import axios from 'axios';\r\n\r\n// ==================== Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø© ====================\r\nconst detectEnvironment = () => {\r\n  const env = process.env.REACT_APP_ENVIRONMENT || 'development';\r\n\r\n  let apiUrl;\r\n\r\n  if (env === 'production') {\r\n    apiUrl = process.env.REACT_APP_API_URL;\r\n  } else {\r\n    apiUrl = 'http://localhost:5000/api';\r\n  }\r\n\r\n  console.log(`ğŸŒ Ø§Ù„Ø¨ÙŠØ¦Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©: ${env}`);\r\n  console.log(`ğŸŒ Ø¹Ù†ÙˆØ§Ù† API: ${apiUrl}`);\r\n\r\n  return { env, apiUrl };\r\n};\r\n\r\nconst { env, apiUrl } = detectEnvironment(); // âœ… ØªØµØ­ÙŠØ­: ØªØ¹Ø±ÙŠÙ env Ù‡Ù†Ø§\r\n\r\nconst api = axios.create({\r\n  baseURL: apiUrl,\r\n  timeout: 30000,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n    'Accept': 'application/json',\r\n    'Accept-Language': 'ar'\r\n  }\r\n});\r\n\r\n// ==================== Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø© ====================\r\nconst generateRentalNumber = (prefix = 'RNT') => \r\n  `${prefix}-${Date.now().toString().slice(-8)}-${Math.floor(Math.random() * 1000)}`;\r\n\r\nconst generateShiftNumber = () => `SHIFT-${Date.now().toString().slice(-8)}`;\r\n\r\n// ØªØ£Ø®ÙŠØ± ØªÙ†ÙÙŠØ°\r\nconst delay = (ms) => new Promise(resolve => setTimeout(resolve, ms));\r\n\r\n// ==================== Interceptors ====================\r\napi.interceptors.request.use(\r\n  (config) => {\r\n    const token = localStorage.getItem('token');\r\n    \r\n    let authToken = token;\r\n    if (token && token.startsWith('Bearer ')) {\r\n      authToken = token.substring(7);\r\n    }\r\n    \r\n    if (authToken) {\r\n      config.headers.Authorization = `Bearer ${authToken}`;\r\n    }\r\n    \r\n    if (process.env.NODE_ENV === 'development') {\r\n      console.log('ğŸŒ API Request:', {\r\n        method: config.method?.toUpperCase(),\r\n        url: config.url,\r\n        fullUrl: `${config.baseURL}${config.url}`,\r\n        tokenExists: !!authToken,\r\n        data: config.data ? JSON.stringify(config.data).substring(0, 200) : undefined\r\n      });\r\n    }\r\n    \r\n    return config;\r\n  },\r\n  (error) => {\r\n    console.error('âŒ Request Interceptor Error:', error);\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\napi.interceptors.response.use(\r\n  (response) => {\r\n    if (process.env.NODE_ENV === 'development') {\r\n      console.log('âœ… API Response:', {\r\n        url: response.config.url,\r\n        status: response.status,\r\n        success: response.data?.success\r\n      });\r\n    }\r\n    \r\n    if (response.data && typeof response.data === 'object') {\r\n      return response.data;\r\n    }\r\n    \r\n    return {\r\n      success: true,\r\n      status: response.status,\r\n      data: response.data,\r\n      message: 'ØªÙ… ØªÙ†ÙÙŠØ° Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­'\r\n    };\r\n  },\r\n  (error) => {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ API:', {\r\n      url: error.config?.url,\r\n      status: error.response?.status,\r\n      message: error.message,\r\n      data: error.response?.data\r\n    });\r\n    \r\n    if (env === 'ngrok' && error.message.includes('Network Error')) {\r\n      return {\r\n        success: false,\r\n        status: 0,\r\n        message: 'Ø®Ø·Ø£ ÙÙŠ Ø§ØªØµØ§Ù„ ngrok. ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ø§Ù„Ø®Ø§Ø¯Ù… ÙŠØ¹Ù…Ù„',\r\n        ngrokError: true\r\n      };\r\n    }\r\n    \r\n    if (error.response?.status === 401) {\r\n      console.log('ğŸ”’ ØªÙˆÙƒÙ† Ù…Ù†ØªÙ‡ÙŠ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©');\r\n      localStorage.removeItem('token');\r\n      localStorage.removeItem('user');\r\n      \r\n      if (typeof window !== 'undefined' && !window.location.pathname.includes('/login')) {\r\n        window.location.href = '/login';\r\n      }\r\n    }\r\n    \r\n    if (error.response?.status === 500) {\r\n      console.log('âš ï¸ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø®Ø§Ø¯Ù… (500) - ÙŠÙ…ÙƒÙ† Ù…Ø¹Ø§Ù„Ø¬ØªÙ‡ Ù…Ø­Ù„ÙŠØ§Ù‹');\r\n    }\r\n    \r\n    return Promise.reject({\r\n      success: false,\r\n      status: error.response?.status || 0,\r\n      message: error.response?.data?.message || error.message || 'Ø­Ø¯Ø« Ø®Ø·Ø£',\r\n      data: error.response?.data\r\n    });\r\n  }\r\n);\r\n\r\n// ==================== Ø¯ÙˆØ§Ù„ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªÙˆÙƒÙ† ====================\r\napi.setToken = (token) => {\r\n  if (token) {\r\n    let cleanToken = token;\r\n    if (token.startsWith('Bearer ')) {\r\n      cleanToken = token.substring(7);\r\n    }\r\n    \r\n    api.defaults.headers.common['Authorization'] = `Bearer ${cleanToken}`;\r\n    localStorage.setItem('token', cleanToken);\r\n  } else {\r\n    delete api.defaults.headers.common['Authorization'];\r\n    localStorage.removeItem('token');\r\n  }\r\n};\r\n\r\napi.checkAuthStatus = () => {\r\n  const token = localStorage.getItem('token');\r\n  const user = localStorage.getItem('user');\r\n  \r\n  return {\r\n    isAuthenticated: !!token,\r\n    token: token,\r\n    user: user ? JSON.parse(user) : null\r\n  };\r\n};\r\n\r\napi.getCurrentUser = () => {\r\n  try {\r\n    const userStr = localStorage.getItem('user');\r\n    return userStr ? JSON.parse(userStr) : null;\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ:', error);\r\n    return null;\r\n  }\r\n};\r\n\r\n// ==================== USERS ENDPOINTS ====================\r\n\r\n// Ø¬Ù„Ø¨ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†\r\napi.getUsers = async (params = {}) => {\r\n  try {\r\n    const response = await api.get('/users', { params });\r\n    return {\r\n      success: true,\r\n      data: response.data || [],\r\n      count: response.count || 0\r\n    };\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†:', error);\r\n    return { success: false, data: [], message: error.message };\r\n  }\r\n};\r\n\r\n// Ø¬Ù„Ø¨ Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø­Ø¯Ø¯\r\napi.getUserById = async (id) => {\r\n  try {\r\n    const response = await api.get(`/users/${id}`);\r\n    return {\r\n      success: true,\r\n      data: response.data\r\n    };\r\n  } catch (error) {\r\n    console.error(`âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ù…Ø³ØªØ®Ø¯Ù… ${id}:`, error);\r\n    return { success: false, message: error.message };\r\n  }\r\n};\r\n\r\n// Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯ (Ø§Ù„ÙØ§Ù†ÙƒØ´Ù† Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©)\r\napi.createUser = async (userData) => {\r\n  try {\r\n    console.log('ğŸ“ Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯:', userData);\r\n    \r\n    const response = await api.post('/users', userData);\r\n    \r\n    console.log('âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:', response);\r\n    \r\n    return {\r\n      success: true,\r\n      data: response.data,\r\n      message: response.message || 'ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ø¬Ø§Ø­'\r\n    };\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:', error);\r\n    return { \r\n      success: false, \r\n      message: error.message || 'ÙØ´Ù„ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…',\r\n      error: error \r\n    };\r\n  }\r\n};\r\n\r\n// ØªØ­Ø¯ÙŠØ« Ù…Ø³ØªØ®Ø¯Ù…\r\napi.updateUser = async (id, userData) => {\r\n  try {\r\n    const response = await api.put(`/users/${id}`, userData);\r\n    return {\r\n      success: true,\r\n      data: response.data,\r\n      message: response.message || 'ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ø¬Ø§Ø­'\r\n    };\r\n  } catch (error) {\r\n    console.error(`âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ù…Ø³ØªØ®Ø¯Ù… ${id}:`, error);\r\n    return { success: false, message: error.message };\r\n  }\r\n};\r\n\r\n// Ø­Ø°Ù Ù…Ø³ØªØ®Ø¯Ù…\r\napi.deleteUser = async (id, permanent = false) => {\r\n  try {\r\n    const response = await api.delete(`/users/${id}?permanent=${permanent}`);\r\n    return {\r\n      success: true,\r\n      message: response.message || 'ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù†Ø¬Ø§Ø­'\r\n    };\r\n  } catch (error) {\r\n    console.error(`âŒ Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ù…Ø³ØªØ®Ø¯Ù… ${id}:`, error);\r\n    return { success: false, message: error.message };\r\n  }\r\n};\r\n\r\n// ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±\r\napi.changePassword = async (id, passwordData) => {\r\n  try {\r\n    const response = await api.put(`/users/${id}/change-password`, passwordData);\r\n    return {\r\n      success: true,\r\n      message: response.message || 'ØªÙ… ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø¨Ù†Ø¬Ø§Ø­'\r\n    };\r\n  } catch (error) {\r\n    console.error(`âŒ Ø®Ø·Ø£ ÙÙŠ ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±:`, error);\r\n    return { success: false, message: error.message };\r\n  }\r\n};\r\n\r\n// ==================== Ø¥Ù†Ø´Ø§Ø¡ ØªØ£Ø¬ÙŠØ± Ø¬Ø¯ÙŠØ¯ (Ù…Ø¨Ø³Ø· ÙˆØ¢Ù…Ù†) ====================\r\napi.createRental = async (rentalData) => {\r\n  try {\r\n    console.log('ğŸ“¦ Ø¥Ù†Ø´Ø§Ø¡ ØªØ£Ø¬ÙŠØ± Ø¬Ø¯ÙŠØ¯:', rentalData);\r\n    \r\n    // Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©\r\n    if (!rentalData.customer_name) {\r\n      throw new Error('Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù…Ø·Ù„ÙˆØ¨');\r\n    }\r\n    \r\n    if (!rentalData.items || !rentalData.items.length) {\r\n      throw new Error('ÙŠØ¬Ø¨ Ø¥Ø¶Ø§ÙØ© Ù„Ø¹Ø¨Ø© ÙˆØ§Ø­Ø¯Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„');\r\n    }\r\n    \r\n    // ØªØ¬Ù‡ÙŠØ² Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ø¥Ø±Ø³Ø§Ù„\r\n    const payload = {\r\n      customer_name: rentalData.customer_name,\r\n      customer_phone: rentalData.customer_phone || '',\r\n      items: rentalData.items.map(item => ({\r\n        game_id: item.game_id,\r\n        child_name: item.child_name || '',\r\n        duration_minutes: item.duration_minutes || 15,\r\n        quantity: item.quantity || 1,\r\n        rental_type: item.rental_type || 'fixed'\r\n      })),\r\n      notes: rentalData.notes || ''\r\n    };\r\n    \r\n    console.log('ğŸ“¤ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', payload);\r\n    \r\n    // Ø§Ø³ØªØ®Ø¯Ø§Ù… axios Ù…Ø¨Ø§Ø´Ø±Ø© Ø¨Ø¯Ù„ api.post Ù„ØªØ¬Ù†Ø¨ Ø§Ù„Ù€ interceptor\r\n    const token = localStorage.getItem('token');\r\n    const response = await axios.post(\r\n      'http://localhost:5000/api/rentals',\r\n      payload,\r\n      {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        }\r\n      }\r\n    );\r\n    \r\n    console.log('âœ… Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø§Ù„Ø®Ø§Ø¯Ù…:', response.data);\r\n    \r\n    if (response.data && response.data.success) {\r\n      return response.data;\r\n    } else {\r\n      throw new Error(response.data?.message || 'ÙØ´Ù„ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ±');\r\n    }\r\n    \r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ±:', error);\r\n    \r\n    // ØªØ®Ø²ÙŠÙ† Ù…Ø­Ù„ÙŠ ÙƒÙ†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©\r\n    try {\r\n      const localRentals = JSON.parse(localStorage.getItem('local_rentals') || '[]');\r\n      const localRental = {\r\n        id: `local-${Date.now()}`,\r\n        rental_number: `RNT-${Date.now().toString().slice(-8)}`,\r\n        customer_name: rentalData.customer_name,\r\n        items: rentalData.items,\r\n        created_at: new Date().toISOString(),\r\n        local: true,\r\n        synced: false\r\n      };\r\n      localRentals.push(localRental);\r\n      localStorage.setItem('local_rentals', JSON.stringify(localRentals.slice(-20)));\r\n      \r\n      return {\r\n        success: true,\r\n        data: localRental,\r\n        message: 'ØªÙ… Ø­ÙØ¸ Ø§Ù„ØªØ£Ø¬ÙŠØ± Ù…Ø­Ù„ÙŠØ§Ù‹ (Ø³ÙŠØªÙ… Ù…Ø²Ø§Ù…Ù†ØªÙ‡ Ù„Ø§Ø­Ù‚Ø§Ù‹)',\r\n        local: true\r\n      };\r\n    } catch (e) {\r\n      console.error('âŒ ÙØ´Ù„ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ:', e);\r\n    }\r\n    \r\n    return {\r\n      success: false,\r\n      message: error.response?.data?.message || error.message || 'ÙØ´Ù„ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ±'\r\n    };\r\n  }\r\n};\r\n\r\n/**\r\n * Ø¬Ù„Ø¨ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø© Ù…Ø¹ Ø¯Ø¹Ù… ØªØ¹Ø¯Ø¯ Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª\r\n */\r\napi.getActiveRentalsUnbreakable = async (params = {}) => {\r\n  console.log('ğŸ”„ Ù…Ø­Ø§ÙˆÙ„Ø© Ø¬Ù„Ø¨ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø©:', params);\r\n  \r\n  const strategies = [\r\n    {\r\n      name: 'GET /rentals/active',\r\n      executor: async () => {\r\n        return await api.get('/rentals/active', { params });\r\n      }\r\n    },\r\n    {\r\n      name: 'GET /rentals/active-all',\r\n      executor: async () => {\r\n        return await api.get('/rentals/active-all', { params });\r\n      }\r\n    },\r\n    {\r\n      name: 'GET /rentals?status=active',\r\n      executor: async () => {\r\n        return await api.get('/rentals', { params: { ...params, status: 'active' } });\r\n      }\r\n    },\r\n    {\r\n      name: 'GET /rentals/list?active=true',\r\n      executor: async () => {\r\n        return await api.get('/rentals/list', { params: { ...params, active: true } });\r\n      }\r\n    }\r\n  ];\r\n  \r\n  for (const strategy of strategies) {\r\n    try {\r\n      const response = await strategy.executor();\r\n      \r\n      if (response.success) {\r\n        const rentals = response.data || [];\r\n        console.log(`âœ… Ù†Ø¬Ø­Øª ${strategy.name}:`, rentals.length, 'ØªØ£Ø¬ÙŠØ±');\r\n        \r\n        // Ø¯Ù…Ø¬ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ©\r\n        const localRentals = JSON.parse(localStorage.getItem('local_rentals') || '[]');\r\n        const activeLocal = localRentals.filter(r => r.status === 'active');\r\n        \r\n        if (activeLocal.length > 0) {\r\n          console.log('ğŸ“¦ Ø¯Ù…Ø¬ ØªØ£Ø¬ÙŠØ±Ø§Øª Ù…Ø­Ù„ÙŠØ©:', activeLocal.length);\r\n          return {\r\n            success: true,\r\n            data: [...rentals, ...activeLocal],\r\n            local_count: activeLocal.length,\r\n            method: strategy.name\r\n          };\r\n        }\r\n        \r\n        return {\r\n          success: true,\r\n          data: rentals,\r\n          method: strategy.name\r\n        };\r\n      }\r\n    } catch (error) {\r\n      if (error.status !== 404 && error.response?.status !== 404) {\r\n        console.log(`âš ï¸ Ø®Ø·Ø£ ÙÙŠ ${strategy.name}:`, error.message);\r\n      }\r\n    }\r\n  }\r\n  \r\n  // Ø¥Ø°Ø§ ÙØ´Ù„Øª Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§ØªØŒ Ù†Ø±Ø¬Ø¹ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ©\r\n  const localRentals = JSON.parse(localStorage.getItem('local_rentals') || '[]');\r\n  const activeLocal = localRentals.filter(r => r.status === 'active');\r\n  \r\n  return {\r\n    success: true,\r\n    data: activeLocal,\r\n    local_only: true,\r\n    message: 'ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ© ÙÙ‚Ø·'\r\n  };\r\n};\r\n\r\n/**\r\n * Ø¥Ù†Ù‡Ø§Ø¡ ØªØ£Ø¬ÙŠØ± Ù…ÙØªÙˆØ­ Ù…Ø¹ Ø¯Ø¹Ù… ØªØ¹Ø¯Ø¯ Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª\r\n */\r\napi.completeOpenRentalUnbreakable = async (rentalId, data = {}) => {\r\n  console.log(`ğŸ”„ Ù…Ø­Ø§ÙˆÙ„Ø© Ø¥Ù†Ù‡Ø§Ø¡ ØªØ£Ø¬ÙŠØ± Ù…ÙØªÙˆØ­ ${rentalId}:`, data);\r\n  \r\n  const strategies = [\r\n    {\r\n      name: `POST /rentals/${rentalId}/complete-open`,\r\n      executor: async () => {\r\n        return await api.post(`/rentals/${rentalId}/complete-open`, {\r\n          payment_method: data.payment_method || 'ÙƒØ§Ø´',\r\n          actual_minutes: data.actual_minutes,\r\n          final_amount: data.final_amount\r\n        });\r\n      }\r\n    },\r\n    {\r\n      name: `POST /rentals/complete/${rentalId}`,\r\n      executor: async () => {\r\n        return await api.post(`/rentals/complete/${rentalId}`, {\r\n          type: 'open',\r\n          ...data\r\n        });\r\n      }\r\n    },\r\n    {\r\n      name: `PUT /rentals/${rentalId}/complete`,\r\n      executor: async () => {\r\n        return await api.put(`/rentals/${rentalId}/complete`, {\r\n          rental_type: 'open',\r\n          ...data\r\n        });\r\n      }\r\n    },\r\n    {\r\n      name: `POST /rentals/${rentalId}/finish`,\r\n      executor: async () => {\r\n        return await api.post(`/rentals/${rentalId}/finish`, data);\r\n      }\r\n    }\r\n  ];\r\n  \r\n  for (const strategy of strategies) {\r\n    try {\r\n      const response = await strategy.executor();\r\n      \r\n      if (response && response.success) {\r\n        console.log(`âœ… Ù†Ø¬Ø­Øª ${strategy.name}`);\r\n        \r\n        // ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ©\r\n        try {\r\n          const localRentals = JSON.parse(localStorage.getItem('local_rentals') || '[]');\r\n          const updatedRentals = localRentals.map(r => \r\n            r.id === rentalId || r.id === `local-${rentalId}` \r\n              ? { ...r, status: 'completed', synced: true } \r\n              : r\r\n          );\r\n          localStorage.setItem('local_rentals', JSON.stringify(updatedRentals));\r\n        } catch (e) {\r\n          console.warn('âš ï¸ ÙØ´Ù„ ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ©:', e.message);\r\n        }\r\n        \r\n        return response;\r\n      }\r\n    } catch (error) {\r\n      if (error.status !== 404 && error.response?.status !== 404) {\r\n        console.log(`âš ï¸ Ø®Ø·Ø£ ÙÙŠ ${strategy.name}:`, error.message);\r\n      }\r\n    }\r\n  }\r\n  \r\n  // Ø¥Ø°Ø§ ÙØ´Ù„Øª Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§ØªØŒ Ù†Ø¹Ø§Ù„Ø¬ Ù…Ø­Ù„ÙŠØ§Ù‹\r\n  console.warn('âš ï¸ ÙØ´Ù„Øª Ø¬Ù…ÙŠØ¹ Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ±ØŒ Ø³ÙŠØªÙ… Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© Ù…Ø­Ù„ÙŠØ§Ù‹');\r\n  \r\n  try {\r\n    const localRentals = JSON.parse(localStorage.getItem('local_rentals') || '[]');\r\n    const updatedRentals = localRentals.map(r => \r\n      r.id === rentalId || r.id === `local-${rentalId}` \r\n        ? { \r\n            ...r, \r\n            status: 'completed', \r\n            end_time: new Date().toISOString(),\r\n            final_amount: data.final_amount || r.total_amount || 0,\r\n            local_completed: true \r\n          } \r\n        : r\r\n    );\r\n    localStorage.setItem('local_rentals', JSON.stringify(updatedRentals));\r\n  } catch (e) {\r\n    console.warn('âš ï¸ ÙØ´Ù„ Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø­Ù„ÙŠ:', e.message);\r\n  }\r\n  \r\n  return {\r\n    success: true,\r\n    data: {\r\n      id: rentalId,\r\n      final_amount: data.final_amount || 0,\r\n      actual_minutes: data.actual_minutes || 15,\r\n      completed_at: new Date().toISOString()\r\n    },\r\n    message: 'ØªÙ… Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ± Ù…Ø­Ù„ÙŠØ§Ù‹',\r\n    local: true\r\n  };\r\n};\r\n\r\n/**\r\n * Ø¥Ù„ØºØ§Ø¡ ØªØ£Ø¬ÙŠØ± Ù…Ø¹ Ø¯Ø¹Ù… ØªØ¹Ø¯Ø¯ Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª\r\n */\r\napi.cancelRentalUnbreakable = async (rentalId, reason = '') => {\r\n  console.log(`ğŸ”„ Ù…Ø­Ø§ÙˆÙ„Ø© Ø¥Ù„ØºØ§Ø¡ ØªØ£Ø¬ÙŠØ± ${rentalId}`);\r\n  \r\n  const strategies = [\r\n    {\r\n      name: `POST /rentals/${rentalId}/cancel`,\r\n      executor: async () => {\r\n        return await api.post(`/rentals/${rentalId}/cancel`, { reason });\r\n      }\r\n    },\r\n    {\r\n      name: `DELETE /rentals/${rentalId}`,\r\n      executor: async () => {\r\n        return await api.delete(`/rentals/${rentalId}`);\r\n      }\r\n    },\r\n    {\r\n      name: `PUT /rentals/${rentalId}/cancel`,\r\n      executor: async () => {\r\n        return await api.put(`/rentals/${rentalId}/cancel`, { reason });\r\n      }\r\n    },\r\n    {\r\n      name: `POST /rentals/cancel/${rentalId}`,\r\n      executor: async () => {\r\n        return await api.post(`/rentals/cancel/${rentalId}`, { reason });\r\n      }\r\n    }\r\n  ];\r\n  \r\n  for (const strategy of strategies) {\r\n    try {\r\n      const response = await strategy.executor();\r\n      \r\n      if (response && response.success) {\r\n        console.log(`âœ… Ù†Ø¬Ø­Øª ${strategy.name}`);\r\n        \r\n        // ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ©\r\n        try {\r\n          const localRentals = JSON.parse(localStorage.getItem('local_rentals') || '[]');\r\n          const updatedRentals = localRentals.map(r => \r\n            r.id === rentalId || r.id === `local-${rentalId}` \r\n              ? { ...r, status: 'cancelled', synced: true } \r\n              : r\r\n          );\r\n          localStorage.setItem('local_rentals', JSON.stringify(updatedRentals));\r\n        } catch (e) {\r\n          console.warn('âš ï¸ ÙØ´Ù„ ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ£Ø¬ÙŠØ±Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ©:', e.message);\r\n        }\r\n        \r\n        return response;\r\n      }\r\n    } catch (error) {\r\n      if (error.status !== 404 && error.response?.status !== 404) {\r\n        console.log(`âš ï¸ Ø®Ø·Ø£ ÙÙŠ ${strategy.name}:`, error.message);\r\n      }\r\n    }\r\n  }\r\n  \r\n  // Ù…Ø¹Ø§Ù„Ø¬Ø© Ù…Ø­Ù„ÙŠØ©\r\n  try {\r\n    const localRentals = JSON.parse(localStorage.getItem('local_rentals') || '[]');\r\n    const updatedRentals = localRentals.map(r => \r\n      r.id === rentalId || r.id === `local-${rentalId}` \r\n        ? { ...r, status: 'cancelled', cancelled_at: new Date().toISOString() } \r\n        : r\r\n    );\r\n    localStorage.setItem('local_rentals', JSON.stringify(updatedRentals));\r\n  } catch (e) {\r\n    console.warn('âš ï¸ ÙØ´Ù„ Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø­Ù„ÙŠ:', e.message);\r\n  }\r\n  \r\n  return {\r\n    success: true,\r\n    data: { id: rentalId, cancelled: true },\r\n    message: 'ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØ£Ø¬ÙŠØ± Ù…Ø­Ù„ÙŠØ§Ù‹',\r\n    local: true\r\n  };\r\n};\r\n\r\n// ==================== ÙˆØ§Ø¬Ù‡Ø© Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ø§Ù„Ù…ÙˆØ­Ø¯Ø© ====================\r\n\r\n// ØªØ£Ø¬ÙŠØ±Ø§Øª\r\napi.createRental = api.createRentalUnbreakable;\r\napi.getActiveRentals = api.getActiveRentalsUnbreakable;\r\napi.completeOpenRental = api.completeOpenRentalUnbreakable;\r\napi.cancelRental = api.cancelRentalUnbreakable;\r\n\r\n// ==================== Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø¯ÙˆØ§Ù„ (Ù…Ø­Ø°ÙˆÙØ© Ù„Ù„Ø§Ø®ØªØµØ§Ø± ÙˆÙ„ÙƒÙ† ØªØ¨Ù‚Ù‰ ÙƒÙ…Ø§ Ù‡ÙŠ) ====================\r\n// ... (Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø¯ÙˆØ§Ù„ Ù…Ù† Ù…Ù„ÙÙƒ Ø§Ù„Ø£ØµÙ„ÙŠ ØªØ¨Ù‚Ù‰ ÙƒÙ…Ø§ Ù‡ÙŠ)\r\n\r\n// AUTH ENDPOINTS\r\napi.login = async (email, password) => {\r\n  try {\r\n    console.log('ğŸ” Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„:', email);\r\n    \r\n    const response = await api.post('/auth/login', { email, password });\r\n    \r\n    if (response.success && response.token) {\r\n      api.setToken(response.token);\r\n      \r\n      if (response.user) {\r\n        localStorage.setItem('user', JSON.stringify(response.user));\r\n        localStorage.setItem('lastLogin', new Date().toISOString());\r\n      }\r\n      \r\n      return {\r\n        success: true,\r\n        data: response\r\n      };\r\n    }\r\n    \r\n    return {\r\n      success: false,\r\n      message: response.message || 'ÙØ´Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„'\r\n    };\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„:', error);\r\n    \r\n    if (error.code === 'ECONNABORTED') {\r\n      return { success: false, message: 'Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù…Ù‡Ù„Ø©. ØªØ£ÙƒØ¯ Ù…Ù† ØªØ´ØºÙŠÙ„ Ø§Ù„Ø®Ø§Ø¯Ù…' };\r\n    }\r\n    \r\n    if (error.status === 401) {\r\n      return { success: false, message: 'Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©' };\r\n    }\r\n    \r\n    return { success: false, message: 'ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…' };\r\n  }\r\n};\r\n\r\napi.logout = async (redirect = true) => {\r\n  try {\r\n    await api.post('/auth/logout');\r\n  } catch (error) {\r\n    console.log('âš ï¸ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù… Ù„Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬');\r\n  } finally {\r\n    api.setToken(null);\r\n    localStorage.removeItem('user');\r\n    localStorage.removeItem('lastLogin');\r\n    \r\n    if (redirect) {\r\n      window.location.href = '/login';\r\n    }\r\n  }\r\n};\r\n\r\napi.getProfile = async () => {\r\n  try {\r\n    return await api.get('/auth/profile');\r\n  } catch (error) {\r\n    return { success: false, message: 'ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ' };\r\n  }\r\n};\r\n\r\n// BRANCHES ENDPOINTS\r\napi.getBranches = async (params = {}) => {\r\n  try {\r\n    const response = await api.get('/branches', { params });\r\n    return {\r\n      success: true,\r\n      data: response.data || [],\r\n      count: response.count || 0\r\n    };\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„ÙØ±ÙˆØ¹:', error);\r\n    return { success: false, data: [] };\r\n  }\r\n};\r\n\r\napi.getBranch = async (branchId) => {\r\n  try {\r\n    const response = await api.get(`/branches/${branchId}`);\r\n    \r\n    if (response.success) {\r\n      return { success: true, data: response.data };\r\n    }\r\n    \r\n    return {\r\n      success: true,\r\n      data: {\r\n        id: branchId,\r\n        name: `ÙØ±Ø¹ ${branchId}`,\r\n        location: 'Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©',\r\n        city: 'Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©',\r\n        contact_phone: '01000000000',\r\n        opening_time: '09:00:00',\r\n        closing_time: '22:00:00',\r\n        is_active: true\r\n      },\r\n      fromCache: true\r\n    };\r\n  } catch (error) {\r\n    console.error(`âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ ÙØ±Ø¹ ${branchId}:`, error.message);\r\n    return {\r\n      success: true,\r\n      data: {\r\n        id: branchId,\r\n        name: `ÙØ±Ø¹ ${branchId}`,\r\n        location: 'Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©',\r\n        city: 'Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©',\r\n        contact_phone: '01000000000',\r\n        opening_time: '09:00:00',\r\n        closing_time: '22:00:00',\r\n        is_active: true\r\n      },\r\n      fromCache: true\r\n    };\r\n  }\r\n};\r\n\r\napi.createBranch = async (branchData) => {\r\n  try {\r\n    return await api.post('/branches', branchData);\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ±Ø¹:', error);\r\n    return { success: false, message: error.message || 'ØªØ¹Ø°Ø± Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ±Ø¹' };\r\n  }\r\n};\r\n\r\napi.updateBranch = async (id, branchData) => {\r\n  try {\r\n    return await api.put(`/branches/${id}`, branchData);\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙØ±Ø¹:', error);\r\n    return { success: false, message: error.message || 'ØªØ¹Ø°Ø± ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙØ±Ø¹' };\r\n  }\r\n};\r\n\r\napi.deleteBranch = async (id, permanent = false) => {\r\n  try {\r\n    return await api.delete(`/branches/${id}?permanent=${permanent}`);\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„ÙØ±Ø¹:', error);\r\n    return { success: false, message: error.message || 'ØªØ¹Ø°Ø± Ø­Ø°Ù Ø§Ù„ÙØ±Ø¹' };\r\n  }\r\n};\r\n\r\napi.getBranchGames = async (branchId) => {\r\n  try {\r\n    const response = await api.get(`/branches/${branchId}/games`);\r\n    return {\r\n      success: true,\r\n      data: response.data || [],\r\n      stats: response.stats || {}\r\n    };\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„ÙØ±Ø¹:', error);\r\n    return { success: false, data: [] };\r\n  }\r\n};\r\n\r\n// GAMES ENDPOINTS\r\napi.getGames = async (params = {}) => {\r\n  try {\r\n    const requestParams = { ...params };\r\n    delete requestParams.status;\r\n    \r\n    const response = await api.get('/games', { params: requestParams, timeout: 15000 });\r\n    \r\n    if (response.success) {\r\n      return {\r\n        success: true,\r\n        data: response.data || [],\r\n        stats: response.stats || {},\r\n        message: response.message || 'ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø¨Ù†Ø¬Ø§Ø­'\r\n      };\r\n    }\r\n    \r\n    return { success: false, data: [] };\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ getGames:', error);\r\n    return { success: false, data: [] };\r\n  }\r\n};\r\n\r\napi.getAvailableGames = async (params = {}) => {\r\n  try {\r\n    const response = await api.get('/games/available', { params });\r\n    return {\r\n      success: true,\r\n      data: response.data || [],\r\n      count: response.count || 0\r\n    };\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ù…ØªØ§Ø­Ø©:', error);\r\n    return { success: false, data: [] };\r\n  }\r\n};\r\n\r\napi.getGameById = async (id) => {\r\n  try {\r\n    return await api.get(`/games/${id}`);\r\n  } catch (error) {\r\n    console.error(`âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ù„Ø¹Ø¨Ø© ${id}:`, error);\r\n    return { success: false, message: 'ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù„Ø¹Ø¨Ø©' };\r\n  }\r\n};\r\n\r\napi.createGame = async (gameData) => {\r\n  try {\r\n    return await api.post('/games', gameData);\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©:', error);\r\n    return { success: false, message: error.message || 'ØªØ¹Ø°Ø± Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©' };\r\n  }\r\n};\r\n\r\napi.updateGame = async (id, gameData) => {\r\n  try {\r\n    return await api.put(`/games/${id}`, gameData);\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù„Ø¹Ø¨Ø©:', error);\r\n    return { success: false, message: error.message || 'ØªØ¹Ø°Ø± ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù„Ø¹Ø¨Ø©' };\r\n  }\r\n};\r\n\r\napi.deleteGame = async (id, permanent = false) => {\r\n  try {\r\n    return await api.delete(`/games/${id}?permanent=${permanent}`);\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù„Ø¹Ø¨Ø©:', error);\r\n    return { success: false, message: error.message || 'ØªØ¹Ø°Ø± Ø­Ø°Ù Ø§Ù„Ù„Ø¹Ø¨Ø©' };\r\n  }\r\n};\r\n\r\n// SHIFTS ENDPOINTS\r\napi.getCurrentShift = async () => {\r\n  try {\r\n    const response = await api.get('/shifts/current');\r\n    \r\n    if (response.success && response.data) {\r\n      return {\r\n        success: true,\r\n        data: response.data,\r\n        exists: true,\r\n        message: 'ØªÙ… Ø¬Ù„Ø¨ Ø§Ù„Ø´ÙŠÙØª Ø§Ù„Ù†Ø´Ø·'\r\n      };\r\n    }\r\n    \r\n    return {\r\n      success: true,\r\n      data: null,\r\n      exists: false,\r\n      message: 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø´ÙŠÙØª Ù†Ø´Ø·'\r\n    };\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø´ÙŠÙØª Ø§Ù„Ø­Ø§Ù„ÙŠ:', error.message);\r\n    return { success: true, data: null, exists: false };\r\n  }\r\n};\r\n\r\napi.startShift = async (openingCash = 0) => {\r\n  try {\r\n    console.log('ğŸ”„ Ø¨Ø¯Ø¡ Ø´ÙŠÙØª Ø¬Ø¯ÙŠØ¯...');\r\n    \r\n    // Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ù…ØªØ¹Ø¯Ø¯Ø©\r\n    const endpoints = [\r\n      { method: 'post', url: '/shifts/start', data: { opening_cash: openingCash } },\r\n      { method: 'post', url: '/shifts/start-simple', data: {} },\r\n      { method: 'post', url: '/shifts/start-clean', data: {} }\r\n    ];\r\n    \r\n    for (const endpoint of endpoints) {\r\n      try {\r\n        const response = await api[endpoint.method](endpoint.url, endpoint.data);\r\n        if (response && response.success) {\r\n          console.log(`âœ… Ù†Ø¬Ø­ Ø¨Ø¯Ø¡ Ø§Ù„Ø´ÙŠÙØª Ø¹Ø¨Ø± ${endpoint.url}`);\r\n          \r\n          if (response.data) {\r\n            localStorage.setItem('current_shift', JSON.stringify(response.data));\r\n          }\r\n          \r\n          return response;\r\n        }\r\n      } catch (error) {\r\n        console.warn(`âš ï¸ ÙØ´Ù„ ${endpoint.url}:`, error.message);\r\n      }\r\n    }\r\n    \r\n    return {\r\n      success: false,\r\n      message: 'ÙØ´Ù„ ÙÙŠ Ø¨Ø¯Ø¡ Ø§Ù„Ø´ÙŠÙØª. ØªØ£ÙƒØ¯ Ù…Ù† ØªØ´ØºÙŠÙ„ Ø§Ù„Ø®Ø§Ø¯Ù…'\r\n    };\r\n  } catch (error) {\r\n    console.error('ğŸ”¥ Ø®Ø·Ø£ ÙÙŠ startShift:', error);\r\n    return { success: false, message: 'Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹' };\r\n  }\r\n};\r\n\r\napi.endShift = async (shiftId, closingData = {}) => {\r\n  try {\r\n    console.log(`ğŸ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø´ÙŠÙØª ${shiftId}...`);\r\n    \r\n    const response = await api.put(`/shifts/${shiftId}/end`, {\r\n      closing_cash: closingData.closing_cash,\r\n      notes: closingData.notes || 'ØªÙ… Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø´ÙŠÙØª'\r\n    });\r\n    \r\n    if (response.success) {\r\n      localStorage.removeItem('current_shift');\r\n    }\r\n    \r\n    return response;\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø´ÙŠÙØª:', error);\r\n    \r\n    try {\r\n      const altResponse = await api.post(`/shifts/${shiftId}/end-quick`, {\r\n        notes: closingData.notes || 'Ø¥Ù†Ù‡Ø§Ø¡ Ø³Ø±ÙŠØ¹'\r\n      });\r\n      \r\n      if (altResponse.success) {\r\n        localStorage.removeItem('current_shift');\r\n      }\r\n      \r\n      return altResponse;\r\n    } catch (altError) {\r\n      return { success: false, message: error.message || 'ØªØ¹Ø°Ø± Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø´ÙŠÙØª' };\r\n    }\r\n  }\r\n};\r\n\r\napi.getShiftDetails = async (shiftId) => {\r\n  try {\r\n    const response = await api.get(`/shifts/${shiftId}/details`);\r\n    return {\r\n      success: true,\r\n      data: response.data || {},\r\n      stats: response.stats || {}\r\n    };\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø´ÙŠÙØª:', error);\r\n    return { success: false, data: null };\r\n  }\r\n};\r\n\r\napi.getAllActiveShifts = async () => {\r\n  try {\r\n    const response = await api.get('/shifts/active-all');\r\n    return {\r\n      success: true,\r\n      data: response.data || [],\r\n      count: response.count || 0\r\n    };\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø´ÙŠÙØªØ§Øª Ø§Ù„Ù†Ø´Ø·Ø©:', error);\r\n    return { success: false, data: [] };\r\n  }\r\n};\r\n\r\napi.getShiftStats = async (shiftId) => {\r\n  try {\r\n    const response = await api.get(`/shifts/${shiftId}/stats`);\r\n    return {\r\n      success: true,\r\n      data: response.data || {}\r\n    };\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø´ÙŠÙØª:', error);\r\n    return { success: false, data: null };\r\n  }\r\n};\r\n\r\napi.getShifts = async (params = {}) => {\r\n  try {\r\n    const response = await api.get('/shifts', { params });\r\n    return {\r\n      success: true,\r\n      data: response.data || [],\r\n      count: response.count || 0\r\n    };\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø´ÙŠÙØªØ§Øª:', error);\r\n    return { success: false, data: [] };\r\n  }\r\n};\r\n\r\n// DASHBOARD & STATS\r\napi.getSimpleStats = async () => {\r\n  try {\r\n    const response = await api.get('/dashboard/stats/simple');\r\n    return response;\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…Ø¨Ø³Ø·Ø©:', error);\r\n    return {\r\n      success: false,\r\n      data: {\r\n        availableGames: 0,\r\n        totalGames: 0,\r\n        todayRevenue: 0,\r\n        todayRentals: 0,\r\n        activeRentals: 0\r\n      }\r\n    };\r\n  }\r\n};\r\n\r\napi.getDashboardStats = async () => {\r\n  try {\r\n    const response = await api.get('/dashboard/stats');\r\n    return response;\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…:', error);\r\n    return { success: false, data: {} };\r\n  }\r\n};\r\n\r\napi.getDashboardAllStats = async () => {\r\n  try {\r\n    const response = await api.get('/dashboard/all-stats');\r\n    return response;\r\n  } catch (error) {\r\n    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª:', error);\r\n    return { success: false, data: {} };\r\n  }\r\n};\r\n\r\n// HEALTH & TEST\r\napi.healthCheck = async () => {\r\n  try {\r\n    return await api.get('/health');\r\n  } catch (error) {\r\n    return { success: false, message: 'ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…' };\r\n  }\r\n};\r\n\r\napi.testConnection = async () => {\r\n  try {\r\n    const response = await api.get('/health');\r\n    return {\r\n      success: true,\r\n      message: 'âœ… Ø§ØªØµØ§Ù„ API ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­',\r\n      data: response\r\n    };\r\n  } catch (error) {\r\n    return {\r\n      success: false,\r\n      message: 'âŒ ÙØ´Ù„ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„: ' + (error.message || 'ØªØ¹Ø°Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…')\r\n    };\r\n  }\r\n};\r\n\r\n// ==================== Ø§Ù„ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø£ÙˆÙ„ÙŠØ© ====================\r\nconst savedToken = localStorage.getItem('token');\r\nif (savedToken) {\r\n  api.setToken(savedToken);\r\n}\r\n\r\nexport default api;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}