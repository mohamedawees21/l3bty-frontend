{"ast":null,"code":"// frontend/src/services/authService.js\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\nclass AuthService {\n  constructor() {\n    // تسجيل الدخول\n    this.login = async (email, password) => {\n      return this.makeRequest('/auth/login', 'POST', {\n        email,\n        password\n      });\n    };\n    // تسجيل الخروج\n    this.logout = async () => {\n      await this.makeRequest('/auth/logout', 'POST');\n      localStorage.removeItem('token');\n      localStorage.removeItem('user');\n      window.location.href = '/login';\n    };\n    // الحصول على بيانات المستخدم الحالي\n    this.getCurrentUser = () => {\n      const userStr = localStorage.getItem('user');\n      return userStr ? JSON.parse(userStr) : null;\n    };\n    this.getToken = () => {\n      return localStorage.getItem('token');\n    };\n    this.isAuthenticated = () => {\n      return !!this.getToken();\n    };\n    // === إدارة المستخدمين ===\n    this.getUsers = async () => {\n      return this.makeRequest('/users');\n    };\n    this.createUser = async userData => {\n      return this.makeRequest('/users', 'POST', userData);\n    };\n    this.updateUser = async (id, userData) => {\n      return this.makeRequest(`/users/${id}`, 'PUT', userData);\n    };\n    this.deleteUser = async id => {\n      return this.makeRequest(`/users/${id}`, 'DELETE');\n    };\n    // === إدارة الفروع ===\n    this.getBranches = async () => {\n      return this.makeRequest('/branches');\n    };\n    this.createBranch = async branchData => {\n      return this.makeRequest('/branches', 'POST', branchData);\n    };\n    this.updateBranch = async (id, branchData) => {\n      return this.makeRequest(`/branches/${id}`, 'PUT', branchData);\n    };\n    this.deleteBranch = async id => {\n      return this.makeRequest(`/branches/${id}`, 'DELETE');\n    };\n    // === إدارة الألعاب ===\n    this.getGames = async () => {\n      return this.makeRequest('/games');\n    };\n    this.getAvailableGames = async () => {\n      return this.makeRequest('/games/available');\n    };\n    this.createGame = async gameData => {\n      return this.makeRequest('/games', 'POST', gameData);\n    };\n    this.updateGame = async (id, gameData) => {\n      return this.makeRequest(`/games/${id}`, 'PUT', gameData);\n    };\n    this.deleteGame = async id => {\n      return this.makeRequest(`/games/${id}`, 'DELETE');\n    };\n    // === التأجيرات ===\n    this.getActiveRentals = async () => {\n      return this.makeRequest('/rentals/active');\n    };\n    this.getRentalsHistory = async (params = {}) => {\n      const query = new URLSearchParams(params).toString();\n      return this.makeRequest(`/rentals/history${query ? '?' + query : ''}`);\n    };\n    this.startRental = async rentalData => {\n      return this.makeRequest('/rentals/start', 'POST', rentalData);\n    };\n    this.cancelRental = async (id, reason) => {\n      return this.makeRequest(`/rentals/${id}/cancel`, 'POST', {\n        cancel_reason: reason\n      });\n    };\n    this.completeRental = async id => {\n      return this.makeRequest(`/rentals/${id}/complete`, 'POST');\n    };\n    this.extendRental = async id => {\n      return this.makeRequest(`/rentals/${id}/extend`, 'POST');\n    };\n    this.baseURL = API_URL;\n  }\n\n  // دالة مساعدة للطلبات\n  async makeRequest(endpoint, method = 'GET', body = null) {\n    try {\n      const token = localStorage.getItem('token');\n      const headers = {\n        'Content-Type': 'application/json'\n      };\n      if (token) {\n        headers['Authorization'] = `Bearer ${token}`;\n      }\n      const options = {\n        method,\n        headers,\n        credentials: 'include'\n      };\n      if (body) {\n        options.body = JSON.stringify(body);\n      }\n      const response = await fetch(`${this.baseURL}${endpoint}`, options);\n      return await response.json();\n    } catch (error) {\n      console.error('API Request error:', error);\n      return {\n        success: false,\n        error: 'تعذر الاتصال بالخادم. تأكد من: 1) تشغيل Backend 2) عدم وجود أخطاء CORS'\n      };\n    }\n  }\n}\nconst authService = new AuthService();\nexport default authService;","map":{"version":3,"names":["API_URL","process","env","REACT_APP_API_URL","AuthService","constructor","login","email","password","makeRequest","logout","localStorage","removeItem","window","location","href","getCurrentUser","userStr","getItem","JSON","parse","getToken","isAuthenticated","getUsers","createUser","userData","updateUser","id","deleteUser","getBranches","createBranch","branchData","updateBranch","deleteBranch","getGames","getAvailableGames","createGame","gameData","updateGame","deleteGame","getActiveRentals","getRentalsHistory","params","query","URLSearchParams","toString","startRental","rentalData","cancelRental","reason","cancel_reason","completeRental","extendRental","baseURL","endpoint","method","body","token","headers","options","credentials","stringify","response","fetch","json","error","console","success","authService"],"sources":["C:/Users/HP/OneDrive/project/l3bty-rental-system/frontend/src/services/authService.js"],"sourcesContent":["// frontend/src/services/authService.js\r\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000/api';\r\n\r\nclass AuthService {\r\n  constructor() {\r\n    this.baseURL = API_URL;\r\n  }\r\n\r\n  // دالة مساعدة للطلبات\r\n  async makeRequest(endpoint, method = 'GET', body = null) {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const headers = {\r\n        'Content-Type': 'application/json'\r\n      };\r\n      \r\n      if (token) {\r\n        headers['Authorization'] = `Bearer ${token}`;\r\n      }\r\n      \r\n      const options = {\r\n        method,\r\n        headers,\r\n        credentials: 'include'\r\n      };\r\n      \r\n      if (body) {\r\n        options.body = JSON.stringify(body);\r\n      }\r\n      \r\n      const response = await fetch(`${this.baseURL}${endpoint}`, options);\r\n      return await response.json();\r\n      \r\n    } catch (error) {\r\n      console.error('API Request error:', error);\r\n      return { \r\n        success: false, \r\n        error: 'تعذر الاتصال بالخادم. تأكد من: 1) تشغيل Backend 2) عدم وجود أخطاء CORS' \r\n      };\r\n    }\r\n  }\r\n\r\n  // تسجيل الدخول\r\n  login = async (email, password) => {\r\n    return this.makeRequest('/auth/login', 'POST', { email, password });\r\n  };\r\n\r\n  // تسجيل الخروج\r\n  logout = async () => {\r\n    await this.makeRequest('/auth/logout', 'POST');\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('user');\r\n    window.location.href = '/login';\r\n  };\r\n\r\n  // الحصول على بيانات المستخدم الحالي\r\n  getCurrentUser = () => {\r\n    const userStr = localStorage.getItem('user');\r\n    return userStr ? JSON.parse(userStr) : null;\r\n  };\r\n\r\n  getToken = () => {\r\n    return localStorage.getItem('token');\r\n  };\r\n\r\n  isAuthenticated = () => {\r\n    return !!this.getToken();\r\n  };\r\n\r\n  // === إدارة المستخدمين ===\r\n  getUsers = async () => {\r\n    return this.makeRequest('/users');\r\n  };\r\n\r\n  createUser = async (userData) => {\r\n    return this.makeRequest('/users', 'POST', userData);\r\n  };\r\n\r\n  updateUser = async (id, userData) => {\r\n    return this.makeRequest(`/users/${id}`, 'PUT', userData);\r\n  };\r\n\r\n  deleteUser = async (id) => {\r\n    return this.makeRequest(`/users/${id}`, 'DELETE');\r\n  };\r\n\r\n  // === إدارة الفروع ===\r\n  getBranches = async () => {\r\n    return this.makeRequest('/branches');\r\n  };\r\n\r\n  createBranch = async (branchData) => {\r\n    return this.makeRequest('/branches', 'POST', branchData);\r\n  };\r\n\r\n  updateBranch = async (id, branchData) => {\r\n    return this.makeRequest(`/branches/${id}`, 'PUT', branchData);\r\n  };\r\n\r\n  deleteBranch = async (id) => {\r\n    return this.makeRequest(`/branches/${id}`, 'DELETE');\r\n  };\r\n\r\n  // === إدارة الألعاب ===\r\n  getGames = async () => {\r\n    return this.makeRequest('/games');\r\n  };\r\n\r\n  getAvailableGames = async () => {\r\n    return this.makeRequest('/games/available');\r\n  };\r\n\r\n  createGame = async (gameData) => {\r\n    return this.makeRequest('/games', 'POST', gameData);\r\n  };\r\n\r\n  updateGame = async (id, gameData) => {\r\n    return this.makeRequest(`/games/${id}`, 'PUT', gameData);\r\n  };\r\n\r\n  deleteGame = async (id) => {\r\n    return this.makeRequest(`/games/${id}`, 'DELETE');\r\n  };\r\n\r\n  // === التأجيرات ===\r\n  getActiveRentals = async () => {\r\n    return this.makeRequest('/rentals/active');\r\n  };\r\n\r\n  getRentalsHistory = async (params = {}) => {\r\n    const query = new URLSearchParams(params).toString();\r\n    return this.makeRequest(`/rentals/history${query ? '?' + query : ''}`);\r\n  };\r\n\r\n  startRental = async (rentalData) => {\r\n    return this.makeRequest('/rentals/start', 'POST', rentalData);\r\n  };\r\n\r\n  cancelRental = async (id, reason) => {\r\n    return this.makeRequest(`/rentals/${id}/cancel`, 'POST', { cancel_reason: reason });\r\n  };\r\n\r\n  completeRental = async (id) => {\r\n    return this.makeRequest(`/rentals/${id}/complete`, 'POST');\r\n  };\r\n\r\n  extendRental = async (id) => {\r\n    return this.makeRequest(`/rentals/${id}/extend`, 'POST');\r\n  };\r\n}\r\n\r\nconst authService = new AuthService();\r\nexport default authService;"],"mappings":"AAAA;AACA,MAAMA,OAAO,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAI,2BAA2B;AAE5E,MAAMC,WAAW,CAAC;EAChBC,WAAWA,CAAA,EAAG;IAsCd;IAAA,KACAC,KAAK,GAAG,OAAOC,KAAK,EAAEC,QAAQ,KAAK;MACjC,OAAO,IAAI,CAACC,WAAW,CAAC,aAAa,EAAE,MAAM,EAAE;QAAEF,KAAK;QAAEC;MAAS,CAAC,CAAC;IACrE,CAAC;IAED;IAAA,KACAE,MAAM,GAAG,YAAY;MACnB,MAAM,IAAI,CAACD,WAAW,CAAC,cAAc,EAAE,MAAM,CAAC;MAC9CE,YAAY,CAACC,UAAU,CAAC,OAAO,CAAC;MAChCD,YAAY,CAACC,UAAU,CAAC,MAAM,CAAC;MAC/BC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,QAAQ;IACjC,CAAC;IAED;IAAA,KACAC,cAAc,GAAG,MAAM;MACrB,MAAMC,OAAO,GAAGN,YAAY,CAACO,OAAO,CAAC,MAAM,CAAC;MAC5C,OAAOD,OAAO,GAAGE,IAAI,CAACC,KAAK,CAACH,OAAO,CAAC,GAAG,IAAI;IAC7C,CAAC;IAAA,KAEDI,QAAQ,GAAG,MAAM;MACf,OAAOV,YAAY,CAACO,OAAO,CAAC,OAAO,CAAC;IACtC,CAAC;IAAA,KAEDI,eAAe,GAAG,MAAM;MACtB,OAAO,CAAC,CAAC,IAAI,CAACD,QAAQ,CAAC,CAAC;IAC1B,CAAC;IAED;IAAA,KACAE,QAAQ,GAAG,YAAY;MACrB,OAAO,IAAI,CAACd,WAAW,CAAC,QAAQ,CAAC;IACnC,CAAC;IAAA,KAEDe,UAAU,GAAG,MAAOC,QAAQ,IAAK;MAC/B,OAAO,IAAI,CAAChB,WAAW,CAAC,QAAQ,EAAE,MAAM,EAAEgB,QAAQ,CAAC;IACrD,CAAC;IAAA,KAEDC,UAAU,GAAG,OAAOC,EAAE,EAAEF,QAAQ,KAAK;MACnC,OAAO,IAAI,CAAChB,WAAW,CAAC,UAAUkB,EAAE,EAAE,EAAE,KAAK,EAAEF,QAAQ,CAAC;IAC1D,CAAC;IAAA,KAEDG,UAAU,GAAG,MAAOD,EAAE,IAAK;MACzB,OAAO,IAAI,CAAClB,WAAW,CAAC,UAAUkB,EAAE,EAAE,EAAE,QAAQ,CAAC;IACnD,CAAC;IAED;IAAA,KACAE,WAAW,GAAG,YAAY;MACxB,OAAO,IAAI,CAACpB,WAAW,CAAC,WAAW,CAAC;IACtC,CAAC;IAAA,KAEDqB,YAAY,GAAG,MAAOC,UAAU,IAAK;MACnC,OAAO,IAAI,CAACtB,WAAW,CAAC,WAAW,EAAE,MAAM,EAAEsB,UAAU,CAAC;IAC1D,CAAC;IAAA,KAEDC,YAAY,GAAG,OAAOL,EAAE,EAAEI,UAAU,KAAK;MACvC,OAAO,IAAI,CAACtB,WAAW,CAAC,aAAakB,EAAE,EAAE,EAAE,KAAK,EAAEI,UAAU,CAAC;IAC/D,CAAC;IAAA,KAEDE,YAAY,GAAG,MAAON,EAAE,IAAK;MAC3B,OAAO,IAAI,CAAClB,WAAW,CAAC,aAAakB,EAAE,EAAE,EAAE,QAAQ,CAAC;IACtD,CAAC;IAED;IAAA,KACAO,QAAQ,GAAG,YAAY;MACrB,OAAO,IAAI,CAACzB,WAAW,CAAC,QAAQ,CAAC;IACnC,CAAC;IAAA,KAED0B,iBAAiB,GAAG,YAAY;MAC9B,OAAO,IAAI,CAAC1B,WAAW,CAAC,kBAAkB,CAAC;IAC7C,CAAC;IAAA,KAED2B,UAAU,GAAG,MAAOC,QAAQ,IAAK;MAC/B,OAAO,IAAI,CAAC5B,WAAW,CAAC,QAAQ,EAAE,MAAM,EAAE4B,QAAQ,CAAC;IACrD,CAAC;IAAA,KAEDC,UAAU,GAAG,OAAOX,EAAE,EAAEU,QAAQ,KAAK;MACnC,OAAO,IAAI,CAAC5B,WAAW,CAAC,UAAUkB,EAAE,EAAE,EAAE,KAAK,EAAEU,QAAQ,CAAC;IAC1D,CAAC;IAAA,KAEDE,UAAU,GAAG,MAAOZ,EAAE,IAAK;MACzB,OAAO,IAAI,CAAClB,WAAW,CAAC,UAAUkB,EAAE,EAAE,EAAE,QAAQ,CAAC;IACnD,CAAC;IAED;IAAA,KACAa,gBAAgB,GAAG,YAAY;MAC7B,OAAO,IAAI,CAAC/B,WAAW,CAAC,iBAAiB,CAAC;IAC5C,CAAC;IAAA,KAEDgC,iBAAiB,GAAG,OAAOC,MAAM,GAAG,CAAC,CAAC,KAAK;MACzC,MAAMC,KAAK,GAAG,IAAIC,eAAe,CAACF,MAAM,CAAC,CAACG,QAAQ,CAAC,CAAC;MACpD,OAAO,IAAI,CAACpC,WAAW,CAAC,mBAAmBkC,KAAK,GAAG,GAAG,GAAGA,KAAK,GAAG,EAAE,EAAE,CAAC;IACxE,CAAC;IAAA,KAEDG,WAAW,GAAG,MAAOC,UAAU,IAAK;MAClC,OAAO,IAAI,CAACtC,WAAW,CAAC,gBAAgB,EAAE,MAAM,EAAEsC,UAAU,CAAC;IAC/D,CAAC;IAAA,KAEDC,YAAY,GAAG,OAAOrB,EAAE,EAAEsB,MAAM,KAAK;MACnC,OAAO,IAAI,CAACxC,WAAW,CAAC,YAAYkB,EAAE,SAAS,EAAE,MAAM,EAAE;QAAEuB,aAAa,EAAED;MAAO,CAAC,CAAC;IACrF,CAAC;IAAA,KAEDE,cAAc,GAAG,MAAOxB,EAAE,IAAK;MAC7B,OAAO,IAAI,CAAClB,WAAW,CAAC,YAAYkB,EAAE,WAAW,EAAE,MAAM,CAAC;IAC5D,CAAC;IAAA,KAEDyB,YAAY,GAAG,MAAOzB,EAAE,IAAK;MAC3B,OAAO,IAAI,CAAClB,WAAW,CAAC,YAAYkB,EAAE,SAAS,EAAE,MAAM,CAAC;IAC1D,CAAC;IA/IC,IAAI,CAAC0B,OAAO,GAAGrD,OAAO;EACxB;;EAEA;EACA,MAAMS,WAAWA,CAAC6C,QAAQ,EAAEC,MAAM,GAAG,KAAK,EAAEC,IAAI,GAAG,IAAI,EAAE;IACvD,IAAI;MACF,MAAMC,KAAK,GAAG9C,YAAY,CAACO,OAAO,CAAC,OAAO,CAAC;MAC3C,MAAMwC,OAAO,GAAG;QACd,cAAc,EAAE;MAClB,CAAC;MAED,IAAID,KAAK,EAAE;QACTC,OAAO,CAAC,eAAe,CAAC,GAAG,UAAUD,KAAK,EAAE;MAC9C;MAEA,MAAME,OAAO,GAAG;QACdJ,MAAM;QACNG,OAAO;QACPE,WAAW,EAAE;MACf,CAAC;MAED,IAAIJ,IAAI,EAAE;QACRG,OAAO,CAACH,IAAI,GAAGrC,IAAI,CAAC0C,SAAS,CAACL,IAAI,CAAC;MACrC;MAEA,MAAMM,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAG,IAAI,CAACV,OAAO,GAAGC,QAAQ,EAAE,EAAEK,OAAO,CAAC;MACnE,OAAO,MAAMG,QAAQ,CAACE,IAAI,CAAC,CAAC;IAE9B,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,oBAAoB,EAAEA,KAAK,CAAC;MAC1C,OAAO;QACLE,OAAO,EAAE,KAAK;QACdF,KAAK,EAAE;MACT,CAAC;IACH;EACF;AA6GF;AAEA,MAAMG,WAAW,GAAG,IAAIhE,WAAW,CAAC,CAAC;AACrC,eAAegE,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}